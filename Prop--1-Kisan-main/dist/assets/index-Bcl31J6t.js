(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&l(h)}).observe(document,{childList:!0,subtree:!0});function i(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(c){if(c.ep)return;c.ep=!0;const u=i(c);fetch(c.href,u)}})();function mN(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Fd={exports:{}},sl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mg;function pN(){if(Mg)return sl;Mg=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(l,c,u){var h=null;if(u!==void 0&&(h=""+u),c.key!==void 0&&(h=""+c.key),"key"in c){u={};for(var m in c)m!=="key"&&(u[m]=c[m])}else u=c;return c=u.ref,{$$typeof:s,type:l,key:h,ref:c!==void 0?c:null,props:u}}return sl.Fragment=t,sl.jsx=i,sl.jsxs=i,sl}var Ug;function gN(){return Ug||(Ug=1,Fd.exports=pN()),Fd.exports}var n=gN(),Yd={exports:{}},$e={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lg;function xN(){if(Lg)return $e;Lg=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),N=Symbol.iterator;function _(C){return C===null||typeof C!="object"?null:(C=N&&C[N]||C["@@iterator"],typeof C=="function"?C:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,O={};function L(C,J,me){this.props=C,this.context=J,this.refs=O,this.updater=me||T}L.prototype.isReactComponent={},L.prototype.setState=function(C,J){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,J,"setState")},L.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function D(){}D.prototype=L.prototype;function M(C,J,me){this.props=C,this.context=J,this.refs=O,this.updater=me||T}var ie=M.prototype=new D;ie.constructor=M,U(ie,L.prototype),ie.isPureReactComponent=!0;var ue=Array.isArray;function B(){}var H={H:null,A:null,T:null,S:null},pe=Object.prototype.hasOwnProperty;function he(C,J,me){var ve=me.ref;return{$$typeof:s,type:C,key:J,ref:ve!==void 0?ve:null,props:me}}function be(C,J){return he(C.type,J,C.props)}function Le(C){return typeof C=="object"&&C!==null&&C.$$typeof===s}function st(C){var J={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(me){return J[me]})}var gt=/\/+/g;function re(C,J){return typeof C=="object"&&C!==null&&C.key!=null?st(""+C.key):J.toString(36)}function Me(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(B,B):(C.status="pending",C.then(function(J){C.status==="pending"&&(C.status="fulfilled",C.value=J)},function(J){C.status==="pending"&&(C.status="rejected",C.reason=J)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function Y(C,J,me,ve,Te){var De=typeof C;(De==="undefined"||De==="boolean")&&(C=null);var He=!1;if(C===null)He=!0;else switch(De){case"bigint":case"string":case"number":He=!0;break;case"object":switch(C.$$typeof){case s:case t:He=!0;break;case x:return He=C._init,Y(He(C._payload),J,me,ve,Te)}}if(He)return Te=Te(C),He=ve===""?"."+re(C,0):ve,ue(Te)?(me="",He!=null&&(me=He.replace(gt,"$&/")+"/"),Y(Te,J,me,"",function(xt){return xt})):Te!=null&&(Le(Te)&&(Te=be(Te,me+(Te.key==null||C&&C.key===Te.key?"":(""+Te.key).replace(gt,"$&/")+"/")+He)),J.push(Te)),1;He=0;var yt=ve===""?".":ve+":";if(ue(C))for(var at=0;at<C.length;at++)ve=C[at],De=yt+re(ve,at),He+=Y(ve,J,me,De,Te);else if(at=_(C),typeof at=="function")for(C=at.call(C),at=0;!(ve=C.next()).done;)ve=ve.value,De=yt+re(ve,at++),He+=Y(ve,J,me,De,Te);else if(De==="object"){if(typeof C.then=="function")return Y(Me(C),J,me,ve,Te);throw J=String(C),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return He}function ae(C,J,me){if(C==null)return C;var ve=[],Te=0;return Y(C,ve,"","",function(De){return J.call(me,De,Te++)}),ve}function ce(C){if(C._status===-1){var J=C._result;J=J(),J.then(function(me){(C._status===0||C._status===-1)&&(C._status=1,C._result=me)},function(me){(C._status===0||C._status===-1)&&(C._status=2,C._result=me)}),C._status===-1&&(C._status=0,C._result=J)}if(C._status===1)return C._result.default;throw C._result}var Oe=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)},xe={map:ae,forEach:function(C,J,me){ae(C,function(){J.apply(this,arguments)},me)},count:function(C){var J=0;return ae(C,function(){J++}),J},toArray:function(C){return ae(C,function(J){return J})||[]},only:function(C){if(!Le(C))throw Error("React.Children.only expected to receive a single React element child.");return C}};return $e.Activity=w,$e.Children=xe,$e.Component=L,$e.Fragment=i,$e.Profiler=c,$e.PureComponent=M,$e.StrictMode=l,$e.Suspense=p,$e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,$e.__COMPILER_RUNTIME={__proto__:null,c:function(C){return H.H.useMemoCache(C)}},$e.cache=function(C){return function(){return C.apply(null,arguments)}},$e.cacheSignal=function(){return null},$e.cloneElement=function(C,J,me){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var ve=U({},C.props),Te=C.key;if(J!=null)for(De in J.key!==void 0&&(Te=""+J.key),J)!pe.call(J,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&J.ref===void 0||(ve[De]=J[De]);var De=arguments.length-2;if(De===1)ve.children=me;else if(1<De){for(var He=Array(De),yt=0;yt<De;yt++)He[yt]=arguments[yt+2];ve.children=He}return he(C.type,Te,ve)},$e.createContext=function(C){return C={$$typeof:h,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:u,_context:C},C},$e.createElement=function(C,J,me){var ve,Te={},De=null;if(J!=null)for(ve in J.key!==void 0&&(De=""+J.key),J)pe.call(J,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(Te[ve]=J[ve]);var He=arguments.length-2;if(He===1)Te.children=me;else if(1<He){for(var yt=Array(He),at=0;at<He;at++)yt[at]=arguments[at+2];Te.children=yt}if(C&&C.defaultProps)for(ve in He=C.defaultProps,He)Te[ve]===void 0&&(Te[ve]=He[ve]);return he(C,De,Te)},$e.createRef=function(){return{current:null}},$e.forwardRef=function(C){return{$$typeof:m,render:C}},$e.isValidElement=Le,$e.lazy=function(C){return{$$typeof:x,_payload:{_status:-1,_result:C},_init:ce}},$e.memo=function(C,J){return{$$typeof:g,type:C,compare:J===void 0?null:J}},$e.startTransition=function(C){var J=H.T,me={};H.T=me;try{var ve=C(),Te=H.S;Te!==null&&Te(me,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(B,Oe)}catch(De){Oe(De)}finally{J!==null&&me.types!==null&&(J.types=me.types),H.T=J}},$e.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},$e.use=function(C){return H.H.use(C)},$e.useActionState=function(C,J,me){return H.H.useActionState(C,J,me)},$e.useCallback=function(C,J){return H.H.useCallback(C,J)},$e.useContext=function(C){return H.H.useContext(C)},$e.useDebugValue=function(){},$e.useDeferredValue=function(C,J){return H.H.useDeferredValue(C,J)},$e.useEffect=function(C,J){return H.H.useEffect(C,J)},$e.useEffectEvent=function(C){return H.H.useEffectEvent(C)},$e.useId=function(){return H.H.useId()},$e.useImperativeHandle=function(C,J,me){return H.H.useImperativeHandle(C,J,me)},$e.useInsertionEffect=function(C,J){return H.H.useInsertionEffect(C,J)},$e.useLayoutEffect=function(C,J){return H.H.useLayoutEffect(C,J)},$e.useMemo=function(C,J){return H.H.useMemo(C,J)},$e.useOptimistic=function(C,J){return H.H.useOptimistic(C,J)},$e.useReducer=function(C,J,me){return H.H.useReducer(C,J,me)},$e.useRef=function(C){return H.H.useRef(C)},$e.useState=function(C){return H.H.useState(C)},$e.useSyncExternalStore=function(C,J,me){return H.H.useSyncExternalStore(C,J,me)},$e.useTransition=function(){return H.H.useTransition()},$e.version="19.2.4",$e}var Pg;function df(){return Pg||(Pg=1,Yd.exports=xN()),Yd.exports}var q=df();const oi=mN(q);var Qd={exports:{}},al={},Xd={exports:{}},Jd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bg;function vN(){return Bg||(Bg=1,(function(s){function t(Y,ae){var ce=Y.length;Y.push(ae);e:for(;0<ce;){var Oe=ce-1>>>1,xe=Y[Oe];if(0<c(xe,ae))Y[Oe]=ae,Y[ce]=xe,ce=Oe;else break e}}function i(Y){return Y.length===0?null:Y[0]}function l(Y){if(Y.length===0)return null;var ae=Y[0],ce=Y.pop();if(ce!==ae){Y[0]=ce;e:for(var Oe=0,xe=Y.length,C=xe>>>1;Oe<C;){var J=2*(Oe+1)-1,me=Y[J],ve=J+1,Te=Y[ve];if(0>c(me,ce))ve<xe&&0>c(Te,me)?(Y[Oe]=Te,Y[ve]=ce,Oe=ve):(Y[Oe]=me,Y[J]=ce,Oe=J);else if(ve<xe&&0>c(Te,ce))Y[Oe]=Te,Y[ve]=ce,Oe=ve;else break e}}return ae}function c(Y,ae){var ce=Y.sortIndex-ae.sortIndex;return ce!==0?ce:Y.id-ae.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();s.unstable_now=function(){return h.now()-m}}var p=[],g=[],x=1,w=null,N=3,_=!1,T=!1,U=!1,O=!1,L=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function ie(Y){for(var ae=i(g);ae!==null;){if(ae.callback===null)l(g);else if(ae.startTime<=Y)l(g),ae.sortIndex=ae.expirationTime,t(p,ae);else break;ae=i(g)}}function ue(Y){if(U=!1,ie(Y),!T)if(i(p)!==null)T=!0,B||(B=!0,st());else{var ae=i(g);ae!==null&&Me(ue,ae.startTime-Y)}}var B=!1,H=-1,pe=5,he=-1;function be(){return O?!0:!(s.unstable_now()-he<pe)}function Le(){if(O=!1,B){var Y=s.unstable_now();he=Y;var ae=!0;try{e:{T=!1,U&&(U=!1,D(H),H=-1),_=!0;var ce=N;try{t:{for(ie(Y),w=i(p);w!==null&&!(w.expirationTime>Y&&be());){var Oe=w.callback;if(typeof Oe=="function"){w.callback=null,N=w.priorityLevel;var xe=Oe(w.expirationTime<=Y);if(Y=s.unstable_now(),typeof xe=="function"){w.callback=xe,ie(Y),ae=!0;break t}w===i(p)&&l(p),ie(Y)}else l(p);w=i(p)}if(w!==null)ae=!0;else{var C=i(g);C!==null&&Me(ue,C.startTime-Y),ae=!1}}break e}finally{w=null,N=ce,_=!1}ae=void 0}}finally{ae?st():B=!1}}}var st;if(typeof M=="function")st=function(){M(Le)};else if(typeof MessageChannel<"u"){var gt=new MessageChannel,re=gt.port2;gt.port1.onmessage=Le,st=function(){re.postMessage(null)}}else st=function(){L(Le,0)};function Me(Y,ae){H=L(function(){Y(s.unstable_now())},ae)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Y){Y.callback=null},s.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):pe=0<Y?Math.floor(1e3/Y):5},s.unstable_getCurrentPriorityLevel=function(){return N},s.unstable_next=function(Y){switch(N){case 1:case 2:case 3:var ae=3;break;default:ae=N}var ce=N;N=ae;try{return Y()}finally{N=ce}},s.unstable_requestPaint=function(){O=!0},s.unstable_runWithPriority=function(Y,ae){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ce=N;N=Y;try{return ae()}finally{N=ce}},s.unstable_scheduleCallback=function(Y,ae,ce){var Oe=s.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?Oe+ce:Oe):ce=Oe,Y){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=ce+xe,Y={id:x++,callback:ae,priorityLevel:Y,startTime:ce,expirationTime:xe,sortIndex:-1},ce>Oe?(Y.sortIndex=ce,t(g,Y),i(p)===null&&Y===i(g)&&(U?(D(H),H=-1):U=!0,Me(ue,ce-Oe))):(Y.sortIndex=xe,t(p,Y),T||_||(T=!0,B||(B=!0,st()))),Y},s.unstable_shouldYield=be,s.unstable_wrapCallback=function(Y){var ae=N;return function(){var ce=N;N=ae;try{return Y.apply(this,arguments)}finally{N=ce}}}})(Jd)),Jd}var zg;function bN(){return zg||(zg=1,Xd.exports=vN()),Xd.exports}var Zd={exports:{}},ps={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vg;function yN(){if(Vg)return ps;Vg=1;var s=df();function t(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)g+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var l={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},c=Symbol.for("react.portal");function u(p,g,x){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:w==null?null:""+w,children:p,containerInfo:g,implementation:x}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return ps.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,ps.createPortal=function(p,g){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return u(p,g,null,x)},ps.flushSync=function(p){var g=h.T,x=l.p;try{if(h.T=null,l.p=2,p)return p()}finally{h.T=g,l.p=x,l.d.f()}},ps.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,l.d.C(p,g))},ps.prefetchDNS=function(p){typeof p=="string"&&l.d.D(p)},ps.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var x=g.as,w=m(x,g.crossOrigin),N=typeof g.integrity=="string"?g.integrity:void 0,_=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;x==="style"?l.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:w,integrity:N,fetchPriority:_}):x==="script"&&l.d.X(p,{crossOrigin:w,integrity:N,fetchPriority:_,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},ps.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var x=m(g.as,g.crossOrigin);l.d.M(p,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&l.d.M(p)},ps.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var x=g.as,w=m(x,g.crossOrigin);l.d.L(p,x,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},ps.preloadModule=function(p,g){if(typeof p=="string")if(g){var x=m(g.as,g.crossOrigin);l.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else l.d.m(p)},ps.requestFormReset=function(p){l.d.r(p)},ps.unstable_batchedUpdates=function(p,g){return p(g)},ps.useFormState=function(p,g,x){return h.H.useFormState(p,g,x)},ps.useFormStatus=function(){return h.H.useHostTransitionStatus()},ps.version="19.2.4",ps}var qg;function wN(){if(qg)return Zd.exports;qg=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Zd.exports=yN(),Zd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ig;function jN(){if(Ig)return al;Ig=1;var s=bN(),t=df(),i=wN();function l(e){var a="https://react.dev/errors/"+e;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)a+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var a=e,r=e;if(e.alternate)for(;a.return;)a=a.return;else{e=a;do a=e,(a.flags&4098)!==0&&(r=a.return),e=a.return;while(e)}return a.tag===3?r:null}function h(e){if(e.tag===13){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function m(e){if(e.tag===31){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function p(e){if(u(e)!==e)throw Error(l(188))}function g(e){var a=e.alternate;if(!a){if(a=u(e),a===null)throw Error(l(188));return a!==e?null:e}for(var r=e,o=a;;){var d=r.return;if(d===null)break;var f=d.alternate;if(f===null){if(o=d.return,o!==null){r=o;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===r)return p(d),e;if(f===o)return p(d),a;f=f.sibling}throw Error(l(188))}if(r.return!==o.return)r=d,o=f;else{for(var v=!1,S=d.child;S;){if(S===r){v=!0,r=d,o=f;break}if(S===o){v=!0,o=d,r=f;break}S=S.sibling}if(!v){for(S=f.child;S;){if(S===r){v=!0,r=f,o=d;break}if(S===o){v=!0,o=f,r=d;break}S=S.sibling}if(!v)throw Error(l(189))}}if(r.alternate!==o)throw Error(l(190))}if(r.tag!==3)throw Error(l(188));return r.stateNode.current===r?e:a}function x(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e;for(e=e.child;e!==null;){if(a=x(e),a!==null)return a;e=e.sibling}return null}var w=Object.assign,N=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),M=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),he=Symbol.for("react.activity"),be=Symbol.for("react.memo_cache_sentinel"),Le=Symbol.iterator;function st(e){return e===null||typeof e!="object"?null:(e=Le&&e[Le]||e["@@iterator"],typeof e=="function"?e:null)}var gt=Symbol.for("react.client.reference");function re(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===gt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case U:return"Fragment";case L:return"Profiler";case O:return"StrictMode";case ue:return"Suspense";case B:return"SuspenseList";case he:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case T:return"Portal";case M:return e.displayName||"Context";case D:return(e._context.displayName||"Context")+".Consumer";case ie:var a=e.render;return e=e.displayName,e||(e=a.displayName||a.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case H:return a=e.displayName||null,a!==null?a:re(e.type)||"Memo";case pe:a=e._payload,e=e._init;try{return re(e(a))}catch{}}return null}var Me=Array.isArray,Y=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},Oe=[],xe=-1;function C(e){return{current:e}}function J(e){0>xe||(e.current=Oe[xe],Oe[xe]=null,xe--)}function me(e,a){xe++,Oe[xe]=e.current,e.current=a}var ve=C(null),Te=C(null),De=C(null),He=C(null);function yt(e,a){switch(me(De,a),me(Te,e),me(ve,null),a.nodeType){case 9:case 11:e=(e=a.documentElement)&&(e=e.namespaceURI)?ag(e):0;break;default:if(e=a.tagName,a=a.namespaceURI)a=ag(a),e=ng(a,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}J(ve),me(ve,e)}function at(){J(ve),J(Te),J(De)}function xt(e){e.memoizedState!==null&&me(He,e);var a=ve.current,r=ng(a,e.type);a!==r&&(me(Te,e),me(ve,r))}function zt(e){Te.current===e&&(J(ve),J(Te)),He.current===e&&(J(He),Zr._currentValue=ce)}var ye,nt;function ht(e){if(ye===void 0)try{throw Error()}catch(r){var a=r.stack.trim().match(/\n( *(at )?)/);ye=a&&a[1]||"",nt=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ye+e+nt}var Ct=!1;function Fe(e,a){if(!e||Ct)return"";Ct=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(a){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(Q){var $=Q}Reflect.construct(e,[],ne)}else{try{ne.call()}catch(Q){$=Q}e.call(ne.prototype)}}else{try{throw Error()}catch(Q){$=Q}(ne=e())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(Q){if(Q&&$&&typeof Q.stack=="string")return[Q.stack,$.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),v=f[0],S=f[1];if(v&&S){var A=v.split(`
`),V=S.split(`
`);for(d=o=0;o<A.length&&!A[o].includes("DetermineComponentFrameRoot");)o++;for(;d<V.length&&!V[d].includes("DetermineComponentFrameRoot");)d++;if(o===A.length||d===V.length)for(o=A.length-1,d=V.length-1;1<=o&&0<=d&&A[o]!==V[d];)d--;for(;1<=o&&0<=d;o--,d--)if(A[o]!==V[d]){if(o!==1||d!==1)do if(o--,d--,0>d||A[o]!==V[d]){var W=`
`+A[o].replace(" at new "," at ");return e.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",e.displayName)),W}while(1<=o&&0<=d);break}}}finally{Ct=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?ht(r):""}function vt(e,a){switch(e.tag){case 26:case 27:case 5:return ht(e.type);case 16:return ht("Lazy");case 13:return e.child!==a&&a!==null?ht("Suspense Fallback"):ht("Suspense");case 19:return ht("SuspenseList");case 0:case 15:return Fe(e.type,!1);case 11:return Fe(e.type.render,!1);case 1:return Fe(e.type,!0);case 31:return ht("Activity");default:return""}}function $t(e){try{var a="",r=null;do a+=vt(e,r),r=e,e=e.return;while(e);return a}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Et=Object.prototype.hasOwnProperty,ts=s.unstable_scheduleCallback,ss=s.unstable_cancelCallback,Ye=s.unstable_shouldYield,as=s.unstable_requestPaint,wt=s.unstable_now,na=s.unstable_getCurrentPriorityLevel,ze=s.unstable_ImmediatePriority,_t=s.unstable_UserBlockingPriority,jt=s.unstable_NormalPriority,bs=s.unstable_LowPriority,Vt=s.unstable_IdlePriority,Ds=s.log,fs=s.unstable_setDisableYieldValue,ms=null,Dt=null;function ns(e){if(typeof Ds=="function"&&fs(e),Dt&&typeof Dt.setStrictMode=="function")try{Dt.setStrictMode(ms,e)}catch{}}var Rt=Math.clz32?Math.clz32:ra,ia=Math.log,Rs=Math.LN2;function ra(e){return e>>>=0,e===0?32:31-(ia(e)/Rs|0)|0}var Ms=256,_s=262144,is=4194304;function Xt(e){var a=e&42;if(a!==0)return a;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function F(e,a,r){var o=e.pendingLanes;if(o===0)return 0;var d=0,f=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var S=o&134217727;return S!==0?(o=S&~f,o!==0?d=Xt(o):(v&=S,v!==0?d=Xt(v):r||(r=S&~e,r!==0&&(d=Xt(r))))):(S=o&~f,S!==0?d=Xt(S):v!==0?d=Xt(v):r||(r=o&~e,r!==0&&(d=Xt(r)))),d===0?0:a!==0&&a!==d&&(a&f)===0&&(f=d&-d,r=a&-a,f>=r||f===32&&(r&4194048)!==0)?a:d}function K(e,a){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&a)===0}function ee(e,a){switch(e){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function y(){var e=is;return is<<=1,(is&62914560)===0&&(is=4194304),e}function k(e){for(var a=[],r=0;31>r;r++)a.push(e);return a}function G(e,a){e.pendingLanes|=a,a!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function X(e,a,r,o,d,f){var v=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var S=e.entanglements,A=e.expirationTimes,V=e.hiddenUpdates;for(r=v&~r;0<r;){var W=31-Rt(r),ne=1<<W;S[W]=0,A[W]=-1;var $=V[W];if($!==null)for(V[W]=null,W=0;W<$.length;W++){var Q=$[W];Q!==null&&(Q.lane&=-536870913)}r&=~ne}o!==0&&le(e,o,0),f!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=f&~(v&~a))}function le(e,a,r){e.pendingLanes|=a,e.suspendedLanes&=~a;var o=31-Rt(a);e.entangledLanes|=a,e.entanglements[o]=e.entanglements[o]|1073741824|r&261930}function Z(e,a){var r=e.entangledLanes|=a;for(e=e.entanglements;r;){var o=31-Rt(r),d=1<<o;d&a|e[o]&a&&(e[o]|=a),r&=~d}}function ge(e,a){var r=a&-a;return r=(r&42)!==0?1:b(r),(r&(e.suspendedLanes|a))!==0?0:r}function b(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function E(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function de(){var e=ae.p;return e!==0?e:(e=window.event,e===void 0?32:kg(e.type))}function we(e,a){var r=ae.p;try{return ae.p=e,a()}finally{ae.p=r}}var Ee=Math.random().toString(36).slice(2),Re="__reactFiber$"+Ee,Ve="__reactProps$"+Ee,Qe="__reactContainer$"+Ee,Mt="__reactEvents$"+Ee,Hs="__reactListeners$"+Ee,pa="__reactHandles$"+Ee,ga="__reactResources$"+Ee,j="__reactMarker$"+Ee;function I(e){delete e[Re],delete e[Ve],delete e[Mt],delete e[Hs],delete e[pa]}function Ae(e){var a=e[Re];if(a)return a;for(var r=e.parentNode;r;){if(a=r[Qe]||r[Re]){if(r=a.alternate,a.child!==null||r!==null&&r.child!==null)for(e=dg(e);e!==null;){if(r=e[Re])return r;e=dg(e)}return a}e=r,r=e.parentNode}return null}function _e(e){if(e=e[Re]||e[Qe]){var a=e.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return e}return null}function rt(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e.stateNode;throw Error(l(33))}function We(e){var a=e[ga];return a||(a=e[ga]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Xe(e){e[j]=!0}var ys=new Set,ws={};function ka(e,a){Wa(e,a),Wa(e+"Capture",a)}function Wa(e,a){for(ws[e]=a,e=0;e<a.length;e++)ys.add(a[e])}var Ul=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ll={},Yf={};function rw(e){return Et.call(Yf,e)?!0:Et.call(Ll,e)?!1:Ul.test(e)?Yf[e]=!0:(Ll[e]=!0,!1)}function Pl(e,a,r){if(rw(a))if(r===null)e.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(a);return;case"boolean":var o=a.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(a);return}}e.setAttribute(a,""+r)}}function Bl(e,a,r){if(r===null)e.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttribute(a,""+r)}}function Aa(e,a,r,o){if(o===null)e.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(a,r,""+o)}}function Ks(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Qf(e){var a=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function lw(e,a,r){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,a);if(!e.hasOwnProperty(a)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,f=o.set;return Object.defineProperty(e,a,{configurable:!0,get:function(){return d.call(this)},set:function(v){r=""+v,f.call(this,v)}}),Object.defineProperty(e,a,{enumerable:o.enumerable}),{getValue:function(){return r},setValue:function(v){r=""+v},stopTracking:function(){e._valueTracker=null,delete e[a]}}}}function Vc(e){if(!e._valueTracker){var a=Qf(e)?"checked":"value";e._valueTracker=lw(e,a,""+e[a])}}function Xf(e){if(!e)return!1;var a=e._valueTracker;if(!a)return!0;var r=a.getValue(),o="";return e&&(o=Qf(e)?e.checked?"true":"false":e.value),e=o,e!==r?(a.setValue(e),!0):!1}function zl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ow=/[\n"\\]/g;function Gs(e){return e.replace(ow,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function qc(e,a,r,o,d,f,v,S){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),a!=null?v==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+Ks(a)):e.value!==""+Ks(a)&&(e.value=""+Ks(a)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),a!=null?Ic(e,v,Ks(a)):r!=null?Ic(e,v,Ks(r)):o!=null&&e.removeAttribute("value"),d==null&&f!=null&&(e.defaultChecked=!!f),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.name=""+Ks(S):e.removeAttribute("name")}function Jf(e,a,r,o,d,f,v,S){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),a!=null||r!=null){if(!(f!=="submit"&&f!=="reset"||a!=null)){Vc(e);return}r=r!=null?""+Ks(r):"",a=a!=null?""+Ks(a):r,S||a===e.value||(e.value=a),e.defaultValue=a}o=o??d,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=S?e.checked:!!o,e.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),Vc(e)}function Ic(e,a,r){a==="number"&&zl(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function ci(e,a,r,o){if(e=e.options,a){a={};for(var d=0;d<r.length;d++)a["$"+r[d]]=!0;for(r=0;r<e.length;r++)d=a.hasOwnProperty("$"+e[r].value),e[r].selected!==d&&(e[r].selected=d),d&&o&&(e[r].defaultSelected=!0)}else{for(r=""+Ks(r),a=null,d=0;d<e.length;d++){if(e[d].value===r){e[d].selected=!0,o&&(e[d].defaultSelected=!0);return}a!==null||e[d].disabled||(a=e[d])}a!==null&&(a.selected=!0)}}function Zf(e,a,r){if(a!=null&&(a=""+Ks(a),a!==e.value&&(e.value=a),r==null)){e.defaultValue!==a&&(e.defaultValue=a);return}e.defaultValue=r!=null?""+Ks(r):""}function Wf(e,a,r,o){if(a==null){if(o!=null){if(r!=null)throw Error(l(92));if(Me(o)){if(1<o.length)throw Error(l(93));o=o[0]}r=o}r==null&&(r=""),a=r}r=Ks(a),e.defaultValue=r,o=e.textContent,o===r&&o!==""&&o!==null&&(e.value=o),Vc(e)}function ui(e,a){if(a){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=a;return}}e.textContent=a}var cw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function em(e,a,r){var o=a.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?o?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="":o?e.setProperty(a,r):typeof r!="number"||r===0||cw.has(a)?a==="float"?e.cssFloat=r:e[a]=(""+r).trim():e[a]=r+"px"}function tm(e,a,r){if(a!=null&&typeof a!="object")throw Error(l(62));if(e=e.style,r!=null){for(var o in r)!r.hasOwnProperty(o)||a!=null&&a.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var d in a)o=a[d],a.hasOwnProperty(d)&&r[d]!==o&&em(e,d,o)}else for(var f in a)a.hasOwnProperty(f)&&em(e,f,a[f])}function $c(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uw=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),dw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Vl(e){return dw.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ca(){}var Hc=null;function Kc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var di=null,hi=null;function sm(e){var a=_e(e);if(a&&(e=a.stateNode)){var r=e[Ve]||null;e:switch(e=a.stateNode,a.type){case"input":if(qc(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),a=r.name,r.type==="radio"&&a!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Gs(""+a)+'"][type="radio"]'),a=0;a<r.length;a++){var o=r[a];if(o!==e&&o.form===e.form){var d=o[Ve]||null;if(!d)throw Error(l(90));qc(o,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(a=0;a<r.length;a++)o=r[a],o.form===e.form&&Xf(o)}break e;case"textarea":Zf(e,r.value,r.defaultValue);break e;case"select":a=r.value,a!=null&&ci(e,!!r.multiple,a,!1)}}}var Gc=!1;function am(e,a,r){if(Gc)return e(a,r);Gc=!0;try{var o=e(a);return o}finally{if(Gc=!1,(di!==null||hi!==null)&&(Ao(),di&&(a=di,e=hi,hi=di=null,sm(a),e)))for(a=0;a<e.length;a++)sm(e[a])}}function pr(e,a){var r=e.stateNode;if(r===null)return null;var o=r[Ve]||null;if(o===null)return null;r=o[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(l(231,a,typeof r));return r}var Ea=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fc=!1;if(Ea)try{var gr={};Object.defineProperty(gr,"passive",{get:function(){Fc=!0}}),window.addEventListener("test",gr,gr),window.removeEventListener("test",gr,gr)}catch{Fc=!1}var en=null,Yc=null,ql=null;function nm(){if(ql)return ql;var e,a=Yc,r=a.length,o,d="value"in en?en.value:en.textContent,f=d.length;for(e=0;e<r&&a[e]===d[e];e++);var v=r-e;for(o=1;o<=v&&a[r-o]===d[f-o];o++);return ql=d.slice(e,1<o?1-o:void 0)}function Il(e){var a=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&a===13&&(e=13)):e=a,e===10&&(e=13),32<=e||e===13?e:0}function $l(){return!0}function im(){return!1}function Ts(e){function a(r,o,d,f,v){this._reactName=r,this._targetInst=d,this.type=o,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(r=e[S],this[S]=r?r(f):f[S]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?$l:im,this.isPropagationStopped=im,this}return w(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=$l)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=$l)},persist:function(){},isPersistent:$l}),a}var Dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hl=Ts(Dn),xr=w({},Dn,{view:0,detail:0}),hw=Ts(xr),Qc,Xc,vr,Kl=w({},xr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==vr&&(vr&&e.type==="mousemove"?(Qc=e.screenX-vr.screenX,Xc=e.screenY-vr.screenY):Xc=Qc=0,vr=e),Qc)},movementY:function(e){return"movementY"in e?e.movementY:Xc}}),rm=Ts(Kl),fw=w({},Kl,{dataTransfer:0}),mw=Ts(fw),pw=w({},xr,{relatedTarget:0}),Jc=Ts(pw),gw=w({},Dn,{animationName:0,elapsedTime:0,pseudoElement:0}),xw=Ts(gw),vw=w({},Dn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bw=Ts(vw),yw=w({},Dn,{data:0}),lm=Ts(yw),ww={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sw(e){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(e):(e=Nw[e])?!!a[e]:!1}function Zc(){return Sw}var _w=w({},xr,{key:function(e){if(e.key){var a=ww[e.key]||e.key;if(a!=="Unidentified")return a}return e.type==="keypress"?(e=Il(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?jw[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zc,charCode:function(e){return e.type==="keypress"?Il(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Il(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Tw=Ts(_w),kw=w({},Kl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),om=Ts(kw),Aw=w({},xr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zc}),Cw=Ts(Aw),Ew=w({},Dn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ow=Ts(Ew),Dw=w({},Kl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rw=Ts(Dw),Mw=w({},Dn,{newState:0,oldState:0}),Uw=Ts(Mw),Lw=[9,13,27,32],Wc=Ea&&"CompositionEvent"in window,br=null;Ea&&"documentMode"in document&&(br=document.documentMode);var Pw=Ea&&"TextEvent"in window&&!br,cm=Ea&&(!Wc||br&&8<br&&11>=br),um=" ",dm=!1;function hm(e,a){switch(e){case"keyup":return Lw.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var fi=!1;function Bw(e,a){switch(e){case"compositionend":return fm(a);case"keypress":return a.which!==32?null:(dm=!0,um);case"textInput":return e=a.data,e===um&&dm?null:e;default:return null}}function zw(e,a){if(fi)return e==="compositionend"||!Wc&&hm(e,a)?(e=nm(),ql=Yc=en=null,fi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return cm&&a.locale!=="ko"?null:a.data;default:return null}}var Vw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mm(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a==="input"?!!Vw[e.type]:a==="textarea"}function pm(e,a,r,o){di?hi?hi.push(o):hi=[o]:di=o,a=Uo(a,"onChange"),0<a.length&&(r=new Hl("onChange","change",null,r,o),e.push({event:r,listeners:a}))}var yr=null,wr=null;function qw(e){J0(e,0)}function Gl(e){var a=rt(e);if(Xf(a))return e}function gm(e,a){if(e==="change")return a}var xm=!1;if(Ea){var eu;if(Ea){var tu="oninput"in document;if(!tu){var vm=document.createElement("div");vm.setAttribute("oninput","return;"),tu=typeof vm.oninput=="function"}eu=tu}else eu=!1;xm=eu&&(!document.documentMode||9<document.documentMode)}function bm(){yr&&(yr.detachEvent("onpropertychange",ym),wr=yr=null)}function ym(e){if(e.propertyName==="value"&&Gl(wr)){var a=[];pm(a,wr,e,Kc(e)),am(qw,a)}}function Iw(e,a,r){e==="focusin"?(bm(),yr=a,wr=r,yr.attachEvent("onpropertychange",ym)):e==="focusout"&&bm()}function $w(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Gl(wr)}function Hw(e,a){if(e==="click")return Gl(a)}function Kw(e,a){if(e==="input"||e==="change")return Gl(a)}function Gw(e,a){return e===a&&(e!==0||1/e===1/a)||e!==e&&a!==a}var Us=typeof Object.is=="function"?Object.is:Gw;function jr(e,a){if(Us(e,a))return!0;if(typeof e!="object"||e===null||typeof a!="object"||a===null)return!1;var r=Object.keys(e),o=Object.keys(a);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var d=r[o];if(!Et.call(a,d)||!Us(e[d],a[d]))return!1}return!0}function wm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jm(e,a){var r=wm(e);e=0;for(var o;r;){if(r.nodeType===3){if(o=e+r.textContent.length,e<=a&&o>=a)return{node:r,offset:a-e};e=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=wm(r)}}function Nm(e,a){return e&&a?e===a?!0:e&&e.nodeType===3?!1:a&&a.nodeType===3?Nm(e,a.parentNode):"contains"in e?e.contains(a):e.compareDocumentPosition?!!(e.compareDocumentPosition(a)&16):!1:!1}function Sm(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var a=zl(e.document);a instanceof e.HTMLIFrameElement;){try{var r=typeof a.contentWindow.location.href=="string"}catch{r=!1}if(r)e=a.contentWindow;else break;a=zl(e.document)}return a}function su(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a&&(a==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||a==="textarea"||e.contentEditable==="true")}var Fw=Ea&&"documentMode"in document&&11>=document.documentMode,mi=null,au=null,Nr=null,nu=!1;function _m(e,a,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;nu||mi==null||mi!==zl(o)||(o=mi,"selectionStart"in o&&su(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Nr&&jr(Nr,o)||(Nr=o,o=Uo(au,"onSelect"),0<o.length&&(a=new Hl("onSelect","select",null,a,r),e.push({event:a,listeners:o}),a.target=mi)))}function Rn(e,a){var r={};return r[e.toLowerCase()]=a.toLowerCase(),r["Webkit"+e]="webkit"+a,r["Moz"+e]="moz"+a,r}var pi={animationend:Rn("Animation","AnimationEnd"),animationiteration:Rn("Animation","AnimationIteration"),animationstart:Rn("Animation","AnimationStart"),transitionrun:Rn("Transition","TransitionRun"),transitionstart:Rn("Transition","TransitionStart"),transitioncancel:Rn("Transition","TransitionCancel"),transitionend:Rn("Transition","TransitionEnd")},iu={},Tm={};Ea&&(Tm=document.createElement("div").style,"AnimationEvent"in window||(delete pi.animationend.animation,delete pi.animationiteration.animation,delete pi.animationstart.animation),"TransitionEvent"in window||delete pi.transitionend.transition);function Mn(e){if(iu[e])return iu[e];if(!pi[e])return e;var a=pi[e],r;for(r in a)if(a.hasOwnProperty(r)&&r in Tm)return iu[e]=a[r];return e}var km=Mn("animationend"),Am=Mn("animationiteration"),Cm=Mn("animationstart"),Yw=Mn("transitionrun"),Qw=Mn("transitionstart"),Xw=Mn("transitioncancel"),Em=Mn("transitionend"),Om=new Map,ru="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ru.push("scrollEnd");function la(e,a){Om.set(e,a),ka(a,[e])}var Fl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Fs=[],gi=0,lu=0;function Yl(){for(var e=gi,a=lu=gi=0;a<e;){var r=Fs[a];Fs[a++]=null;var o=Fs[a];Fs[a++]=null;var d=Fs[a];Fs[a++]=null;var f=Fs[a];if(Fs[a++]=null,o!==null&&d!==null){var v=o.pending;v===null?d.next=d:(d.next=v.next,v.next=d),o.pending=d}f!==0&&Dm(r,d,f)}}function Ql(e,a,r,o){Fs[gi++]=e,Fs[gi++]=a,Fs[gi++]=r,Fs[gi++]=o,lu|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function ou(e,a,r,o){return Ql(e,a,r,o),Xl(e)}function Un(e,a){return Ql(e,null,null,a),Xl(e)}function Dm(e,a,r){e.lanes|=r;var o=e.alternate;o!==null&&(o.lanes|=r);for(var d=!1,f=e.return;f!==null;)f.childLanes|=r,o=f.alternate,o!==null&&(o.childLanes|=r),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(d=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,d&&a!==null&&(d=31-Rt(r),e=f.hiddenUpdates,o=e[d],o===null?e[d]=[a]:o.push(a),a.lane=r|536870912),f):null}function Xl(e){if(50<Kr)throw Kr=0,xd=null,Error(l(185));for(var a=e.return;a!==null;)e=a,a=e.return;return e.tag===3?e.stateNode:null}var xi={};function Jw(e,a,r,o){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ls(e,a,r,o){return new Jw(e,a,r,o)}function cu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Oa(e,a){var r=e.alternate;return r===null?(r=Ls(e.tag,a,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=a,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,a=e.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function Rm(e,a){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=a,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,a=r.dependencies,e.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),e}function Jl(e,a,r,o,d,f){var v=0;if(o=e,typeof e=="function")cu(e)&&(v=1);else if(typeof e=="string")v=sN(e,r,ve.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case he:return e=Ls(31,r,a,d),e.elementType=he,e.lanes=f,e;case U:return Ln(r.children,d,f,a);case O:v=8,d|=24;break;case L:return e=Ls(12,r,a,d|2),e.elementType=L,e.lanes=f,e;case ue:return e=Ls(13,r,a,d),e.elementType=ue,e.lanes=f,e;case B:return e=Ls(19,r,a,d),e.elementType=B,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case M:v=10;break e;case D:v=9;break e;case ie:v=11;break e;case H:v=14;break e;case pe:v=16,o=null;break e}v=29,r=Error(l(130,e===null?"null":typeof e,"")),o=null}return a=Ls(v,r,a,d),a.elementType=e,a.type=o,a.lanes=f,a}function Ln(e,a,r,o){return e=Ls(7,e,o,a),e.lanes=r,e}function uu(e,a,r){return e=Ls(6,e,null,a),e.lanes=r,e}function Mm(e){var a=Ls(18,null,null,0);return a.stateNode=e,a}function du(e,a,r){return a=Ls(4,e.children!==null?e.children:[],e.key,a),a.lanes=r,a.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},a}var Um=new WeakMap;function Ys(e,a){if(typeof e=="object"&&e!==null){var r=Um.get(e);return r!==void 0?r:(a={value:e,source:a,stack:$t(a)},Um.set(e,a),a)}return{value:e,source:a,stack:$t(a)}}var vi=[],bi=0,Zl=null,Sr=0,Qs=[],Xs=0,tn=null,xa=1,va="";function Da(e,a){vi[bi++]=Sr,vi[bi++]=Zl,Zl=e,Sr=a}function Lm(e,a,r){Qs[Xs++]=xa,Qs[Xs++]=va,Qs[Xs++]=tn,tn=e;var o=xa;e=va;var d=32-Rt(o)-1;o&=~(1<<d),r+=1;var f=32-Rt(a)+d;if(30<f){var v=d-d%5;f=(o&(1<<v)-1).toString(32),o>>=v,d-=v,xa=1<<32-Rt(a)+d|r<<d|o,va=f+e}else xa=1<<f|r<<d|o,va=e}function hu(e){e.return!==null&&(Da(e,1),Lm(e,1,0))}function fu(e){for(;e===Zl;)Zl=vi[--bi],vi[bi]=null,Sr=vi[--bi],vi[bi]=null;for(;e===tn;)tn=Qs[--Xs],Qs[Xs]=null,va=Qs[--Xs],Qs[Xs]=null,xa=Qs[--Xs],Qs[Xs]=null}function Pm(e,a){Qs[Xs++]=xa,Qs[Xs++]=va,Qs[Xs++]=tn,xa=a.id,va=a.overflow,tn=e}var rs=null,Tt=null,it=!1,sn=null,Js=!1,mu=Error(l(519));function an(e){var a=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _r(Ys(a,e)),mu}function Bm(e){var a=e.stateNode,r=e.type,o=e.memoizedProps;switch(a[Re]=e,a[Ve]=o,r){case"dialog":Ze("cancel",a),Ze("close",a);break;case"iframe":case"object":case"embed":Ze("load",a);break;case"video":case"audio":for(r=0;r<Fr.length;r++)Ze(Fr[r],a);break;case"source":Ze("error",a);break;case"img":case"image":case"link":Ze("error",a),Ze("load",a);break;case"details":Ze("toggle",a);break;case"input":Ze("invalid",a),Jf(a,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Ze("invalid",a);break;case"textarea":Ze("invalid",a),Wf(a,o.value,o.defaultValue,o.children)}r=o.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||a.textContent===""+r||o.suppressHydrationWarning===!0||tg(a.textContent,r)?(o.popover!=null&&(Ze("beforetoggle",a),Ze("toggle",a)),o.onScroll!=null&&Ze("scroll",a),o.onScrollEnd!=null&&Ze("scrollend",a),o.onClick!=null&&(a.onclick=Ca),a=!0):a=!1,a||an(e,!0)}function zm(e){for(rs=e.return;rs;)switch(rs.tag){case 5:case 31:case 13:Js=!1;return;case 27:case 3:Js=!0;return;default:rs=rs.return}}function yi(e){if(e!==rs)return!1;if(!it)return zm(e),it=!0,!1;var a=e.tag,r;if((r=a!==3&&a!==27)&&((r=a===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||Dd(e.type,e.memoizedProps)),r=!r),r&&Tt&&an(e),zm(e),a===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));Tt=ug(e)}else if(a===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));Tt=ug(e)}else a===27?(a=Tt,vn(e.type)?(e=Pd,Pd=null,Tt=e):Tt=a):Tt=rs?Ws(e.stateNode.nextSibling):null;return!0}function Pn(){Tt=rs=null,it=!1}function pu(){var e=sn;return e!==null&&(Es===null?Es=e:Es.push.apply(Es,e),sn=null),e}function _r(e){sn===null?sn=[e]:sn.push(e)}var gu=C(null),Bn=null,Ra=null;function nn(e,a,r){me(gu,a._currentValue),a._currentValue=r}function Ma(e){e._currentValue=gu.current,J(gu)}function xu(e,a,r){for(;e!==null;){var o=e.alternate;if((e.childLanes&a)!==a?(e.childLanes|=a,o!==null&&(o.childLanes|=a)):o!==null&&(o.childLanes&a)!==a&&(o.childLanes|=a),e===r)break;e=e.return}}function vu(e,a,r,o){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var f=d.dependencies;if(f!==null){var v=d.child;f=f.firstContext;e:for(;f!==null;){var S=f;f=d;for(var A=0;A<a.length;A++)if(S.context===a[A]){f.lanes|=r,S=f.alternate,S!==null&&(S.lanes|=r),xu(f.return,r,e),o||(v=null);break e}f=S.next}}else if(d.tag===18){if(v=d.return,v===null)throw Error(l(341));v.lanes|=r,f=v.alternate,f!==null&&(f.lanes|=r),xu(v,r,e),v=null}else v=d.child;if(v!==null)v.return=d;else for(v=d;v!==null;){if(v===e){v=null;break}if(d=v.sibling,d!==null){d.return=v.return,v=d;break}v=v.return}d=v}}function wi(e,a,r,o){e=null;for(var d=a,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var v=d.alternate;if(v===null)throw Error(l(387));if(v=v.memoizedProps,v!==null){var S=d.type;Us(d.pendingProps.value,v.value)||(e!==null?e.push(S):e=[S])}}else if(d===He.current){if(v=d.alternate,v===null)throw Error(l(387));v.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(Zr):e=[Zr])}d=d.return}e!==null&&vu(a,e,r,o),a.flags|=262144}function Wl(e){for(e=e.firstContext;e!==null;){if(!Us(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function zn(e){Bn=e,Ra=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ls(e){return Vm(Bn,e)}function eo(e,a){return Bn===null&&zn(e),Vm(e,a)}function Vm(e,a){var r=a._currentValue;if(a={context:a,memoizedValue:r,next:null},Ra===null){if(e===null)throw Error(l(308));Ra=a,e.dependencies={lanes:0,firstContext:a},e.flags|=524288}else Ra=Ra.next=a;return r}var Zw=typeof AbortController<"u"?AbortController:function(){var e=[],a=this.signal={aborted:!1,addEventListener:function(r,o){e.push(o)}};this.abort=function(){a.aborted=!0,e.forEach(function(r){return r()})}},Ww=s.unstable_scheduleCallback,ej=s.unstable_NormalPriority,Ht={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bu(){return{controller:new Zw,data:new Map,refCount:0}}function Tr(e){e.refCount--,e.refCount===0&&Ww(ej,function(){e.controller.abort()})}var kr=null,yu=0,ji=0,Ni=null;function tj(e,a){if(kr===null){var r=kr=[];yu=0,ji=Nd(),Ni={status:"pending",value:void 0,then:function(o){r.push(o)}}}return yu++,a.then(qm,qm),a}function qm(){if(--yu===0&&kr!==null){Ni!==null&&(Ni.status="fulfilled");var e=kr;kr=null,ji=0,Ni=null;for(var a=0;a<e.length;a++)(0,e[a])()}}function sj(e,a){var r=[],o={status:"pending",value:null,reason:null,then:function(d){r.push(d)}};return e.then(function(){o.status="fulfilled",o.value=a;for(var d=0;d<r.length;d++)(0,r[d])(a)},function(d){for(o.status="rejected",o.reason=d,d=0;d<r.length;d++)(0,r[d])(void 0)}),o}var Im=Y.S;Y.S=function(e,a){_0=wt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&tj(e,a),Im!==null&&Im(e,a)};var Vn=C(null);function wu(){var e=Vn.current;return e!==null?e:bt.pooledCache}function to(e,a){a===null?me(Vn,Vn.current):me(Vn,a.pool)}function $m(){var e=wu();return e===null?null:{parent:Ht._currentValue,pool:e}}var Si=Error(l(460)),ju=Error(l(474)),so=Error(l(542)),ao={then:function(){}};function Hm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Km(e,a,r){switch(r=e[r],r===void 0?e.push(a):r!==a&&(a.then(Ca,Ca),a=r),a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,Fm(e),e;default:if(typeof a.status=="string")a.then(Ca,Ca);else{if(e=bt,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=a,e.status="pending",e.then(function(o){if(a.status==="pending"){var d=a;d.status="fulfilled",d.value=o}},function(o){if(a.status==="pending"){var d=a;d.status="rejected",d.reason=o}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,Fm(e),e}throw In=a,Si}}function qn(e){try{var a=e._init;return a(e._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(In=r,Si):r}}var In=null;function Gm(){if(In===null)throw Error(l(459));var e=In;return In=null,e}function Fm(e){if(e===Si||e===so)throw Error(l(483))}var _i=null,Ar=0;function no(e){var a=Ar;return Ar+=1,_i===null&&(_i=[]),Km(_i,e,a)}function Cr(e,a){a=a.props.ref,e.ref=a!==void 0?a:null}function io(e,a){throw a.$$typeof===N?Error(l(525)):(e=Object.prototype.toString.call(a),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":e)))}function Ym(e){function a(P,R){if(e){var z=P.deletions;z===null?(P.deletions=[R],P.flags|=16):z.push(R)}}function r(P,R){if(!e)return null;for(;R!==null;)a(P,R),R=R.sibling;return null}function o(P){for(var R=new Map;P!==null;)P.key!==null?R.set(P.key,P):R.set(P.index,P),P=P.sibling;return R}function d(P,R){return P=Oa(P,R),P.index=0,P.sibling=null,P}function f(P,R,z){return P.index=z,e?(z=P.alternate,z!==null?(z=z.index,z<R?(P.flags|=67108866,R):z):(P.flags|=67108866,R)):(P.flags|=1048576,R)}function v(P){return e&&P.alternate===null&&(P.flags|=67108866),P}function S(P,R,z,te){return R===null||R.tag!==6?(R=uu(z,P.mode,te),R.return=P,R):(R=d(R,z),R.return=P,R)}function A(P,R,z,te){var Ue=z.type;return Ue===U?W(P,R,z.props.children,te,z.key):R!==null&&(R.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===pe&&qn(Ue)===R.type)?(R=d(R,z.props),Cr(R,z),R.return=P,R):(R=Jl(z.type,z.key,z.props,null,P.mode,te),Cr(R,z),R.return=P,R)}function V(P,R,z,te){return R===null||R.tag!==4||R.stateNode.containerInfo!==z.containerInfo||R.stateNode.implementation!==z.implementation?(R=du(z,P.mode,te),R.return=P,R):(R=d(R,z.children||[]),R.return=P,R)}function W(P,R,z,te,Ue){return R===null||R.tag!==7?(R=Ln(z,P.mode,te,Ue),R.return=P,R):(R=d(R,z),R.return=P,R)}function ne(P,R,z){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=uu(""+R,P.mode,z),R.return=P,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case _:return z=Jl(R.type,R.key,R.props,null,P.mode,z),Cr(z,R),z.return=P,z;case T:return R=du(R,P.mode,z),R.return=P,R;case pe:return R=qn(R),ne(P,R,z)}if(Me(R)||st(R))return R=Ln(R,P.mode,z,null),R.return=P,R;if(typeof R.then=="function")return ne(P,no(R),z);if(R.$$typeof===M)return ne(P,eo(P,R),z);io(P,R)}return null}function $(P,R,z,te){var Ue=R!==null?R.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return Ue!==null?null:S(P,R,""+z,te);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case _:return z.key===Ue?A(P,R,z,te):null;case T:return z.key===Ue?V(P,R,z,te):null;case pe:return z=qn(z),$(P,R,z,te)}if(Me(z)||st(z))return Ue!==null?null:W(P,R,z,te,null);if(typeof z.then=="function")return $(P,R,no(z),te);if(z.$$typeof===M)return $(P,R,eo(P,z),te);io(P,z)}return null}function Q(P,R,z,te,Ue){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return P=P.get(z)||null,S(R,P,""+te,Ue);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case _:return P=P.get(te.key===null?z:te.key)||null,A(R,P,te,Ue);case T:return P=P.get(te.key===null?z:te.key)||null,V(R,P,te,Ue);case pe:return te=qn(te),Q(P,R,z,te,Ue)}if(Me(te)||st(te))return P=P.get(z)||null,W(R,P,te,Ue,null);if(typeof te.then=="function")return Q(P,R,z,no(te),Ue);if(te.$$typeof===M)return Q(P,R,z,eo(R,te),Ue);io(R,te)}return null}function je(P,R,z,te){for(var Ue=null,lt=null,ke=R,Ge=R=0,tt=null;ke!==null&&Ge<z.length;Ge++){ke.index>Ge?(tt=ke,ke=null):tt=ke.sibling;var ot=$(P,ke,z[Ge],te);if(ot===null){ke===null&&(ke=tt);break}e&&ke&&ot.alternate===null&&a(P,ke),R=f(ot,R,Ge),lt===null?Ue=ot:lt.sibling=ot,lt=ot,ke=tt}if(Ge===z.length)return r(P,ke),it&&Da(P,Ge),Ue;if(ke===null){for(;Ge<z.length;Ge++)ke=ne(P,z[Ge],te),ke!==null&&(R=f(ke,R,Ge),lt===null?Ue=ke:lt.sibling=ke,lt=ke);return it&&Da(P,Ge),Ue}for(ke=o(ke);Ge<z.length;Ge++)tt=Q(ke,P,Ge,z[Ge],te),tt!==null&&(e&&tt.alternate!==null&&ke.delete(tt.key===null?Ge:tt.key),R=f(tt,R,Ge),lt===null?Ue=tt:lt.sibling=tt,lt=tt);return e&&ke.forEach(function(Nn){return a(P,Nn)}),it&&Da(P,Ge),Ue}function Pe(P,R,z,te){if(z==null)throw Error(l(151));for(var Ue=null,lt=null,ke=R,Ge=R=0,tt=null,ot=z.next();ke!==null&&!ot.done;Ge++,ot=z.next()){ke.index>Ge?(tt=ke,ke=null):tt=ke.sibling;var Nn=$(P,ke,ot.value,te);if(Nn===null){ke===null&&(ke=tt);break}e&&ke&&Nn.alternate===null&&a(P,ke),R=f(Nn,R,Ge),lt===null?Ue=Nn:lt.sibling=Nn,lt=Nn,ke=tt}if(ot.done)return r(P,ke),it&&Da(P,Ge),Ue;if(ke===null){for(;!ot.done;Ge++,ot=z.next())ot=ne(P,ot.value,te),ot!==null&&(R=f(ot,R,Ge),lt===null?Ue=ot:lt.sibling=ot,lt=ot);return it&&Da(P,Ge),Ue}for(ke=o(ke);!ot.done;Ge++,ot=z.next())ot=Q(ke,P,Ge,ot.value,te),ot!==null&&(e&&ot.alternate!==null&&ke.delete(ot.key===null?Ge:ot.key),R=f(ot,R,Ge),lt===null?Ue=ot:lt.sibling=ot,lt=ot);return e&&ke.forEach(function(fN){return a(P,fN)}),it&&Da(P,Ge),Ue}function pt(P,R,z,te){if(typeof z=="object"&&z!==null&&z.type===U&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case _:e:{for(var Ue=z.key;R!==null;){if(R.key===Ue){if(Ue=z.type,Ue===U){if(R.tag===7){r(P,R.sibling),te=d(R,z.props.children),te.return=P,P=te;break e}}else if(R.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===pe&&qn(Ue)===R.type){r(P,R.sibling),te=d(R,z.props),Cr(te,z),te.return=P,P=te;break e}r(P,R);break}else a(P,R);R=R.sibling}z.type===U?(te=Ln(z.props.children,P.mode,te,z.key),te.return=P,P=te):(te=Jl(z.type,z.key,z.props,null,P.mode,te),Cr(te,z),te.return=P,P=te)}return v(P);case T:e:{for(Ue=z.key;R!==null;){if(R.key===Ue)if(R.tag===4&&R.stateNode.containerInfo===z.containerInfo&&R.stateNode.implementation===z.implementation){r(P,R.sibling),te=d(R,z.children||[]),te.return=P,P=te;break e}else{r(P,R);break}else a(P,R);R=R.sibling}te=du(z,P.mode,te),te.return=P,P=te}return v(P);case pe:return z=qn(z),pt(P,R,z,te)}if(Me(z))return je(P,R,z,te);if(st(z)){if(Ue=st(z),typeof Ue!="function")throw Error(l(150));return z=Ue.call(z),Pe(P,R,z,te)}if(typeof z.then=="function")return pt(P,R,no(z),te);if(z.$$typeof===M)return pt(P,R,eo(P,z),te);io(P,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,R!==null&&R.tag===6?(r(P,R.sibling),te=d(R,z),te.return=P,P=te):(r(P,R),te=uu(z,P.mode,te),te.return=P,P=te),v(P)):r(P,R)}return function(P,R,z,te){try{Ar=0;var Ue=pt(P,R,z,te);return _i=null,Ue}catch(ke){if(ke===Si||ke===so)throw ke;var lt=Ls(29,ke,null,P.mode);return lt.lanes=te,lt.return=P,lt}finally{}}}var $n=Ym(!0),Qm=Ym(!1),rn=!1;function Nu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Su(e,a){e=e.updateQueue,a.updateQueue===e&&(a.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ln(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function on(e,a,r){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(ct&2)!==0){var d=o.pending;return d===null?a.next=a:(a.next=d.next,d.next=a),o.pending=a,a=Xl(e),Dm(e,null,r),a}return Ql(e,o,a,r),Xl(e)}function Er(e,a,r){if(a=a.updateQueue,a!==null&&(a=a.shared,(r&4194048)!==0)){var o=a.lanes;o&=e.pendingLanes,r|=o,a.lanes=r,Z(e,r)}}function _u(e,a){var r=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var d=null,f=null;if(r=r.firstBaseUpdate,r!==null){do{var v={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};f===null?d=f=v:f=f.next=v,r=r.next}while(r!==null);f===null?d=f=a:f=f.next=a}else d=f=a;r={baseState:o.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=a:e.next=a,r.lastBaseUpdate=a}var Tu=!1;function Or(){if(Tu){var e=Ni;if(e!==null)throw e}}function Dr(e,a,r,o){Tu=!1;var d=e.updateQueue;rn=!1;var f=d.firstBaseUpdate,v=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var A=S,V=A.next;A.next=null,v===null?f=V:v.next=V,v=A;var W=e.alternate;W!==null&&(W=W.updateQueue,S=W.lastBaseUpdate,S!==v&&(S===null?W.firstBaseUpdate=V:S.next=V,W.lastBaseUpdate=A))}if(f!==null){var ne=d.baseState;v=0,W=V=A=null,S=f;do{var $=S.lane&-536870913,Q=$!==S.lane;if(Q?(et&$)===$:(o&$)===$){$!==0&&$===ji&&(Tu=!0),W!==null&&(W=W.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var je=e,Pe=S;$=a;var pt=r;switch(Pe.tag){case 1:if(je=Pe.payload,typeof je=="function"){ne=je.call(pt,ne,$);break e}ne=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=Pe.payload,$=typeof je=="function"?je.call(pt,ne,$):je,$==null)break e;ne=w({},ne,$);break e;case 2:rn=!0}}$=S.callback,$!==null&&(e.flags|=64,Q&&(e.flags|=8192),Q=d.callbacks,Q===null?d.callbacks=[$]:Q.push($))}else Q={lane:$,tag:S.tag,payload:S.payload,callback:S.callback,next:null},W===null?(V=W=Q,A=ne):W=W.next=Q,v|=$;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;Q=S,S=Q.next,Q.next=null,d.lastBaseUpdate=Q,d.shared.pending=null}}while(!0);W===null&&(A=ne),d.baseState=A,d.firstBaseUpdate=V,d.lastBaseUpdate=W,f===null&&(d.shared.lanes=0),fn|=v,e.lanes=v,e.memoizedState=ne}}function Xm(e,a){if(typeof e!="function")throw Error(l(191,e));e.call(a)}function Jm(e,a){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)Xm(r[e],a)}var Ti=C(null),ro=C(0);function Zm(e,a){e=$a,me(ro,e),me(Ti,a),$a=e|a.baseLanes}function ku(){me(ro,$a),me(Ti,Ti.current)}function Au(){$a=ro.current,J(Ti),J(ro)}var Ps=C(null),Zs=null;function cn(e){var a=e.alternate;me(qt,qt.current&1),me(Ps,e),Zs===null&&(a===null||Ti.current!==null||a.memoizedState!==null)&&(Zs=e)}function Cu(e){me(qt,qt.current),me(Ps,e),Zs===null&&(Zs=e)}function Wm(e){e.tag===22?(me(qt,qt.current),me(Ps,e),Zs===null&&(Zs=e)):un()}function un(){me(qt,qt.current),me(Ps,Ps.current)}function Bs(e){J(Ps),Zs===e&&(Zs=null),J(qt)}var qt=C(0);function lo(e){for(var a=e;a!==null;){if(a.tag===13){var r=a.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Ud(r)||Ld(r)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ua=0,Ke=null,ft=null,Kt=null,oo=!1,ki=!1,Hn=!1,co=0,Rr=0,Ai=null,aj=0;function Ut(){throw Error(l(321))}function Eu(e,a){if(a===null)return!1;for(var r=0;r<a.length&&r<e.length;r++)if(!Us(e[r],a[r]))return!1;return!0}function Ou(e,a,r,o,d,f){return Ua=f,Ke=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Y.H=e===null||e.memoizedState===null?Lp:Gu,Hn=!1,f=r(o,d),Hn=!1,ki&&(f=tp(a,r,o,d)),ep(e),f}function ep(e){Y.H=Lr;var a=ft!==null&&ft.next!==null;if(Ua=0,Kt=ft=Ke=null,oo=!1,Rr=0,Ai=null,a)throw Error(l(300));e===null||Gt||(e=e.dependencies,e!==null&&Wl(e)&&(Gt=!0))}function tp(e,a,r,o){Ke=e;var d=0;do{if(ki&&(Ai=null),Rr=0,ki=!1,25<=d)throw Error(l(301));if(d+=1,Kt=ft=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}Y.H=Pp,f=a(r,o)}while(ki);return f}function nj(){var e=Y.H,a=e.useState()[0];return a=typeof a.then=="function"?Mr(a):a,e=e.useState()[0],(ft!==null?ft.memoizedState:null)!==e&&(Ke.flags|=1024),a}function Du(){var e=co!==0;return co=0,e}function Ru(e,a,r){a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~r}function Mu(e){if(oo){for(e=e.memoizedState;e!==null;){var a=e.queue;a!==null&&(a.pending=null),e=e.next}oo=!1}Ua=0,Kt=ft=Ke=null,ki=!1,Rr=co=0,Ai=null}function js(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?Ke.memoizedState=Kt=e:Kt=Kt.next=e,Kt}function It(){if(ft===null){var e=Ke.alternate;e=e!==null?e.memoizedState:null}else e=ft.next;var a=Kt===null?Ke.memoizedState:Kt.next;if(a!==null)Kt=a,ft=e;else{if(e===null)throw Ke.alternate===null?Error(l(467)):Error(l(310));ft=e,e={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},Kt===null?Ke.memoizedState=Kt=e:Kt=Kt.next=e}return Kt}function uo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Mr(e){var a=Rr;return Rr+=1,Ai===null&&(Ai=[]),e=Km(Ai,e,a),a=Ke,(Kt===null?a.memoizedState:Kt.next)===null&&(a=a.alternate,Y.H=a===null||a.memoizedState===null?Lp:Gu),e}function ho(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Mr(e);if(e.$$typeof===M)return ls(e)}throw Error(l(438,String(e)))}function Uu(e){var a=null,r=Ke.updateQueue;if(r!==null&&(a=r.memoCache),a==null){var o=Ke.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(a={data:o.data.map(function(d){return d.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),r===null&&(r=uo(),Ke.updateQueue=r),r.memoCache=a,r=a.data[a.index],r===void 0)for(r=a.data[a.index]=Array(e),o=0;o<e;o++)r[o]=be;return a.index++,r}function La(e,a){return typeof a=="function"?a(e):a}function fo(e){var a=It();return Lu(a,ft,e)}function Lu(e,a,r){var o=e.queue;if(o===null)throw Error(l(311));o.lastRenderedReducer=r;var d=e.baseQueue,f=o.pending;if(f!==null){if(d!==null){var v=d.next;d.next=f.next,f.next=v}a.baseQueue=d=f,o.pending=null}if(f=e.baseState,d===null)e.memoizedState=f;else{a=d.next;var S=v=null,A=null,V=a,W=!1;do{var ne=V.lane&-536870913;if(ne!==V.lane?(et&ne)===ne:(Ua&ne)===ne){var $=V.revertLane;if($===0)A!==null&&(A=A.next={lane:0,revertLane:0,gesture:null,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),ne===ji&&(W=!0);else if((Ua&$)===$){V=V.next,$===ji&&(W=!0);continue}else ne={lane:0,revertLane:V.revertLane,gesture:null,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},A===null?(S=A=ne,v=f):A=A.next=ne,Ke.lanes|=$,fn|=$;ne=V.action,Hn&&r(f,ne),f=V.hasEagerState?V.eagerState:r(f,ne)}else $={lane:ne,revertLane:V.revertLane,gesture:V.gesture,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},A===null?(S=A=$,v=f):A=A.next=$,Ke.lanes|=ne,fn|=ne;V=V.next}while(V!==null&&V!==a);if(A===null?v=f:A.next=S,!Us(f,e.memoizedState)&&(Gt=!0,W&&(r=Ni,r!==null)))throw r;e.memoizedState=f,e.baseState=v,e.baseQueue=A,o.lastRenderedState=f}return d===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Pu(e){var a=It(),r=a.queue;if(r===null)throw Error(l(311));r.lastRenderedReducer=e;var o=r.dispatch,d=r.pending,f=a.memoizedState;if(d!==null){r.pending=null;var v=d=d.next;do f=e(f,v.action),v=v.next;while(v!==d);Us(f,a.memoizedState)||(Gt=!0),a.memoizedState=f,a.baseQueue===null&&(a.baseState=f),r.lastRenderedState=f}return[f,o]}function sp(e,a,r){var o=Ke,d=It(),f=it;if(f){if(r===void 0)throw Error(l(407));r=r()}else r=a();var v=!Us((ft||d).memoizedState,r);if(v&&(d.memoizedState=r,Gt=!0),d=d.queue,Vu(ip.bind(null,o,d,e),[e]),d.getSnapshot!==a||v||Kt!==null&&Kt.memoizedState.tag&1){if(o.flags|=2048,Ci(9,{destroy:void 0},np.bind(null,o,d,r,a),null),bt===null)throw Error(l(349));f||(Ua&127)!==0||ap(o,a,r)}return r}function ap(e,a,r){e.flags|=16384,e={getSnapshot:a,value:r},a=Ke.updateQueue,a===null?(a=uo(),Ke.updateQueue=a,a.stores=[e]):(r=a.stores,r===null?a.stores=[e]:r.push(e))}function np(e,a,r,o){a.value=r,a.getSnapshot=o,rp(a)&&lp(e)}function ip(e,a,r){return r(function(){rp(a)&&lp(e)})}function rp(e){var a=e.getSnapshot;e=e.value;try{var r=a();return!Us(e,r)}catch{return!0}}function lp(e){var a=Un(e,2);a!==null&&Os(a,e,2)}function Bu(e){var a=js();if(typeof e=="function"){var r=e;if(e=r(),Hn){ns(!0);try{r()}finally{ns(!1)}}}return a.memoizedState=a.baseState=e,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:e},a}function op(e,a,r,o){return e.baseState=r,Lu(e,ft,typeof o=="function"?o:La)}function ij(e,a,r,o,d){if(go(e))throw Error(l(485));if(e=a.action,e!==null){var f={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};Y.T!==null?r(!0):f.isTransition=!1,o(f),r=a.pending,r===null?(f.next=a.pending=f,cp(a,f)):(f.next=r.next,a.pending=r.next=f)}}function cp(e,a){var r=a.action,o=a.payload,d=e.state;if(a.isTransition){var f=Y.T,v={};Y.T=v;try{var S=r(d,o),A=Y.S;A!==null&&A(v,S),up(e,a,S)}catch(V){zu(e,a,V)}finally{f!==null&&v.types!==null&&(f.types=v.types),Y.T=f}}else try{f=r(d,o),up(e,a,f)}catch(V){zu(e,a,V)}}function up(e,a,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(o){dp(e,a,o)},function(o){return zu(e,a,o)}):dp(e,a,r)}function dp(e,a,r){a.status="fulfilled",a.value=r,hp(a),e.state=r,a=e.pending,a!==null&&(r=a.next,r===a?e.pending=null:(r=r.next,a.next=r,cp(e,r)))}function zu(e,a,r){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do a.status="rejected",a.reason=r,hp(a),a=a.next;while(a!==o)}e.action=null}function hp(e){e=e.listeners;for(var a=0;a<e.length;a++)(0,e[a])()}function fp(e,a){return a}function mp(e,a){if(it){var r=bt.formState;if(r!==null){e:{var o=Ke;if(it){if(Tt){t:{for(var d=Tt,f=Js;d.nodeType!==8;){if(!f){d=null;break t}if(d=Ws(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){Tt=Ws(d.nextSibling),o=d.data==="F!";break e}}an(o)}o=!1}o&&(a=r[0])}}return r=js(),r.memoizedState=r.baseState=a,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fp,lastRenderedState:a},r.queue=o,r=Rp.bind(null,Ke,o),o.dispatch=r,o=Bu(!1),f=Ku.bind(null,Ke,!1,o.queue),o=js(),d={state:a,dispatch:null,action:e,pending:null},o.queue=d,r=ij.bind(null,Ke,d,f,r),d.dispatch=r,o.memoizedState=e,[a,r,!1]}function pp(e){var a=It();return gp(a,ft,e)}function gp(e,a,r){if(a=Lu(e,a,fp)[0],e=fo(La)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var o=Mr(a)}catch(v){throw v===Si?so:v}else o=a;a=It();var d=a.queue,f=d.dispatch;return r!==a.memoizedState&&(Ke.flags|=2048,Ci(9,{destroy:void 0},rj.bind(null,d,r),null)),[o,f,e]}function rj(e,a){e.action=a}function xp(e){var a=It(),r=ft;if(r!==null)return gp(a,r,e);It(),a=a.memoizedState,r=It();var o=r.queue.dispatch;return r.memoizedState=e,[a,o,!1]}function Ci(e,a,r,o){return e={tag:e,create:r,deps:o,inst:a,next:null},a=Ke.updateQueue,a===null&&(a=uo(),Ke.updateQueue=a),r=a.lastEffect,r===null?a.lastEffect=e.next=e:(o=r.next,r.next=e,e.next=o,a.lastEffect=e),e}function vp(){return It().memoizedState}function mo(e,a,r,o){var d=js();Ke.flags|=e,d.memoizedState=Ci(1|a,{destroy:void 0},r,o===void 0?null:o)}function po(e,a,r,o){var d=It();o=o===void 0?null:o;var f=d.memoizedState.inst;ft!==null&&o!==null&&Eu(o,ft.memoizedState.deps)?d.memoizedState=Ci(a,f,r,o):(Ke.flags|=e,d.memoizedState=Ci(1|a,f,r,o))}function bp(e,a){mo(8390656,8,e,a)}function Vu(e,a){po(2048,8,e,a)}function lj(e){Ke.flags|=4;var a=Ke.updateQueue;if(a===null)a=uo(),Ke.updateQueue=a,a.events=[e];else{var r=a.events;r===null?a.events=[e]:r.push(e)}}function yp(e){var a=It().memoizedState;return lj({ref:a,nextImpl:e}),function(){if((ct&2)!==0)throw Error(l(440));return a.impl.apply(void 0,arguments)}}function wp(e,a){return po(4,2,e,a)}function jp(e,a){return po(4,4,e,a)}function Np(e,a){if(typeof a=="function"){e=e();var r=a(e);return function(){typeof r=="function"?r():a(null)}}if(a!=null)return e=e(),a.current=e,function(){a.current=null}}function Sp(e,a,r){r=r!=null?r.concat([e]):null,po(4,4,Np.bind(null,a,e),r)}function qu(){}function _p(e,a){var r=It();a=a===void 0?null:a;var o=r.memoizedState;return a!==null&&Eu(a,o[1])?o[0]:(r.memoizedState=[e,a],e)}function Tp(e,a){var r=It();a=a===void 0?null:a;var o=r.memoizedState;if(a!==null&&Eu(a,o[1]))return o[0];if(o=e(),Hn){ns(!0);try{e()}finally{ns(!1)}}return r.memoizedState=[o,a],o}function Iu(e,a,r){return r===void 0||(Ua&1073741824)!==0&&(et&261930)===0?e.memoizedState=a:(e.memoizedState=r,e=k0(),Ke.lanes|=e,fn|=e,r)}function kp(e,a,r,o){return Us(r,a)?r:Ti.current!==null?(e=Iu(e,r,o),Us(e,a)||(Gt=!0),e):(Ua&42)===0||(Ua&1073741824)!==0&&(et&261930)===0?(Gt=!0,e.memoizedState=r):(e=k0(),Ke.lanes|=e,fn|=e,a)}function Ap(e,a,r,o,d){var f=ae.p;ae.p=f!==0&&8>f?f:8;var v=Y.T,S={};Y.T=S,Ku(e,!1,a,r);try{var A=d(),V=Y.S;if(V!==null&&V(S,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var W=sj(A,o);Ur(e,a,W,qs(e))}else Ur(e,a,o,qs(e))}catch(ne){Ur(e,a,{then:function(){},status:"rejected",reason:ne},qs())}finally{ae.p=f,v!==null&&S.types!==null&&(v.types=S.types),Y.T=v}}function oj(){}function $u(e,a,r,o){if(e.tag!==5)throw Error(l(476));var d=Cp(e).queue;Ap(e,d,a,ce,r===null?oj:function(){return Ep(e),r(o)})}function Cp(e){var a=e.memoizedState;if(a!==null)return a;a={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:ce},next:null};var r={};return a.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:r},next:null},e.memoizedState=a,e=e.alternate,e!==null&&(e.memoizedState=a),a}function Ep(e){var a=Cp(e);a.next===null&&(a=e.alternate.memoizedState),Ur(e,a.next.queue,{},qs())}function Hu(){return ls(Zr)}function Op(){return It().memoizedState}function Dp(){return It().memoizedState}function cj(e){for(var a=e.return;a!==null;){switch(a.tag){case 24:case 3:var r=qs();e=ln(r);var o=on(a,e,r);o!==null&&(Os(o,a,r),Er(o,a,r)),a={cache:bu()},e.payload=a;return}a=a.return}}function uj(e,a,r){var o=qs();r={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},go(e)?Mp(a,r):(r=ou(e,a,r,o),r!==null&&(Os(r,e,o),Up(r,a,o)))}function Rp(e,a,r){var o=qs();Ur(e,a,r,o)}function Ur(e,a,r,o){var d={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(go(e))Mp(a,d);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=a.lastRenderedReducer,f!==null))try{var v=a.lastRenderedState,S=f(v,r);if(d.hasEagerState=!0,d.eagerState=S,Us(S,v))return Ql(e,a,d,0),bt===null&&Yl(),!1}catch{}finally{}if(r=ou(e,a,d,o),r!==null)return Os(r,e,o),Up(r,a,o),!0}return!1}function Ku(e,a,r,o){if(o={lane:2,revertLane:Nd(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},go(e)){if(a)throw Error(l(479))}else a=ou(e,r,o,2),a!==null&&Os(a,e,2)}function go(e){var a=e.alternate;return e===Ke||a!==null&&a===Ke}function Mp(e,a){ki=oo=!0;var r=e.pending;r===null?a.next=a:(a.next=r.next,r.next=a),e.pending=a}function Up(e,a,r){if((r&4194048)!==0){var o=a.lanes;o&=e.pendingLanes,r|=o,a.lanes=r,Z(e,r)}}var Lr={readContext:ls,use:ho,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useLayoutEffect:Ut,useInsertionEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useSyncExternalStore:Ut,useId:Ut,useHostTransitionStatus:Ut,useFormState:Ut,useActionState:Ut,useOptimistic:Ut,useMemoCache:Ut,useCacheRefresh:Ut};Lr.useEffectEvent=Ut;var Lp={readContext:ls,use:ho,useCallback:function(e,a){return js().memoizedState=[e,a===void 0?null:a],e},useContext:ls,useEffect:bp,useImperativeHandle:function(e,a,r){r=r!=null?r.concat([e]):null,mo(4194308,4,Np.bind(null,a,e),r)},useLayoutEffect:function(e,a){return mo(4194308,4,e,a)},useInsertionEffect:function(e,a){mo(4,2,e,a)},useMemo:function(e,a){var r=js();a=a===void 0?null:a;var o=e();if(Hn){ns(!0);try{e()}finally{ns(!1)}}return r.memoizedState=[o,a],o},useReducer:function(e,a,r){var o=js();if(r!==void 0){var d=r(a);if(Hn){ns(!0);try{r(a)}finally{ns(!1)}}}else d=a;return o.memoizedState=o.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},o.queue=e,e=e.dispatch=uj.bind(null,Ke,e),[o.memoizedState,e]},useRef:function(e){var a=js();return e={current:e},a.memoizedState=e},useState:function(e){e=Bu(e);var a=e.queue,r=Rp.bind(null,Ke,a);return a.dispatch=r,[e.memoizedState,r]},useDebugValue:qu,useDeferredValue:function(e,a){var r=js();return Iu(r,e,a)},useTransition:function(){var e=Bu(!1);return e=Ap.bind(null,Ke,e.queue,!0,!1),js().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,a,r){var o=Ke,d=js();if(it){if(r===void 0)throw Error(l(407));r=r()}else{if(r=a(),bt===null)throw Error(l(349));(et&127)!==0||ap(o,a,r)}d.memoizedState=r;var f={value:r,getSnapshot:a};return d.queue=f,bp(ip.bind(null,o,f,e),[e]),o.flags|=2048,Ci(9,{destroy:void 0},np.bind(null,o,f,r,a),null),r},useId:function(){var e=js(),a=bt.identifierPrefix;if(it){var r=va,o=xa;r=(o&~(1<<32-Rt(o)-1)).toString(32)+r,a="_"+a+"R_"+r,r=co++,0<r&&(a+="H"+r.toString(32)),a+="_"}else r=aj++,a="_"+a+"r_"+r.toString(32)+"_";return e.memoizedState=a},useHostTransitionStatus:Hu,useFormState:mp,useActionState:mp,useOptimistic:function(e){var a=js();a.memoizedState=a.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=r,a=Ku.bind(null,Ke,!0,r),r.dispatch=a,[e,a]},useMemoCache:Uu,useCacheRefresh:function(){return js().memoizedState=cj.bind(null,Ke)},useEffectEvent:function(e){var a=js(),r={impl:e};return a.memoizedState=r,function(){if((ct&2)!==0)throw Error(l(440));return r.impl.apply(void 0,arguments)}}},Gu={readContext:ls,use:ho,useCallback:_p,useContext:ls,useEffect:Vu,useImperativeHandle:Sp,useInsertionEffect:wp,useLayoutEffect:jp,useMemo:Tp,useReducer:fo,useRef:vp,useState:function(){return fo(La)},useDebugValue:qu,useDeferredValue:function(e,a){var r=It();return kp(r,ft.memoizedState,e,a)},useTransition:function(){var e=fo(La)[0],a=It().memoizedState;return[typeof e=="boolean"?e:Mr(e),a]},useSyncExternalStore:sp,useId:Op,useHostTransitionStatus:Hu,useFormState:pp,useActionState:pp,useOptimistic:function(e,a){var r=It();return op(r,ft,e,a)},useMemoCache:Uu,useCacheRefresh:Dp};Gu.useEffectEvent=yp;var Pp={readContext:ls,use:ho,useCallback:_p,useContext:ls,useEffect:Vu,useImperativeHandle:Sp,useInsertionEffect:wp,useLayoutEffect:jp,useMemo:Tp,useReducer:Pu,useRef:vp,useState:function(){return Pu(La)},useDebugValue:qu,useDeferredValue:function(e,a){var r=It();return ft===null?Iu(r,e,a):kp(r,ft.memoizedState,e,a)},useTransition:function(){var e=Pu(La)[0],a=It().memoizedState;return[typeof e=="boolean"?e:Mr(e),a]},useSyncExternalStore:sp,useId:Op,useHostTransitionStatus:Hu,useFormState:xp,useActionState:xp,useOptimistic:function(e,a){var r=It();return ft!==null?op(r,ft,e,a):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:Uu,useCacheRefresh:Dp};Pp.useEffectEvent=yp;function Fu(e,a,r,o){a=e.memoizedState,r=r(o,a),r=r==null?a:w({},a,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Yu={enqueueSetState:function(e,a,r){e=e._reactInternals;var o=qs(),d=ln(o);d.payload=a,r!=null&&(d.callback=r),a=on(e,d,o),a!==null&&(Os(a,e,o),Er(a,e,o))},enqueueReplaceState:function(e,a,r){e=e._reactInternals;var o=qs(),d=ln(o);d.tag=1,d.payload=a,r!=null&&(d.callback=r),a=on(e,d,o),a!==null&&(Os(a,e,o),Er(a,e,o))},enqueueForceUpdate:function(e,a){e=e._reactInternals;var r=qs(),o=ln(r);o.tag=2,a!=null&&(o.callback=a),a=on(e,o,r),a!==null&&(Os(a,e,r),Er(a,e,r))}};function Bp(e,a,r,o,d,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,v):a.prototype&&a.prototype.isPureReactComponent?!jr(r,o)||!jr(d,f):!0}function zp(e,a,r,o){e=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(r,o),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(r,o),a.state!==e&&Yu.enqueueReplaceState(a,a.state,null)}function Kn(e,a){var r=a;if("ref"in a){r={};for(var o in a)o!=="ref"&&(r[o]=a[o])}if(e=e.defaultProps){r===a&&(r=w({},r));for(var d in e)r[d]===void 0&&(r[d]=e[d])}return r}function Vp(e){Fl(e)}function qp(e){console.error(e)}function Ip(e){Fl(e)}function xo(e,a){try{var r=e.onUncaughtError;r(a.value,{componentStack:a.stack})}catch(o){setTimeout(function(){throw o})}}function $p(e,a,r){try{var o=e.onCaughtError;o(r.value,{componentStack:r.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Qu(e,a,r){return r=ln(r),r.tag=3,r.payload={element:null},r.callback=function(){xo(e,a)},r}function Hp(e){return e=ln(e),e.tag=3,e}function Kp(e,a,r,o){var d=r.type.getDerivedStateFromError;if(typeof d=="function"){var f=o.value;e.payload=function(){return d(f)},e.callback=function(){$p(a,r,o)}}var v=r.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){$p(a,r,o),typeof d!="function"&&(mn===null?mn=new Set([this]):mn.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})})}function dj(e,a,r,o,d){if(r.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(a=r.alternate,a!==null&&wi(a,r,d,!0),r=Ps.current,r!==null){switch(r.tag){case 31:case 13:return Zs===null?Co():r.alternate===null&&Lt===0&&(Lt=3),r.flags&=-257,r.flags|=65536,r.lanes=d,o===ao?r.flags|=16384:(a=r.updateQueue,a===null?r.updateQueue=new Set([o]):a.add(o),yd(e,o,d)),!1;case 22:return r.flags|=65536,o===ao?r.flags|=16384:(a=r.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([o])},r.updateQueue=a):(r=a.retryQueue,r===null?a.retryQueue=new Set([o]):r.add(o)),yd(e,o,d)),!1}throw Error(l(435,r.tag))}return yd(e,o,d),Co(),!1}if(it)return a=Ps.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=d,o!==mu&&(e=Error(l(422),{cause:o}),_r(Ys(e,r)))):(o!==mu&&(a=Error(l(423),{cause:o}),_r(Ys(a,r))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,o=Ys(o,r),d=Qu(e.stateNode,o,d),_u(e,d),Lt!==4&&(Lt=2)),!1;var f=Error(l(520),{cause:o});if(f=Ys(f,r),Hr===null?Hr=[f]:Hr.push(f),Lt!==4&&(Lt=2),a===null)return!0;o=Ys(o,r),r=a;do{switch(r.tag){case 3:return r.flags|=65536,e=d&-d,r.lanes|=e,e=Qu(r.stateNode,o,e),_u(r,e),!1;case 1:if(a=r.type,f=r.stateNode,(r.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(mn===null||!mn.has(f))))return r.flags|=65536,d&=-d,r.lanes|=d,d=Hp(d),Kp(d,e,r,o),_u(r,d),!1}r=r.return}while(r!==null);return!1}var Xu=Error(l(461)),Gt=!1;function os(e,a,r,o){a.child=e===null?Qm(a,null,r,o):$n(a,e.child,r,o)}function Gp(e,a,r,o,d){r=r.render;var f=a.ref;if("ref"in o){var v={};for(var S in o)S!=="ref"&&(v[S]=o[S])}else v=o;return zn(a),o=Ou(e,a,r,v,f,d),S=Du(),e!==null&&!Gt?(Ru(e,a,d),Pa(e,a,d)):(it&&S&&hu(a),a.flags|=1,os(e,a,o,d),a.child)}function Fp(e,a,r,o,d){if(e===null){var f=r.type;return typeof f=="function"&&!cu(f)&&f.defaultProps===void 0&&r.compare===null?(a.tag=15,a.type=f,Yp(e,a,f,o,d)):(e=Jl(r.type,null,o,a,a.mode,d),e.ref=a.ref,e.return=a,a.child=e)}if(f=e.child,!nd(e,d)){var v=f.memoizedProps;if(r=r.compare,r=r!==null?r:jr,r(v,o)&&e.ref===a.ref)return Pa(e,a,d)}return a.flags|=1,e=Oa(f,o),e.ref=a.ref,e.return=a,a.child=e}function Yp(e,a,r,o,d){if(e!==null){var f=e.memoizedProps;if(jr(f,o)&&e.ref===a.ref)if(Gt=!1,a.pendingProps=o=f,nd(e,d))(e.flags&131072)!==0&&(Gt=!0);else return a.lanes=e.lanes,Pa(e,a,d)}return Ju(e,a,r,o,d)}function Qp(e,a,r,o){var d=o.children,f=e!==null?e.memoizedState:null;if(e===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((a.flags&128)!==0){if(f=f!==null?f.baseLanes|r:r,e!==null){for(o=a.child=e.child,d=0;o!==null;)d=d|o.lanes|o.childLanes,o=o.sibling;o=d&~f}else o=0,a.child=null;return Xp(e,a,f,r,o)}if((r&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},e!==null&&to(a,f!==null?f.cachePool:null),f!==null?Zm(a,f):ku(),Wm(a);else return o=a.lanes=536870912,Xp(e,a,f!==null?f.baseLanes|r:r,r,o)}else f!==null?(to(a,f.cachePool),Zm(a,f),un(),a.memoizedState=null):(e!==null&&to(a,null),ku(),un());return os(e,a,d,r),a.child}function Pr(e,a){return e!==null&&e.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Xp(e,a,r,o,d){var f=wu();return f=f===null?null:{parent:Ht._currentValue,pool:f},a.memoizedState={baseLanes:r,cachePool:f},e!==null&&to(a,null),ku(),Wm(a),e!==null&&wi(e,a,o,!0),a.childLanes=d,null}function vo(e,a){return a=yo({mode:a.mode,children:a.children},e.mode),a.ref=e.ref,e.child=a,a.return=e,a}function Jp(e,a,r){return $n(a,e.child,null,r),e=vo(a,a.pendingProps),e.flags|=2,Bs(a),a.memoizedState=null,e}function hj(e,a,r){var o=a.pendingProps,d=(a.flags&128)!==0;if(a.flags&=-129,e===null){if(it){if(o.mode==="hidden")return e=vo(a,o),a.lanes=536870912,Pr(null,e);if(Cu(a),(e=Tt)?(e=cg(e,Js),e=e!==null&&e.data==="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:tn!==null?{id:xa,overflow:va}:null,retryLane:536870912,hydrationErrors:null},r=Mm(e),r.return=a,a.child=r,rs=a,Tt=null)):e=null,e===null)throw an(a);return a.lanes=536870912,null}return vo(a,o)}var f=e.memoizedState;if(f!==null){var v=f.dehydrated;if(Cu(a),d)if(a.flags&256)a.flags&=-257,a=Jp(e,a,r);else if(a.memoizedState!==null)a.child=e.child,a.flags|=128,a=null;else throw Error(l(558));else if(Gt||wi(e,a,r,!1),d=(r&e.childLanes)!==0,Gt||d){if(o=bt,o!==null&&(v=ge(o,r),v!==0&&v!==f.retryLane))throw f.retryLane=v,Un(e,v),Os(o,e,v),Xu;Co(),a=Jp(e,a,r)}else e=f.treeContext,Tt=Ws(v.nextSibling),rs=a,it=!0,sn=null,Js=!1,e!==null&&Pm(a,e),a=vo(a,o),a.flags|=4096;return a}return e=Oa(e.child,{mode:o.mode,children:o.children}),e.ref=a.ref,a.child=e,e.return=a,e}function bo(e,a){var r=a.ref;if(r===null)e!==null&&e.ref!==null&&(a.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(l(284));(e===null||e.ref!==r)&&(a.flags|=4194816)}}function Ju(e,a,r,o,d){return zn(a),r=Ou(e,a,r,o,void 0,d),o=Du(),e!==null&&!Gt?(Ru(e,a,d),Pa(e,a,d)):(it&&o&&hu(a),a.flags|=1,os(e,a,r,d),a.child)}function Zp(e,a,r,o,d,f){return zn(a),a.updateQueue=null,r=tp(a,o,r,d),ep(e),o=Du(),e!==null&&!Gt?(Ru(e,a,f),Pa(e,a,f)):(it&&o&&hu(a),a.flags|=1,os(e,a,r,f),a.child)}function Wp(e,a,r,o,d){if(zn(a),a.stateNode===null){var f=xi,v=r.contextType;typeof v=="object"&&v!==null&&(f=ls(v)),f=new r(o,f),a.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Yu,a.stateNode=f,f._reactInternals=a,f=a.stateNode,f.props=o,f.state=a.memoizedState,f.refs={},Nu(a),v=r.contextType,f.context=typeof v=="object"&&v!==null?ls(v):xi,f.state=a.memoizedState,v=r.getDerivedStateFromProps,typeof v=="function"&&(Fu(a,r,v,o),f.state=a.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&Yu.enqueueReplaceState(f,f.state,null),Dr(a,o,f,d),Or(),f.state=a.memoizedState),typeof f.componentDidMount=="function"&&(a.flags|=4194308),o=!0}else if(e===null){f=a.stateNode;var S=a.memoizedProps,A=Kn(r,S);f.props=A;var V=f.context,W=r.contextType;v=xi,typeof W=="object"&&W!==null&&(v=ls(W));var ne=r.getDerivedStateFromProps;W=typeof ne=="function"||typeof f.getSnapshotBeforeUpdate=="function",S=a.pendingProps!==S,W||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(S||V!==v)&&zp(a,f,o,v),rn=!1;var $=a.memoizedState;f.state=$,Dr(a,o,f,d),Or(),V=a.memoizedState,S||$!==V||rn?(typeof ne=="function"&&(Fu(a,r,ne,o),V=a.memoizedState),(A=rn||Bp(a,r,A,o,$,V,v))?(W||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(a.flags|=4194308)):(typeof f.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=o,a.memoizedState=V),f.props=o,f.state=V,f.context=v,o=A):(typeof f.componentDidMount=="function"&&(a.flags|=4194308),o=!1)}else{f=a.stateNode,Su(e,a),v=a.memoizedProps,W=Kn(r,v),f.props=W,ne=a.pendingProps,$=f.context,V=r.contextType,A=xi,typeof V=="object"&&V!==null&&(A=ls(V)),S=r.getDerivedStateFromProps,(V=typeof S=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==ne||$!==A)&&zp(a,f,o,A),rn=!1,$=a.memoizedState,f.state=$,Dr(a,o,f,d),Or();var Q=a.memoizedState;v!==ne||$!==Q||rn||e!==null&&e.dependencies!==null&&Wl(e.dependencies)?(typeof S=="function"&&(Fu(a,r,S,o),Q=a.memoizedState),(W=rn||Bp(a,r,W,o,$,Q,A)||e!==null&&e.dependencies!==null&&Wl(e.dependencies))?(V||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,Q,A),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,Q,A)),typeof f.componentDidUpdate=="function"&&(a.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&$===e.memoizedState||(a.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&$===e.memoizedState||(a.flags|=1024),a.memoizedProps=o,a.memoizedState=Q),f.props=o,f.state=Q,f.context=A,o=W):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&$===e.memoizedState||(a.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&$===e.memoizedState||(a.flags|=1024),o=!1)}return f=o,bo(e,a),o=(a.flags&128)!==0,f||o?(f=a.stateNode,r=o&&typeof r.getDerivedStateFromError!="function"?null:f.render(),a.flags|=1,e!==null&&o?(a.child=$n(a,e.child,null,d),a.child=$n(a,null,r,d)):os(e,a,r,d),a.memoizedState=f.state,e=a.child):e=Pa(e,a,d),e}function e0(e,a,r,o){return Pn(),a.flags|=256,os(e,a,r,o),a.child}var Zu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wu(e){return{baseLanes:e,cachePool:$m()}}function ed(e,a,r){return e=e!==null?e.childLanes&~r:0,a&&(e|=Vs),e}function t0(e,a,r){var o=a.pendingProps,d=!1,f=(a.flags&128)!==0,v;if((v=f)||(v=e!==null&&e.memoizedState===null?!1:(qt.current&2)!==0),v&&(d=!0,a.flags&=-129),v=(a.flags&32)!==0,a.flags&=-33,e===null){if(it){if(d?cn(a):un(),(e=Tt)?(e=cg(e,Js),e=e!==null&&e.data!=="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:tn!==null?{id:xa,overflow:va}:null,retryLane:536870912,hydrationErrors:null},r=Mm(e),r.return=a,a.child=r,rs=a,Tt=null)):e=null,e===null)throw an(a);return Ld(e)?a.lanes=32:a.lanes=536870912,null}var S=o.children;return o=o.fallback,d?(un(),d=a.mode,S=yo({mode:"hidden",children:S},d),o=Ln(o,d,r,null),S.return=a,o.return=a,S.sibling=o,a.child=S,o=a.child,o.memoizedState=Wu(r),o.childLanes=ed(e,v,r),a.memoizedState=Zu,Pr(null,o)):(cn(a),td(a,S))}var A=e.memoizedState;if(A!==null&&(S=A.dehydrated,S!==null)){if(f)a.flags&256?(cn(a),a.flags&=-257,a=sd(e,a,r)):a.memoizedState!==null?(un(),a.child=e.child,a.flags|=128,a=null):(un(),S=o.fallback,d=a.mode,o=yo({mode:"visible",children:o.children},d),S=Ln(S,d,r,null),S.flags|=2,o.return=a,S.return=a,o.sibling=S,a.child=o,$n(a,e.child,null,r),o=a.child,o.memoizedState=Wu(r),o.childLanes=ed(e,v,r),a.memoizedState=Zu,a=Pr(null,o));else if(cn(a),Ld(S)){if(v=S.nextSibling&&S.nextSibling.dataset,v)var V=v.dgst;v=V,o=Error(l(419)),o.stack="",o.digest=v,_r({value:o,source:null,stack:null}),a=sd(e,a,r)}else if(Gt||wi(e,a,r,!1),v=(r&e.childLanes)!==0,Gt||v){if(v=bt,v!==null&&(o=ge(v,r),o!==0&&o!==A.retryLane))throw A.retryLane=o,Un(e,o),Os(v,e,o),Xu;Ud(S)||Co(),a=sd(e,a,r)}else Ud(S)?(a.flags|=192,a.child=e.child,a=null):(e=A.treeContext,Tt=Ws(S.nextSibling),rs=a,it=!0,sn=null,Js=!1,e!==null&&Pm(a,e),a=td(a,o.children),a.flags|=4096);return a}return d?(un(),S=o.fallback,d=a.mode,A=e.child,V=A.sibling,o=Oa(A,{mode:"hidden",children:o.children}),o.subtreeFlags=A.subtreeFlags&65011712,V!==null?S=Oa(V,S):(S=Ln(S,d,r,null),S.flags|=2),S.return=a,o.return=a,o.sibling=S,a.child=o,Pr(null,o),o=a.child,S=e.child.memoizedState,S===null?S=Wu(r):(d=S.cachePool,d!==null?(A=Ht._currentValue,d=d.parent!==A?{parent:A,pool:A}:d):d=$m(),S={baseLanes:S.baseLanes|r,cachePool:d}),o.memoizedState=S,o.childLanes=ed(e,v,r),a.memoizedState=Zu,Pr(e.child,o)):(cn(a),r=e.child,e=r.sibling,r=Oa(r,{mode:"visible",children:o.children}),r.return=a,r.sibling=null,e!==null&&(v=a.deletions,v===null?(a.deletions=[e],a.flags|=16):v.push(e)),a.child=r,a.memoizedState=null,r)}function td(e,a){return a=yo({mode:"visible",children:a},e.mode),a.return=e,e.child=a}function yo(e,a){return e=Ls(22,e,null,a),e.lanes=0,e}function sd(e,a,r){return $n(a,e.child,null,r),e=td(a,a.pendingProps.children),e.flags|=2,a.memoizedState=null,e}function s0(e,a,r){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a),xu(e.return,a,r)}function ad(e,a,r,o,d,f){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:d,treeForkCount:f}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=o,v.tail=r,v.tailMode=d,v.treeForkCount=f)}function a0(e,a,r){var o=a.pendingProps,d=o.revealOrder,f=o.tail;o=o.children;var v=qt.current,S=(v&2)!==0;if(S?(v=v&1|2,a.flags|=128):v&=1,me(qt,v),os(e,a,o,r),o=it?Sr:0,!S&&e!==null&&(e.flags&128)!==0)e:for(e=a.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&s0(e,r,a);else if(e.tag===19)s0(e,r,a);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===a)break e;for(;e.sibling===null;){if(e.return===null||e.return===a)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(r=a.child,d=null;r!==null;)e=r.alternate,e!==null&&lo(e)===null&&(d=r),r=r.sibling;r=d,r===null?(d=a.child,a.child=null):(d=r.sibling,r.sibling=null),ad(a,!1,d,r,f,o);break;case"backwards":case"unstable_legacy-backwards":for(r=null,d=a.child,a.child=null;d!==null;){if(e=d.alternate,e!==null&&lo(e)===null){a.child=d;break}e=d.sibling,d.sibling=r,r=d,d=e}ad(a,!0,r,null,f,o);break;case"together":ad(a,!1,null,null,void 0,o);break;default:a.memoizedState=null}return a.child}function Pa(e,a,r){if(e!==null&&(a.dependencies=e.dependencies),fn|=a.lanes,(r&a.childLanes)===0)if(e!==null){if(wi(e,a,r,!1),(r&a.childLanes)===0)return null}else return null;if(e!==null&&a.child!==e.child)throw Error(l(153));if(a.child!==null){for(e=a.child,r=Oa(e,e.pendingProps),a.child=r,r.return=a;e.sibling!==null;)e=e.sibling,r=r.sibling=Oa(e,e.pendingProps),r.return=a;r.sibling=null}return a.child}function nd(e,a){return(e.lanes&a)!==0?!0:(e=e.dependencies,!!(e!==null&&Wl(e)))}function fj(e,a,r){switch(a.tag){case 3:yt(a,a.stateNode.containerInfo),nn(a,Ht,e.memoizedState.cache),Pn();break;case 27:case 5:xt(a);break;case 4:yt(a,a.stateNode.containerInfo);break;case 10:nn(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Cu(a),null;break;case 13:var o=a.memoizedState;if(o!==null)return o.dehydrated!==null?(cn(a),a.flags|=128,null):(r&a.child.childLanes)!==0?t0(e,a,r):(cn(a),e=Pa(e,a,r),e!==null?e.sibling:null);cn(a);break;case 19:var d=(e.flags&128)!==0;if(o=(r&a.childLanes)!==0,o||(wi(e,a,r,!1),o=(r&a.childLanes)!==0),d){if(o)return a0(e,a,r);a.flags|=128}if(d=a.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),me(qt,qt.current),o)break;return null;case 22:return a.lanes=0,Qp(e,a,r,a.pendingProps);case 24:nn(a,Ht,e.memoizedState.cache)}return Pa(e,a,r)}function n0(e,a,r){if(e!==null)if(e.memoizedProps!==a.pendingProps)Gt=!0;else{if(!nd(e,r)&&(a.flags&128)===0)return Gt=!1,fj(e,a,r);Gt=(e.flags&131072)!==0}else Gt=!1,it&&(a.flags&1048576)!==0&&Lm(a,Sr,a.index);switch(a.lanes=0,a.tag){case 16:e:{var o=a.pendingProps;if(e=qn(a.elementType),a.type=e,typeof e=="function")cu(e)?(o=Kn(e,o),a.tag=1,a=Wp(null,a,e,o,r)):(a.tag=0,a=Ju(null,a,e,o,r));else{if(e!=null){var d=e.$$typeof;if(d===ie){a.tag=11,a=Gp(null,a,e,o,r);break e}else if(d===H){a.tag=14,a=Fp(null,a,e,o,r);break e}}throw a=re(e)||e,Error(l(306,a,""))}}return a;case 0:return Ju(e,a,a.type,a.pendingProps,r);case 1:return o=a.type,d=Kn(o,a.pendingProps),Wp(e,a,o,d,r);case 3:e:{if(yt(a,a.stateNode.containerInfo),e===null)throw Error(l(387));o=a.pendingProps;var f=a.memoizedState;d=f.element,Su(e,a),Dr(a,o,null,r);var v=a.memoizedState;if(o=v.cache,nn(a,Ht,o),o!==f.cache&&vu(a,[Ht],r,!0),Or(),o=v.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:v.cache},a.updateQueue.baseState=f,a.memoizedState=f,a.flags&256){a=e0(e,a,o,r);break e}else if(o!==d){d=Ys(Error(l(424)),a),_r(d),a=e0(e,a,o,r);break e}else{switch(e=a.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Tt=Ws(e.firstChild),rs=a,it=!0,sn=null,Js=!0,r=Qm(a,null,o,r),a.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Pn(),o===d){a=Pa(e,a,r);break e}os(e,a,o,r)}a=a.child}return a;case 26:return bo(e,a),e===null?(r=pg(a.type,null,a.pendingProps,null))?a.memoizedState=r:it||(r=a.type,e=a.pendingProps,o=Lo(De.current).createElement(r),o[Re]=a,o[Ve]=e,cs(o,r,e),Xe(o),a.stateNode=o):a.memoizedState=pg(a.type,e.memoizedProps,a.pendingProps,e.memoizedState),null;case 27:return xt(a),e===null&&it&&(o=a.stateNode=hg(a.type,a.pendingProps,De.current),rs=a,Js=!0,d=Tt,vn(a.type)?(Pd=d,Tt=Ws(o.firstChild)):Tt=d),os(e,a,a.pendingProps.children,r),bo(e,a),e===null&&(a.flags|=4194304),a.child;case 5:return e===null&&it&&((d=o=Tt)&&(o=$j(o,a.type,a.pendingProps,Js),o!==null?(a.stateNode=o,rs=a,Tt=Ws(o.firstChild),Js=!1,d=!0):d=!1),d||an(a)),xt(a),d=a.type,f=a.pendingProps,v=e!==null?e.memoizedProps:null,o=f.children,Dd(d,f)?o=null:v!==null&&Dd(d,v)&&(a.flags|=32),a.memoizedState!==null&&(d=Ou(e,a,nj,null,null,r),Zr._currentValue=d),bo(e,a),os(e,a,o,r),a.child;case 6:return e===null&&it&&((e=r=Tt)&&(r=Hj(r,a.pendingProps,Js),r!==null?(a.stateNode=r,rs=a,Tt=null,e=!0):e=!1),e||an(a)),null;case 13:return t0(e,a,r);case 4:return yt(a,a.stateNode.containerInfo),o=a.pendingProps,e===null?a.child=$n(a,null,o,r):os(e,a,o,r),a.child;case 11:return Gp(e,a,a.type,a.pendingProps,r);case 7:return os(e,a,a.pendingProps,r),a.child;case 8:return os(e,a,a.pendingProps.children,r),a.child;case 12:return os(e,a,a.pendingProps.children,r),a.child;case 10:return o=a.pendingProps,nn(a,a.type,o.value),os(e,a,o.children,r),a.child;case 9:return d=a.type._context,o=a.pendingProps.children,zn(a),d=ls(d),o=o(d),a.flags|=1,os(e,a,o,r),a.child;case 14:return Fp(e,a,a.type,a.pendingProps,r);case 15:return Yp(e,a,a.type,a.pendingProps,r);case 19:return a0(e,a,r);case 31:return hj(e,a,r);case 22:return Qp(e,a,r,a.pendingProps);case 24:return zn(a),o=ls(Ht),e===null?(d=wu(),d===null&&(d=bt,f=bu(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=r),d=f),a.memoizedState={parent:o,cache:d},Nu(a),nn(a,Ht,d)):((e.lanes&r)!==0&&(Su(e,a),Dr(a,null,null,r),Or()),d=e.memoizedState,f=a.memoizedState,d.parent!==o?(d={parent:o,cache:o},a.memoizedState=d,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=d),nn(a,Ht,o)):(o=f.cache,nn(a,Ht,o),o!==d.cache&&vu(a,[Ht],r,!0))),os(e,a,a.pendingProps.children,r),a.child;case 29:throw a.pendingProps}throw Error(l(156,a.tag))}function Ba(e){e.flags|=4}function id(e,a,r,o,d){if((a=(e.mode&32)!==0)&&(a=!1),a){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(O0())e.flags|=8192;else throw In=ao,ju}else e.flags&=-16777217}function i0(e,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!yg(a))if(O0())e.flags|=8192;else throw In=ao,ju}function wo(e,a){a!==null&&(e.flags|=4),e.flags&16384&&(a=e.tag!==22?y():536870912,e.lanes|=a,Ri|=a)}function Br(e,a){if(!it)switch(e.tailMode){case"hidden":a=e.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?a||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function kt(e){var a=e.alternate!==null&&e.alternate.child===e.child,r=0,o=0;if(a)for(var d=e.child;d!==null;)r|=d.lanes|d.childLanes,o|=d.subtreeFlags&65011712,o|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)r|=d.lanes|d.childLanes,o|=d.subtreeFlags,o|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=o,e.childLanes=r,a}function mj(e,a,r){var o=a.pendingProps;switch(fu(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(a),null;case 1:return kt(a),null;case 3:return r=a.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),Ma(Ht),at(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(yi(a)?Ba(a):e===null||e.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,pu())),kt(a),null;case 26:var d=a.type,f=a.memoizedState;return e===null?(Ba(a),f!==null?(kt(a),i0(a,f)):(kt(a),id(a,d,null,o,r))):f?f!==e.memoizedState?(Ba(a),kt(a),i0(a,f)):(kt(a),a.flags&=-16777217):(e=e.memoizedProps,e!==o&&Ba(a),kt(a),id(a,d,e,o,r)),null;case 27:if(zt(a),r=De.current,d=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==o&&Ba(a);else{if(!o){if(a.stateNode===null)throw Error(l(166));return kt(a),null}e=ve.current,yi(a)?Bm(a):(e=hg(d,o,r),a.stateNode=e,Ba(a))}return kt(a),null;case 5:if(zt(a),d=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==o&&Ba(a);else{if(!o){if(a.stateNode===null)throw Error(l(166));return kt(a),null}if(f=ve.current,yi(a))Bm(a);else{var v=Lo(De.current);switch(f){case 1:f=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:f=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":f=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":f=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":f=v.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof o.is=="string"?v.createElement("select",{is:o.is}):v.createElement("select"),o.multiple?f.multiple=!0:o.size&&(f.size=o.size);break;default:f=typeof o.is=="string"?v.createElement(d,{is:o.is}):v.createElement(d)}}f[Re]=a,f[Ve]=o;e:for(v=a.child;v!==null;){if(v.tag===5||v.tag===6)f.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===a)break e;for(;v.sibling===null;){if(v.return===null||v.return===a)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}a.stateNode=f;e:switch(cs(f,d,o),d){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Ba(a)}}return kt(a),id(a,a.type,e===null?null:e.memoizedProps,a.pendingProps,r),null;case 6:if(e&&a.stateNode!=null)e.memoizedProps!==o&&Ba(a);else{if(typeof o!="string"&&a.stateNode===null)throw Error(l(166));if(e=De.current,yi(a)){if(e=a.stateNode,r=a.memoizedProps,o=null,d=rs,d!==null)switch(d.tag){case 27:case 5:o=d.memoizedProps}e[Re]=a,e=!!(e.nodeValue===r||o!==null&&o.suppressHydrationWarning===!0||tg(e.nodeValue,r)),e||an(a,!0)}else e=Lo(e).createTextNode(o),e[Re]=a,a.stateNode=e}return kt(a),null;case 31:if(r=a.memoizedState,e===null||e.memoizedState!==null){if(o=yi(a),r!==null){if(e===null){if(!o)throw Error(l(318));if(e=a.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(557));e[Re]=a}else Pn(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;kt(a),e=!1}else r=pu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),e=!0;if(!e)return a.flags&256?(Bs(a),a):(Bs(a),null);if((a.flags&128)!==0)throw Error(l(558))}return kt(a),null;case 13:if(o=a.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=yi(a),o!==null&&o.dehydrated!==null){if(e===null){if(!d)throw Error(l(318));if(d=a.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(l(317));d[Re]=a}else Pn(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;kt(a),d=!1}else d=pu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return a.flags&256?(Bs(a),a):(Bs(a),null)}return Bs(a),(a.flags&128)!==0?(a.lanes=r,a):(r=o!==null,e=e!==null&&e.memoizedState!==null,r&&(o=a.child,d=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(d=o.alternate.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==d&&(o.flags|=2048)),r!==e&&r&&(a.child.flags|=8192),wo(a,a.updateQueue),kt(a),null);case 4:return at(),e===null&&kd(a.stateNode.containerInfo),kt(a),null;case 10:return Ma(a.type),kt(a),null;case 19:if(J(qt),o=a.memoizedState,o===null)return kt(a),null;if(d=(a.flags&128)!==0,f=o.rendering,f===null)if(d)Br(o,!1);else{if(Lt!==0||e!==null&&(e.flags&128)!==0)for(e=a.child;e!==null;){if(f=lo(e),f!==null){for(a.flags|=128,Br(o,!1),e=f.updateQueue,a.updateQueue=e,wo(a,e),a.subtreeFlags=0,e=r,r=a.child;r!==null;)Rm(r,e),r=r.sibling;return me(qt,qt.current&1|2),it&&Da(a,o.treeForkCount),a.child}e=e.sibling}o.tail!==null&&wt()>To&&(a.flags|=128,d=!0,Br(o,!1),a.lanes=4194304)}else{if(!d)if(e=lo(f),e!==null){if(a.flags|=128,d=!0,e=e.updateQueue,a.updateQueue=e,wo(a,e),Br(o,!0),o.tail===null&&o.tailMode==="hidden"&&!f.alternate&&!it)return kt(a),null}else 2*wt()-o.renderingStartTime>To&&r!==536870912&&(a.flags|=128,d=!0,Br(o,!1),a.lanes=4194304);o.isBackwards?(f.sibling=a.child,a.child=f):(e=o.last,e!==null?e.sibling=f:a.child=f,o.last=f)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=wt(),e.sibling=null,r=qt.current,me(qt,d?r&1|2:r&1),it&&Da(a,o.treeForkCount),e):(kt(a),null);case 22:case 23:return Bs(a),Au(),o=a.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(a.flags|=8192):o&&(a.flags|=8192),o?(r&536870912)!==0&&(a.flags&128)===0&&(kt(a),a.subtreeFlags&6&&(a.flags|=8192)):kt(a),r=a.updateQueue,r!==null&&wo(a,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),o=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),o!==r&&(a.flags|=2048),e!==null&&J(Vn),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),a.memoizedState.cache!==r&&(a.flags|=2048),Ma(Ht),kt(a),null;case 25:return null;case 30:return null}throw Error(l(156,a.tag))}function pj(e,a){switch(fu(a),a.tag){case 1:return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 3:return Ma(Ht),at(),e=a.flags,(e&65536)!==0&&(e&128)===0?(a.flags=e&-65537|128,a):null;case 26:case 27:case 5:return zt(a),null;case 31:if(a.memoizedState!==null){if(Bs(a),a.alternate===null)throw Error(l(340));Pn()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 13:if(Bs(a),e=a.memoizedState,e!==null&&e.dehydrated!==null){if(a.alternate===null)throw Error(l(340));Pn()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 19:return J(qt),null;case 4:return at(),null;case 10:return Ma(a.type),null;case 22:case 23:return Bs(a),Au(),e!==null&&J(Vn),e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 24:return Ma(Ht),null;case 25:return null;default:return null}}function r0(e,a){switch(fu(a),a.tag){case 3:Ma(Ht),at();break;case 26:case 27:case 5:zt(a);break;case 4:at();break;case 31:a.memoizedState!==null&&Bs(a);break;case 13:Bs(a);break;case 19:J(qt);break;case 10:Ma(a.type);break;case 22:case 23:Bs(a),Au(),e!==null&&J(Vn);break;case 24:Ma(Ht)}}function zr(e,a){try{var r=a.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var d=o.next;r=d;do{if((r.tag&e)===e){o=void 0;var f=r.create,v=r.inst;o=f(),v.destroy=o}r=r.next}while(r!==d)}}catch(S){dt(a,a.return,S)}}function dn(e,a,r){try{var o=a.updateQueue,d=o!==null?o.lastEffect:null;if(d!==null){var f=d.next;o=f;do{if((o.tag&e)===e){var v=o.inst,S=v.destroy;if(S!==void 0){v.destroy=void 0,d=a;var A=r,V=S;try{V()}catch(W){dt(d,A,W)}}}o=o.next}while(o!==f)}}catch(W){dt(a,a.return,W)}}function l0(e){var a=e.updateQueue;if(a!==null){var r=e.stateNode;try{Jm(a,r)}catch(o){dt(e,e.return,o)}}}function o0(e,a,r){r.props=Kn(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(o){dt(e,a,o)}}function Vr(e,a){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof r=="function"?e.refCleanup=r(o):r.current=o}}catch(d){dt(e,a,d)}}function ba(e,a){var r=e.ref,o=e.refCleanup;if(r!==null)if(typeof o=="function")try{o()}catch(d){dt(e,a,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(d){dt(e,a,d)}else r.current=null}function c0(e){var a=e.type,r=e.memoizedProps,o=e.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":r.autoFocus&&o.focus();break e;case"img":r.src?o.src=r.src:r.srcSet&&(o.srcset=r.srcSet)}}catch(d){dt(e,e.return,d)}}function rd(e,a,r){try{var o=e.stateNode;Pj(o,e.type,r,a),o[Ve]=a}catch(d){dt(e,e.return,d)}}function u0(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&vn(e.type)||e.tag===4}function ld(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||u0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&vn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function od(e,a,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,a?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,a):(a=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,a.appendChild(e),r=r._reactRootContainer,r!=null||a.onclick!==null||(a.onclick=Ca));else if(o!==4&&(o===27&&vn(e.type)&&(r=e.stateNode,a=null),e=e.child,e!==null))for(od(e,a,r),e=e.sibling;e!==null;)od(e,a,r),e=e.sibling}function jo(e,a,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,a?r.insertBefore(e,a):r.appendChild(e);else if(o!==4&&(o===27&&vn(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(jo(e,a,r),e=e.sibling;e!==null;)jo(e,a,r),e=e.sibling}function d0(e){var a=e.stateNode,r=e.memoizedProps;try{for(var o=e.type,d=a.attributes;d.length;)a.removeAttributeNode(d[0]);cs(a,o,r),a[Re]=e,a[Ve]=r}catch(f){dt(e,e.return,f)}}var za=!1,Ft=!1,cd=!1,h0=typeof WeakSet=="function"?WeakSet:Set,es=null;function gj(e,a){if(e=e.containerInfo,Ed=$o,e=Sm(e),su(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var d=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{r.nodeType,f.nodeType}catch{r=null;break e}var v=0,S=-1,A=-1,V=0,W=0,ne=e,$=null;t:for(;;){for(var Q;ne!==r||d!==0&&ne.nodeType!==3||(S=v+d),ne!==f||o!==0&&ne.nodeType!==3||(A=v+o),ne.nodeType===3&&(v+=ne.nodeValue.length),(Q=ne.firstChild)!==null;)$=ne,ne=Q;for(;;){if(ne===e)break t;if($===r&&++V===d&&(S=v),$===f&&++W===o&&(A=v),(Q=ne.nextSibling)!==null)break;ne=$,$=ne.parentNode}ne=Q}r=S===-1||A===-1?null:{start:S,end:A}}else r=null}r=r||{start:0,end:0}}else r=null;for(Od={focusedElem:e,selectionRange:r},$o=!1,es=a;es!==null;)if(a=es,e=a.child,(a.subtreeFlags&1028)!==0&&e!==null)e.return=a,es=e;else for(;es!==null;){switch(a=es,f=a.alternate,e=a.flags,a.tag){case 0:if((e&4)!==0&&(e=a.updateQueue,e=e!==null?e.events:null,e!==null))for(r=0;r<e.length;r++)d=e[r],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,r=a,d=f.memoizedProps,f=f.memoizedState,o=r.stateNode;try{var je=Kn(r.type,d);e=o.getSnapshotBeforeUpdate(je,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(Pe){dt(r,r.return,Pe)}}break;case 3:if((e&1024)!==0){if(e=a.stateNode.containerInfo,r=e.nodeType,r===9)Md(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Md(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=a.sibling,e!==null){e.return=a.return,es=e;break}es=a.return}}function f0(e,a,r){var o=r.flags;switch(r.tag){case 0:case 11:case 15:qa(e,r),o&4&&zr(5,r);break;case 1:if(qa(e,r),o&4)if(e=r.stateNode,a===null)try{e.componentDidMount()}catch(v){dt(r,r.return,v)}else{var d=Kn(r.type,a.memoizedProps);a=a.memoizedState;try{e.componentDidUpdate(d,a,e.__reactInternalSnapshotBeforeUpdate)}catch(v){dt(r,r.return,v)}}o&64&&l0(r),o&512&&Vr(r,r.return);break;case 3:if(qa(e,r),o&64&&(e=r.updateQueue,e!==null)){if(a=null,r.child!==null)switch(r.child.tag){case 27:case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}try{Jm(e,a)}catch(v){dt(r,r.return,v)}}break;case 27:a===null&&o&4&&d0(r);case 26:case 5:qa(e,r),a===null&&o&4&&c0(r),o&512&&Vr(r,r.return);break;case 12:qa(e,r);break;case 31:qa(e,r),o&4&&g0(e,r);break;case 13:qa(e,r),o&4&&x0(e,r),o&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=_j.bind(null,r),Kj(e,r))));break;case 22:if(o=r.memoizedState!==null||za,!o){a=a!==null&&a.memoizedState!==null||Ft,d=za;var f=Ft;za=o,(Ft=a)&&!f?Ia(e,r,(r.subtreeFlags&8772)!==0):qa(e,r),za=d,Ft=f}break;case 30:break;default:qa(e,r)}}function m0(e){var a=e.alternate;a!==null&&(e.alternate=null,m0(a)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(a=e.stateNode,a!==null&&I(a)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var At=null,ks=!1;function Va(e,a,r){for(r=r.child;r!==null;)p0(e,a,r),r=r.sibling}function p0(e,a,r){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(ms,r)}catch{}switch(r.tag){case 26:Ft||ba(r,a),Va(e,a,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Ft||ba(r,a);var o=At,d=ks;vn(r.type)&&(At=r.stateNode,ks=!1),Va(e,a,r),Qr(r.stateNode),At=o,ks=d;break;case 5:Ft||ba(r,a);case 6:if(o=At,d=ks,At=null,Va(e,a,r),At=o,ks=d,At!==null)if(ks)try{(At.nodeType===9?At.body:At.nodeName==="HTML"?At.ownerDocument.body:At).removeChild(r.stateNode)}catch(f){dt(r,a,f)}else try{At.removeChild(r.stateNode)}catch(f){dt(r,a,f)}break;case 18:At!==null&&(ks?(e=At,lg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),qi(e)):lg(At,r.stateNode));break;case 4:o=At,d=ks,At=r.stateNode.containerInfo,ks=!0,Va(e,a,r),At=o,ks=d;break;case 0:case 11:case 14:case 15:dn(2,r,a),Ft||dn(4,r,a),Va(e,a,r);break;case 1:Ft||(ba(r,a),o=r.stateNode,typeof o.componentWillUnmount=="function"&&o0(r,a,o)),Va(e,a,r);break;case 21:Va(e,a,r);break;case 22:Ft=(o=Ft)||r.memoizedState!==null,Va(e,a,r),Ft=o;break;default:Va(e,a,r)}}function g0(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{qi(e)}catch(r){dt(a,a.return,r)}}}function x0(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{qi(e)}catch(r){dt(a,a.return,r)}}function xj(e){switch(e.tag){case 31:case 13:case 19:var a=e.stateNode;return a===null&&(a=e.stateNode=new h0),a;case 22:return e=e.stateNode,a=e._retryCache,a===null&&(a=e._retryCache=new h0),a;default:throw Error(l(435,e.tag))}}function No(e,a){var r=xj(e);a.forEach(function(o){if(!r.has(o)){r.add(o);var d=Tj.bind(null,e,o);o.then(d,d)}})}function As(e,a){var r=a.deletions;if(r!==null)for(var o=0;o<r.length;o++){var d=r[o],f=e,v=a,S=v;e:for(;S!==null;){switch(S.tag){case 27:if(vn(S.type)){At=S.stateNode,ks=!1;break e}break;case 5:At=S.stateNode,ks=!1;break e;case 3:case 4:At=S.stateNode.containerInfo,ks=!0;break e}S=S.return}if(At===null)throw Error(l(160));p0(f,v,d),At=null,ks=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)v0(a,e),a=a.sibling}var oa=null;function v0(e,a){var r=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:As(a,e),Cs(e),o&4&&(dn(3,e,e.return),zr(3,e),dn(5,e,e.return));break;case 1:As(a,e),Cs(e),o&512&&(Ft||r===null||ba(r,r.return)),o&64&&za&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?o:r.concat(o))));break;case 26:var d=oa;if(As(a,e),Cs(e),o&512&&(Ft||r===null||ba(r,r.return)),o&4){var f=r!==null?r.memoizedState:null;if(o=e.memoizedState,r===null)if(o===null)if(e.stateNode===null){e:{o=e.type,r=e.memoizedProps,d=d.ownerDocument||d;t:switch(o){case"title":f=d.getElementsByTagName("title")[0],(!f||f[j]||f[Re]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(o),d.head.insertBefore(f,d.querySelector("head > title"))),cs(f,o,r),f[Re]=e,Xe(f),o=f;break e;case"link":var v=vg("link","href",d).get(o+(r.href||""));if(v){for(var S=0;S<v.length;S++)if(f=v[S],f.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&f.getAttribute("rel")===(r.rel==null?null:r.rel)&&f.getAttribute("title")===(r.title==null?null:r.title)&&f.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){v.splice(S,1);break t}}f=d.createElement(o),cs(f,o,r),d.head.appendChild(f);break;case"meta":if(v=vg("meta","content",d).get(o+(r.content||""))){for(S=0;S<v.length;S++)if(f=v[S],f.getAttribute("content")===(r.content==null?null:""+r.content)&&f.getAttribute("name")===(r.name==null?null:r.name)&&f.getAttribute("property")===(r.property==null?null:r.property)&&f.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&f.getAttribute("charset")===(r.charSet==null?null:r.charSet)){v.splice(S,1);break t}}f=d.createElement(o),cs(f,o,r),d.head.appendChild(f);break;default:throw Error(l(468,o))}f[Re]=e,Xe(f),o=f}e.stateNode=o}else bg(d,e.type,e.stateNode);else e.stateNode=xg(d,o,e.memoizedProps);else f!==o?(f===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):f.count--,o===null?bg(d,e.type,e.stateNode):xg(d,o,e.memoizedProps)):o===null&&e.stateNode!==null&&rd(e,e.memoizedProps,r.memoizedProps)}break;case 27:As(a,e),Cs(e),o&512&&(Ft||r===null||ba(r,r.return)),r!==null&&o&4&&rd(e,e.memoizedProps,r.memoizedProps);break;case 5:if(As(a,e),Cs(e),o&512&&(Ft||r===null||ba(r,r.return)),e.flags&32){d=e.stateNode;try{ui(d,"")}catch(je){dt(e,e.return,je)}}o&4&&e.stateNode!=null&&(d=e.memoizedProps,rd(e,d,r!==null?r.memoizedProps:d)),o&1024&&(cd=!0);break;case 6:if(As(a,e),Cs(e),o&4){if(e.stateNode===null)throw Error(l(162));o=e.memoizedProps,r=e.stateNode;try{r.nodeValue=o}catch(je){dt(e,e.return,je)}}break;case 3:if(zo=null,d=oa,oa=Po(a.containerInfo),As(a,e),oa=d,Cs(e),o&4&&r!==null&&r.memoizedState.isDehydrated)try{qi(a.containerInfo)}catch(je){dt(e,e.return,je)}cd&&(cd=!1,b0(e));break;case 4:o=oa,oa=Po(e.stateNode.containerInfo),As(a,e),Cs(e),oa=o;break;case 12:As(a,e),Cs(e);break;case 31:As(a,e),Cs(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,No(e,o)));break;case 13:As(a,e),Cs(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(_o=wt()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,No(e,o)));break;case 22:d=e.memoizedState!==null;var A=r!==null&&r.memoizedState!==null,V=za,W=Ft;if(za=V||d,Ft=W||A,As(a,e),Ft=W,za=V,Cs(e),o&8192)e:for(a=e.stateNode,a._visibility=d?a._visibility&-2:a._visibility|1,d&&(r===null||A||za||Ft||Gn(e)),r=null,a=e;;){if(a.tag===5||a.tag===26){if(r===null){A=r=a;try{if(f=A.stateNode,d)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{S=A.stateNode;var ne=A.memoizedProps.style,$=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;S.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(je){dt(A,A.return,je)}}}else if(a.tag===6){if(r===null){A=a;try{A.stateNode.nodeValue=d?"":A.memoizedProps}catch(je){dt(A,A.return,je)}}}else if(a.tag===18){if(r===null){A=a;try{var Q=A.stateNode;d?og(Q,!0):og(A.stateNode,!1)}catch(je){dt(A,A.return,je)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===e)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;r===a&&(r=null),a=a.return}r===a&&(r=null),a.sibling.return=a.return,a=a.sibling}o&4&&(o=e.updateQueue,o!==null&&(r=o.retryQueue,r!==null&&(o.retryQueue=null,No(e,r))));break;case 19:As(a,e),Cs(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,No(e,o)));break;case 30:break;case 21:break;default:As(a,e),Cs(e)}}function Cs(e){var a=e.flags;if(a&2){try{for(var r,o=e.return;o!==null;){if(u0(o)){r=o;break}o=o.return}if(r==null)throw Error(l(160));switch(r.tag){case 27:var d=r.stateNode,f=ld(e);jo(e,f,d);break;case 5:var v=r.stateNode;r.flags&32&&(ui(v,""),r.flags&=-33);var S=ld(e);jo(e,S,v);break;case 3:case 4:var A=r.stateNode.containerInfo,V=ld(e);od(e,V,A);break;default:throw Error(l(161))}}catch(W){dt(e,e.return,W)}e.flags&=-3}a&4096&&(e.flags&=-4097)}function b0(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var a=e;b0(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),e=e.sibling}}function qa(e,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)f0(e,a.alternate,a),a=a.sibling}function Gn(e){for(e=e.child;e!==null;){var a=e;switch(a.tag){case 0:case 11:case 14:case 15:dn(4,a,a.return),Gn(a);break;case 1:ba(a,a.return);var r=a.stateNode;typeof r.componentWillUnmount=="function"&&o0(a,a.return,r),Gn(a);break;case 27:Qr(a.stateNode);case 26:case 5:ba(a,a.return),Gn(a);break;case 22:a.memoizedState===null&&Gn(a);break;case 30:Gn(a);break;default:Gn(a)}e=e.sibling}}function Ia(e,a,r){for(r=r&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var o=a.alternate,d=e,f=a,v=f.flags;switch(f.tag){case 0:case 11:case 15:Ia(d,f,r),zr(4,f);break;case 1:if(Ia(d,f,r),o=f,d=o.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(V){dt(o,o.return,V)}if(o=f,d=o.updateQueue,d!==null){var S=o.stateNode;try{var A=d.shared.hiddenCallbacks;if(A!==null)for(d.shared.hiddenCallbacks=null,d=0;d<A.length;d++)Xm(A[d],S)}catch(V){dt(o,o.return,V)}}r&&v&64&&l0(f),Vr(f,f.return);break;case 27:d0(f);case 26:case 5:Ia(d,f,r),r&&o===null&&v&4&&c0(f),Vr(f,f.return);break;case 12:Ia(d,f,r);break;case 31:Ia(d,f,r),r&&v&4&&g0(d,f);break;case 13:Ia(d,f,r),r&&v&4&&x0(d,f);break;case 22:f.memoizedState===null&&Ia(d,f,r),Vr(f,f.return);break;case 30:break;default:Ia(d,f,r)}a=a.sibling}}function ud(e,a){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(e=a.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&Tr(r))}function dd(e,a){e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&Tr(e))}function ca(e,a,r,o){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)y0(e,a,r,o),a=a.sibling}function y0(e,a,r,o){var d=a.flags;switch(a.tag){case 0:case 11:case 15:ca(e,a,r,o),d&2048&&zr(9,a);break;case 1:ca(e,a,r,o);break;case 3:ca(e,a,r,o),d&2048&&(e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&Tr(e)));break;case 12:if(d&2048){ca(e,a,r,o),e=a.stateNode;try{var f=a.memoizedProps,v=f.id,S=f.onPostCommit;typeof S=="function"&&S(v,a.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(A){dt(a,a.return,A)}}else ca(e,a,r,o);break;case 31:ca(e,a,r,o);break;case 13:ca(e,a,r,o);break;case 23:break;case 22:f=a.stateNode,v=a.alternate,a.memoizedState!==null?f._visibility&2?ca(e,a,r,o):qr(e,a):f._visibility&2?ca(e,a,r,o):(f._visibility|=2,Ei(e,a,r,o,(a.subtreeFlags&10256)!==0||!1)),d&2048&&ud(v,a);break;case 24:ca(e,a,r,o),d&2048&&dd(a.alternate,a);break;default:ca(e,a,r,o)}}function Ei(e,a,r,o,d){for(d=d&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var f=e,v=a,S=r,A=o,V=v.flags;switch(v.tag){case 0:case 11:case 15:Ei(f,v,S,A,d),zr(8,v);break;case 23:break;case 22:var W=v.stateNode;v.memoizedState!==null?W._visibility&2?Ei(f,v,S,A,d):qr(f,v):(W._visibility|=2,Ei(f,v,S,A,d)),d&&V&2048&&ud(v.alternate,v);break;case 24:Ei(f,v,S,A,d),d&&V&2048&&dd(v.alternate,v);break;default:Ei(f,v,S,A,d)}a=a.sibling}}function qr(e,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var r=e,o=a,d=o.flags;switch(o.tag){case 22:qr(r,o),d&2048&&ud(o.alternate,o);break;case 24:qr(r,o),d&2048&&dd(o.alternate,o);break;default:qr(r,o)}a=a.sibling}}var Ir=8192;function Oi(e,a,r){if(e.subtreeFlags&Ir)for(e=e.child;e!==null;)w0(e,a,r),e=e.sibling}function w0(e,a,r){switch(e.tag){case 26:Oi(e,a,r),e.flags&Ir&&e.memoizedState!==null&&aN(r,oa,e.memoizedState,e.memoizedProps);break;case 5:Oi(e,a,r);break;case 3:case 4:var o=oa;oa=Po(e.stateNode.containerInfo),Oi(e,a,r),oa=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=Ir,Ir=16777216,Oi(e,a,r),Ir=o):Oi(e,a,r));break;default:Oi(e,a,r)}}function j0(e){var a=e.alternate;if(a!==null&&(e=a.child,e!==null)){a.child=null;do a=e.sibling,e.sibling=null,e=a;while(e!==null)}}function $r(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var o=a[r];es=o,S0(o,e)}j0(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)N0(e),e=e.sibling}function N0(e){switch(e.tag){case 0:case 11:case 15:$r(e),e.flags&2048&&dn(9,e,e.return);break;case 3:$r(e);break;case 12:$r(e);break;case 22:var a=e.stateNode;e.memoizedState!==null&&a._visibility&2&&(e.return===null||e.return.tag!==13)?(a._visibility&=-3,So(e)):$r(e);break;default:$r(e)}}function So(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var o=a[r];es=o,S0(o,e)}j0(e)}for(e=e.child;e!==null;){switch(a=e,a.tag){case 0:case 11:case 15:dn(8,a,a.return),So(a);break;case 22:r=a.stateNode,r._visibility&2&&(r._visibility&=-3,So(a));break;default:So(a)}e=e.sibling}}function S0(e,a){for(;es!==null;){var r=es;switch(r.tag){case 0:case 11:case 15:dn(8,r,a);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var o=r.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Tr(r.memoizedState.cache)}if(o=r.child,o!==null)o.return=r,es=o;else e:for(r=e;es!==null;){o=es;var d=o.sibling,f=o.return;if(m0(o),o===r){es=null;break e}if(d!==null){d.return=f,es=d;break e}es=f}}}var vj={getCacheForType:function(e){var a=ls(Ht),r=a.data.get(e);return r===void 0&&(r=e(),a.data.set(e,r)),r},cacheSignal:function(){return ls(Ht).controller.signal}},bj=typeof WeakMap=="function"?WeakMap:Map,ct=0,bt=null,Je=null,et=0,ut=0,zs=null,hn=!1,Di=!1,hd=!1,$a=0,Lt=0,fn=0,Fn=0,fd=0,Vs=0,Ri=0,Hr=null,Es=null,md=!1,_o=0,_0=0,To=1/0,ko=null,mn=null,Jt=0,pn=null,Mi=null,Ha=0,pd=0,gd=null,T0=null,Kr=0,xd=null;function qs(){return(ct&2)!==0&&et!==0?et&-et:Y.T!==null?Nd():de()}function k0(){if(Vs===0)if((et&536870912)===0||it){var e=_s;_s<<=1,(_s&3932160)===0&&(_s=262144),Vs=e}else Vs=536870912;return e=Ps.current,e!==null&&(e.flags|=32),Vs}function Os(e,a,r){(e===bt&&(ut===2||ut===9)||e.cancelPendingCommit!==null)&&(Ui(e,0),gn(e,et,Vs,!1)),G(e,r),((ct&2)===0||e!==bt)&&(e===bt&&((ct&2)===0&&(Fn|=r),Lt===4&&gn(e,et,Vs,!1)),ya(e))}function A0(e,a,r){if((ct&6)!==0)throw Error(l(327));var o=!r&&(a&127)===0&&(a&e.expiredLanes)===0||K(e,a),d=o?jj(e,a):bd(e,a,!0),f=o;do{if(d===0){Di&&!o&&gn(e,a,0,!1);break}else{if(r=e.current.alternate,f&&!yj(r)){d=bd(e,a,!1),f=!1;continue}if(d===2){if(f=a,e.errorRecoveryDisabledLanes&f)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){a=v;e:{var S=e;d=Hr;var A=S.current.memoizedState.isDehydrated;if(A&&(Ui(S,v).flags|=256),v=bd(S,v,!1),v!==2){if(hd&&!A){S.errorRecoveryDisabledLanes|=f,Fn|=f,d=4;break e}f=Es,Es=d,f!==null&&(Es===null?Es=f:Es.push.apply(Es,f))}d=v}if(f=!1,d!==2)continue}}if(d===1){Ui(e,0),gn(e,a,0,!0);break}e:{switch(o=e,f=d,f){case 0:case 1:throw Error(l(345));case 4:if((a&4194048)!==a)break;case 6:gn(o,a,Vs,!hn);break e;case 2:Es=null;break;case 3:case 5:break;default:throw Error(l(329))}if((a&62914560)===a&&(d=_o+300-wt(),10<d)){if(gn(o,a,Vs,!hn),F(o,0,!0)!==0)break e;Ha=a,o.timeoutHandle=ig(C0.bind(null,o,r,Es,ko,md,a,Vs,Fn,Ri,hn,f,"Throttled",-0,0),d);break e}C0(o,r,Es,ko,md,a,Vs,Fn,Ri,hn,f,null,-0,0)}}break}while(!0);ya(e)}function C0(e,a,r,o,d,f,v,S,A,V,W,ne,$,Q){if(e.timeoutHandle=-1,ne=a.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ca},w0(a,f,ne);var je=(f&62914560)===f?_o-wt():(f&4194048)===f?_0-wt():0;if(je=nN(ne,je),je!==null){Ha=f,e.cancelPendingCommit=je(P0.bind(null,e,a,f,r,o,d,v,S,A,W,ne,null,$,Q)),gn(e,f,v,!V);return}}P0(e,a,f,r,o,d,v,S,A)}function yj(e){for(var a=e;;){var r=a.tag;if((r===0||r===11||r===15)&&a.flags&16384&&(r=a.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var o=0;o<r.length;o++){var d=r[o],f=d.getSnapshot;d=d.value;try{if(!Us(f(),d))return!1}catch{return!1}}if(r=a.child,a.subtreeFlags&16384&&r!==null)r.return=a,a=r;else{if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function gn(e,a,r,o){a&=~fd,a&=~Fn,e.suspendedLanes|=a,e.pingedLanes&=~a,o&&(e.warmLanes|=a),o=e.expirationTimes;for(var d=a;0<d;){var f=31-Rt(d),v=1<<f;o[f]=-1,d&=~v}r!==0&&le(e,r,a)}function Ao(){return(ct&6)===0?(Gr(0),!1):!0}function vd(){if(Je!==null){if(ut===0)var e=Je.return;else e=Je,Ra=Bn=null,Mu(e),_i=null,Ar=0,e=Je;for(;e!==null;)r0(e.alternate,e),e=e.return;Je=null}}function Ui(e,a){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,Vj(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),Ha=0,vd(),bt=e,Je=r=Oa(e.current,null),et=a,ut=0,zs=null,hn=!1,Di=K(e,a),hd=!1,Ri=Vs=fd=Fn=fn=Lt=0,Es=Hr=null,md=!1,(a&8)!==0&&(a|=a&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=a;0<o;){var d=31-Rt(o),f=1<<d;a|=e[d],o&=~f}return $a=a,Yl(),r}function E0(e,a){Ke=null,Y.H=Lr,a===Si||a===so?(a=Gm(),ut=3):a===ju?(a=Gm(),ut=4):ut=a===Xu?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,zs=a,Je===null&&(Lt=1,xo(e,Ys(a,e.current)))}function O0(){var e=Ps.current;return e===null?!0:(et&4194048)===et?Zs===null:(et&62914560)===et||(et&536870912)!==0?e===Zs:!1}function D0(){var e=Y.H;return Y.H=Lr,e===null?Lr:e}function R0(){var e=Y.A;return Y.A=vj,e}function Co(){Lt=4,hn||(et&4194048)!==et&&Ps.current!==null||(Di=!0),(fn&134217727)===0&&(Fn&134217727)===0||bt===null||gn(bt,et,Vs,!1)}function bd(e,a,r){var o=ct;ct|=2;var d=D0(),f=R0();(bt!==e||et!==a)&&(ko=null,Ui(e,a)),a=!1;var v=Lt;e:do try{if(ut!==0&&Je!==null){var S=Je,A=zs;switch(ut){case 8:vd(),v=6;break e;case 3:case 2:case 9:case 6:Ps.current===null&&(a=!0);var V=ut;if(ut=0,zs=null,Li(e,S,A,V),r&&Di){v=0;break e}break;default:V=ut,ut=0,zs=null,Li(e,S,A,V)}}wj(),v=Lt;break}catch(W){E0(e,W)}while(!0);return a&&e.shellSuspendCounter++,Ra=Bn=null,ct=o,Y.H=d,Y.A=f,Je===null&&(bt=null,et=0,Yl()),v}function wj(){for(;Je!==null;)M0(Je)}function jj(e,a){var r=ct;ct|=2;var o=D0(),d=R0();bt!==e||et!==a?(ko=null,To=wt()+500,Ui(e,a)):Di=K(e,a);e:do try{if(ut!==0&&Je!==null){a=Je;var f=zs;t:switch(ut){case 1:ut=0,zs=null,Li(e,a,f,1);break;case 2:case 9:if(Hm(f)){ut=0,zs=null,U0(a);break}a=function(){ut!==2&&ut!==9||bt!==e||(ut=7),ya(e)},f.then(a,a);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:Hm(f)?(ut=0,zs=null,U0(a)):(ut=0,zs=null,Li(e,a,f,7));break;case 5:var v=null;switch(Je.tag){case 26:v=Je.memoizedState;case 5:case 27:var S=Je;if(v?yg(v):S.stateNode.complete){ut=0,zs=null;var A=S.sibling;if(A!==null)Je=A;else{var V=S.return;V!==null?(Je=V,Eo(V)):Je=null}break t}}ut=0,zs=null,Li(e,a,f,5);break;case 6:ut=0,zs=null,Li(e,a,f,6);break;case 8:vd(),Lt=6;break e;default:throw Error(l(462))}}Nj();break}catch(W){E0(e,W)}while(!0);return Ra=Bn=null,Y.H=o,Y.A=d,ct=r,Je!==null?0:(bt=null,et=0,Yl(),Lt)}function Nj(){for(;Je!==null&&!Ye();)M0(Je)}function M0(e){var a=n0(e.alternate,e,$a);e.memoizedProps=e.pendingProps,a===null?Eo(e):Je=a}function U0(e){var a=e,r=a.alternate;switch(a.tag){case 15:case 0:a=Zp(r,a,a.pendingProps,a.type,void 0,et);break;case 11:a=Zp(r,a,a.pendingProps,a.type.render,a.ref,et);break;case 5:Mu(a);default:r0(r,a),a=Je=Rm(a,$a),a=n0(r,a,$a)}e.memoizedProps=e.pendingProps,a===null?Eo(e):Je=a}function Li(e,a,r,o){Ra=Bn=null,Mu(a),_i=null,Ar=0;var d=a.return;try{if(dj(e,d,a,r,et)){Lt=1,xo(e,Ys(r,e.current)),Je=null;return}}catch(f){if(d!==null)throw Je=d,f;Lt=1,xo(e,Ys(r,e.current)),Je=null;return}a.flags&32768?(it||o===1?e=!0:Di||(et&536870912)!==0?e=!1:(hn=e=!0,(o===2||o===9||o===3||o===6)&&(o=Ps.current,o!==null&&o.tag===13&&(o.flags|=16384))),L0(a,e)):Eo(a)}function Eo(e){var a=e;do{if((a.flags&32768)!==0){L0(a,hn);return}e=a.return;var r=mj(a.alternate,a,$a);if(r!==null){Je=r;return}if(a=a.sibling,a!==null){Je=a;return}Je=a=e}while(a!==null);Lt===0&&(Lt=5)}function L0(e,a){do{var r=pj(e.alternate,e);if(r!==null){r.flags&=32767,Je=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!a&&(e=e.sibling,e!==null)){Je=e;return}Je=e=r}while(e!==null);Lt=6,Je=null}function P0(e,a,r,o,d,f,v,S,A){e.cancelPendingCommit=null;do Oo();while(Jt!==0);if((ct&6)!==0)throw Error(l(327));if(a!==null){if(a===e.current)throw Error(l(177));if(f=a.lanes|a.childLanes,f|=lu,X(e,r,f,v,S,A),e===bt&&(Je=bt=null,et=0),Mi=a,pn=e,Ha=r,pd=f,gd=d,T0=o,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,kj(jt,function(){return I0(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||o){o=Y.T,Y.T=null,d=ae.p,ae.p=2,v=ct,ct|=4;try{gj(e,a,r)}finally{ct=v,ae.p=d,Y.T=o}}Jt=1,B0(),z0(),V0()}}function B0(){if(Jt===1){Jt=0;var e=pn,a=Mi,r=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||r){r=Y.T,Y.T=null;var o=ae.p;ae.p=2;var d=ct;ct|=4;try{v0(a,e);var f=Od,v=Sm(e.containerInfo),S=f.focusedElem,A=f.selectionRange;if(v!==S&&S&&S.ownerDocument&&Nm(S.ownerDocument.documentElement,S)){if(A!==null&&su(S)){var V=A.start,W=A.end;if(W===void 0&&(W=V),"selectionStart"in S)S.selectionStart=V,S.selectionEnd=Math.min(W,S.value.length);else{var ne=S.ownerDocument||document,$=ne&&ne.defaultView||window;if($.getSelection){var Q=$.getSelection(),je=S.textContent.length,Pe=Math.min(A.start,je),pt=A.end===void 0?Pe:Math.min(A.end,je);!Q.extend&&Pe>pt&&(v=pt,pt=Pe,Pe=v);var P=jm(S,Pe),R=jm(S,pt);if(P&&R&&(Q.rangeCount!==1||Q.anchorNode!==P.node||Q.anchorOffset!==P.offset||Q.focusNode!==R.node||Q.focusOffset!==R.offset)){var z=ne.createRange();z.setStart(P.node,P.offset),Q.removeAllRanges(),Pe>pt?(Q.addRange(z),Q.extend(R.node,R.offset)):(z.setEnd(R.node,R.offset),Q.addRange(z))}}}}for(ne=[],Q=S;Q=Q.parentNode;)Q.nodeType===1&&ne.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<ne.length;S++){var te=ne[S];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}$o=!!Ed,Od=Ed=null}finally{ct=d,ae.p=o,Y.T=r}}e.current=a,Jt=2}}function z0(){if(Jt===2){Jt=0;var e=pn,a=Mi,r=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||r){r=Y.T,Y.T=null;var o=ae.p;ae.p=2;var d=ct;ct|=4;try{f0(e,a.alternate,a)}finally{ct=d,ae.p=o,Y.T=r}}Jt=3}}function V0(){if(Jt===4||Jt===3){Jt=0,as();var e=pn,a=Mi,r=Ha,o=T0;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Jt=5:(Jt=0,Mi=pn=null,q0(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(mn=null),E(r),a=a.stateNode,Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(ms,a,void 0,(a.current.flags&128)===128)}catch{}if(o!==null){a=Y.T,d=ae.p,ae.p=2,Y.T=null;try{for(var f=e.onRecoverableError,v=0;v<o.length;v++){var S=o[v];f(S.value,{componentStack:S.stack})}}finally{Y.T=a,ae.p=d}}(Ha&3)!==0&&Oo(),ya(e),d=e.pendingLanes,(r&261930)!==0&&(d&42)!==0?e===xd?Kr++:(Kr=0,xd=e):Kr=0,Gr(0)}}function q0(e,a){(e.pooledCacheLanes&=a)===0&&(a=e.pooledCache,a!=null&&(e.pooledCache=null,Tr(a)))}function Oo(){return B0(),z0(),V0(),I0()}function I0(){if(Jt!==5)return!1;var e=pn,a=pd;pd=0;var r=E(Ha),o=Y.T,d=ae.p;try{ae.p=32>r?32:r,Y.T=null,r=gd,gd=null;var f=pn,v=Ha;if(Jt=0,Mi=pn=null,Ha=0,(ct&6)!==0)throw Error(l(331));var S=ct;if(ct|=4,N0(f.current),y0(f,f.current,v,r),ct=S,Gr(0,!1),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(ms,f)}catch{}return!0}finally{ae.p=d,Y.T=o,q0(e,a)}}function $0(e,a,r){a=Ys(r,a),a=Qu(e.stateNode,a,2),e=on(e,a,2),e!==null&&(G(e,2),ya(e))}function dt(e,a,r){if(e.tag===3)$0(e,e,r);else for(;a!==null;){if(a.tag===3){$0(a,e,r);break}else if(a.tag===1){var o=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(mn===null||!mn.has(o))){e=Ys(r,e),r=Hp(2),o=on(a,r,2),o!==null&&(Kp(r,o,a,e),G(o,2),ya(o));break}}a=a.return}}function yd(e,a,r){var o=e.pingCache;if(o===null){o=e.pingCache=new bj;var d=new Set;o.set(a,d)}else d=o.get(a),d===void 0&&(d=new Set,o.set(a,d));d.has(r)||(hd=!0,d.add(r),e=Sj.bind(null,e,a,r),a.then(e,e))}function Sj(e,a,r){var o=e.pingCache;o!==null&&o.delete(a),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,bt===e&&(et&r)===r&&(Lt===4||Lt===3&&(et&62914560)===et&&300>wt()-_o?(ct&2)===0&&Ui(e,0):fd|=r,Ri===et&&(Ri=0)),ya(e)}function H0(e,a){a===0&&(a=y()),e=Un(e,a),e!==null&&(G(e,a),ya(e))}function _j(e){var a=e.memoizedState,r=0;a!==null&&(r=a.retryLane),H0(e,r)}function Tj(e,a){var r=0;switch(e.tag){case 31:case 13:var o=e.stateNode,d=e.memoizedState;d!==null&&(r=d.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(l(314))}o!==null&&o.delete(a),H0(e,r)}function kj(e,a){return ts(e,a)}var Do=null,Pi=null,wd=!1,Ro=!1,jd=!1,xn=0;function ya(e){e!==Pi&&e.next===null&&(Pi===null?Do=Pi=e:Pi=Pi.next=e),Ro=!0,wd||(wd=!0,Cj())}function Gr(e,a){if(!jd&&Ro){jd=!0;do for(var r=!1,o=Do;o!==null;){if(e!==0){var d=o.pendingLanes;if(d===0)var f=0;else{var v=o.suspendedLanes,S=o.pingedLanes;f=(1<<31-Rt(42|e)+1)-1,f&=d&~(v&~S),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(r=!0,Y0(o,f))}else f=et,f=F(o,o===bt?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||K(o,f)||(r=!0,Y0(o,f));o=o.next}while(r);jd=!1}}function Aj(){K0()}function K0(){Ro=wd=!1;var e=0;xn!==0&&zj()&&(e=xn);for(var a=wt(),r=null,o=Do;o!==null;){var d=o.next,f=G0(o,a);f===0?(o.next=null,r===null?Do=d:r.next=d,d===null&&(Pi=r)):(r=o,(e!==0||(f&3)!==0)&&(Ro=!0)),o=d}Jt!==0&&Jt!==5||Gr(e),xn!==0&&(xn=0)}function G0(e,a){for(var r=e.suspendedLanes,o=e.pingedLanes,d=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var v=31-Rt(f),S=1<<v,A=d[v];A===-1?((S&r)===0||(S&o)!==0)&&(d[v]=ee(S,a)):A<=a&&(e.expiredLanes|=S),f&=~S}if(a=bt,r=et,r=F(e,e===a?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,r===0||e===a&&(ut===2||ut===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&ss(o),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||K(e,r)){if(a=r&-r,a===e.callbackPriority)return a;switch(o!==null&&ss(o),E(r)){case 2:case 8:r=_t;break;case 32:r=jt;break;case 268435456:r=Vt;break;default:r=jt}return o=F0.bind(null,e),r=ts(r,o),e.callbackPriority=a,e.callbackNode=r,a}return o!==null&&o!==null&&ss(o),e.callbackPriority=2,e.callbackNode=null,2}function F0(e,a){if(Jt!==0&&Jt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(Oo()&&e.callbackNode!==r)return null;var o=et;return o=F(e,e===bt?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(A0(e,o,a),G0(e,wt()),e.callbackNode!=null&&e.callbackNode===r?F0.bind(null,e):null)}function Y0(e,a){if(Oo())return null;A0(e,a,!0)}function Cj(){qj(function(){(ct&6)!==0?ts(ze,Aj):K0()})}function Nd(){if(xn===0){var e=ji;e===0&&(e=Ms,Ms<<=1,(Ms&261888)===0&&(Ms=256)),xn=e}return xn}function Q0(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Vl(""+e)}function X0(e,a){var r=a.ownerDocument.createElement("input");return r.name=a.name,r.value=a.value,e.id&&r.setAttribute("form",e.id),a.parentNode.insertBefore(r,a),e=new FormData(e),r.parentNode.removeChild(r),e}function Ej(e,a,r,o,d){if(a==="submit"&&r&&r.stateNode===d){var f=Q0((d[Ve]||null).action),v=o.submitter;v&&(a=(a=v[Ve]||null)?Q0(a.formAction):v.getAttribute("formAction"),a!==null&&(f=a,v=null));var S=new Hl("action","action",null,o,d);e.push({event:S,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(xn!==0){var A=v?X0(d,v):new FormData(d);$u(r,{pending:!0,data:A,method:d.method,action:f},null,A)}}else typeof f=="function"&&(S.preventDefault(),A=v?X0(d,v):new FormData(d),$u(r,{pending:!0,data:A,method:d.method,action:f},f,A))},currentTarget:d}]})}}for(var Sd=0;Sd<ru.length;Sd++){var _d=ru[Sd],Oj=_d.toLowerCase(),Dj=_d[0].toUpperCase()+_d.slice(1);la(Oj,"on"+Dj)}la(km,"onAnimationEnd"),la(Am,"onAnimationIteration"),la(Cm,"onAnimationStart"),la("dblclick","onDoubleClick"),la("focusin","onFocus"),la("focusout","onBlur"),la(Yw,"onTransitionRun"),la(Qw,"onTransitionStart"),la(Xw,"onTransitionCancel"),la(Em,"onTransitionEnd"),Wa("onMouseEnter",["mouseout","mouseover"]),Wa("onMouseLeave",["mouseout","mouseover"]),Wa("onPointerEnter",["pointerout","pointerover"]),Wa("onPointerLeave",["pointerout","pointerover"]),ka("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ka("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ka("onBeforeInput",["compositionend","keypress","textInput","paste"]),ka("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ka("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ka("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rj=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fr));function J0(e,a){a=(a&4)!==0;for(var r=0;r<e.length;r++){var o=e[r],d=o.event;o=o.listeners;e:{var f=void 0;if(a)for(var v=o.length-1;0<=v;v--){var S=o[v],A=S.instance,V=S.currentTarget;if(S=S.listener,A!==f&&d.isPropagationStopped())break e;f=S,d.currentTarget=V;try{f(d)}catch(W){Fl(W)}d.currentTarget=null,f=A}else for(v=0;v<o.length;v++){if(S=o[v],A=S.instance,V=S.currentTarget,S=S.listener,A!==f&&d.isPropagationStopped())break e;f=S,d.currentTarget=V;try{f(d)}catch(W){Fl(W)}d.currentTarget=null,f=A}}}}function Ze(e,a){var r=a[Mt];r===void 0&&(r=a[Mt]=new Set);var o=e+"__bubble";r.has(o)||(Z0(a,e,2,!1),r.add(o))}function Td(e,a,r){var o=0;a&&(o|=4),Z0(r,e,o,a)}var Mo="_reactListening"+Math.random().toString(36).slice(2);function kd(e){if(!e[Mo]){e[Mo]=!0,ys.forEach(function(r){r!=="selectionchange"&&(Rj.has(r)||Td(r,!1,e),Td(r,!0,e))});var a=e.nodeType===9?e:e.ownerDocument;a===null||a[Mo]||(a[Mo]=!0,Td("selectionchange",!1,a))}}function Z0(e,a,r,o){switch(kg(a)){case 2:var d=lN;break;case 8:d=oN;break;default:d=Id}r=d.bind(null,a,r,e),d=void 0,!Fc||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(d=!0),o?d!==void 0?e.addEventListener(a,r,{capture:!0,passive:d}):e.addEventListener(a,r,!0):d!==void 0?e.addEventListener(a,r,{passive:d}):e.addEventListener(a,r,!1)}function Ad(e,a,r,o,d){var f=o;if((a&1)===0&&(a&2)===0&&o!==null)e:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var S=o.stateNode.containerInfo;if(S===d)break;if(v===4)for(v=o.return;v!==null;){var A=v.tag;if((A===3||A===4)&&v.stateNode.containerInfo===d)return;v=v.return}for(;S!==null;){if(v=Ae(S),v===null)return;if(A=v.tag,A===5||A===6||A===26||A===27){o=f=v;continue e}S=S.parentNode}}o=o.return}am(function(){var V=f,W=Kc(r),ne=[];e:{var $=Om.get(e);if($!==void 0){var Q=Hl,je=e;switch(e){case"keypress":if(Il(r)===0)break e;case"keydown":case"keyup":Q=Tw;break;case"focusin":je="focus",Q=Jc;break;case"focusout":je="blur",Q=Jc;break;case"beforeblur":case"afterblur":Q=Jc;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=rm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=mw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=Cw;break;case km:case Am:case Cm:Q=xw;break;case Em:Q=Ow;break;case"scroll":case"scrollend":Q=hw;break;case"wheel":Q=Rw;break;case"copy":case"cut":case"paste":Q=bw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=om;break;case"toggle":case"beforetoggle":Q=Uw}var Pe=(a&4)!==0,pt=!Pe&&(e==="scroll"||e==="scrollend"),P=Pe?$!==null?$+"Capture":null:$;Pe=[];for(var R=V,z;R!==null;){var te=R;if(z=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||z===null||P===null||(te=pr(R,P),te!=null&&Pe.push(Yr(R,te,z))),pt)break;R=R.return}0<Pe.length&&($=new Q($,je,null,r,W),ne.push({event:$,listeners:Pe}))}}if((a&7)===0){e:{if($=e==="mouseover"||e==="pointerover",Q=e==="mouseout"||e==="pointerout",$&&r!==Hc&&(je=r.relatedTarget||r.fromElement)&&(Ae(je)||je[Qe]))break e;if((Q||$)&&($=W.window===W?W:($=W.ownerDocument)?$.defaultView||$.parentWindow:window,Q?(je=r.relatedTarget||r.toElement,Q=V,je=je?Ae(je):null,je!==null&&(pt=u(je),Pe=je.tag,je!==pt||Pe!==5&&Pe!==27&&Pe!==6)&&(je=null)):(Q=null,je=V),Q!==je)){if(Pe=rm,te="onMouseLeave",P="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(Pe=om,te="onPointerLeave",P="onPointerEnter",R="pointer"),pt=Q==null?$:rt(Q),z=je==null?$:rt(je),$=new Pe(te,R+"leave",Q,r,W),$.target=pt,$.relatedTarget=z,te=null,Ae(W)===V&&(Pe=new Pe(P,R+"enter",je,r,W),Pe.target=z,Pe.relatedTarget=pt,te=Pe),pt=te,Q&&je)t:{for(Pe=Mj,P=Q,R=je,z=0,te=P;te;te=Pe(te))z++;te=0;for(var Ue=R;Ue;Ue=Pe(Ue))te++;for(;0<z-te;)P=Pe(P),z--;for(;0<te-z;)R=Pe(R),te--;for(;z--;){if(P===R||R!==null&&P===R.alternate){Pe=P;break t}P=Pe(P),R=Pe(R)}Pe=null}else Pe=null;Q!==null&&W0(ne,$,Q,Pe,!1),je!==null&&pt!==null&&W0(ne,pt,je,Pe,!0)}}e:{if($=V?rt(V):window,Q=$.nodeName&&$.nodeName.toLowerCase(),Q==="select"||Q==="input"&&$.type==="file")var lt=gm;else if(mm($))if(xm)lt=Kw;else{lt=$w;var ke=Iw}else Q=$.nodeName,!Q||Q.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?V&&$c(V.elementType)&&(lt=gm):lt=Hw;if(lt&&(lt=lt(e,V))){pm(ne,lt,r,W);break e}ke&&ke(e,$,V),e==="focusout"&&V&&$.type==="number"&&V.memoizedProps.value!=null&&Ic($,"number",$.value)}switch(ke=V?rt(V):window,e){case"focusin":(mm(ke)||ke.contentEditable==="true")&&(mi=ke,au=V,Nr=null);break;case"focusout":Nr=au=mi=null;break;case"mousedown":nu=!0;break;case"contextmenu":case"mouseup":case"dragend":nu=!1,_m(ne,r,W);break;case"selectionchange":if(Fw)break;case"keydown":case"keyup":_m(ne,r,W)}var Ge;if(Wc)e:{switch(e){case"compositionstart":var tt="onCompositionStart";break e;case"compositionend":tt="onCompositionEnd";break e;case"compositionupdate":tt="onCompositionUpdate";break e}tt=void 0}else fi?hm(e,r)&&(tt="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(tt="onCompositionStart");tt&&(cm&&r.locale!=="ko"&&(fi||tt!=="onCompositionStart"?tt==="onCompositionEnd"&&fi&&(Ge=nm()):(en=W,Yc="value"in en?en.value:en.textContent,fi=!0)),ke=Uo(V,tt),0<ke.length&&(tt=new lm(tt,e,null,r,W),ne.push({event:tt,listeners:ke}),Ge?tt.data=Ge:(Ge=fm(r),Ge!==null&&(tt.data=Ge)))),(Ge=Pw?Bw(e,r):zw(e,r))&&(tt=Uo(V,"onBeforeInput"),0<tt.length&&(ke=new lm("onBeforeInput","beforeinput",null,r,W),ne.push({event:ke,listeners:tt}),ke.data=Ge)),Ej(ne,e,V,r,W)}J0(ne,a)})}function Yr(e,a,r){return{instance:e,listener:a,currentTarget:r}}function Uo(e,a){for(var r=a+"Capture",o=[];e!==null;){var d=e,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=pr(e,r),d!=null&&o.unshift(Yr(e,d,f)),d=pr(e,a),d!=null&&o.push(Yr(e,d,f))),e.tag===3)return o;e=e.return}return[]}function Mj(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function W0(e,a,r,o,d){for(var f=a._reactName,v=[];r!==null&&r!==o;){var S=r,A=S.alternate,V=S.stateNode;if(S=S.tag,A!==null&&A===o)break;S!==5&&S!==26&&S!==27||V===null||(A=V,d?(V=pr(r,f),V!=null&&v.unshift(Yr(r,V,A))):d||(V=pr(r,f),V!=null&&v.push(Yr(r,V,A)))),r=r.return}v.length!==0&&e.push({event:a,listeners:v})}var Uj=/\r\n?/g,Lj=/\u0000|\uFFFD/g;function eg(e){return(typeof e=="string"?e:""+e).replace(Uj,`
`).replace(Lj,"")}function tg(e,a){return a=eg(a),eg(e)===a}function mt(e,a,r,o,d,f){switch(r){case"children":typeof o=="string"?a==="body"||a==="textarea"&&o===""||ui(e,o):(typeof o=="number"||typeof o=="bigint")&&a!=="body"&&ui(e,""+o);break;case"className":Bl(e,"class",o);break;case"tabIndex":Bl(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Bl(e,r,o);break;case"style":tm(e,o,f);break;case"data":if(a!=="object"){Bl(e,"data",o);break}case"src":case"href":if(o===""&&(a!=="a"||r!=="href")){e.removeAttribute(r);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(r);break}o=Vl(""+o),e.setAttribute(r,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(r==="formAction"?(a!=="input"&&mt(e,a,"name",d.name,d,null),mt(e,a,"formEncType",d.formEncType,d,null),mt(e,a,"formMethod",d.formMethod,d,null),mt(e,a,"formTarget",d.formTarget,d,null)):(mt(e,a,"encType",d.encType,d,null),mt(e,a,"method",d.method,d,null),mt(e,a,"target",d.target,d,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(r);break}o=Vl(""+o),e.setAttribute(r,o);break;case"onClick":o!=null&&(e.onclick=Ca);break;case"onScroll":o!=null&&Ze("scroll",e);break;case"onScrollEnd":o!=null&&Ze("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(l(61));if(r=o.__html,r!=null){if(d.children!=null)throw Error(l(60));e.innerHTML=r}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}r=Vl(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,""+o):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":o===!0?e.setAttribute(r,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,o):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(r,o):e.removeAttribute(r);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(r):e.setAttribute(r,o);break;case"popover":Ze("beforetoggle",e),Ze("toggle",e),Pl(e,"popover",o);break;case"xlinkActuate":Aa(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Aa(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Aa(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Aa(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Aa(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Aa(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Aa(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Aa(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Aa(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Pl(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=uw.get(r)||r,Pl(e,r,o))}}function Cd(e,a,r,o,d,f){switch(r){case"style":tm(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(l(61));if(r=o.__html,r!=null){if(d.children!=null)throw Error(l(60));e.innerHTML=r}}break;case"children":typeof o=="string"?ui(e,o):(typeof o=="number"||typeof o=="bigint")&&ui(e,""+o);break;case"onScroll":o!=null&&Ze("scroll",e);break;case"onScrollEnd":o!=null&&Ze("scrollend",e);break;case"onClick":o!=null&&(e.onclick=Ca);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ws.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(d=r.endsWith("Capture"),a=r.slice(2,d?r.length-7:void 0),f=e[Ve]||null,f=f!=null?f[r]:null,typeof f=="function"&&e.removeEventListener(a,f,d),typeof o=="function")){typeof f!="function"&&f!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(a,o,d);break e}r in e?e[r]=o:o===!0?e.setAttribute(r,""):Pl(e,r,o)}}}function cs(e,a,r){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ze("error",e),Ze("load",e);var o=!1,d=!1,f;for(f in r)if(r.hasOwnProperty(f)){var v=r[f];if(v!=null)switch(f){case"src":o=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,a));default:mt(e,a,f,v,r,null)}}d&&mt(e,a,"srcSet",r.srcSet,r,null),o&&mt(e,a,"src",r.src,r,null);return;case"input":Ze("invalid",e);var S=f=v=d=null,A=null,V=null;for(o in r)if(r.hasOwnProperty(o)){var W=r[o];if(W!=null)switch(o){case"name":d=W;break;case"type":v=W;break;case"checked":A=W;break;case"defaultChecked":V=W;break;case"value":f=W;break;case"defaultValue":S=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(l(137,a));break;default:mt(e,a,o,W,r,null)}}Jf(e,f,S,A,V,v,d,!1);return;case"select":Ze("invalid",e),o=v=f=null;for(d in r)if(r.hasOwnProperty(d)&&(S=r[d],S!=null))switch(d){case"value":f=S;break;case"defaultValue":v=S;break;case"multiple":o=S;default:mt(e,a,d,S,r,null)}a=f,r=v,e.multiple=!!o,a!=null?ci(e,!!o,a,!1):r!=null&&ci(e,!!o,r,!0);return;case"textarea":Ze("invalid",e),f=d=o=null;for(v in r)if(r.hasOwnProperty(v)&&(S=r[v],S!=null))switch(v){case"value":o=S;break;case"defaultValue":d=S;break;case"children":f=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(l(91));break;default:mt(e,a,v,S,r,null)}Wf(e,o,d,f);return;case"option":for(A in r)if(r.hasOwnProperty(A)&&(o=r[A],o!=null))switch(A){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:mt(e,a,A,o,r,null)}return;case"dialog":Ze("beforetoggle",e),Ze("toggle",e),Ze("cancel",e),Ze("close",e);break;case"iframe":case"object":Ze("load",e);break;case"video":case"audio":for(o=0;o<Fr.length;o++)Ze(Fr[o],e);break;case"image":Ze("error",e),Ze("load",e);break;case"details":Ze("toggle",e);break;case"embed":case"source":case"link":Ze("error",e),Ze("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(V in r)if(r.hasOwnProperty(V)&&(o=r[V],o!=null))switch(V){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,a));default:mt(e,a,V,o,r,null)}return;default:if($c(a)){for(W in r)r.hasOwnProperty(W)&&(o=r[W],o!==void 0&&Cd(e,a,W,o,r,void 0));return}}for(S in r)r.hasOwnProperty(S)&&(o=r[S],o!=null&&mt(e,a,S,o,r,null))}function Pj(e,a,r,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,v=null,S=null,A=null,V=null,W=null;for(Q in r){var ne=r[Q];if(r.hasOwnProperty(Q)&&ne!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":A=ne;default:o.hasOwnProperty(Q)||mt(e,a,Q,null,o,ne)}}for(var $ in o){var Q=o[$];if(ne=r[$],o.hasOwnProperty($)&&(Q!=null||ne!=null))switch($){case"type":f=Q;break;case"name":d=Q;break;case"checked":V=Q;break;case"defaultChecked":W=Q;break;case"value":v=Q;break;case"defaultValue":S=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(l(137,a));break;default:Q!==ne&&mt(e,a,$,Q,o,ne)}}qc(e,v,S,A,V,W,f,d);return;case"select":Q=v=S=$=null;for(f in r)if(A=r[f],r.hasOwnProperty(f)&&A!=null)switch(f){case"value":break;case"multiple":Q=A;default:o.hasOwnProperty(f)||mt(e,a,f,null,o,A)}for(d in o)if(f=o[d],A=r[d],o.hasOwnProperty(d)&&(f!=null||A!=null))switch(d){case"value":$=f;break;case"defaultValue":S=f;break;case"multiple":v=f;default:f!==A&&mt(e,a,d,f,o,A)}a=S,r=v,o=Q,$!=null?ci(e,!!r,$,!1):!!o!=!!r&&(a!=null?ci(e,!!r,a,!0):ci(e,!!r,r?[]:"",!1));return;case"textarea":Q=$=null;for(S in r)if(d=r[S],r.hasOwnProperty(S)&&d!=null&&!o.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:mt(e,a,S,null,o,d)}for(v in o)if(d=o[v],f=r[v],o.hasOwnProperty(v)&&(d!=null||f!=null))switch(v){case"value":$=d;break;case"defaultValue":Q=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(l(91));break;default:d!==f&&mt(e,a,v,d,o,f)}Zf(e,$,Q);return;case"option":for(var je in r)if($=r[je],r.hasOwnProperty(je)&&$!=null&&!o.hasOwnProperty(je))switch(je){case"selected":e.selected=!1;break;default:mt(e,a,je,null,o,$)}for(A in o)if($=o[A],Q=r[A],o.hasOwnProperty(A)&&$!==Q&&($!=null||Q!=null))switch(A){case"selected":e.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:mt(e,a,A,$,o,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pe in r)$=r[Pe],r.hasOwnProperty(Pe)&&$!=null&&!o.hasOwnProperty(Pe)&&mt(e,a,Pe,null,o,$);for(V in o)if($=o[V],Q=r[V],o.hasOwnProperty(V)&&$!==Q&&($!=null||Q!=null))switch(V){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(l(137,a));break;default:mt(e,a,V,$,o,Q)}return;default:if($c(a)){for(var pt in r)$=r[pt],r.hasOwnProperty(pt)&&$!==void 0&&!o.hasOwnProperty(pt)&&Cd(e,a,pt,void 0,o,$);for(W in o)$=o[W],Q=r[W],!o.hasOwnProperty(W)||$===Q||$===void 0&&Q===void 0||Cd(e,a,W,$,o,Q);return}}for(var P in r)$=r[P],r.hasOwnProperty(P)&&$!=null&&!o.hasOwnProperty(P)&&mt(e,a,P,null,o,$);for(ne in o)$=o[ne],Q=r[ne],!o.hasOwnProperty(ne)||$===Q||$==null&&Q==null||mt(e,a,ne,$,o,Q)}function sg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Bj(){if(typeof performance.getEntriesByType=="function"){for(var e=0,a=0,r=performance.getEntriesByType("resource"),o=0;o<r.length;o++){var d=r[o],f=d.transferSize,v=d.initiatorType,S=d.duration;if(f&&S&&sg(v)){for(v=0,S=d.responseEnd,o+=1;o<r.length;o++){var A=r[o],V=A.startTime;if(V>S)break;var W=A.transferSize,ne=A.initiatorType;W&&sg(ne)&&(A=A.responseEnd,v+=W*(A<S?1:(S-V)/(A-V)))}if(--o,a+=8*(f+v)/(d.duration/1e3),e++,10<e)break}}if(0<e)return a/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Ed=null,Od=null;function Lo(e){return e.nodeType===9?e:e.ownerDocument}function ag(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ng(e,a){if(e===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&a==="foreignObject"?0:e}function Dd(e,a){return e==="textarea"||e==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Rd=null;function zj(){var e=window.event;return e&&e.type==="popstate"?e===Rd?!1:(Rd=e,!0):(Rd=null,!1)}var ig=typeof setTimeout=="function"?setTimeout:void 0,Vj=typeof clearTimeout=="function"?clearTimeout:void 0,rg=typeof Promise=="function"?Promise:void 0,qj=typeof queueMicrotask=="function"?queueMicrotask:typeof rg<"u"?function(e){return rg.resolve(null).then(e).catch(Ij)}:ig;function Ij(e){setTimeout(function(){throw e})}function vn(e){return e==="head"}function lg(e,a){var r=a,o=0;do{var d=r.nextSibling;if(e.removeChild(r),d&&d.nodeType===8)if(r=d.data,r==="/$"||r==="/&"){if(o===0){e.removeChild(d),qi(a);return}o--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")o++;else if(r==="html")Qr(e.ownerDocument.documentElement);else if(r==="head"){r=e.ownerDocument.head,Qr(r);for(var f=r.firstChild;f;){var v=f.nextSibling,S=f.nodeName;f[j]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&f.rel.toLowerCase()==="stylesheet"||r.removeChild(f),f=v}}else r==="body"&&Qr(e.ownerDocument.body);r=d}while(r);qi(a)}function og(e,a){var r=e;e=0;do{var o=r.nextSibling;if(r.nodeType===1?a?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(a?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(e===0)break;e--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||e++;r=o}while(r)}function Md(e){var a=e.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var r=a;switch(a=a.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Md(r),I(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function $j(e,a,r,o){for(;e.nodeType===1;){var d=r;if(e.nodeName.toLowerCase()!==a.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[j])switch(a){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(a==="input"&&e.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=Ws(e.nextSibling),e===null)break}return null}function Hj(e,a,r){if(a==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=Ws(e.nextSibling),e===null))return null;return e}function cg(e,a){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Ws(e.nextSibling),e===null))return null;return e}function Ud(e){return e.data==="$?"||e.data==="$~"}function Ld(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Kj(e,a){var r=e.ownerDocument;if(e.data==="$~")e._reactRetry=a;else if(e.data!=="$?"||r.readyState!=="loading")a();else{var o=function(){a(),r.removeEventListener("DOMContentLoaded",o)};r.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function Ws(e){for(;e!=null;e=e.nextSibling){var a=e.nodeType;if(a===1||a===3)break;if(a===8){if(a=e.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return e}var Pd=null;function ug(e){e=e.nextSibling;for(var a=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"||r==="/&"){if(a===0)return Ws(e.nextSibling);a--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||a++}e=e.nextSibling}return null}function dg(e){e=e.previousSibling;for(var a=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(a===0)return e;a--}else r!=="/$"&&r!=="/&"||a++}e=e.previousSibling}return null}function hg(e,a,r){switch(a=Lo(r),e){case"html":if(e=a.documentElement,!e)throw Error(l(452));return e;case"head":if(e=a.head,!e)throw Error(l(453));return e;case"body":if(e=a.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function Qr(e){for(var a=e.attributes;a.length;)e.removeAttributeNode(a[0]);I(e)}var ea=new Map,fg=new Set;function Po(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ka=ae.d;ae.d={f:Gj,r:Fj,D:Yj,C:Qj,L:Xj,m:Jj,X:Wj,S:Zj,M:eN};function Gj(){var e=Ka.f(),a=Ao();return e||a}function Fj(e){var a=_e(e);a!==null&&a.tag===5&&a.type==="form"?Ep(a):Ka.r(e)}var Bi=typeof document>"u"?null:document;function mg(e,a,r){var o=Bi;if(o&&typeof a=="string"&&a){var d=Gs(a);d='link[rel="'+e+'"][href="'+d+'"]',typeof r=="string"&&(d+='[crossorigin="'+r+'"]'),fg.has(d)||(fg.add(d),e={rel:e,crossOrigin:r,href:a},o.querySelector(d)===null&&(a=o.createElement("link"),cs(a,"link",e),Xe(a),o.head.appendChild(a)))}}function Yj(e){Ka.D(e),mg("dns-prefetch",e,null)}function Qj(e,a){Ka.C(e,a),mg("preconnect",e,a)}function Xj(e,a,r){Ka.L(e,a,r);var o=Bi;if(o&&e&&a){var d='link[rel="preload"][as="'+Gs(a)+'"]';a==="image"&&r&&r.imageSrcSet?(d+='[imagesrcset="'+Gs(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(d+='[imagesizes="'+Gs(r.imageSizes)+'"]')):d+='[href="'+Gs(e)+'"]';var f=d;switch(a){case"style":f=zi(e);break;case"script":f=Vi(e)}ea.has(f)||(e=w({rel:"preload",href:a==="image"&&r&&r.imageSrcSet?void 0:e,as:a},r),ea.set(f,e),o.querySelector(d)!==null||a==="style"&&o.querySelector(Xr(f))||a==="script"&&o.querySelector(Jr(f))||(a=o.createElement("link"),cs(a,"link",e),Xe(a),o.head.appendChild(a)))}}function Jj(e,a){Ka.m(e,a);var r=Bi;if(r&&e){var o=a&&typeof a.as=="string"?a.as:"script",d='link[rel="modulepreload"][as="'+Gs(o)+'"][href="'+Gs(e)+'"]',f=d;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Vi(e)}if(!ea.has(f)&&(e=w({rel:"modulepreload",href:e},a),ea.set(f,e),r.querySelector(d)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Jr(f)))return}o=r.createElement("link"),cs(o,"link",e),Xe(o),r.head.appendChild(o)}}}function Zj(e,a,r){Ka.S(e,a,r);var o=Bi;if(o&&e){var d=We(o).hoistableStyles,f=zi(e);a=a||"default";var v=d.get(f);if(!v){var S={loading:0,preload:null};if(v=o.querySelector(Xr(f)))S.loading=5;else{e=w({rel:"stylesheet",href:e,"data-precedence":a},r),(r=ea.get(f))&&Bd(e,r);var A=v=o.createElement("link");Xe(A),cs(A,"link",e),A._p=new Promise(function(V,W){A.onload=V,A.onerror=W}),A.addEventListener("load",function(){S.loading|=1}),A.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Bo(v,a,o)}v={type:"stylesheet",instance:v,count:1,state:S},d.set(f,v)}}}function Wj(e,a){Ka.X(e,a);var r=Bi;if(r&&e){var o=We(r).hoistableScripts,d=Vi(e),f=o.get(d);f||(f=r.querySelector(Jr(d)),f||(e=w({src:e,async:!0},a),(a=ea.get(d))&&zd(e,a),f=r.createElement("script"),Xe(f),cs(f,"link",e),r.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(d,f))}}function eN(e,a){Ka.M(e,a);var r=Bi;if(r&&e){var o=We(r).hoistableScripts,d=Vi(e),f=o.get(d);f||(f=r.querySelector(Jr(d)),f||(e=w({src:e,async:!0,type:"module"},a),(a=ea.get(d))&&zd(e,a),f=r.createElement("script"),Xe(f),cs(f,"link",e),r.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(d,f))}}function pg(e,a,r,o){var d=(d=De.current)?Po(d):null;if(!d)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(a=zi(r.href),r=We(d).hoistableStyles,o=r.get(a),o||(o={type:"style",instance:null,count:0,state:null},r.set(a,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=zi(r.href);var f=We(d).hoistableStyles,v=f.get(e);if(v||(d=d.ownerDocument||d,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,v),(f=d.querySelector(Xr(e)))&&!f._p&&(v.instance=f,v.state.loading=5),ea.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},ea.set(e,r),f||tN(d,e,r,v.state))),a&&o===null)throw Error(l(528,""));return v}if(a&&o!==null)throw Error(l(529,""));return null;case"script":return a=r.async,r=r.src,typeof r=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Vi(r),r=We(d).hoistableScripts,o=r.get(a),o||(o={type:"script",instance:null,count:0,state:null},r.set(a,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function zi(e){return'href="'+Gs(e)+'"'}function Xr(e){return'link[rel="stylesheet"]['+e+"]"}function gg(e){return w({},e,{"data-precedence":e.precedence,precedence:null})}function tN(e,a,r,o){e.querySelector('link[rel="preload"][as="style"]['+a+"]")?o.loading=1:(a=e.createElement("link"),o.preload=a,a.addEventListener("load",function(){return o.loading|=1}),a.addEventListener("error",function(){return o.loading|=2}),cs(a,"link",r),Xe(a),e.head.appendChild(a))}function Vi(e){return'[src="'+Gs(e)+'"]'}function Jr(e){return"script[async]"+e}function xg(e,a,r){if(a.count++,a.instance===null)switch(a.type){case"style":var o=e.querySelector('style[data-href~="'+Gs(r.href)+'"]');if(o)return a.instance=o,Xe(o),o;var d=w({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),Xe(o),cs(o,"style",d),Bo(o,r.precedence,e),a.instance=o;case"stylesheet":d=zi(r.href);var f=e.querySelector(Xr(d));if(f)return a.state.loading|=4,a.instance=f,Xe(f),f;o=gg(r),(d=ea.get(d))&&Bd(o,d),f=(e.ownerDocument||e).createElement("link"),Xe(f);var v=f;return v._p=new Promise(function(S,A){v.onload=S,v.onerror=A}),cs(f,"link",o),a.state.loading|=4,Bo(f,r.precedence,e),a.instance=f;case"script":return f=Vi(r.src),(d=e.querySelector(Jr(f)))?(a.instance=d,Xe(d),d):(o=r,(d=ea.get(f))&&(o=w({},r),zd(o,d)),e=e.ownerDocument||e,d=e.createElement("script"),Xe(d),cs(d,"link",o),e.head.appendChild(d),a.instance=d);case"void":return null;default:throw Error(l(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(o=a.instance,a.state.loading|=4,Bo(o,r.precedence,e));return a.instance}function Bo(e,a,r){for(var o=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=o.length?o[o.length-1]:null,f=d,v=0;v<o.length;v++){var S=o[v];if(S.dataset.precedence===a)f=S;else if(f!==d)break}f?f.parentNode.insertBefore(e,f.nextSibling):(a=r.nodeType===9?r.head:r,a.insertBefore(e,a.firstChild))}function Bd(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.title==null&&(e.title=a.title)}function zd(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.integrity==null&&(e.integrity=a.integrity)}var zo=null;function vg(e,a,r){if(zo===null){var o=new Map,d=zo=new Map;d.set(r,o)}else d=zo,o=d.get(r),o||(o=new Map,d.set(r,o));if(o.has(e))return o;for(o.set(e,null),r=r.getElementsByTagName(e),d=0;d<r.length;d++){var f=r[d];if(!(f[j]||f[Re]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(a)||"";v=e+v;var S=o.get(v);S?S.push(f):o.set(v,[f])}}return o}function bg(e,a,r){e=e.ownerDocument||e,e.head.insertBefore(r,a==="title"?e.querySelector("head > title"):null)}function sN(e,a,r){if(r===1||a.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return e=a.disabled,typeof a.precedence=="string"&&e==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function yg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function aN(e,a,r,o){if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var d=zi(o.href),f=a.querySelector(Xr(d));if(f){a=f._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(e.count++,e=Vo.bind(e),a.then(e,e)),r.state.loading|=4,r.instance=f,Xe(f);return}f=a.ownerDocument||a,o=gg(o),(d=ea.get(d))&&Bd(o,d),f=f.createElement("link"),Xe(f);var v=f;v._p=new Promise(function(S,A){v.onload=S,v.onerror=A}),cs(f,"link",o),r.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(r,a),(a=r.state.preload)&&(r.state.loading&3)===0&&(e.count++,r=Vo.bind(e),a.addEventListener("load",r),a.addEventListener("error",r))}}var Vd=0;function nN(e,a){return e.stylesheets&&e.count===0&&Io(e,e.stylesheets),0<e.count||0<e.imgCount?function(r){var o=setTimeout(function(){if(e.stylesheets&&Io(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+a);0<e.imgBytes&&Vd===0&&(Vd=62500*Bj());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Io(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>Vd?50:800)+a);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(d)}}:null}function Vo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Io(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var qo=null;function Io(e,a){e.stylesheets=null,e.unsuspend!==null&&(e.count++,qo=new Map,a.forEach(iN,e),qo=null,Vo.call(e))}function iN(e,a){if(!(a.state.loading&4)){var r=qo.get(e);if(r)var o=r.get(null);else{r=new Map,qo.set(e,r);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var v=d[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(r.set(v.dataset.precedence,v),o=v)}o&&r.set(null,o)}d=a.instance,v=d.getAttribute("data-precedence"),f=r.get(v)||o,f===o&&r.set(null,d),r.set(v,d),this.count++,o=Vo.bind(this),d.addEventListener("load",o),d.addEventListener("error",o),f?f.parentNode.insertBefore(d,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),a.state.loading|=4}}var Zr={$$typeof:M,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function rN(e,a,r,o,d,f,v,S,A){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=k(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=k(0),this.hiddenUpdates=k(null),this.identifierPrefix=o,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function wg(e,a,r,o,d,f,v,S,A,V,W,ne){return e=new rN(e,a,r,v,A,V,W,ne,S),a=1,f===!0&&(a|=24),f=Ls(3,null,null,a),e.current=f,f.stateNode=e,a=bu(),a.refCount++,e.pooledCache=a,a.refCount++,f.memoizedState={element:o,isDehydrated:r,cache:a},Nu(f),e}function jg(e){return e?(e=xi,e):xi}function Ng(e,a,r,o,d,f){d=jg(d),o.context===null?o.context=d:o.pendingContext=d,o=ln(a),o.payload={element:r},f=f===void 0?null:f,f!==null&&(o.callback=f),r=on(e,o,a),r!==null&&(Os(r,e,a),Er(r,e,a))}function Sg(e,a){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<a?r:a}}function qd(e,a){Sg(e,a),(e=e.alternate)&&Sg(e,a)}function _g(e){if(e.tag===13||e.tag===31){var a=Un(e,67108864);a!==null&&Os(a,e,67108864),qd(e,67108864)}}function Tg(e){if(e.tag===13||e.tag===31){var a=qs();a=b(a);var r=Un(e,a);r!==null&&Os(r,e,a),qd(e,a)}}var $o=!0;function lN(e,a,r,o){var d=Y.T;Y.T=null;var f=ae.p;try{ae.p=2,Id(e,a,r,o)}finally{ae.p=f,Y.T=d}}function oN(e,a,r,o){var d=Y.T;Y.T=null;var f=ae.p;try{ae.p=8,Id(e,a,r,o)}finally{ae.p=f,Y.T=d}}function Id(e,a,r,o){if($o){var d=$d(o);if(d===null)Ad(e,a,o,Ho,r),Ag(e,o);else if(uN(d,e,a,r,o))o.stopPropagation();else if(Ag(e,o),a&4&&-1<cN.indexOf(e)){for(;d!==null;){var f=_e(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=Xt(f.pendingLanes);if(v!==0){var S=f;for(S.pendingLanes|=2,S.entangledLanes|=2;v;){var A=1<<31-Rt(v);S.entanglements[1]|=A,v&=~A}ya(f),(ct&6)===0&&(To=wt()+500,Gr(0))}}break;case 31:case 13:S=Un(f,2),S!==null&&Os(S,f,2),Ao(),qd(f,2)}if(f=$d(o),f===null&&Ad(e,a,o,Ho,r),f===d)break;d=f}d!==null&&o.stopPropagation()}else Ad(e,a,o,null,r)}}function $d(e){return e=Kc(e),Hd(e)}var Ho=null;function Hd(e){if(Ho=null,e=Ae(e),e!==null){var a=u(e);if(a===null)e=null;else{var r=a.tag;if(r===13){if(e=h(a),e!==null)return e;e=null}else if(r===31){if(e=m(a),e!==null)return e;e=null}else if(r===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;e=null}else a!==e&&(e=null)}}return Ho=e,null}function kg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(na()){case ze:return 2;case _t:return 8;case jt:case bs:return 32;case Vt:return 268435456;default:return 32}default:return 32}}var Kd=!1,bn=null,yn=null,wn=null,Wr=new Map,el=new Map,jn=[],cN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ag(e,a){switch(e){case"focusin":case"focusout":bn=null;break;case"dragenter":case"dragleave":yn=null;break;case"mouseover":case"mouseout":wn=null;break;case"pointerover":case"pointerout":Wr.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":el.delete(a.pointerId)}}function tl(e,a,r,o,d,f){return e===null||e.nativeEvent!==f?(e={blockedOn:a,domEventName:r,eventSystemFlags:o,nativeEvent:f,targetContainers:[d]},a!==null&&(a=_e(a),a!==null&&_g(a)),e):(e.eventSystemFlags|=o,a=e.targetContainers,d!==null&&a.indexOf(d)===-1&&a.push(d),e)}function uN(e,a,r,o,d){switch(a){case"focusin":return bn=tl(bn,e,a,r,o,d),!0;case"dragenter":return yn=tl(yn,e,a,r,o,d),!0;case"mouseover":return wn=tl(wn,e,a,r,o,d),!0;case"pointerover":var f=d.pointerId;return Wr.set(f,tl(Wr.get(f)||null,e,a,r,o,d)),!0;case"gotpointercapture":return f=d.pointerId,el.set(f,tl(el.get(f)||null,e,a,r,o,d)),!0}return!1}function Cg(e){var a=Ae(e.target);if(a!==null){var r=u(a);if(r!==null){if(a=r.tag,a===13){if(a=h(r),a!==null){e.blockedOn=a,we(e.priority,function(){Tg(r)});return}}else if(a===31){if(a=m(r),a!==null){e.blockedOn=a,we(e.priority,function(){Tg(r)});return}}else if(a===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ko(e){if(e.blockedOn!==null)return!1;for(var a=e.targetContainers;0<a.length;){var r=$d(e.nativeEvent);if(r===null){r=e.nativeEvent;var o=new r.constructor(r.type,r);Hc=o,r.target.dispatchEvent(o),Hc=null}else return a=_e(r),a!==null&&_g(a),e.blockedOn=r,!1;a.shift()}return!0}function Eg(e,a,r){Ko(e)&&r.delete(a)}function dN(){Kd=!1,bn!==null&&Ko(bn)&&(bn=null),yn!==null&&Ko(yn)&&(yn=null),wn!==null&&Ko(wn)&&(wn=null),Wr.forEach(Eg),el.forEach(Eg)}function Go(e,a){e.blockedOn===a&&(e.blockedOn=null,Kd||(Kd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,dN)))}var Fo=null;function Og(e){Fo!==e&&(Fo=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Fo===e&&(Fo=null);for(var a=0;a<e.length;a+=3){var r=e[a],o=e[a+1],d=e[a+2];if(typeof o!="function"){if(Hd(o||r)===null)continue;break}var f=_e(r);f!==null&&(e.splice(a,3),a-=3,$u(f,{pending:!0,data:d,method:r.method,action:o},o,d))}}))}function qi(e){function a(A){return Go(A,e)}bn!==null&&Go(bn,e),yn!==null&&Go(yn,e),wn!==null&&Go(wn,e),Wr.forEach(a),el.forEach(a);for(var r=0;r<jn.length;r++){var o=jn[r];o.blockedOn===e&&(o.blockedOn=null)}for(;0<jn.length&&(r=jn[0],r.blockedOn===null);)Cg(r),r.blockedOn===null&&jn.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(o=0;o<r.length;o+=3){var d=r[o],f=r[o+1],v=d[Ve]||null;if(typeof f=="function")v||Og(r);else if(v){var S=null;if(f&&f.hasAttribute("formAction")){if(d=f,v=f[Ve]||null)S=v.formAction;else if(Hd(d)!==null)continue}else S=v.action;typeof S=="function"?r[o+1]=S:(r.splice(o,3),o-=3),Og(r)}}}function Dg(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(v){return d=v})},focusReset:"manual",scroll:"manual"})}function a(){d!==null&&(d(),d=null),o||setTimeout(r,20)}function r(){if(!o&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(r,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),d!==null&&(d(),d=null)}}}function Gd(e){this._internalRoot=e}Yo.prototype.render=Gd.prototype.render=function(e){var a=this._internalRoot;if(a===null)throw Error(l(409));var r=a.current,o=qs();Ng(r,o,e,a,null,null)},Yo.prototype.unmount=Gd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var a=e.containerInfo;Ng(e.current,2,null,e,null,null),Ao(),a[Qe]=null}};function Yo(e){this._internalRoot=e}Yo.prototype.unstable_scheduleHydration=function(e){if(e){var a=de();e={blockedOn:null,target:e,priority:a};for(var r=0;r<jn.length&&a!==0&&a<jn[r].priority;r++);jn.splice(r,0,e),r===0&&Cg(e)}};var Rg=t.version;if(Rg!=="19.2.4")throw Error(l(527,Rg,"19.2.4"));ae.findDOMNode=function(e){var a=e._reactInternals;if(a===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=g(a),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var hN={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qo.isDisabled&&Qo.supportsFiber)try{ms=Qo.inject(hN),Dt=Qo}catch{}}return al.createRoot=function(e,a){if(!c(e))throw Error(l(299));var r=!1,o="",d=Vp,f=qp,v=Ip;return a!=null&&(a.unstable_strictMode===!0&&(r=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(f=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),a=wg(e,1,!1,null,null,r,o,null,d,f,v,Dg),e[Qe]=a.current,kd(e),new Gd(a)},al.hydrateRoot=function(e,a,r){if(!c(e))throw Error(l(299));var o=!1,d="",f=Vp,v=qp,S=Ip,A=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(S=r.onRecoverableError),r.formState!==void 0&&(A=r.formState)),a=wg(e,1,!0,a,r??null,o,d,A,f,v,S,Dg),a.context=jg(null),r=a.current,o=qs(),o=b(o),d=ln(o),d.callback=null,on(r,d,o),r=o,a.current.lanes=r,G(a,r),ya(a),e[Qe]=a.current,kd(e),new Yo(a)},al.version="19.2.4",al}var $g;function NN(){if($g)return Qd.exports;$g=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Qd.exports=jN(),Qd.exports}var SN=NN();function Oc(s,t){var i={};for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&t.indexOf(l)<0&&(i[l]=s[l]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,l=Object.getOwnPropertySymbols(s);c<l.length;c++)t.indexOf(l[c])<0&&Object.prototype.propertyIsEnumerable.call(s,l[c])&&(i[l[c]]=s[l[c]]);return i}function _N(s,t,i,l){function c(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function m(x){try{g(l.next(x))}catch(w){h(w)}}function p(x){try{g(l.throw(x))}catch(w){h(w)}}function g(x){x.done?u(x.value):c(x.value).then(m,p)}g((l=l.apply(s,t||[])).next())})}const TN=s=>s?(...t)=>s(...t):(...t)=>fetch(...t);class hf extends Error{constructor(t,i="FunctionsError",l){super(t),this.name=i,this.context=l}}class kN extends hf{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Hg extends hf{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Kg extends hf{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Ch;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(Ch||(Ch={}));class AN{constructor(t,{headers:i={},customFetch:l,region:c=Ch.Any}={}){this.url=t,this.headers=i,this.region=c,this.fetch=TN(l)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return _N(this,arguments,void 0,function*(i,l={}){var c;let u,h;try{const{headers:m,method:p,body:g,signal:x,timeout:w}=l;let N={},{region:_}=l;_||(_=this.region);const T=new URL(`${this.url}/${i}`);_&&_!=="any"&&(N["x-region"]=_,T.searchParams.set("forceFunctionRegion",_));let U;g&&(m&&!Object.prototype.hasOwnProperty.call(m,"Content-Type")||!m)?typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(N["Content-Type"]="application/octet-stream",U=g):typeof g=="string"?(N["Content-Type"]="text/plain",U=g):typeof FormData<"u"&&g instanceof FormData?U=g:(N["Content-Type"]="application/json",U=JSON.stringify(g)):g&&typeof g!="string"&&!(typeof Blob<"u"&&g instanceof Blob)&&!(g instanceof ArrayBuffer)&&!(typeof FormData<"u"&&g instanceof FormData)?U=JSON.stringify(g):U=g;let O=x;w&&(h=new AbortController,u=setTimeout(()=>h.abort(),w),x?(O=h.signal,x.addEventListener("abort",()=>h.abort())):O=h.signal);const L=yield this.fetch(T.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},N),this.headers),m),body:U,signal:O}).catch(ue=>{throw new kN(ue)}),D=L.headers.get("x-relay-error");if(D&&D==="true")throw new Hg(L);if(!L.ok)throw new Kg(L);let M=((c=L.headers.get("Content-Type"))!==null&&c!==void 0?c:"text/plain").split(";")[0].trim(),ie;return M==="application/json"?ie=yield L.json():M==="application/octet-stream"||M==="application/pdf"?ie=yield L.blob():M==="text/event-stream"?ie=L:M==="multipart/form-data"?ie=yield L.formData():ie=yield L.text(),{data:ie,error:null,response:L}}catch(m){return{data:null,error:m,response:m instanceof Kg||m instanceof Hg?m.context:void 0}}finally{u&&clearTimeout(u)}})}}var CN=class extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}},EN=class{constructor(s){var t,i,l;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(t=s.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=s.signal,this.isMaybeSingle=(i=s.isMaybeSingle)!==null&&i!==void 0?i:!1,this.urlLengthLimit=(l=s.urlLengthLimit)!==null&&l!==void 0?l:8e3,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,t){return this.headers=new Headers(this.headers),this.headers.set(s,t),this}then(s,t){var i=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let c=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{let h=null,m=null,p=null,g=u.status,x=u.statusText;if(u.ok){var w,N;if(i.method!=="HEAD"){var _;const L=await u.text();L===""||(i.headers.get("Accept")==="text/csv"||i.headers.get("Accept")&&(!((_=i.headers.get("Accept"))===null||_===void 0)&&_.includes("application/vnd.pgrst.plan+text"))?m=L:m=JSON.parse(L))}const U=(w=i.headers.get("Prefer"))===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),O=(N=u.headers.get("content-range"))===null||N===void 0?void 0:N.split("/");U&&O&&O.length>1&&(p=parseInt(O[1])),i.isMaybeSingle&&i.method==="GET"&&Array.isArray(m)&&(m.length>1?(h={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,p=null,g=406,x="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{var T;const U=await u.text();try{h=JSON.parse(U),Array.isArray(h)&&u.status===404&&(m=[],h=null,g=200,x="OK")}catch{u.status===404&&U===""?(g=204,x="No Content"):h={message:U}}if(h&&i.isMaybeSingle&&(!(h==null||(T=h.details)===null||T===void 0)&&T.includes("0 rows"))&&(h=null,g=200,x="OK"),h&&i.shouldThrowOnError)throw new CN(h)}return{error:h,data:m,count:p,status:g,statusText:x}});return this.shouldThrowOnError||(c=c.catch(u=>{var h;let m="",p="",g="";const x=u==null?void 0:u.cause;if(x){var w,N,_,T;const L=(w=x==null?void 0:x.message)!==null&&w!==void 0?w:"",D=(N=x==null?void 0:x.code)!==null&&N!==void 0?N:"";m=`${(_=u==null?void 0:u.name)!==null&&_!==void 0?_:"FetchError"}: ${u==null?void 0:u.message}`,m+=`

Caused by: ${(T=x==null?void 0:x.name)!==null&&T!==void 0?T:"Error"}: ${L}`,D&&(m+=` (${D})`),x!=null&&x.stack&&(m+=`
${x.stack}`)}else{var U;m=(U=u==null?void 0:u.stack)!==null&&U!==void 0?U:""}const O=this.url.toString().length;return(u==null?void 0:u.name)==="AbortError"||(u==null?void 0:u.code)==="ABORT_ERR"?(g="",p="Request was aborted (timeout or manual cancellation)",O>this.urlLengthLimit&&(p+=`. Note: Your request URL is ${O} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((x==null?void 0:x.name)==="HeadersOverflowError"||(x==null?void 0:x.code)==="UND_ERR_HEADERS_OVERFLOW")&&(g="",p="HTTP headers exceeded server limits (typically 16KB)",O>this.urlLengthLimit&&(p+=`. Your request URL is ${O} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(h=u==null?void 0:u.name)!==null&&h!==void 0?h:"FetchError"}: ${u==null?void 0:u.message}`,details:m,hint:p,code:g},data:null,count:null,status:0,statusText:""}})),c.then(s,t)}returns(){return this}overrideTypes(){return this}},ON=class extends EN{select(s){let t=!1;const i=(s??"*").split("").map(l=>/\s/.test(l)&&!t?"":(l==='"'&&(t=!t),l)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:t=!0,nullsFirst:i,foreignTable:l,referencedTable:c=l}={}){const u=c?`${c}.order`:"order",h=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${h?`${h},`:""}${s}.${t?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:t,referencedTable:i=t}={}){const l=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(l,`${s}`),this}range(s,t,{foreignTable:i,referencedTable:l=i}={}){const c=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${s}`),this.url.searchParams.set(u,`${t-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:t=!1,settings:i=!1,buffers:l=!1,wal:c=!1,format:u="text"}={}){var h;const m=[s?"analyze":null,t?"verbose":null,i?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),p=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${p}"; options=${m};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};const Gg=new RegExp("[,()]");var Yi=class extends ON{eq(s,t){return this.url.searchParams.append(s,`eq.${t}`),this}neq(s,t){return this.url.searchParams.append(s,`neq.${t}`),this}gt(s,t){return this.url.searchParams.append(s,`gt.${t}`),this}gte(s,t){return this.url.searchParams.append(s,`gte.${t}`),this}lt(s,t){return this.url.searchParams.append(s,`lt.${t}`),this}lte(s,t){return this.url.searchParams.append(s,`lte.${t}`),this}like(s,t){return this.url.searchParams.append(s,`like.${t}`),this}likeAllOf(s,t){return this.url.searchParams.append(s,`like(all).{${t.join(",")}}`),this}likeAnyOf(s,t){return this.url.searchParams.append(s,`like(any).{${t.join(",")}}`),this}ilike(s,t){return this.url.searchParams.append(s,`ilike.${t}`),this}ilikeAllOf(s,t){return this.url.searchParams.append(s,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(s,t){return this.url.searchParams.append(s,`ilike(any).{${t.join(",")}}`),this}regexMatch(s,t){return this.url.searchParams.append(s,`match.${t}`),this}regexIMatch(s,t){return this.url.searchParams.append(s,`imatch.${t}`),this}is(s,t){return this.url.searchParams.append(s,`is.${t}`),this}isDistinct(s,t){return this.url.searchParams.append(s,`isdistinct.${t}`),this}in(s,t){const i=Array.from(new Set(t)).map(l=>typeof l=="string"&&Gg.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(s,`in.(${i})`),this}notIn(s,t){const i=Array.from(new Set(t)).map(l=>typeof l=="string"&&Gg.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(s,`not.in.(${i})`),this}contains(s,t){return typeof t=="string"?this.url.searchParams.append(s,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(s,`cs.{${t.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(t)}`),this}containedBy(s,t){return typeof t=="string"?this.url.searchParams.append(s,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(s,`cd.{${t.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(t)}`),this}rangeGt(s,t){return this.url.searchParams.append(s,`sr.${t}`),this}rangeGte(s,t){return this.url.searchParams.append(s,`nxl.${t}`),this}rangeLt(s,t){return this.url.searchParams.append(s,`sl.${t}`),this}rangeLte(s,t){return this.url.searchParams.append(s,`nxr.${t}`),this}rangeAdjacent(s,t){return this.url.searchParams.append(s,`adj.${t}`),this}overlaps(s,t){return typeof t=="string"?this.url.searchParams.append(s,`ov.${t}`):this.url.searchParams.append(s,`ov.{${t.join(",")}}`),this}textSearch(s,t,{config:i,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const u=i===void 0?"":`(${i})`;return this.url.searchParams.append(s,`${c}fts${u}.${t}`),this}match(s){return Object.entries(s).forEach(([t,i])=>{this.url.searchParams.append(t,`eq.${i}`)}),this}not(s,t,i){return this.url.searchParams.append(s,`not.${t}.${i}`),this}or(s,{foreignTable:t,referencedTable:i=t}={}){const l=i?`${i}.or`:"or";return this.url.searchParams.append(l,`(${s})`),this}filter(s,t,i){return this.url.searchParams.append(s,`${t}.${i}`),this}},DN=class{constructor(s,{headers:t={},schema:i,fetch:l,urlLengthLimit:c=8e3}){this.url=s,this.headers=new Headers(t),this.schema=i,this.fetch=l,this.urlLengthLimit=c}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(s,t){const{head:i=!1,count:l}=t??{},c=i?"HEAD":"GET";let u=!1;const h=(s??"*").split("").map(g=>/\s/.test(g)&&!u?"":(g==='"'&&(u=!u),g)).join(""),{url:m,headers:p}=this.cloneRequestState();return m.searchParams.set("select",h),l&&p.append("Prefer",`count=${l}`),new Yi({method:c,url:m,headers:p,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(s,{count:t,defaultToNull:i=!0}={}){var l;const c="POST",{url:u,headers:h}=this.cloneRequestState();if(t&&h.append("Prefer",`count=${t}`),i||h.append("Prefer","missing=default"),Array.isArray(s)){const m=s.reduce((p,g)=>p.concat(Object.keys(g)),[]);if(m.length>0){const p=[...new Set(m)].map(g=>`"${g}"`);u.searchParams.set("columns",p.join(","))}}return new Yi({method:c,url:u,headers:h,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(s,{onConflict:t,ignoreDuplicates:i=!1,count:l,defaultToNull:c=!0}={}){var u;const h="POST",{url:m,headers:p}=this.cloneRequestState();if(p.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),t!==void 0&&m.searchParams.set("on_conflict",t),l&&p.append("Prefer",`count=${l}`),c||p.append("Prefer","missing=default"),Array.isArray(s)){const g=s.reduce((x,w)=>x.concat(Object.keys(w)),[]);if(g.length>0){const x=[...new Set(g)].map(w=>`"${w}"`);m.searchParams.set("columns",x.join(","))}}return new Yi({method:h,url:m,headers:p,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch,urlLengthLimit:this.urlLengthLimit})}update(s,{count:t}={}){var i;const l="PATCH",{url:c,headers:u}=this.cloneRequestState();return t&&u.append("Prefer",`count=${t}`),new Yi({method:l,url:c,headers:u,schema:this.schema,body:s,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:s}={}){var t;const i="DELETE",{url:l,headers:c}=this.cloneRequestState();return s&&c.append("Prefer",`count=${s}`),new Yi({method:i,url:l,headers:c,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}};function pl(s){"@babel/helpers - typeof";return pl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pl(s)}function RN(s,t){if(pl(s)!="object"||!s)return s;var i=s[Symbol.toPrimitive];if(i!==void 0){var l=i.call(s,t);if(pl(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function MN(s){var t=RN(s,"string");return pl(t)=="symbol"?t:t+""}function UN(s,t,i){return(t=MN(t))in s?Object.defineProperty(s,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[t]=i,s}function Fg(s,t){var i=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);t&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),i.push.apply(i,l)}return i}function Xo(s){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Fg(Object(i),!0).forEach(function(l){UN(s,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(i)):Fg(Object(i)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(i,l))})}return s}var LN=class Xv{constructor(t,{headers:i={},schema:l,fetch:c,timeout:u,urlLengthLimit:h=8e3}={}){this.url=t,this.headers=new Headers(i),this.schemaName=l,this.urlLengthLimit=h;const m=c??globalThis.fetch;u!==void 0&&u>0?this.fetch=(p,g)=>{const x=new AbortController,w=setTimeout(()=>x.abort(),u),N=g==null?void 0:g.signal;if(N){if(N.aborted)return clearTimeout(w),m(p,g);const _=()=>{clearTimeout(w),x.abort()};return N.addEventListener("abort",_,{once:!0}),m(p,Xo(Xo({},g),{},{signal:x.signal})).finally(()=>{clearTimeout(w),N.removeEventListener("abort",_)})}return m(p,Xo(Xo({},g),{},{signal:x.signal})).finally(()=>clearTimeout(w))}:this.fetch=m}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new DN(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(t){return new Xv(this.url,{headers:this.headers,schema:t,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(t,i={},{head:l=!1,get:c=!1,count:u}={}){var h;let m;const p=new URL(`${this.url}/rpc/${t}`);let g;const x=_=>_!==null&&typeof _=="object"&&(!Array.isArray(_)||_.some(x)),w=l&&Object.values(i).some(x);w?(m="POST",g=i):l||c?(m=l?"HEAD":"GET",Object.entries(i).filter(([_,T])=>T!==void 0).map(([_,T])=>[_,Array.isArray(T)?`{${T.join(",")}}`:`${T}`]).forEach(([_,T])=>{p.searchParams.append(_,T)})):(m="POST",g=i);const N=new Headers(this.headers);return w?N.set("Prefer",u?`count=${u},return=minimal`:"return=minimal"):u&&N.set("Prefer",`count=${u}`),new Yi({method:m,url:p,headers:N,schema:this.schemaName,body:g,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch,urlLengthLimit:this.urlLengthLimit})}};class PN{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const i=globalThis.process;if(i){const l=i.versions;if(l&&l.node){const c=l.node,u=parseInt(c.replace(/^v/,"").split(".")[0]);return u>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${u} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${u} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let i=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(i+=`

Suggested solution: ${t.workaround}`),new Error(i)}static createWebSocket(t,i){const l=this.getWebSocketConstructor();return new l(t,i)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const BN="2.95.3",zN=`realtime-js/${BN}`,VN="1.0.0",Jv="2.0.0",Yg=Jv,Eh=1e4,qN=1e3,IN=100;var Tn;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Tn||(Tn={}));var Zt;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(Zt||(Zt={}));var ma;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(ma||(ma={}));var Oh;(function(s){s.websocket="websocket"})(Oh||(Oh={}));var Wn;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(Wn||(Wn={}));class $N{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,i){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return i(this._binaryEncodeUserBroadcastPush(t));let l=[t.join_ref,t.ref,t.topic,t.event,t.payload];return i(JSON.stringify(l))}_binaryEncodeUserBroadcastPush(t){var i;return this._isArrayBuffer((i=t.payload)===null||i===void 0?void 0:i.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var i,l;const c=(l=(i=t.payload)===null||i===void 0?void 0:i.payload)!==null&&l!==void 0?l:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,c)}_encodeJsonUserBroadcastPush(t){var i,l;const c=(l=(i=t.payload)===null||i===void 0?void 0:i.payload)!==null&&l!==void 0?l:{},h=new TextEncoder().encode(JSON.stringify(c)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,h)}_encodeUserBroadcastPush(t,i,l){var c,u;const h=t.topic,m=(c=t.ref)!==null&&c!==void 0?c:"",p=(u=t.join_ref)!==null&&u!==void 0?u:"",g=t.payload.event,x=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},w=Object.keys(x).length===0?"":JSON.stringify(x);if(p.length>255)throw new Error(`joinRef length ${p.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`ref length ${m.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`topic length ${h.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`userEvent length ${g.length} exceeds maximum of 255`);if(w.length>255)throw new Error(`metadata length ${w.length} exceeds maximum of 255`);const N=this.USER_BROADCAST_PUSH_META_LENGTH+p.length+m.length+h.length+g.length+w.length,_=new ArrayBuffer(this.HEADER_LENGTH+N);let T=new DataView(_),U=0;T.setUint8(U++,this.KINDS.userBroadcastPush),T.setUint8(U++,p.length),T.setUint8(U++,m.length),T.setUint8(U++,h.length),T.setUint8(U++,g.length),T.setUint8(U++,w.length),T.setUint8(U++,i),Array.from(p,L=>T.setUint8(U++,L.charCodeAt(0))),Array.from(m,L=>T.setUint8(U++,L.charCodeAt(0))),Array.from(h,L=>T.setUint8(U++,L.charCodeAt(0))),Array.from(g,L=>T.setUint8(U++,L.charCodeAt(0))),Array.from(w,L=>T.setUint8(U++,L.charCodeAt(0)));var O=new Uint8Array(_.byteLength+l.byteLength);return O.set(new Uint8Array(_),0),O.set(new Uint8Array(l),_.byteLength),O.buffer}decode(t,i){if(this._isArrayBuffer(t)){let l=this._binaryDecode(t);return i(l)}if(typeof t=="string"){const l=JSON.parse(t),[c,u,h,m,p]=l;return i({join_ref:c,ref:u,topic:h,event:m,payload:p})}return i({})}_binaryDecode(t){const i=new DataView(t),l=i.getUint8(0),c=new TextDecoder;switch(l){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,i,c)}}_decodeUserBroadcast(t,i,l){const c=i.getUint8(1),u=i.getUint8(2),h=i.getUint8(3),m=i.getUint8(4);let p=this.HEADER_LENGTH+4;const g=l.decode(t.slice(p,p+c));p=p+c;const x=l.decode(t.slice(p,p+u));p=p+u;const w=l.decode(t.slice(p,p+h));p=p+h;const N=t.slice(p,t.byteLength),_=m===this.JSON_ENCODING?JSON.parse(l.decode(N)):N,T={type:this.BROADCAST_EVENT,event:x,payload:_};return h>0&&(T.meta=JSON.parse(w)),{join_ref:null,ref:null,topic:g,event:this.BROADCAST_EVENT,payload:T}}_isArrayBuffer(t){var i;return t instanceof ArrayBuffer||((i=t==null?void 0:t.constructor)===null||i===void 0?void 0:i.name)==="ArrayBuffer"}_pick(t,i){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([l])=>i.includes(l)))}}let Zv=class{constructor(t,i){this.callback=t,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var Nt;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(Nt||(Nt={}));const Qg=(s,t,i={})=>{var l;const c=(l=i.skipTypes)!==null&&l!==void 0?l:[];return t?Object.keys(t).reduce((u,h)=>(u[h]=HN(h,s,t,c),u),{}):{}},HN=(s,t,i,l)=>{const c=t.find(m=>m.name===s),u=c==null?void 0:c.type,h=i[s];return u&&!l.includes(u)?Wv(u,h):Dh(h)},Wv=(s,t)=>{if(s.charAt(0)==="_"){const i=s.slice(1,s.length);return YN(t,i)}switch(s){case Nt.bool:return KN(t);case Nt.float4:case Nt.float8:case Nt.int2:case Nt.int4:case Nt.int8:case Nt.numeric:case Nt.oid:return GN(t);case Nt.json:case Nt.jsonb:return FN(t);case Nt.timestamp:return QN(t);case Nt.abstime:case Nt.date:case Nt.daterange:case Nt.int4range:case Nt.int8range:case Nt.money:case Nt.reltime:case Nt.text:case Nt.time:case Nt.timestamptz:case Nt.timetz:case Nt.tsrange:case Nt.tstzrange:return Dh(t);default:return Dh(t)}},Dh=s=>s,KN=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},GN=s=>{if(typeof s=="string"){const t=parseFloat(s);if(!Number.isNaN(t))return t}return s},FN=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch{return s}return s},YN=(s,t)=>{if(typeof s!="string")return s;const i=s.length-1,l=s[i];if(s[0]==="{"&&l==="}"){let u;const h=s.slice(1,i);try{u=JSON.parse("["+h+"]")}catch{u=h?h.split(","):[]}return u.map(m=>Wv(t,m))}return s},QN=s=>typeof s=="string"?s.replace(" ","T"):s,eb=s=>{const t=new URL(s);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Wd{constructor(t,i,l={},c=Eh){this.channel=t,this.event=i,this.payload=l,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,i){var l;return this._hasReceived(t)&&i((l=this.receivedResp)===null||l===void 0?void 0:l.response),this.recHooks.push({status:t,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:i}){this.recHooks.filter(l=>l.status===t).forEach(l=>l.callback(i))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Xg;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(Xg||(Xg={}));class cl{constructor(t,i){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const l=(i==null?void 0:i.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(l.state,{},c=>{const{onJoin:u,onLeave:h,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=cl.syncState(this.state,c,u,h),this.pendingDiffs.forEach(p=>{this.state=cl.syncDiff(this.state,p,u,h)}),this.pendingDiffs=[],m()}),this.channel._on(l.diff,{},c=>{const{onJoin:u,onLeave:h,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=cl.syncDiff(this.state,c,u,h),m())}),this.onJoin((c,u,h)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:u,newPresences:h})}),this.onLeave((c,u,h)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:u,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,i,l,c){const u=this.cloneDeep(t),h=this.transformState(i),m={},p={};return this.map(u,(g,x)=>{h[g]||(p[g]=x)}),this.map(h,(g,x)=>{const w=u[g];if(w){const N=x.map(O=>O.presence_ref),_=w.map(O=>O.presence_ref),T=x.filter(O=>_.indexOf(O.presence_ref)<0),U=w.filter(O=>N.indexOf(O.presence_ref)<0);T.length>0&&(m[g]=T),U.length>0&&(p[g]=U)}else m[g]=x}),this.syncDiff(u,{joins:m,leaves:p},l,c)}static syncDiff(t,i,l,c){const{joins:u,leaves:h}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return l||(l=()=>{}),c||(c=()=>{}),this.map(u,(m,p)=>{var g;const x=(g=t[m])!==null&&g!==void 0?g:[];if(t[m]=this.cloneDeep(p),x.length>0){const w=t[m].map(_=>_.presence_ref),N=x.filter(_=>w.indexOf(_.presence_ref)<0);t[m].unshift(...N)}l(m,x,p)}),this.map(h,(m,p)=>{let g=t[m];if(!g)return;const x=p.map(w=>w.presence_ref);g=g.filter(w=>x.indexOf(w.presence_ref)<0),t[m]=g,c(m,g,p),g.length===0&&delete t[m]}),t}static map(t,i){return Object.getOwnPropertyNames(t).map(l=>i(l,t[l]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((i,l)=>{const c=t[l];return"metas"in c?i[l]=c.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):i[l]=c,i},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Jg;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(Jg||(Jg={}));var ul;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(ul||(ul={}));var Ga;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(Ga||(Ga={}));class Wi{constructor(t,i={config:{}},l){var c,u;if(this.topic=t,this.params=i,this.socket=l,this.bindings={},this.state=Zt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new Wd(this,ma.join,this.params,this.timeout),this.rejoinTimer=new Zv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Zt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Zt.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Zt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ma.reply,{},(h,m)=>{this._trigger(this._replyEventName(m),h)}),this.presence=new cl(this),this.broadcastEndpointURL=eb(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(c=this.params.config)===null||c===void 0?void 0:c.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,i=this.timeout){var l,c,u;if(this.socket.isConnected()||this.socket.connect(),this.state==Zt.closed){const{config:{broadcast:h,presence:m,private:p}}=this.params,g=(c=(l=this.bindings.postgres_changes)===null||l===void 0?void 0:l.map(_=>_.filter))!==null&&c!==void 0?c:[],x=!!this.bindings[ul.PRESENCE]&&this.bindings[ul.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,w={},N={broadcast:h,presence:Object.assign(Object.assign({},m),{enabled:x}),postgres_changes:g,private:p};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(_=>t==null?void 0:t(Ga.CHANNEL_ERROR,_)),this._onClose(()=>t==null?void 0:t(Ga.CLOSED)),this.updateJoinPayload(Object.assign({config:N},w)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:_})=>{var T;if(this.socket._isManualToken()||this.socket.setAuth(),_===void 0){t==null||t(Ga.SUBSCRIBED);return}else{const U=this.bindings.postgres_changes,O=(T=U==null?void 0:U.length)!==null&&T!==void 0?T:0,L=[];for(let D=0;D<O;D++){const M=U[D],{filter:{event:ie,schema:ue,table:B,filter:H}}=M,pe=_&&_[D];if(pe&&pe.event===ie&&Wi.isFilterValueEqual(pe.schema,ue)&&Wi.isFilterValueEqual(pe.table,B)&&Wi.isFilterValueEqual(pe.filter,H))L.push(Object.assign(Object.assign({},M),{id:pe.id}));else{this.unsubscribe(),this.state=Zt.errored,t==null||t(Ga.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=L,t&&t(Ga.SUBSCRIBED);return}}).receive("error",_=>{this.state=Zt.errored,t==null||t(Ga.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ga.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,i={}){return await this.send({type:"presence",event:"track",payload:t},i.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,i,l){return this.state===Zt.joined&&t===ul.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,i,l)}async httpSend(t,i,l={}){var c;if(i==null)return Promise.reject("Payload is required for httpSend()");const u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:i,private:this.private}]})},m=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(c=l.timeout)!==null&&c!==void 0?c:this.timeout);if(m.status===202)return{success:!0};let p=m.statusText;try{const g=await m.json();p=g.error||g.message||p}catch{}return Promise.reject(new Error(p))}async send(t,i={}){var l,c;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:u,payload:h}=t,m={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(m.Authorization=`Bearer ${this.socket.accessTokenValue}`);const p={method:"POST",headers:m,body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:h,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(l=i.timeout)!==null&&l!==void 0?l:this.timeout);return await((c=g.body)===null||c===void 0?void 0:c.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var h,m,p;const g=this._push(t.type,t,i.timeout||this.timeout);t.type==="broadcast"&&!(!((p=(m=(h=this.params)===null||h===void 0?void 0:h.config)===null||m===void 0?void 0:m.broadcast)===null||p===void 0)&&p.ack)&&u("ok"),g.receive("ok",()=>u("ok")),g.receive("error",()=>u("error")),g.receive("timeout",()=>u("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Zt.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ma.close,"leave",this._joinRef())};this.joinPush.destroy();let l=null;return new Promise(c=>{l=new Wd(this,ma.leave,{},t),l.receive("ok",()=>{i(),c("ok")}).receive("timeout",()=>{i(),c("timed out")}).receive("error",()=>{c("error")}),l.send(),this._canPush()||l.trigger("ok",{})}).finally(()=>{l==null||l.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Zt.closed,this.bindings={}}async _fetchWithTimeout(t,i,l){const c=new AbortController,u=setTimeout(()=>c.abort(),l),h=await this.socket.fetch(t,Object.assign(Object.assign({},i),{signal:c.signal}));return clearTimeout(u),h}_push(t,i,l=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new Wd(this,t,i,l);return this._canPush()?c.send():this._addToPushBuffer(c),c}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>IN){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(t,i,l){return i}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,i,l){var c,u;const h=t.toLocaleLowerCase(),{close:m,error:p,leave:g,join:x}=ma;if(l&&[m,p,g,x].indexOf(h)>=0&&l!==this._joinRef())return;let N=this._onMessage(h,i,l);if(i&&!N)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(_=>{var T,U,O;return((T=_.filter)===null||T===void 0?void 0:T.event)==="*"||((O=(U=_.filter)===null||U===void 0?void 0:U.event)===null||O===void 0?void 0:O.toLocaleLowerCase())===h}).map(_=>_.callback(N,l)):(u=this.bindings[h])===null||u===void 0||u.filter(_=>{var T,U,O,L,D,M;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in _){const ie=_.id,ue=(T=_.filter)===null||T===void 0?void 0:T.event;return ie&&((U=i.ids)===null||U===void 0?void 0:U.includes(ie))&&(ue==="*"||(ue==null?void 0:ue.toLocaleLowerCase())===((O=i.data)===null||O===void 0?void 0:O.type.toLocaleLowerCase()))}else{const ie=(D=(L=_==null?void 0:_.filter)===null||L===void 0?void 0:L.event)===null||D===void 0?void 0:D.toLocaleLowerCase();return ie==="*"||ie===((M=i==null?void 0:i.event)===null||M===void 0?void 0:M.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===h}).map(_=>{if(typeof N=="object"&&"ids"in N){const T=N.data,{schema:U,table:O,commit_timestamp:L,type:D,errors:M}=T;N=Object.assign(Object.assign({},{schema:U,table:O,commit_timestamp:L,eventType:D,new:{},old:{},errors:M}),this._getPayloadRecords(T))}_.callback(N,l)})}_isClosed(){return this.state===Zt.closed}_isJoined(){return this.state===Zt.joined}_isJoining(){return this.state===Zt.joining}_isLeaving(){return this.state===Zt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,i,l){const c=t.toLocaleLowerCase(),u={type:c,filter:i,callback:l};return this.bindings[c]?this.bindings[c].push(u):this.bindings[c]=[u],this}_off(t,i){const l=t.toLocaleLowerCase();return this.bindings[l]&&(this.bindings[l]=this.bindings[l].filter(c=>{var u;return!(((u=c.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===l&&Wi.isEqual(c.filter,i))})),this}static isEqual(t,i){if(Object.keys(t).length!==Object.keys(i).length)return!1;for(const l in t)if(t[l]!==i[l])return!1;return!0}static isFilterValueEqual(t,i){return(t??void 0)===(i??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ma.close,{},t)}_onError(t){this._on(ma.error,{},i=>t(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Zt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const i={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(i.new=Qg(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(i.old=Qg(t.columns,t.old_record)),i}}const eh=()=>{},Jo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},XN=[1e3,2e3,5e3,1e4],JN=1e4,ZN=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class WN{constructor(t,i){var l;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Eh,this.transport=null,this.heartbeatIntervalMs=Jo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=eh,this.ref=0,this.reconnectTimer=null,this.vsn=Yg,this.logger=eh,this.conn=null,this.sendBuffer=[],this.serializer=new $N,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=c=>c?(...u)=>c(...u):(...u)=>fetch(...u),!(!((l=i==null?void 0:i.params)===null||l===void 0)&&l.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${t}/${Oh.websocket}`,this.httpEndpoint=eb(t),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i==null?void 0:i.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=PN.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const i=t.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const l=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(l),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,i??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const i=await t.unsubscribe();return i==="ok"&&this._remove(t),this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const t=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,i,l){this.logger(t,i,l)}connectionState(){switch(this.conn&&this.conn.readyState){case Tn.connecting:return Wn.Connecting;case Tn.open:return Wn.Open;case Tn.closing:return Wn.Closing;default:return Wn.Closed}}isConnected(){return this.connectionState()===Wn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,i={config:{}}){const l=`realtime:${t}`,c=this.getChannels().find(u=>u.topic===l);if(c)return c;{const u=new Wi(`realtime:${t}`,i,this);return this.channels.push(u),u}}push(t){const{topic:i,event:l,payload:c,ref:u}=t,h=()=>{this.encode(t,m=>{var p;(p=this.conn)===null||p===void 0||p.send(m)})};this.log("push",`${i} ${l} (${u})`,c),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(qN,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},Jo.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let i=this.channels.find(l=>l.topic===t&&(l._isJoined()||l._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${t}"`),i.unsubscribe())}_remove(t){this.channels=this.channels.filter(i=>i.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply"&&i.ref&&i.ref===this.pendingHeartbeatRef){const g=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error",g)}catch(x){this.log("error","error in heartbeat callback",x)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:l,event:c,payload:u,ref:h}=i,m=h?`(${h})`:"",p=u.status||"";this.log("receive",`${p} ${l} ${c} ${m}`.trim(),u),this.channels.filter(g=>g._isMember(l)).forEach(g=>g._trigger(c,u,h)),this._triggerStateCallbacks("message",i)})}_clearTimer(t){var i;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Tn.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Tn.open||this.conn.readyState===Tn.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(i=>{this.log("error","error waiting for auth on connect",i),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this._terminateWorker()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var i;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(i){this.log("error","error in heartbeat callback",i)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(ma.error))}_appendParams(t,i){if(Object.keys(i).length===0)return t;const l=t.match(/\?/)?"&":"?",c=new URLSearchParams(i);return`${t}${l}${c}`}_workerObjectUrl(t){let i;if(t)i=t;else{const l=new Blob([ZN],{type:"application/javascript"});i=URL.createObjectURL(l)}return i}_setConnectionState(t,i=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(t=null){let i,l=!1;if(t)i=t,l=!0;else if(this.accessToken)try{i=await this.accessToken()}catch(c){this.log("error","Error fetching access token from callback",c),i=this.accessTokenValue}else i=this.accessTokenValue;l?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(c=>{const u={access_token:i,version:zN};i&&c.updateJoinPayload(u),c.joinedOnce&&c._isJoined()&&c._push(ma.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(i=>{this.log("error",`Error setting auth in ${t}`,i)})}_triggerStateCallbacks(t,i){try{this.stateChangeCallbacks[t].forEach(l=>{try{l(i)}catch(c){this.log("error",`error in ${t} callback`,c)}})}catch(l){this.log("error",`error triggering ${t} callbacks`,l)}}_setupReconnectionTimer(){this.reconnectTimer=new Zv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Jo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var i,l,c,u,h,m,p,g,x,w,N,_;switch(this.transport=(i=t==null?void 0:t.transport)!==null&&i!==void 0?i:null,this.timeout=(l=t==null?void 0:t.timeout)!==null&&l!==void 0?l:Eh,this.heartbeatIntervalMs=(c=t==null?void 0:t.heartbeatIntervalMs)!==null&&c!==void 0?c:Jo.HEARTBEAT_INTERVAL,this.worker=(u=t==null?void 0:t.worker)!==null&&u!==void 0?u:!1,this.accessToken=(h=t==null?void 0:t.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(m=t==null?void 0:t.heartbeatCallback)!==null&&m!==void 0?m:eh,this.vsn=(p=t==null?void 0:t.vsn)!==null&&p!==void 0?p:Yg,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=t==null?void 0:t.reconnectAfterMs)!==null&&g!==void 0?g:(T=>XN[T-1]||JN),this.vsn){case VN:this.encode=(x=t==null?void 0:t.encode)!==null&&x!==void 0?x:((T,U)=>U(JSON.stringify(T))),this.decode=(w=t==null?void 0:t.decode)!==null&&w!==void 0?w:((T,U)=>U(JSON.parse(T)));break;case Jv:this.encode=(N=t==null?void 0:t.encode)!==null&&N!==void 0?N:this.serializer.encode.bind(this.serializer),this.decode=(_=t==null?void 0:t.decode)!==null&&_!==void 0?_:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var gl=class extends Error{constructor(s,t){var i;super(s),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((i=t.icebergType)==null?void 0:i.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function e1(s,t,i){const l=new URL(t,s);if(i)for(const[c,u]of Object.entries(i))u!==void 0&&l.searchParams.set(c,u);return l.toString()}async function t1(s){return!s||s.type==="none"?{}:s.type==="bearer"?{Authorization:`Bearer ${s.token}`}:s.type==="header"?{[s.name]:s.value}:s.type==="custom"?await s.getHeaders():{}}function s1(s){const t=s.fetchImpl??globalThis.fetch;return{async request({method:i,path:l,query:c,body:u,headers:h}){const m=e1(s.baseUrl,l,c),p=await t1(s.auth),g=await t(m,{method:i,headers:{...u?{"Content-Type":"application/json"}:{},...p,...h},body:u?JSON.stringify(u):void 0}),x=await g.text(),w=(g.headers.get("content-type")||"").includes("application/json"),N=w&&x?JSON.parse(x):x;if(!g.ok){const _=w?N:void 0,T=_==null?void 0:_.error;throw new gl((T==null?void 0:T.message)??`Request failed with status ${g.status}`,{status:g.status,icebergType:T==null?void 0:T.type,icebergCode:T==null?void 0:T.code,details:_})}return{status:g.status,headers:g.headers,data:N}}}}function Zo(s){return s.join("")}var a1=class{constructor(s,t=""){this.client=s,this.prefix=t}async listNamespaces(s){const t=s?{parent:Zo(s.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(l=>({namespace:l}))}async createNamespace(s,t){const i={namespace:s.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:i})).data}async dropNamespace(s){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Zo(s.namespace)}`})}async loadNamespaceMetadata(s){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Zo(s.namespace)}`})).data.properties}}async namespaceExists(s){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Zo(s.namespace)}`}),!0}catch(t){if(t instanceof gl&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(s,t){try{return await this.createNamespace(s,t)}catch(i){if(i instanceof gl&&i.status===409)return;throw i}}};function Ii(s){return s.join("")}var n1=class{constructor(s,t="",i){this.client=s,this.prefix=t,this.accessDelegation=i}async listTables(s){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ii(s.namespace)}/tables`})).data.identifiers}async createTable(s,t){const i={};return this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ii(s.namespace)}/tables`,body:t,headers:i})).data.metadata}async updateTable(s,t){const i=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ii(s.namespace)}/tables/${s.name}`,body:t});return{"metadata-location":i.data["metadata-location"],metadata:i.data.metadata}}async dropTable(s,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ii(s.namespace)}/tables/${s.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(s){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ii(s.namespace)}/tables/${s.name}`,headers:t})).data.metadata}async tableExists(s){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ii(s.namespace)}/tables/${s.name}`,headers:t}),!0}catch(i){if(i instanceof gl&&i.status===404)return!1;throw i}}async createTableIfNotExists(s,t){try{return await this.createTable(s,t)}catch(i){if(i instanceof gl&&i.status===409)return await this.loadTable({namespace:s.namespace,name:t.name});throw i}}},i1=class{constructor(s){var l;let t="v1";s.catalogName&&(t+=`/${s.catalogName}`);const i=s.baseUrl.endsWith("/")?s.baseUrl:`${s.baseUrl}/`;this.client=s1({baseUrl:i,auth:s.auth,fetchImpl:s.fetch}),this.accessDelegation=(l=s.accessDelegation)==null?void 0:l.join(","),this.namespaceOps=new a1(this.client,t),this.tableOps=new n1(this.client,t,this.accessDelegation)}async listNamespaces(s){return this.namespaceOps.listNamespaces(s)}async createNamespace(s,t){return this.namespaceOps.createNamespace(s,t)}async dropNamespace(s){await this.namespaceOps.dropNamespace(s)}async loadNamespaceMetadata(s){return this.namespaceOps.loadNamespaceMetadata(s)}async listTables(s){return this.tableOps.listTables(s)}async createTable(s,t){return this.tableOps.createTable(s,t)}async updateTable(s,t){return this.tableOps.updateTable(s,t)}async dropTable(s,t){await this.tableOps.dropTable(s,t)}async loadTable(s){return this.tableOps.loadTable(s)}async namespaceExists(s){return this.namespaceOps.namespaceExists(s)}async tableExists(s){return this.tableOps.tableExists(s)}async createNamespaceIfNotExists(s,t){return this.namespaceOps.createNamespaceIfNotExists(s,t)}async createTableIfNotExists(s,t){return this.tableOps.createTableIfNotExists(s,t)}},Dc=class extends Error{constructor(s,t="storage",i,l){super(s),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=i,this.statusCode=l}};function Rc(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}var Wo=class extends Dc{constructor(s,t,i,l="storage"){super(s,l,t,i),this.name=l==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},tb=class extends Dc{constructor(s,t,i="storage"){super(s,i),this.name=i==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const r1=s=>s?(...t)=>s(...t):(...t)=>fetch(...t),l1=s=>{if(typeof s!="object"||s===null)return!1;const t=Object.getPrototypeOf(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},Rh=s=>{if(Array.isArray(s))return s.map(i=>Rh(i));if(typeof s=="function"||s!==Object(s))return s;const t={};return Object.entries(s).forEach(([i,l])=>{const c=i.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));t[c]=Rh(l)}),t},o1=s=>!s||typeof s!="string"||s.length===0||s.length>100||s.trim()!==s||s.includes("/")||s.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(s);function xl(s){"@babel/helpers - typeof";return xl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xl(s)}function c1(s,t){if(xl(s)!="object"||!s)return s;var i=s[Symbol.toPrimitive];if(i!==void 0){var l=i.call(s,t);if(xl(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function u1(s){var t=c1(s,"string");return xl(t)=="symbol"?t:t+""}function d1(s,t,i){return(t=u1(t))in s?Object.defineProperty(s,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[t]=i,s}function Zg(s,t){var i=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);t&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),i.push.apply(i,l)}return i}function qe(s){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Zg(Object(i),!0).forEach(function(l){d1(s,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(i)):Zg(Object(i)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(i,l))})}return s}const Wg=s=>{var t;return s.msg||s.message||s.error_description||(typeof s.error=="string"?s.error:(t=s.error)===null||t===void 0?void 0:t.message)||JSON.stringify(s)},h1=async(s,t,i,l)=>{if(s&&typeof s=="object"&&"status"in s&&"ok"in s&&typeof s.status=="number"&&!(i!=null&&i.noResolveJson)){const c=s,u=c.status||500;if(typeof c.json=="function")c.json().then(h=>{const m=(h==null?void 0:h.statusCode)||(h==null?void 0:h.code)||u+"";t(new Wo(Wg(h),u,m,l))}).catch(()=>{if(l==="vectors"){const h=u+"";t(new Wo(c.statusText||`HTTP ${u} error`,u,h,l))}else{const h=u+"";t(new Wo(c.statusText||`HTTP ${u} error`,u,h,l))}});else{const h=u+"";t(new Wo(c.statusText||`HTTP ${u} error`,u,h,l))}}else t(new tb(Wg(s),s,l))},f1=(s,t,i,l)=>{const c={method:s,headers:(t==null?void 0:t.headers)||{}};return s==="GET"||s==="HEAD"||!l?qe(qe({},c),i):(l1(l)?(c.headers=qe({"Content-Type":"application/json"},t==null?void 0:t.headers),c.body=JSON.stringify(l)):c.body=l,t!=null&&t.duplex&&(c.duplex=t.duplex),qe(qe({},c),i))};async function nl(s,t,i,l,c,u,h){return new Promise((m,p)=>{s(i,f1(t,l,c,u)).then(g=>{if(!g.ok)throw g;if(l!=null&&l.noResolveJson)return g;if(h==="vectors"){const x=g.headers.get("content-type");if(g.headers.get("content-length")==="0"||g.status===204)return{};if(!x||!x.includes("application/json"))return{}}return g.json()}).then(g=>m(g)).catch(g=>h1(g,p,l,h))})}function sb(s="storage"){return{get:async(t,i,l,c)=>nl(t,"GET",i,l,c,void 0,s),post:async(t,i,l,c,u)=>nl(t,"POST",i,c,u,l,s),put:async(t,i,l,c,u)=>nl(t,"PUT",i,c,u,l,s),head:async(t,i,l,c)=>nl(t,"HEAD",i,qe(qe({},l),{},{noResolveJson:!0}),c,void 0,s),remove:async(t,i,l,c,u)=>nl(t,"DELETE",i,c,u,l,s)}}const m1=sb("storage"),{get:vl,post:fa,put:Mh,head:p1,remove:ff}=m1,$s=sb("vectors");var dr=class{constructor(s,t={},i,l="storage"){this.shouldThrowOnError=!1,this.url=s,this.headers=t,this.fetch=r1(i),this.namespace=l}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(s){var t=this;try{return{data:await s(),error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(Rc(i))return{data:null,error:i};throw i}}},g1=class{constructor(s,t){this.downloadFn=s,this.shouldThrowOnError=t}then(s,t){return this.execute().then(s,t)}async execute(){var s=this;try{return{data:(await s.downloadFn()).body,error:null}}catch(t){if(s.shouldThrowOnError)throw t;if(Rc(t))return{data:null,error:t};throw t}}};let ab;ab=Symbol.toStringTag;var x1=class{constructor(s,t){this.downloadFn=s,this.shouldThrowOnError=t,this[ab]="BlobDownloadBuilder",this.promise=null}asStream(){return new g1(this.downloadFn,this.shouldThrowOnError)}then(s,t){return this.getPromise().then(s,t)}catch(s){return this.getPromise().catch(s)}finally(s){return this.getPromise().finally(s)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var s=this;try{return{data:await(await s.downloadFn()).blob(),error:null}}catch(t){if(s.shouldThrowOnError)throw t;if(Rc(t))return{data:null,error:t};throw t}}};const v1={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ex={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var b1=class extends dr{constructor(s,t={},i,l){super(s,t,l,"storage"),this.bucketId=i}async uploadOrUpdate(s,t,i,l){var c=this;return c.handleOperation(async()=>{let u;const h=qe(qe({},ex),l);let m=qe(qe({},c.headers),s==="POST"&&{"x-upsert":String(h.upsert)});const p=h.metadata;typeof Blob<"u"&&i instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),p&&u.append("metadata",c.encodeMetadata(p)),u.append("",i)):typeof FormData<"u"&&i instanceof FormData?(u=i,u.has("cacheControl")||u.append("cacheControl",h.cacheControl),p&&!u.has("metadata")&&u.append("metadata",c.encodeMetadata(p))):(u=i,m["cache-control"]=`max-age=${h.cacheControl}`,m["content-type"]=h.contentType,p&&(m["x-metadata"]=c.toBase64(c.encodeMetadata(p))),(typeof ReadableStream<"u"&&u instanceof ReadableStream||u&&typeof u=="object"&&"pipe"in u&&typeof u.pipe=="function")&&!h.duplex&&(h.duplex="half")),l!=null&&l.headers&&(m=qe(qe({},m),l.headers));const g=c._removeEmptyFolders(t),x=c._getFinalPath(g),w=await(s=="PUT"?Mh:fa)(c.fetch,`${c.url}/object/${x}`,u,qe({headers:m},h!=null&&h.duplex?{duplex:h.duplex}:{}));return{path:g,id:w.Id,fullPath:w.Key}})}async upload(s,t,i){return this.uploadOrUpdate("POST",s,t,i)}async uploadToSignedUrl(s,t,i,l){var c=this;const u=c._removeEmptyFolders(s),h=c._getFinalPath(u),m=new URL(c.url+`/object/upload/sign/${h}`);return m.searchParams.set("token",t),c.handleOperation(async()=>{let p;const g=qe({upsert:ex.upsert},l),x=qe(qe({},c.headers),{"x-upsert":String(g.upsert)});return typeof Blob<"u"&&i instanceof Blob?(p=new FormData,p.append("cacheControl",g.cacheControl),p.append("",i)):typeof FormData<"u"&&i instanceof FormData?(p=i,p.append("cacheControl",g.cacheControl)):(p=i,x["cache-control"]=`max-age=${g.cacheControl}`,x["content-type"]=g.contentType),{path:u,fullPath:(await Mh(c.fetch,m.toString(),p,{headers:x})).Key}})}async createSignedUploadUrl(s,t){var i=this;return i.handleOperation(async()=>{let l=i._getFinalPath(s);const c=qe({},i.headers);t!=null&&t.upsert&&(c["x-upsert"]="true");const u=await fa(i.fetch,`${i.url}/object/upload/sign/${l}`,{},{headers:c}),h=new URL(i.url+u.url),m=h.searchParams.get("token");if(!m)throw new Dc("No token returned by API");return{signedUrl:h.toString(),path:s,token:m}})}async update(s,t,i){return this.uploadOrUpdate("PUT",s,t,i)}async move(s,t,i){var l=this;return l.handleOperation(async()=>await fa(l.fetch,`${l.url}/object/move`,{bucketId:l.bucketId,sourceKey:s,destinationKey:t,destinationBucket:i==null?void 0:i.destinationBucket},{headers:l.headers}))}async copy(s,t,i){var l=this;return l.handleOperation(async()=>({path:(await fa(l.fetch,`${l.url}/object/copy`,{bucketId:l.bucketId,sourceKey:s,destinationKey:t,destinationBucket:i==null?void 0:i.destinationBucket},{headers:l.headers})).Key}))}async createSignedUrl(s,t,i){var l=this;return l.handleOperation(async()=>{let c=l._getFinalPath(s),u=await fa(l.fetch,`${l.url}/object/sign/${c}`,qe({expiresIn:t},i!=null&&i.transform?{transform:i.transform}:{}),{headers:l.headers});const h=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{signedUrl:encodeURI(`${l.url}${u.signedURL}${h}`)}})}async createSignedUrls(s,t,i){var l=this;return l.handleOperation(async()=>{const c=await fa(l.fetch,`${l.url}/object/sign/${l.bucketId}`,{expiresIn:t,paths:s},{headers:l.headers}),u=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return c.map(h=>qe(qe({},h),{},{signedUrl:h.signedURL?encodeURI(`${l.url}${h.signedURL}${u}`):null}))})}download(s,t,i){const l=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),u=c?`?${c}`:"",h=this._getFinalPath(s),m=()=>vl(this.fetch,`${this.url}/${l}/${h}${u}`,{headers:this.headers,noResolveJson:!0},i);return new x1(m,this.shouldThrowOnError)}async info(s){var t=this;const i=t._getFinalPath(s);return t.handleOperation(async()=>Rh(await vl(t.fetch,`${t.url}/object/info/${i}`,{headers:t.headers})))}async exists(s){var t=this;const i=t._getFinalPath(s);try{return await p1(t.fetch,`${t.url}/object/${i}`,{headers:t.headers}),{data:!0,error:null}}catch(l){if(t.shouldThrowOnError)throw l;if(Rc(l)&&l instanceof tb){const c=l.originalError;if([400,404].includes(c==null?void 0:c.status))return{data:!1,error:l}}throw l}}getPublicUrl(s,t){const i=this._getFinalPath(s),l=[],c=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";c!==""&&l.push(c);const u=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});h!==""&&l.push(h);let m=l.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${i}${m}`)}}}async remove(s){var t=this;return t.handleOperation(async()=>await ff(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:s},{headers:t.headers}))}async list(s,t,i){var l=this;return l.handleOperation(async()=>{const c=qe(qe(qe({},v1),t),{},{prefix:s||""});return await fa(l.fetch,`${l.url}/object/list/${l.bucketId}`,c,{headers:l.headers},i)})}async listV2(s,t){var i=this;return i.handleOperation(async()=>{const l=qe({},s);return await fa(i.fetch,`${i.url}/object/list-v2/${i.bucketId}`,l,{headers:i.headers},t)})}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const t=[];return s.width&&t.push(`width=${s.width}`),s.height&&t.push(`height=${s.height}`),s.resize&&t.push(`resize=${s.resize}`),s.format&&t.push(`format=${s.format}`),s.quality&&t.push(`quality=${s.quality}`),t.join("&")}};const y1="2.95.3",El={"X-Client-Info":`storage-js/${y1}`};var w1=class extends dr{constructor(s,t={},i,l){const c=new URL(s);l!=null&&l.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase."));const u=c.href.replace(/\/$/,""),h=qe(qe({},El),t);super(u,h,i,"storage")}async listBuckets(s){var t=this;return t.handleOperation(async()=>{const i=t.listBucketOptionsToQueryString(s);return await vl(t.fetch,`${t.url}/bucket${i}`,{headers:t.headers})})}async getBucket(s){var t=this;return t.handleOperation(async()=>await vl(t.fetch,`${t.url}/bucket/${s}`,{headers:t.headers}))}async createBucket(s,t={public:!1}){var i=this;return i.handleOperation(async()=>await fa(i.fetch,`${i.url}/bucket`,{id:s,name:s,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:i.headers}))}async updateBucket(s,t){var i=this;return i.handleOperation(async()=>await Mh(i.fetch,`${i.url}/bucket/${s}`,{id:s,name:s,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:i.headers}))}async emptyBucket(s){var t=this;return t.handleOperation(async()=>await fa(t.fetch,`${t.url}/bucket/${s}/empty`,{},{headers:t.headers}))}async deleteBucket(s){var t=this;return t.handleOperation(async()=>await ff(t.fetch,`${t.url}/bucket/${s}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(s){const t={};return s&&("limit"in s&&(t.limit=String(s.limit)),"offset"in s&&(t.offset=String(s.offset)),s.search&&(t.search=s.search),s.sortColumn&&(t.sortColumn=s.sortColumn),s.sortOrder&&(t.sortOrder=s.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},j1=class extends dr{constructor(s,t={},i){const l=s.replace(/\/$/,""),c=qe(qe({},El),t);super(l,c,i,"storage")}async createBucket(s){var t=this;return t.handleOperation(async()=>await fa(t.fetch,`${t.url}/bucket`,{name:s},{headers:t.headers}))}async listBuckets(s){var t=this;return t.handleOperation(async()=>{const i=new URLSearchParams;(s==null?void 0:s.limit)!==void 0&&i.set("limit",s.limit.toString()),(s==null?void 0:s.offset)!==void 0&&i.set("offset",s.offset.toString()),s!=null&&s.sortColumn&&i.set("sortColumn",s.sortColumn),s!=null&&s.sortOrder&&i.set("sortOrder",s.sortOrder),s!=null&&s.search&&i.set("search",s.search);const l=i.toString(),c=l?`${t.url}/bucket?${l}`:`${t.url}/bucket`;return await vl(t.fetch,c,{headers:t.headers})})}async deleteBucket(s){var t=this;return t.handleOperation(async()=>await ff(t.fetch,`${t.url}/bucket/${s}`,{},{headers:t.headers}))}from(s){var t=this;if(!o1(s))throw new Dc("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const i=new i1({baseUrl:this.url,catalogName:s,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),l=this.shouldThrowOnError;return new Proxy(i,{get(c,u){const h=c[u];return typeof h!="function"?h:async(...m)=>{try{return{data:await h.apply(c,m),error:null}}catch(p){if(l)throw p;return{data:null,error:p}}}}})}},N1=class extends dr{constructor(s,t={},i){const l=s.replace(/\/$/,""),c=qe(qe({},El),{},{"Content-Type":"application/json"},t);super(l,c,i,"vectors")}async createIndex(s){var t=this;return t.handleOperation(async()=>await $s.post(t.fetch,`${t.url}/CreateIndex`,s,{headers:t.headers})||{})}async getIndex(s,t){var i=this;return i.handleOperation(async()=>await $s.post(i.fetch,`${i.url}/GetIndex`,{vectorBucketName:s,indexName:t},{headers:i.headers}))}async listIndexes(s){var t=this;return t.handleOperation(async()=>await $s.post(t.fetch,`${t.url}/ListIndexes`,s,{headers:t.headers}))}async deleteIndex(s,t){var i=this;return i.handleOperation(async()=>await $s.post(i.fetch,`${i.url}/DeleteIndex`,{vectorBucketName:s,indexName:t},{headers:i.headers})||{})}},S1=class extends dr{constructor(s,t={},i){const l=s.replace(/\/$/,""),c=qe(qe({},El),{},{"Content-Type":"application/json"},t);super(l,c,i,"vectors")}async putVectors(s){var t=this;if(s.vectors.length<1||s.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await $s.post(t.fetch,`${t.url}/PutVectors`,s,{headers:t.headers})||{})}async getVectors(s){var t=this;return t.handleOperation(async()=>await $s.post(t.fetch,`${t.url}/GetVectors`,s,{headers:t.headers}))}async listVectors(s){var t=this;if(s.segmentCount!==void 0){if(s.segmentCount<1||s.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(s.segmentIndex!==void 0&&(s.segmentIndex<0||s.segmentIndex>=s.segmentCount))throw new Error(`segmentIndex must be between 0 and ${s.segmentCount-1}`)}return t.handleOperation(async()=>await $s.post(t.fetch,`${t.url}/ListVectors`,s,{headers:t.headers}))}async queryVectors(s){var t=this;return t.handleOperation(async()=>await $s.post(t.fetch,`${t.url}/QueryVectors`,s,{headers:t.headers}))}async deleteVectors(s){var t=this;if(s.keys.length<1||s.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await $s.post(t.fetch,`${t.url}/DeleteVectors`,s,{headers:t.headers})||{})}},_1=class extends dr{constructor(s,t={},i){const l=s.replace(/\/$/,""),c=qe(qe({},El),{},{"Content-Type":"application/json"},t);super(l,c,i,"vectors")}async createBucket(s){var t=this;return t.handleOperation(async()=>await $s.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:s},{headers:t.headers})||{})}async getBucket(s){var t=this;return t.handleOperation(async()=>await $s.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:s},{headers:t.headers}))}async listBuckets(s={}){var t=this;return t.handleOperation(async()=>await $s.post(t.fetch,`${t.url}/ListVectorBuckets`,s,{headers:t.headers}))}async deleteBucket(s){var t=this;return t.handleOperation(async()=>await $s.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:s},{headers:t.headers})||{})}},T1=class extends _1{constructor(s,t={}){super(s,t.headers||{},t.fetch)}from(s){return new k1(this.url,this.headers,s,this.fetch)}async createBucket(s){var t=()=>super.createBucket,i=this;return t().call(i,s)}async getBucket(s){var t=()=>super.getBucket,i=this;return t().call(i,s)}async listBuckets(s={}){var t=()=>super.listBuckets,i=this;return t().call(i,s)}async deleteBucket(s){var t=()=>super.deleteBucket,i=this;return t().call(i,s)}},k1=class extends N1{constructor(s,t,i,l){super(s,t,l),this.vectorBucketName=i}async createIndex(s){var t=()=>super.createIndex,i=this;return t().call(i,qe(qe({},s),{},{vectorBucketName:i.vectorBucketName}))}async listIndexes(s={}){var t=()=>super.listIndexes,i=this;return t().call(i,qe(qe({},s),{},{vectorBucketName:i.vectorBucketName}))}async getIndex(s){var t=()=>super.getIndex,i=this;return t().call(i,i.vectorBucketName,s)}async deleteIndex(s){var t=()=>super.deleteIndex,i=this;return t().call(i,i.vectorBucketName,s)}index(s){return new A1(this.url,this.headers,this.vectorBucketName,s,this.fetch)}},A1=class extends S1{constructor(s,t,i,l,c){super(s,t,c),this.vectorBucketName=i,this.indexName=l}async putVectors(s){var t=()=>super.putVectors,i=this;return t().call(i,qe(qe({},s),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async getVectors(s){var t=()=>super.getVectors,i=this;return t().call(i,qe(qe({},s),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async listVectors(s={}){var t=()=>super.listVectors,i=this;return t().call(i,qe(qe({},s),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async queryVectors(s){var t=()=>super.queryVectors,i=this;return t().call(i,qe(qe({},s),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async deleteVectors(s){var t=()=>super.deleteVectors,i=this;return t().call(i,qe(qe({},s),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}},C1=class extends w1{constructor(s,t={},i,l){super(s,t,i,l)}from(s){return new b1(this.url,this.headers,s,this.fetch)}get vectors(){return new T1(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new j1(this.url+"/iceberg",this.headers,this.fetch)}};const nb="2.95.3",Qi=30*1e3,Uh=3,th=Uh*Qi,E1="http://localhost:9999",O1="supabase.auth.token",D1={"X-Client-Info":`gotrue-js/${nb}`},Lh="X-Supabase-Api-Version",ib={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},R1=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,M1=600*1e3;class bl extends Error{constructor(t,i,l){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=l}}function Ce(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class U1 extends bl{constructor(t,i,l){super(t,i,l),this.name="AuthApiError",this.status=i,this.code=l}}function L1(s){return Ce(s)&&s.name==="AuthApiError"}class ei extends bl{constructor(t,i){super(t),this.name="AuthUnknownError",this.originalError=i}}class Za extends bl{constructor(t,i,l,c){super(t,l,c),this.name=i,this.status=l}}class Is extends Za{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function sh(s){return Ce(s)&&s.name==="AuthSessionMissingError"}class $i extends Za{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ec extends Za{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class tc extends Za{constructor(t,i=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function P1(s){return Ce(s)&&s.name==="AuthImplicitGrantRedirectError"}class tx extends Za{constructor(t,i=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class B1 extends Za{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Ph extends Za{constructor(t,i){super(t,"AuthRetryableFetchError",i,void 0)}}function ah(s){return Ce(s)&&s.name==="AuthRetryableFetchError"}class sx extends Za{constructor(t,i,l){super(t,"AuthWeakPasswordError",i,"weak_password"),this.reasons=l}}class Bh extends Za{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const xc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ax=` 	
\r=`.split(""),z1=(()=>{const s=new Array(128);for(let t=0;t<s.length;t+=1)s[t]=-1;for(let t=0;t<ax.length;t+=1)s[ax[t].charCodeAt(0)]=-2;for(let t=0;t<xc.length;t+=1)s[xc[t].charCodeAt(0)]=t;return s})();function nx(s,t,i){if(s!==null)for(t.queue=t.queue<<8|s,t.queuedBits+=8;t.queuedBits>=6;){const l=t.queue>>t.queuedBits-6&63;i(xc[l]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const l=t.queue>>t.queuedBits-6&63;i(xc[l]),t.queuedBits-=6}}function rb(s,t,i){const l=z1[s];if(l>-1)for(t.queue=t.queue<<6|l,t.queuedBits+=6;t.queuedBits>=8;)i(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(l===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function ix(s){const t=[],i=h=>{t.push(String.fromCodePoint(h))},l={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},u=h=>{I1(h,l,i)};for(let h=0;h<s.length;h+=1)rb(s.charCodeAt(h),c,u);return t.join("")}function V1(s,t){if(s<=127){t(s);return}else if(s<=2047){t(192|s>>6),t(128|s&63);return}else if(s<=65535){t(224|s>>12),t(128|s>>6&63),t(128|s&63);return}else if(s<=1114111){t(240|s>>18),t(128|s>>12&63),t(128|s>>6&63),t(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function q1(s,t){for(let i=0;i<s.length;i+=1){let l=s.charCodeAt(i);if(l>55295&&l<=56319){const c=(l-55296)*1024&65535;l=(s.charCodeAt(i+1)-56320&65535|c)+65536,i+=1}V1(l,t)}}function I1(s,t,i){if(t.utf8seq===0){if(s<=127){i(s);return}for(let l=1;l<6;l+=1)if((s>>7-l&1)===0){t.utf8seq=l;break}if(t.utf8seq===2)t.codepoint=s&31;else if(t.utf8seq===3)t.codepoint=s&15;else if(t.utf8seq===4)t.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|s&63,t.utf8seq-=1,t.utf8seq===0&&i(t.codepoint)}}function ir(s){const t=[],i={queue:0,queuedBits:0},l=c=>{t.push(c)};for(let c=0;c<s.length;c+=1)rb(s.charCodeAt(c),i,l);return new Uint8Array(t)}function $1(s){const t=[];return q1(s,i=>t.push(i)),new Uint8Array(t)}function ti(s){const t=[],i={queue:0,queuedBits:0},l=c=>{t.push(c)};return s.forEach(c=>nx(c,i,l)),nx(null,i,l),t.join("")}function H1(s){return Math.round(Date.now()/1e3)+s}function K1(){return Symbol("auth-callback")}const ds=()=>typeof window<"u"&&typeof document<"u",Yn={tested:!1,writable:!1},lb=()=>{if(!ds())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Yn.tested)return Yn.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),Yn.tested=!0,Yn.writable=!0}catch{Yn.tested=!0,Yn.writable=!1}return Yn.writable};function G1(s){const t={},i=new URL(s);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((c,u)=>{t[u]=c})}catch{}return i.searchParams.forEach((l,c)=>{t[c]=l}),t}const ob=s=>s?(...t)=>s(...t):(...t)=>fetch(...t),F1=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Xi=async(s,t,i)=>{await s.setItem(t,JSON.stringify(i))},Qn=async(s,t)=>{const i=await s.getItem(t);if(!i)return null;try{return JSON.parse(i)}catch{return i}},us=async(s,t)=>{await s.removeItem(t)};class Mc{constructor(){this.promise=new Mc.promiseConstructor((t,i)=>{this.resolve=t,this.reject=i})}}Mc.promiseConstructor=Promise;function sc(s){const t=s.split(".");if(t.length!==3)throw new Bh("Invalid JWT structure");for(let l=0;l<t.length;l++)if(!R1.test(t[l]))throw new Bh("JWT not in base64url format");return{header:JSON.parse(ix(t[0])),payload:JSON.parse(ix(t[1])),signature:ir(t[2]),raw:{header:t[0],payload:t[1]}}}async function Y1(s){return await new Promise(t=>{setTimeout(()=>t(null),s)})}function Q1(s,t){return new Promise((l,c)=>{(async()=>{for(let u=0;u<1/0;u++)try{const h=await s(u);if(!t(u,null,h)){l(h);return}}catch(h){if(!t(u,h)){c(h);return}}})()})}function X1(s){return("0"+s.toString(16)).substr(-2)}function J1(){const t=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",l=i.length;let c="";for(let u=0;u<56;u++)c+=i.charAt(Math.floor(Math.random()*l));return c}return crypto.getRandomValues(t),Array.from(t,X1).join("")}async function Z1(s){const i=new TextEncoder().encode(s),l=await crypto.subtle.digest("SHA-256",i),c=new Uint8Array(l);return Array.from(c).map(u=>String.fromCharCode(u)).join("")}async function W1(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const i=await Z1(s);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Hi(s,t,i=!1){const l=J1();let c=l;i&&(c+="/PASSWORD_RECOVERY"),await Xi(s,`${t}-code-verifier`,c);const u=await W1(l);return[u,l===u?"plain":"s256"]}const e2=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function t2(s){const t=s.headers.get(Lh);if(!t||!t.match(e2))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function s2(s){if(!s)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(s<=t)throw new Error("JWT has expired")}function a2(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const n2=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ki(s){if(!n2.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function nh(){const s={};return new Proxy(s,{get:(t,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const l=i.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function i2(s,t){return new Proxy(s,{get:(i,l,c)=>{if(l==="__isInsecureUserWarningProxy")return!0;if(typeof l=="symbol"){const u=l.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)"||u==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(i,l,c)}return!t.value&&typeof l=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(i,l,c)}})}function rx(s){return JSON.parse(JSON.stringify(s))}const Jn=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),r2=[502,503,504];async function lx(s){var t;if(!F1(s))throw new Ph(Jn(s),0);if(r2.includes(s.status))throw new Ph(Jn(s),s.status);let i;try{i=await s.json()}catch(u){throw new ei(Jn(u),u)}let l;const c=t2(s);if(c&&c.getTime()>=ib["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?l=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(l=i.error_code),l){if(l==="weak_password")throw new sx(Jn(i),s.status,((t=i.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(l==="session_not_found")throw new Is}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((u,h)=>u&&typeof h=="string",!0))throw new sx(Jn(i),s.status,i.weak_password.reasons);throw new U1(Jn(i),s.status||500,l)}const l2=(s,t,i,l)=>{const c={method:s,headers:(t==null?void 0:t.headers)||{}};return s==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),c.body=JSON.stringify(l),Object.assign(Object.assign({},c),i))};async function Be(s,t,i,l){var c;const u=Object.assign({},l==null?void 0:l.headers);u[Lh]||(u[Lh]=ib["2024-01-01"].name),l!=null&&l.jwt&&(u.Authorization=`Bearer ${l.jwt}`);const h=(c=l==null?void 0:l.query)!==null&&c!==void 0?c:{};l!=null&&l.redirectTo&&(h.redirect_to=l.redirectTo);const m=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",p=await o2(s,t,i+m,{headers:u,noResolveJson:l==null?void 0:l.noResolveJson},{},l==null?void 0:l.body);return l!=null&&l.xform?l==null?void 0:l.xform(p):{data:Object.assign({},p),error:null}}async function o2(s,t,i,l,c,u){const h=l2(t,l,c,u);let m;try{m=await s(i,Object.assign({},h))}catch(p){throw console.error(p),new Ph(Jn(p),0)}if(m.ok||await lx(m),l!=null&&l.noResolveJson)return m;try{return await m.json()}catch(p){await lx(p)}}function da(s){var t;let i=null;d2(s)&&(i=Object.assign({},s),s.expires_at||(i.expires_at=H1(s.expires_in)));const l=(t=s.user)!==null&&t!==void 0?t:s;return{data:{session:i,user:l},error:null}}function ox(s){const t=da(s);return!t.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0)&&(t.data.weak_password=s.weak_password),t}function kn(s){var t;return{data:{user:(t=s.user)!==null&&t!==void 0?t:s},error:null}}function c2(s){return{data:s,error:null}}function u2(s){const{action_link:t,email_otp:i,hashed_token:l,redirect_to:c,verification_type:u}=s,h=Oc(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:t,email_otp:i,hashed_token:l,redirect_to:c,verification_type:u},p=Object.assign({},h);return{data:{properties:m,user:p},error:null}}function cx(s){return s}function d2(s){return s.access_token&&s.refresh_token&&s.expires_in}const ih=["global","local","others"];class h2{constructor({url:t="",headers:i={},fetch:l}){this.url=t,this.headers=i,this.fetch=ob(l),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,i=ih[0]){if(ih.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ih.join(", ")}`);try{return await Be(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(l){if(Ce(l))return{data:null,error:l};throw l}}async inviteUserByEmail(t,i={}){try{return await Be(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:kn})}catch(l){if(Ce(l))return{data:{user:null},error:l};throw l}}async generateLink(t){try{const{options:i}=t,l=Oc(t,["options"]),c=Object.assign(Object.assign({},l),i);return"newEmail"in l&&(c.new_email=l==null?void 0:l.newEmail,delete c.newEmail),await Be(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:u2,redirectTo:i==null?void 0:i.redirectTo})}catch(i){if(Ce(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(t){try{return await Be(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:kn})}catch(i){if(Ce(i))return{data:{user:null},error:i};throw i}}async listUsers(t){var i,l,c,u,h,m,p;try{const g={nextPage:null,lastPage:0,total:0},x=await Be(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(i=t==null?void 0:t.page)===null||i===void 0?void 0:i.toString())!==null&&l!==void 0?l:"",per_page:(u=(c=t==null?void 0:t.perPage)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""},xform:cx});if(x.error)throw x.error;const w=await x.json(),N=(h=x.headers.get("x-total-count"))!==null&&h!==void 0?h:0,_=(p=(m=x.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return _.length>0&&(_.forEach(T=>{const U=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),O=JSON.parse(T.split(";")[1].split("=")[1]);g[`${O}Page`]=U}),g.total=parseInt(N)),{data:Object.assign(Object.assign({},w),g),error:null}}catch(g){if(Ce(g))return{data:{users:[]},error:g};throw g}}async getUserById(t){Ki(t);try{return await Be(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:kn})}catch(i){if(Ce(i))return{data:{user:null},error:i};throw i}}async updateUserById(t,i){Ki(t);try{return await Be(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:i,headers:this.headers,xform:kn})}catch(l){if(Ce(l))return{data:{user:null},error:l};throw l}}async deleteUser(t,i=!1){Ki(t);try{return await Be(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:i},xform:kn})}catch(l){if(Ce(l))return{data:{user:null},error:l};throw l}}async _listFactors(t){Ki(t.userId);try{const{data:i,error:l}=await Be(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:i,error:l}}catch(i){if(Ce(i))return{data:null,error:i};throw i}}async _deleteFactor(t){Ki(t.userId),Ki(t.id);try{return{data:await Be(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(i){if(Ce(i))return{data:null,error:i};throw i}}async _listOAuthClients(t){var i,l,c,u,h,m,p;try{const g={nextPage:null,lastPage:0,total:0},x=await Be(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(i=t==null?void 0:t.page)===null||i===void 0?void 0:i.toString())!==null&&l!==void 0?l:"",per_page:(u=(c=t==null?void 0:t.perPage)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""},xform:cx});if(x.error)throw x.error;const w=await x.json(),N=(h=x.headers.get("x-total-count"))!==null&&h!==void 0?h:0,_=(p=(m=x.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return _.length>0&&(_.forEach(T=>{const U=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),O=JSON.parse(T.split(";")[1].split("=")[1]);g[`${O}Page`]=U}),g.total=parseInt(N)),{data:Object.assign(Object.assign({},w),g),error:null}}catch(g){if(Ce(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(t){try{return await Be(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(Ce(i))return{data:null,error:i};throw i}}async _getOAuthClient(t){try{return await Be(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(Ce(i))return{data:null,error:i};throw i}}async _updateOAuthClient(t,i){try{return await Be(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:i,headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(Ce(l))return{data:null,error:l};throw l}}async _deleteOAuthClient(t){try{return await Be(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Ce(i))return{data:null,error:i};throw i}}async _regenerateOAuthClientSecret(t){try{return await Be(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(Ce(i))return{data:null,error:i};throw i}}}function ux(s={}){return{getItem:t=>s[t]||null,setItem:(t,i)=>{s[t]=i},removeItem:t=>{delete s[t]}}}const Gi={debug:!!(globalThis&&lb()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class cb extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class f2 extends cb{}async function m2(s,t,i){Gi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,t);const l=new globalThis.AbortController;return t>0&&setTimeout(()=>{l.abort(),Gi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:l.signal},async c=>{if(c){Gi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,c.name);try{return await i()}finally{Gi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,c.name)}}else{if(t===0)throw Gi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new f2(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(Gi.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}function p2(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function ub(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function g2(s){return parseInt(s,16)}function x2(s){const t=new TextEncoder().encode(s);return"0x"+Array.from(t,l=>l.toString(16).padStart(2,"0")).join("")}function v2(s){var t;const{chainId:i,domain:l,expirationTime:c,issuedAt:u=new Date,nonce:h,notBefore:m,requestId:p,resources:g,scheme:x,uri:w,version:N}=s;{if(!Number.isInteger(i))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${i}`);if(!l)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(N!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${N}`);if(!((t=s.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const _=ub(s.address),T=x?`${x}://${l}`:l,U=s.statement?`${s.statement}
`:"",O=`${T} wants you to sign in with your Ethereum account:
${_}

${U}`;let L=`URI: ${w}
Version: ${N}
Chain ID: ${i}${h?`
Nonce: ${h}`:""}
Issued At: ${u.toISOString()}`;if(c&&(L+=`
Expiration Time: ${c.toISOString()}`),m&&(L+=`
Not Before: ${m.toISOString()}`),p&&(L+=`
Request ID: ${p}`),g){let D=`
Resources:`;for(const M of g){if(!M||typeof M!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${M}`);D+=`
- ${M}`}L+=D}return`${O}
${L}`}class Yt extends Error{constructor({message:t,code:i,cause:l,name:c}){var u;super(t,{cause:l}),this.__isWebAuthnError=!0,this.name=(u=c??(l instanceof Error?l.name:void 0))!==null&&u!==void 0?u:"Unknown Error",this.code=i}}class vc extends Yt{constructor(t,i){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i,message:t}),this.name="WebAuthnUnknownError",this.originalError=i}}function b2({error:s,options:t}){var i,l,c;const{publicKey:u}=t;if(!u)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Yt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((i=u.authenticatorSelection)===null||i===void 0?void 0:i.requireResidentKey)===!0)return new Yt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(t.mediation==="conditional"&&((l=u.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new Yt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((c=u.authenticatorSelection)===null||c===void 0?void 0:c.userVerification)==="required")return new Yt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new Yt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new Yt({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return u.pubKeyCredParams.filter(m=>m.type==="public-key").length===0?new Yt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new Yt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const h=window.location.hostname;if(db(h)){if(u.rp.id!==h)return new Yt({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new Yt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new Yt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new Yt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new Yt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function y2({error:s,options:t}){const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Yt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new Yt({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const l=window.location.hostname;if(db(l)){if(i.rpId!==l)return new Yt({message:`The RP ID "${i.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new Yt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new Yt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new Yt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}class w2{createNewAbortSignal(){if(this.controller){const i=new Error("Cancelling existing WebAuthn API call for new one");i.name="AbortError",this.controller.abort(i)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const j2=new w2;function N2(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:t,user:i,excludeCredentials:l}=s,c=Oc(s,["challenge","user","excludeCredentials"]),u=ir(t).buffer,h=Object.assign(Object.assign({},i),{id:ir(i.id).buffer}),m=Object.assign(Object.assign({},c),{challenge:u,user:h});if(l&&l.length>0){m.excludeCredentials=new Array(l.length);for(let p=0;p<l.length;p++){const g=l[p];m.excludeCredentials[p]=Object.assign(Object.assign({},g),{id:ir(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return m}function S2(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:t,allowCredentials:i}=s,l=Oc(s,["challenge","allowCredentials"]),c=ir(t).buffer,u=Object.assign(Object.assign({},l),{challenge:c});if(i&&i.length>0){u.allowCredentials=new Array(i.length);for(let h=0;h<i.length;h++){const m=i[h];u.allowCredentials[h]=Object.assign(Object.assign({},m),{id:ir(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return u}function _2(s){var t;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const i=s;return{id:s.id,rawId:s.id,response:{attestationObject:ti(new Uint8Array(s.response.attestationObject)),clientDataJSON:ti(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(t=i.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function T2(s){var t;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const i=s,l=s.getClientExtensionResults(),c=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:ti(new Uint8Array(c.authenticatorData)),clientDataJSON:ti(new Uint8Array(c.clientDataJSON)),signature:ti(new Uint8Array(c.signature)),userHandle:c.userHandle?ti(new Uint8Array(c.userHandle)):void 0},type:"public-key",clientExtensionResults:l,authenticatorAttachment:(t=i.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function db(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function dx(){var s,t;return!!(ds()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator==null?void 0:navigator.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function k2(s){try{const t=await navigator.credentials.create(s);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new vc("Browser returned unexpected credential type",t)}:{data:null,error:new vc("Empty credential response",t)}}catch(t){return{data:null,error:b2({error:t,options:s})}}}async function A2(s){try{const t=await navigator.credentials.get(s);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new vc("Browser returned unexpected credential type",t)}:{data:null,error:new vc("Empty credential response",t)}}catch(t){return{data:null,error:y2({error:t,options:s})}}}const C2={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},E2={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function bc(...s){const t=c=>c!==null&&typeof c=="object"&&!Array.isArray(c),i=c=>c instanceof ArrayBuffer||ArrayBuffer.isView(c),l={};for(const c of s)if(c)for(const u in c){const h=c[u];if(h!==void 0)if(Array.isArray(h))l[u]=h;else if(i(h))l[u]=h;else if(t(h)){const m=l[u];t(m)?l[u]=bc(m,h):l[u]=bc(h)}else l[u]=h}return l}function O2(s,t){return bc(C2,s,t||{})}function D2(s,t){return bc(E2,s,t||{})}class R2{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:i,friendlyName:l,signal:c},u){var h;try{const{data:m,error:p}=await this.client.mfa.challenge({factorId:t,webauthn:i});if(!m)return{data:null,error:p};const g=c??j2.createNewAbortSignal();if(m.webauthn.type==="create"){const{user:x}=m.webauthn.credential_options.publicKey;if(!x.name){const w=l;if(w)x.name=`${x.id}:${w}`;else{const _=(await this.client.getUser()).data.user,T=((h=_==null?void 0:_.user_metadata)===null||h===void 0?void 0:h.name)||(_==null?void 0:_.email)||(_==null?void 0:_.id)||"User";x.name=`${x.id}:${T}`}}x.displayName||(x.displayName=x.name)}switch(m.webauthn.type){case"create":{const x=O2(m.webauthn.credential_options.publicKey,u==null?void 0:u.create),{data:w,error:N}=await k2({publicKey:x,signal:g});return w?{data:{factorId:t,challengeId:m.id,webauthn:{type:m.webauthn.type,credential_response:w}},error:null}:{data:null,error:N}}case"request":{const x=D2(m.webauthn.credential_options.publicKey,u==null?void 0:u.request),{data:w,error:N}=await A2(Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:x,signal:g}));return w?{data:{factorId:t,challengeId:m.id,webauthn:{type:m.webauthn.type,credential_response:w}},error:null}:{data:null,error:N}}}}catch(m){return Ce(m)?{data:null,error:m}:{data:null,error:new ei("Unexpected error in challenge",m)}}}async _verify({challengeId:t,factorId:i,webauthn:l}){return this.client.mfa.verify({factorId:i,challengeId:t,webauthn:l})}async _authenticate({factorId:t,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},u){if(!i)return{data:null,error:new bl("rpId is required for WebAuthn authentication")};try{if(!dx())return{data:null,error:new ei("Browser does not support WebAuthn",null)};const{data:h,error:m}=await this.challenge({factorId:t,webauthn:{rpId:i,rpOrigins:l},signal:c},{request:u});if(!h)return{data:null,error:m};const{webauthn:p}=h;return this._verify({factorId:t,challengeId:h.challengeId,webauthn:{type:p.type,rpId:i,rpOrigins:l,credential_response:p.credential_response}})}catch(h){return Ce(h)?{data:null,error:h}:{data:null,error:new ei("Unexpected error in authenticate",h)}}}async _register({friendlyName:t,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},u){if(!i)return{data:null,error:new bl("rpId is required for WebAuthn registration")};try{if(!dx())return{data:null,error:new ei("Browser does not support WebAuthn",null)};const{data:h,error:m}=await this._enroll({friendlyName:t});if(!h)return await this.client.mfa.listFactors().then(x=>{var w;return(w=x.data)===null||w===void 0?void 0:w.all.find(N=>N.factor_type==="webauthn"&&N.friendly_name===t&&N.status!=="unverified")}).then(x=>x?this.client.mfa.unenroll({factorId:x==null?void 0:x.id}):void 0),{data:null,error:m};const{data:p,error:g}=await this._challenge({factorId:h.id,friendlyName:h.friendly_name,webauthn:{rpId:i,rpOrigins:l},signal:c},{create:u});return p?this._verify({factorId:h.id,challengeId:p.challengeId,webauthn:{rpId:i,rpOrigins:l,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:g}}catch(h){return Ce(h)?{data:null,error:h}:{data:null,error:new ei("Unexpected error in register",h)}}}}p2();const M2={url:E1,storageKey:O1,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:D1,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function hx(s,t,i){return await i()}const Fi={};class yl{get jwks(){var t,i;return(i=(t=Fi[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(t){Fi[this.storageKey]=Object.assign(Object.assign({},Fi[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,i;return(i=(t=Fi[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Fi[this.storageKey]=Object.assign(Object.assign({},Fi[this.storageKey]),{cachedAt:t})}constructor(t){var i,l,c;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const u=Object.assign(Object.assign({},M2),t);if(this.storageKey=u.storageKey,this.instanceID=(i=yl.nextInstanceID[this.storageKey])!==null&&i!==void 0?i:0,yl.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.instanceID>0&&ds()){const h=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(h),this.logDebugMessages&&console.trace(h)}if(this.persistSession=u.persistSession,this.autoRefreshToken=u.autoRefreshToken,this.admin=new h2({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=ob(u.fetch),this.lock=u.lock||hx,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,this.throwOnError=u.throwOnError,this.lockAcquireTimeout=u.lockAcquireTimeout,u.lock?this.lock=u.lock:this.persistSession&&ds()&&(!((l=globalThis==null?void 0:globalThis.navigator)===null||l===void 0)&&l.locks)?this.lock=m2:this.lock=hx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new R2(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:lb()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ux(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=ux(this.memoryStorage)),ds()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(c=this.broadcastChannel)===null||c===void 0||c.addEventListener("message",async h=>{this._debug("received broadcast notification from other tab or client",h);try{await this._notifyAllSubscribers(h.data.event,h.data.session,!1)}catch(m){this._debug("#broadcastChannel","error",m)}})}this.initialize().catch(h=>{this._debug("#initialize()","error",h)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${nb}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let i={},l="none";if(ds()&&(i=G1(window.location.href),this._isImplicitGrantCallback(i)?l="implicit":await this._isPKCECallback(i)&&(l="pkce")),ds()&&this.detectSessionInUrl&&l!=="none"){const{data:c,error:u}=await this._getSessionFromURL(i,l);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),P1(u)){const p=(t=u.details)===null||t===void 0?void 0:t.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:u}}return{error:u}}const{session:h,redirectType:m}=c;return this._debug("#_initialize()","detected session in URL",h,"redirect type",m),await this._saveSession(h),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return Ce(i)?this._returnResult({error:i}):this._returnResult({error:new ei("Unexpected error during initialization",i)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var i,l,c;try{const u=await Be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(l=(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:(c=t==null?void 0:t.options)===null||c===void 0?void 0:c.captchaToken}},xform:da}),{data:h,error:m}=u;if(m||!h)return this._returnResult({data:{user:null,session:null},error:m});const p=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:g,session:p},error:null})}catch(u){if(Ce(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signUp(t){var i,l,c;try{let u;if("email"in t){const{email:x,password:w,options:N}=t;let _=null,T=null;this.flowType==="pkce"&&([_,T]=await Hi(this.storage,this.storageKey)),u=await Be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:N==null?void 0:N.emailRedirectTo,body:{email:x,password:w,data:(i=N==null?void 0:N.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken},code_challenge:_,code_challenge_method:T},xform:da})}else if("phone"in t){const{phone:x,password:w,options:N}=t;u=await Be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:w,data:(l=N==null?void 0:N.data)!==null&&l!==void 0?l:{},channel:(c=N==null?void 0:N.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken}},xform:da})}else throw new ec("You must provide either an email or phone number and a password");const{data:h,error:m}=u;if(m||!h)return await us(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:m});const p=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:g,session:p},error:null})}catch(u){if(await us(this.storage,`${this.storageKey}-code-verifier`),Ce(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithPassword(t){try{let i;if("email"in t){const{email:u,password:h,options:m}=t;i=await Be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:h,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:ox})}else if("phone"in t){const{phone:u,password:h,options:m}=t;i=await Be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:h,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:ox})}else throw new ec("You must provide either an email or phone number and a password");const{data:l,error:c}=i;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const u=new $i;return this._returnResult({data:{user:null,session:null},error:u})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign({user:l.user,session:l.session},l.weak_password?{weakPassword:l.weak_password}:null),error:c})}catch(i){if(Ce(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOAuth(t){var i,l,c,u;return await this._handleProviderSignIn(t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(u=t.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:i}=t;switch(i){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}}async signInWithEthereum(t){var i,l,c,u,h,m,p,g,x,w,N;let _,T;if("message"in t)_=t.message,T=t.signature;else{const{chain:U,wallet:O,statement:L,options:D}=t;let M;if(ds())if(typeof O=="object")M=O;else{const he=window;if("ethereum"in he&&typeof he.ethereum=="object"&&"request"in he.ethereum&&typeof he.ethereum.request=="function")M=he.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof O!="object"||!(D!=null&&D.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=O}const ie=new URL((i=D==null?void 0:D.url)!==null&&i!==void 0?i:window.location.href),ue=await M.request({method:"eth_requestAccounts"}).then(he=>he).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!ue||ue.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const B=ub(ue[0]);let H=(l=D==null?void 0:D.signInWithEthereum)===null||l===void 0?void 0:l.chainId;if(!H){const he=await M.request({method:"eth_chainId"});H=g2(he)}const pe={domain:ie.host,address:B,statement:L,uri:ie.href,version:"1",chainId:H,nonce:(c=D==null?void 0:D.signInWithEthereum)===null||c===void 0?void 0:c.nonce,issuedAt:(h=(u=D==null?void 0:D.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(m=D==null?void 0:D.signInWithEthereum)===null||m===void 0?void 0:m.expirationTime,notBefore:(p=D==null?void 0:D.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(g=D==null?void 0:D.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(x=D==null?void 0:D.signInWithEthereum)===null||x===void 0?void 0:x.resources};_=v2(pe),T=await M.request({method:"personal_sign",params:[x2(_),B]})}try{const{data:U,error:O}=await Be(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:_,signature:T},!((w=t.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(N=t.options)===null||N===void 0?void 0:N.captchaToken}}:null),xform:da});if(O)throw O;if(!U||!U.session||!U.user){const L=new $i;return this._returnResult({data:{user:null,session:null},error:L})}return U.session&&(await this._saveSession(U.session),await this._notifyAllSubscribers("SIGNED_IN",U.session)),this._returnResult({data:Object.assign({},U),error:O})}catch(U){if(Ce(U))return this._returnResult({data:{user:null,session:null},error:U});throw U}}async signInWithSolana(t){var i,l,c,u,h,m,p,g,x,w,N,_;let T,U;if("message"in t)T=t.message,U=t.signature;else{const{chain:O,wallet:L,statement:D,options:M}=t;let ie;if(ds())if(typeof L=="object")ie=L;else{const B=window;if("solana"in B&&typeof B.solana=="object"&&("signIn"in B.solana&&typeof B.solana.signIn=="function"||"signMessage"in B.solana&&typeof B.solana.signMessage=="function"))ie=B.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof L!="object"||!(M!=null&&M.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");ie=L}const ue=new URL((i=M==null?void 0:M.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in ie&&ie.signIn){const B=await ie.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},M==null?void 0:M.signInWithSolana),{version:"1",domain:ue.host,uri:ue.href}),D?{statement:D}:null));let H;if(Array.isArray(B)&&B[0]&&typeof B[0]=="object")H=B[0];else if(B&&typeof B=="object"&&"signedMessage"in B&&"signature"in B)H=B;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in H&&"signature"in H&&(typeof H.signedMessage=="string"||H.signedMessage instanceof Uint8Array)&&H.signature instanceof Uint8Array)T=typeof H.signedMessage=="string"?H.signedMessage:new TextDecoder().decode(H.signedMessage),U=H.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in ie)||typeof ie.signMessage!="function"||!("publicKey"in ie)||typeof ie!="object"||!ie.publicKey||!("toBase58"in ie.publicKey)||typeof ie.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");T=[`${ue.host} wants you to sign in with your Solana account:`,ie.publicKey.toBase58(),...D?["",D,""]:[""],"Version: 1",`URI: ${ue.href}`,`Issued At: ${(c=(l=M==null?void 0:M.signInWithSolana)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((u=M==null?void 0:M.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${M.signInWithSolana.notBefore}`]:[],...!((h=M==null?void 0:M.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${M.signInWithSolana.expirationTime}`]:[],...!((m=M==null?void 0:M.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${M.signInWithSolana.chainId}`]:[],...!((p=M==null?void 0:M.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${M.signInWithSolana.nonce}`]:[],...!((g=M==null?void 0:M.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${M.signInWithSolana.requestId}`]:[],...!((w=(x=M==null?void 0:M.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||w===void 0)&&w.length?["Resources",...M.signInWithSolana.resources.map(H=>`- ${H}`)]:[]].join(`
`);const B=await ie.signMessage(new TextEncoder().encode(T),"utf8");if(!B||!(B instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");U=B}}try{const{data:O,error:L}=await Be(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:T,signature:ti(U)},!((N=t.options)===null||N===void 0)&&N.captchaToken?{gotrue_meta_security:{captcha_token:(_=t.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:da});if(L)throw L;if(!O||!O.session||!O.user){const D=new $i;return this._returnResult({data:{user:null,session:null},error:D})}return O.session&&(await this._saveSession(O.session),await this._notifyAllSubscribers("SIGNED_IN",O.session)),this._returnResult({data:Object.assign({},O),error:L})}catch(O){if(Ce(O))return this._returnResult({data:{user:null,session:null},error:O});throw O}}async _exchangeCodeForSession(t){const i=await Qn(this.storage,`${this.storageKey}-code-verifier`),[l,c]=(i??"").split("/");try{if(!l&&this.flowType==="pkce")throw new B1;const{data:u,error:h}=await Be(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:l},xform:da});if(await us(this.storage,`${this.storageKey}-code-verifier`),h)throw h;if(!u||!u.session||!u.user){const m=new $i;return this._returnResult({data:{user:null,session:null,redirectType:null},error:m})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign(Object.assign({},u),{redirectType:c??null}),error:h})}catch(u){if(await us(this.storage,`${this.storageKey}-code-verifier`),Ce(u))return this._returnResult({data:{user:null,session:null,redirectType:null},error:u});throw u}}async signInWithIdToken(t){try{const{options:i,provider:l,token:c,access_token:u,nonce:h}=t,m=await Be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:l,id_token:c,access_token:u,nonce:h,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:da}),{data:p,error:g}=m;if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!p||!p.session||!p.user){const x=new $i;return this._returnResult({data:{user:null,session:null},error:x})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:g})}catch(i){if(Ce(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOtp(t){var i,l,c,u,h;try{if("email"in t){const{email:m,options:p}=t;let g=null,x=null;this.flowType==="pkce"&&([g,x]=await Hi(this.storage,this.storageKey));const{error:w}=await Be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(i=p==null?void 0:p.data)!==null&&i!==void 0?i:{},create_user:(l=p==null?void 0:p.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:g,code_challenge_method:x},redirectTo:p==null?void 0:p.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:w})}if("phone"in t){const{phone:m,options:p}=t,{data:g,error:x}=await Be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(c=p==null?void 0:p.data)!==null&&c!==void 0?c:{},create_user:(u=p==null?void 0:p.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},channel:(h=p==null?void 0:p.channel)!==null&&h!==void 0?h:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:g==null?void 0:g.message_id},error:x})}throw new ec("You must provide either an email or phone number.")}catch(m){if(await us(this.storage,`${this.storageKey}-code-verifier`),Ce(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async verifyOtp(t){var i,l;try{let c,u;"options"in t&&(c=(i=t.options)===null||i===void 0?void 0:i.redirectTo,u=(l=t.options)===null||l===void 0?void 0:l.captchaToken);const{data:h,error:m}=await Be(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:u}}),redirectTo:c,xform:da});if(m)throw m;if(!h)throw new Error("An error occurred on token verification.");const p=h.session,g=h.user;return p!=null&&p.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:g,session:p},error:null})}catch(c){if(Ce(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithSSO(t){var i,l,c,u,h;try{let m=null,p=null;this.flowType==="pkce"&&([m,p]=await Hi(this.storage,this.storageKey));const g=await Be(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(l=(i=t.options)===null||i===void 0?void 0:i.redirectTo)!==null&&l!==void 0?l:void 0}),!((c=t==null?void 0:t.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:m,code_challenge_method:p}),headers:this.headers,xform:c2});return!((u=g.data)===null||u===void 0)&&u.url&&ds()&&!(!((h=t.options)===null||h===void 0)&&h.skipBrowserRedirect)&&window.location.assign(g.data.url),this._returnResult(g)}catch(m){if(await us(this.storage,`${this.storageKey}-code-verifier`),Ce(m))return this._returnResult({data:null,error:m});throw m}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:i},error:l}=t;if(l)throw l;if(!i)throw new Is;const{error:c}=await Be(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return this._returnResult({data:{user:null,session:null},error:c})})}catch(t){if(Ce(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const i=`${this.url}/resend`;if("email"in t){const{email:l,type:c,options:u}=t,{error:h}=await Be(this.fetch,"POST",i,{headers:this.headers,body:{email:l,type:c,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},redirectTo:u==null?void 0:u.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}else if("phone"in t){const{phone:l,type:c,options:u}=t,{data:h,error:m}=await Be(this.fetch,"POST",i,{headers:this.headers,body:{phone:l,type:c,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:m})}throw new ec("You must provide either an email or phone number and a type")}catch(i){if(Ce(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async i=>i))}async _acquireLock(t,i){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const l=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await l,await i()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const l=i();for(this.pendingInLock.push((async()=>{try{await l}catch{}})()),await l;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await l}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await t(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const i=await Qn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?t=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const l=t.expires_at?t.expires_at*1e3-Date.now()<th:!1;if(this._debug("#__loadSession()",`session has${l?"":" not"} expired`,"expires_at",t.expires_at),!l){if(this.userStorage){const h=await Qn(this.userStorage,this.storageKey+"-user");h!=null&&h.user?t.user=h.user:t.user=nh()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const h={value:this.suppressGetSessionWarning};t.user=i2(t.user,h),h.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:c,error:u}=await this._callRefreshToken(t.refresh_token);return u?this._returnResult({data:{session:null},error:u}):this._returnResult({data:{session:c},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const i=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return i.data.user&&(this.suppressGetSessionWarning=!0),i}async _getUser(t){try{return t?await Be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:kn}):await this._useSession(async i=>{var l,c,u;const{data:h,error:m}=i;if(m)throw m;return!(!((l=h.session)===null||l===void 0)&&l.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Is}:await Be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0,xform:kn})})}catch(i){if(Ce(i))return sh(i)&&(await this._removeSession(),await us(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:i});throw i}}async updateUser(t,i={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,i))}async _updateUser(t,i={}){try{return await this._useSession(async l=>{const{data:c,error:u}=l;if(u)throw u;if(!c.session)throw new Is;const h=c.session;let m=null,p=null;this.flowType==="pkce"&&t.email!=null&&([m,p]=await Hi(this.storage,this.storageKey));const{data:g,error:x}=await Be(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i==null?void 0:i.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:m,code_challenge_method:p}),jwt:h.access_token,xform:kn});if(x)throw x;return h.user=g.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),this._returnResult({data:{user:h.user},error:null})})}catch(l){if(await us(this.storage,`${this.storageKey}-code-verifier`),Ce(l))return this._returnResult({data:{user:null},error:l});throw l}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Is;const i=Date.now()/1e3;let l=i,c=!0,u=null;const{payload:h}=sc(t.access_token);if(h.exp&&(l=h.exp,c=l<=i),c){const{data:m,error:p}=await this._callRefreshToken(t.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!m)return{data:{user:null,session:null},error:null};u=m}else{const{data:m,error:p}=await this._getUser(t.access_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});u={access_token:t.access_token,refresh_token:t.refresh_token,user:m.user,token_type:"bearer",expires_in:l-i,expires_at:l},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return this._returnResult({data:{user:u.user,session:u},error:null})}catch(i){if(Ce(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async i=>{var l;if(!t){const{data:h,error:m}=i;if(m)throw m;t=(l=h.session)!==null&&l!==void 0?l:void 0}if(!(t!=null&&t.refresh_token))throw new Is;const{data:c,error:u}=await this._callRefreshToken(t.refresh_token);return u?this._returnResult({data:{user:null,session:null},error:u}):c?this._returnResult({data:{user:c.user,session:c},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(i){if(Ce(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async _getSessionFromURL(t,i){try{if(!ds())throw new tc("No browser detected.");if(t.error||t.error_description||t.error_code)throw new tc(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new tx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new tc("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new tx("No code detected.");const{data:D,error:M}=await this._exchangeCodeForSession(t.code);if(M)throw M;const ie=new URL(window.location.href);return ie.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ie.toString()),{data:{session:D.session,redirectType:null},error:null}}const{provider_token:l,provider_refresh_token:c,access_token:u,refresh_token:h,expires_in:m,expires_at:p,token_type:g}=t;if(!u||!m||!h||!g)throw new tc("No session defined in URL");const x=Math.round(Date.now()/1e3),w=parseInt(m);let N=x+w;p&&(N=parseInt(p));const _=N-x;_*1e3<=Qi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${w}s`);const T=N-w;x-T>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",T,N,x):x-T<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",T,N,x);const{data:U,error:O}=await this._getUser(u);if(O)throw O;const L={provider_token:l,provider_refresh_token:c,access_token:u,expires_in:w,expires_at:N,refresh_token:h,token_type:g,user:U.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:L,redirectType:t.type},error:null})}catch(l){if(Ce(l))return this._returnResult({data:{session:null,redirectType:null},error:l});throw l}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const i=await Qn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&i)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async i=>{var l;const{data:c,error:u}=i;if(u&&!sh(u))return this._returnResult({error:u});const h=(l=c.session)===null||l===void 0?void 0:l.access_token;if(h){const{error:m}=await this.admin.signOut(h,t);if(m&&!(L1(m)&&(m.status===404||m.status===401||m.status===403)||sh(m)))return this._returnResult({error:m})}return t!=="others"&&(await this._removeSession(),await us(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const i=K1(),l={id:i,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,l),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:l}}}async _emitInitialSession(t){return await this._useSession(async i=>{var l,c;try{const{data:{session:u},error:h}=i;if(h)throw h;await((l=this.stateChangeEmitters.get(t))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",t,"session",u)}catch(u){await((c=this.stateChangeEmitters.get(t))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",u),console.error(u)}})}async resetPasswordForEmail(t,i={}){let l=null,c=null;this.flowType==="pkce"&&([l,c]=await Hi(this.storage,this.storageKey,!0));try{return await Be(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:l,code_challenge_method:c,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(u){if(await us(this.storage,`${this.storageKey}-code-verifier`),Ce(u))return this._returnResult({data:null,error:u});throw u}}async getUserIdentities(){var t;try{const{data:i,error:l}=await this.getUser();if(l)throw l;return this._returnResult({data:{identities:(t=i.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(i){if(Ce(i))return this._returnResult({data:null,error:i});throw i}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var i;try{const{data:l,error:c}=await this._useSession(async u=>{var h,m,p,g,x;const{data:w,error:N}=u;if(N)throw N;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(h=t.options)===null||h===void 0?void 0:h.redirectTo,scopes:(m=t.options)===null||m===void 0?void 0:m.scopes,queryParams:(p=t.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await Be(this.fetch,"GET",_,{headers:this.headers,jwt:(x=(g=w.session)===null||g===void 0?void 0:g.access_token)!==null&&x!==void 0?x:void 0})});if(c)throw c;return ds()&&!(!((i=t.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(l==null?void 0:l.url),this._returnResult({data:{provider:t.provider,url:l==null?void 0:l.url},error:null})}catch(l){if(Ce(l))return this._returnResult({data:{provider:t.provider,url:null},error:l});throw l}}async linkIdentityIdToken(t){return await this._useSession(async i=>{var l;try{const{error:c,data:{session:u}}=i;if(c)throw c;const{options:h,provider:m,token:p,access_token:g,nonce:x}=t,w=await Be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(l=u==null?void 0:u.access_token)!==null&&l!==void 0?l:void 0,body:{provider:m,id_token:p,access_token:g,nonce:x,link_identity:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:da}),{data:N,error:_}=w;return _?this._returnResult({data:{user:null,session:null},error:_}):!N||!N.session||!N.user?this._returnResult({data:{user:null,session:null},error:new $i}):(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("USER_UPDATED",N.session)),this._returnResult({data:N,error:_}))}catch(c){if(await us(this.storage,`${this.storageKey}-code-verifier`),Ce(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}})}async unlinkIdentity(t){try{return await this._useSession(async i=>{var l,c;const{data:u,error:h}=i;if(h)throw h;return await Be(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(c=(l=u.session)===null||l===void 0?void 0:l.access_token)!==null&&c!==void 0?c:void 0})})}catch(i){if(Ce(i))return this._returnResult({data:null,error:i});throw i}}async _refreshAccessToken(t){const i=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{const l=Date.now();return await Q1(async c=>(c>0&&await Y1(200*Math.pow(2,c-1)),this._debug(i,"refreshing attempt",c),await Be(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:da})),(c,u)=>{const h=200*Math.pow(2,c);return u&&ah(u)&&Date.now()+h-l<Qi})}catch(l){if(this._debug(i,"error",l),Ce(l))return this._returnResult({data:{session:null,user:null},error:l});throw l}finally{this._debug(i,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,i){const l=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",i,"url",l),ds()&&!i.skipBrowserRedirect&&window.location.assign(l),{data:{provider:t,url:l},error:null}}async _recoverAndRefresh(){var t,i;const l="#_recoverAndRefresh()";this._debug(l,"begin");try{const c=await Qn(this.storage,this.storageKey);if(c&&this.userStorage){let h=await Qn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:c.user},await Xi(this.userStorage,this.storageKey+"-user",h)),c.user=(t=h==null?void 0:h.user)!==null&&t!==void 0?t:nh()}else if(c&&!c.user&&!c.user){const h=await Qn(this.storage,this.storageKey+"-user");h&&(h!=null&&h.user)?(c.user=h.user,await us(this.storage,this.storageKey+"-user"),await Xi(this.storage,this.storageKey,c)):c.user=nh()}if(this._debug(l,"session from storage",c),!this._isValidSession(c)){this._debug(l,"session is not valid"),c!==null&&await this._removeSession();return}const u=((i=c.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<th;if(this._debug(l,`session has${u?"":" not"} expired with margin of ${th}s`),u){if(this.autoRefreshToken&&c.refresh_token){const{error:h}=await this._callRefreshToken(c.refresh_token);h&&(console.error(h),ah(h)||(this._debug(l,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:m}=await this._getUser(c.access_token);!m&&(h!=null&&h.user)?(c.user=h.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(l,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(l,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(l,"error",c),console.error(c);return}finally{this._debug(l,"end")}}async _callRefreshToken(t){var i,l;if(!t)throw new Is;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new Mc;const{data:u,error:h}=await this._refreshAccessToken(t);if(h)throw h;if(!u.session)throw new Is;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const m={data:u.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(u){if(this._debug(c,"error",u),Ce(u)){const h={data:null,error:u};return ah(u)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(h),h}throw(l=this.refreshingDeferred)===null||l===void 0||l.reject(u),u}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(t,i,l=!0){const c=`#_notifyAllSubscribers(${t})`;this._debug(c,"begin",i,`broadcast = ${l}`);try{this.broadcastChannel&&l&&this.broadcastChannel.postMessage({event:t,session:i});const u=[],h=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(t,i)}catch(p){u.push(p)}});if(await Promise.all(h),u.length>0){for(let m=0;m<u.length;m+=1)console.error(u[m]);throw u[0]}}finally{this._debug(c,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await us(this.storage,`${this.storageKey}-code-verifier`);const i=Object.assign({},t),l=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!l&&i.user&&await Xi(this.userStorage,this.storageKey+"-user",{user:i.user});const c=Object.assign({},i);delete c.user;const u=rx(c);await Xi(this.storage,this.storageKey,u)}else{const c=rx(i);await Xi(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await us(this.storage,this.storageKey),await us(this.storage,this.storageKey+"-code-verifier"),await us(this.storage,this.storageKey+"-user"),this.userStorage&&await us(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ds()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Qi);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const i=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=i,i&&typeof i=="object"&&typeof i.unref=="function"?i.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(i)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const i=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,i&&clearTimeout(i)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async i=>{const{data:{session:l}}=i;if(!l||!l.refresh_token||!l.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((l.expires_at*1e3-t)/Qi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${Qi}ms, refresh threshold is ${Uh} ticks`),c<=Uh&&await this._callRefreshToken(l.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof cb)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ds()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const i=`#_onVisibilityChanged(${t})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,i,l){const c=[`provider=${encodeURIComponent(i)}`];if(l!=null&&l.redirectTo&&c.push(`redirect_to=${encodeURIComponent(l.redirectTo)}`),l!=null&&l.scopes&&c.push(`scopes=${encodeURIComponent(l.scopes)}`),this.flowType==="pkce"){const[u,h]=await Hi(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(h)}`});c.push(m.toString())}if(l!=null&&l.queryParams){const u=new URLSearchParams(l.queryParams);c.push(u.toString())}return l!=null&&l.skipBrowserRedirect&&c.push(`skip_http_redirect=${l.skipBrowserRedirect}`),`${t}?${c.join("&")}`}async _unenroll(t){try{return await this._useSession(async i=>{var l;const{data:c,error:u}=i;return u?this._returnResult({data:null,error:u}):await Be(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(l=c==null?void 0:c.session)===null||l===void 0?void 0:l.access_token})})}catch(i){if(Ce(i))return this._returnResult({data:null,error:i});throw i}}async _enroll(t){try{return await this._useSession(async i=>{var l,c;const{data:u,error:h}=i;if(h)return this._returnResult({data:null,error:h});const m=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:p,error:g}=await Be(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(l=u==null?void 0:u.session)===null||l===void 0?void 0:l.access_token});return g?this._returnResult({data:null,error:g}):(t.factorType==="totp"&&p.type==="totp"&&(!((c=p==null?void 0:p.totp)===null||c===void 0)&&c.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(i){if(Ce(i))return this._returnResult({data:null,error:i});throw i}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async i=>{var l;const{data:c,error:u}=i;if(u)return this._returnResult({data:null,error:u});const h=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?_2(t.webauthn.credential_response):T2(t.webauthn.credential_response)})}:{code:t.code}),{data:m,error:p}=await Be(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:h,headers:this.headers,jwt:(l=c==null?void 0:c.session)===null||l===void 0?void 0:l.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),this._returnResult({data:m,error:p}))})}catch(i){if(Ce(i))return this._returnResult({data:null,error:i});throw i}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async i=>{var l;const{data:c,error:u}=i;if(u)return this._returnResult({data:null,error:u});const h=await Be(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(l=c==null?void 0:c.session)===null||l===void 0?void 0:l.access_token});if(h.error)return h;const{data:m}=h;if(m.type!=="webauthn")return{data:m,error:null};switch(m.webauthn.type){case"create":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:N2(m.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:S2(m.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(i){if(Ce(i))return this._returnResult({data:null,error:i});throw i}})}async _challengeAndVerify(t){const{data:i,error:l}=await this._challenge({factorId:t.factorId});return l?this._returnResult({data:null,error:l}):await this._verify({factorId:t.factorId,challengeId:i.id,code:t.code})}async _listFactors(){var t;const{data:{user:i},error:l}=await this.getUser();if(l)return{data:null,error:l};const c={all:[],phone:[],totp:[],webauthn:[]};for(const u of(t=i==null?void 0:i.factors)!==null&&t!==void 0?t:[])c.all.push(u),u.status==="verified"&&c[u.factor_type].push(u);return{data:c,error:null}}async _getAuthenticatorAssuranceLevel(t){var i,l,c,u;if(t)try{const{payload:_}=sc(t);let T=null;_.aal&&(T=_.aal);let U=T;const{data:{user:O},error:L}=await this.getUser(t);if(L)return this._returnResult({data:null,error:L});((l=(i=O==null?void 0:O.factors)===null||i===void 0?void 0:i.filter(ie=>ie.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(U="aal2");const M=_.amr||[];return{data:{currentLevel:T,nextLevel:U,currentAuthenticationMethods:M},error:null}}catch(_){if(Ce(_))return this._returnResult({data:null,error:_});throw _}const{data:{session:h},error:m}=await this.getSession();if(m)return this._returnResult({data:null,error:m});if(!h)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:p}=sc(h.access_token);let g=null;p.aal&&(g=p.aal);let x=g;((u=(c=h.user.factors)===null||c===void 0?void 0:c.filter(_=>_.status==="verified"))!==null&&u!==void 0?u:[]).length>0&&(x="aal2");const N=p.amr||[];return{data:{currentLevel:g,nextLevel:x,currentAuthenticationMethods:N},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async i=>{const{data:{session:l},error:c}=i;return c?this._returnResult({data:null,error:c}):l?await Be(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:l.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new Is})})}catch(i){if(Ce(i))return this._returnResult({data:null,error:i});throw i}}async _approveAuthorization(t,i){try{return await this._useSession(async l=>{const{data:{session:c},error:u}=l;if(u)return this._returnResult({data:null,error:u});if(!c)return this._returnResult({data:null,error:new Is});const h=await Be(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"approve"},xform:m=>({data:m,error:null})});return h.data&&h.data.redirect_url&&ds()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h})}catch(l){if(Ce(l))return this._returnResult({data:null,error:l});throw l}}async _denyAuthorization(t,i){try{return await this._useSession(async l=>{const{data:{session:c},error:u}=l;if(u)return this._returnResult({data:null,error:u});if(!c)return this._returnResult({data:null,error:new Is});const h=await Be(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"deny"},xform:m=>({data:m,error:null})});return h.data&&h.data.redirect_url&&ds()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h})}catch(l){if(Ce(l))return this._returnResult({data:null,error:l});throw l}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:i},error:l}=t;return l?this._returnResult({data:null,error:l}):i?await Be(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new Is})})}catch(t){if(Ce(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async i=>{const{data:{session:l},error:c}=i;return c?this._returnResult({data:null,error:c}):l?(await Be(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:l.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Is})})}catch(i){if(Ce(i))return this._returnResult({data:null,error:i});throw i}}async fetchJwk(t,i={keys:[]}){let l=i.keys.find(m=>m.kid===t);if(l)return l;const c=Date.now();if(l=this.jwks.keys.find(m=>m.kid===t),l&&this.jwks_cached_at+M1>c)return l;const{data:u,error:h}=await Be(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=c,l=u.keys.find(m=>m.kid===t),!l)?null:l}async getClaims(t,i={}){try{let l=t;if(!l){const{data:_,error:T}=await this.getSession();if(T||!_.session)return this._returnResult({data:null,error:T});l=_.session.access_token}const{header:c,payload:u,signature:h,raw:{header:m,payload:p}}=sc(l);i!=null&&i.allowExpired||s2(u.exp);const g=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,i!=null&&i.keys?{keys:i.keys}:i==null?void 0:i.jwks);if(!g){const{error:_}=await this.getUser(l);if(_)throw _;return{data:{claims:u,header:c,signature:h},error:null}}const x=a2(c.alg),w=await crypto.subtle.importKey("jwk",g,x,!0,["verify"]);if(!await crypto.subtle.verify(x,w,h,$1(`${m}.${p}`)))throw new Bh("Invalid JWT signature");return{data:{claims:u,header:c,signature:h},error:null}}catch(l){if(Ce(l))return this._returnResult({data:null,error:l});throw l}}}yl.nextInstanceID={};const U2=yl,L2="2.95.3";let ll="";typeof Deno<"u"?ll="deno":typeof document<"u"?ll="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ll="react-native":ll="node";const P2={"X-Client-Info":`supabase-js-${ll}/${L2}`},B2={headers:P2},z2={schema:"public"},V2={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},q2={};function wl(s){"@babel/helpers - typeof";return wl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wl(s)}function I2(s,t){if(wl(s)!="object"||!s)return s;var i=s[Symbol.toPrimitive];if(i!==void 0){var l=i.call(s,t);if(wl(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function $2(s){var t=I2(s,"string");return wl(t)=="symbol"?t:t+""}function H2(s,t,i){return(t=$2(t))in s?Object.defineProperty(s,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[t]=i,s}function fx(s,t){var i=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);t&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),i.push.apply(i,l)}return i}function Pt(s){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?fx(Object(i),!0).forEach(function(l){H2(s,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(i)):fx(Object(i)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(i,l))})}return s}const K2=s=>s?(...t)=>s(...t):(...t)=>fetch(...t),G2=()=>Headers,F2=(s,t,i)=>{const l=K2(i),c=G2();return async(u,h)=>{var m;const p=(m=await t())!==null&&m!==void 0?m:s;let g=new c(h==null?void 0:h.headers);return g.has("apikey")||g.set("apikey",s),g.has("Authorization")||g.set("Authorization",`Bearer ${p}`),l(u,Pt(Pt({},h),{},{headers:g}))}};function Y2(s){return s.endsWith("/")?s:s+"/"}function Q2(s,t){var i,l;const{db:c,auth:u,realtime:h,global:m}=s,{db:p,auth:g,realtime:x,global:w}=t,N={db:Pt(Pt({},p),c),auth:Pt(Pt({},g),u),realtime:Pt(Pt({},x),h),storage:{},global:Pt(Pt(Pt({},w),m),{},{headers:Pt(Pt({},(i=w==null?void 0:w.headers)!==null&&i!==void 0?i:{}),(l=m==null?void 0:m.headers)!==null&&l!==void 0?l:{})}),accessToken:async()=>""};return s.accessToken?N.accessToken=s.accessToken:delete N.accessToken,N}function X2(s){const t=s==null?void 0:s.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Y2(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var J2=class extends U2{constructor(s){super(s)}},Z2=class{constructor(s,t,i){var l,c;this.supabaseUrl=s,this.supabaseKey=t;const u=X2(s);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const h=`sb-${u.hostname.split(".")[0]}-auth-token`,m={db:z2,realtime:q2,auth:Pt(Pt({},V2),{},{storageKey:h}),global:B2},p=Q2(i??{},m);if(this.storageKey=(l=p.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(c=p.global.headers)!==null&&c!==void 0?c:{},p.accessToken)this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(x,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}});else{var g;this.auth=this._initSupabaseAuthClient((g=p.auth)!==null&&g!==void 0?g:{},this.headers,p.global.fetch)}this.fetch=F2(t,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Pt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(x=>this.realtime.setAuth(x)).catch(x=>console.warn("Failed to set initial Realtime auth token:",x)),this.rest=new LN(new URL("rest/v1",u).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch,timeout:p.db.timeout,urlLengthLimit:p.db.urlLengthLimit}),this.storage=new C1(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new AN(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,t={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(s,t,i)}channel(s,t={config:{}}){return this.realtime.channel(s,t)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var s=this,t,i;if(s.accessToken)return await s.accessToken();const{data:l}=await s.auth.getSession();return(t=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&t!==void 0?t:s.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:t,detectSessionInUrl:i,storage:l,userStorage:c,storageKey:u,flowType:h,lock:m,debug:p,throwOnError:g},x,w){const N={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new J2({url:this.authUrl.href,headers:Pt(Pt({},N),x),storageKey:u,autoRefreshToken:s,persistSession:t,detectSessionInUrl:i,storage:l,userStorage:c,flowType:h,lock:m,debug:p,throwOnError:g,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(_=>_.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new WN(this.realtimeUrl.href,Pt(Pt({},s),{},{params:Pt(Pt({},{apikey:this.supabaseKey}),s==null?void 0:s.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,t)=>{this._handleTokenChanged(s,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(s,t,i){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const W2=(s,t,i)=>new Z2(s,t,i);function eS(){if(typeof window<"u")return!1;const s=globalThis.process;if(!s)return!1;const t=s.version;if(t==null)return!1;const i=t.match(/^v(\d+)\./);return i?parseInt(i[1],10)<=18:!1}eS()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");let ac=null,zh=null,Vh=null;function tS(){return!zh||!Vh?null:{url:zh,anonKey:Vh}}function Ie(){var i,l,c,u,h;if(ac)return ac;let s=(l=(i=import.meta)==null?void 0:i.env)==null?void 0:l.VITE_SUPABASE_URL,t=(u=(c=import.meta)==null?void 0:c.env)==null?void 0:u.VITE_SUPABASE_ANON_KEY;return s||(s="https://ykvatttsnpjrwqfhhysu.supabase.co"),t||(t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlrdmF0dHRzbnBqcndxZmhoeXN1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA0OTk5NjQsImV4cCI6MjA4NjA3NTk2NH0.5Njnh8NBEcPDddHjwv3CoUpCcAHu-ALNUQHQVdAdq-Y"),!s||!t?(console.error("Supabase Config Missing. Env:",(h=import.meta)==null?void 0:h.env),null):(zh=s,Vh=t,ac=W2(s,t),ac)}function sS(s,t="image/jpeg"){if(s.includes(",")){const u=s.split(","),h=u[0].match(/:(.*?);/);h&&(t=h[1]),s=u[1]}const i=atob(s);let l=i.length;const c=new Uint8Array(l);for(;l--;)c[l]=i.charCodeAt(l);return new Blob([c],{type:t})}async function rr(s,t,i="media"){if(typeof s=="string"&&(s.startsWith("http")||s.startsWith("blob:")))return s;const l=Ie();if(!l)return null;const c=typeof s=="string"?sS(s):s,u=`${t}/${Date.now()}_${Math.random().toString(36).slice(2)}`,{data:h,error:m}=await l.storage.from(i).upload(u,c,{upsert:!1});if(m)return null;const{data:p}=l.storage.from(i).getPublicUrl(h.path);return p.publicUrl}const mf="kisansetu_demo_session_v1";function pf(){return typeof window<"u"&&typeof window.localStorage<"u"}function aS(){if(!pf())return null;const s=window.localStorage.getItem(mf);if(!s)return null;try{const t=JSON.parse(s);return t&&typeof t.userId=="string"?{userId:t.userId}:null}catch{return null}}function hb(s){pf()&&window.localStorage.setItem(mf,JSON.stringify({userId:s}))}function nS(){pf()&&window.localStorage.removeItem(mf)}async function iS(s){return Array.from(new Uint8Array(s)).map(t=>t.toString(16).padStart(2,"0")).join("")}function rS(s=16){const t=new Uint8Array(s);return crypto.getRandomValues(t),Array.from(t).map(i=>i.toString(16).padStart(2,"0")).join("")}async function fb(s){const t=new TextEncoder().encode(s),i=await crypto.subtle.digest("SHA-256",t);return iS(i)}async function lS(s,t,i){var T;const l=Ie();if(!l)return{error:"Supabase not configured"};if(!s||!t)return{error:"Missing phone or password"};if(t.length<6)return{error:"Password must be at least 6 characters"};const c=await l.from("users").select("id").eq("phone",s).maybeSingle();if(c.error)return{error:c.error};if((T=c.data)!=null&&T.id)return{error:{message:"User already exists",code:"user_already_exists"}};const u=crypto.randomUUID(),h=rS(16),m=await fb(`${h}:${t}`),p={id:u,phone:s,email:null,role:(i==null?void 0:i.role)??null,status:"active",profile:null,createdAt:new Date().toISOString(),passwordSalt:h,passwordHash:m},{data:g,error:x}=await l.from("users").insert(p).select("*").single();if(x)return{error:x};hb(u);const{passwordHash:w,passwordSalt:N,..._}=g;return{data:_}}async function oS(s,t){const i=Ie();if(!i)return{error:"Supabase not configured"};if(!s||!t)return{error:"Missing phone or password"};const{data:l,error:c}=await i.from("users").select("*").eq("phone",s).maybeSingle();if(c)return{error:c};if(!l)return{error:{message:"Invalid login credentials",code:"invalid_credentials"}};const u=l.passwordSalt,h=l.passwordHash;if(!u||!h)return{error:{message:"Password login not enabled for this user",code:"password_not_set"}};if(await fb(`${u}:${t}`)!==h)return{error:{message:"Invalid login credentials",code:"invalid_credentials"}};hb(l.id);const{passwordHash:p,passwordSalt:g,...x}=l;return{data:x}}async function mx(){const s=Ie();if(!s)return[];const{data:t,error:i}=await s.from("users").select("*");return i?(console.error("getUsers error",i),[]):t}async function cS(s){const t=Ie();if(!t)return null;const{data:i,error:l}=await t.from("users").select("*").eq("id",s).maybeSingle();return l?(console.error("getUserById error",l),null):i||null}async function mb(s=8e3){const t=tS();if(!t)return{auth:{ok:!1},rest:{ok:!1},note:"supabase_not_configured"};const i=async(m,p)=>{const g=new AbortController,x=setTimeout(()=>g.abort(),s);try{const w=await fetch(m,{...p,signal:g.signal}),N=await w.text().catch(()=>"");return{ok:!0,status:w.status,text:N}}catch(w){const N=(w==null?void 0:w.name)||"Error",_=(w==null?void 0:w.message)||"unknown_error";return{ok:!1,error:`${N}: ${_}`}}finally{clearTimeout(x)}},l=await i(`${t.url}/auth/v1/health`,{method:"GET",headers:{apikey:t.anonKey}}),c=await i(`${t.url}/rest/v1/users?select=id&limit=1`,{method:"GET",headers:{apikey:t.anonKey,Authorization:`Bearer ${t.anonKey}`}}),u=l.ok&&typeof l.status=="number",h=c.ok&&typeof c.status=="number";return{auth:u?{ok:!0,status:l.status}:{ok:!1,error:l.error},rest:h?{ok:!0,status:c.status}:{ok:!1,error:c.error}}}async function px(){const s=Ie();if(!s)return null;const t=aS(),i=t==null?void 0:t.userId;if(!i)return null;const{data:l,error:c}=await s.from("users").select("*").eq("id",i).maybeSingle();if(c)return console.error("getCurrentUser error",c),null;if(!l)return null;const{passwordHash:u,passwordSalt:h,...m}=l;return m||null}async function uS(){nS()}async function nc(){const s=Ie();if(!s)return[];const{data:t,error:i}=await s.from("listings").select("*").order("createdAt",{ascending:!1});return i?(console.error("getListings error",i),[]):t}async function rh(){const s=Ie();if(!s)return[];const{data:t,error:i}=await s.from("offers").select("*").order("createdAt",{ascending:!1});return i?(console.error("getOffers error",i),[]):t}async function gx(){const s=Ie();if(!s)return[];const{data:t,error:i}=await s.from("orders").select("*").order("date",{ascending:!1});return i?(console.error("getOrders error",i),[]):t}async function xx(){const s=Ie();if(!s)return[];const{data:t,error:i}=await s.from("disputes").select("*").order("createdAt",{ascending:!1});return i?(console.error("getDisputes error",i),[]):t}async function vx(){const s=Ie();if(!s)return[];const{data:t,error:i}=await s.from("messages").select("*").order("timestamp",{ascending:!0});return i?(console.error("getMessages error",i),[]):t}async function bx(){const s=Ie();if(!s)return[];const{data:t,error:i}=await s.from("inventory_items").select("*").order("createdAt",{ascending:!1});return i?(console.error("getInventoryItems error",i),[]):t}async function yx(){const s=Ie();if(!s)return[];const{data:t,error:i}=await s.from("payouts").select("*").order("createdAt",{ascending:!1});return i?(console.error("getPayouts error",i),[]):t}async function wx(){const s=Ie();if(!s)return[];const{data:t,error:i}=await s.from("rfqs").select("*").order("createdAt",{ascending:!1});return i?(console.error("getRfqs error",i),[]):t}async function jx(){const s=Ie();if(!s)return[];const{data:t,error:i}=await s.from("route_plans").select("*").order("createdAt",{ascending:!1});return i?(console.error("getRoutePlans error",i),[]):t}async function Nx(){const s=Ie();if(!s)return[];const{data:t,error:i}=await s.from("transport_requests").select("*").order("createdAt",{ascending:!1});return i?(console.error("getTransportRequests error",i),[]):t}async function Sx(){const s=Ie();if(!s)return[];const{data:t,error:i}=await s.from("transport_bids").select("*").order("createdAt",{ascending:!1});return i?(console.error("getTransportBids error",i),[]):t}async function lh(s){const t=Ie();if(!t)return null;const{confirmPassword:i,password:l,...c}=s,{data:u,error:h}=await t.from("users").upsert(c,{onConflict:"id"}).select().single();return h?(console.error("addUser error",h),null):u}async function dS(s){const t=Ie();if(!t)throw new Error("Supabase not configured");const i={id:s.id,farmerId:s.farmerId,farmerName:s.farmerName,cropName:s.cropName,grade:s.grade,quantity:s.quantity,availableQuantity:s.availableQuantity,pricePerKg:s.pricePerKg,description:s.description,imageUrls:s.imageUrls,videoUrl:s.videoUrl,videoDurationSec:s.videoDurationSec,videoSizeBytes:s.videoSizeBytes,videoType:s.videoType,videoThumbnail:s.videoThumbnail,location:s.location,status:s.status,harvestDate:s.harvestDate,variety:s.variety,quantityUnit:s.quantityUnit,priceUnit:s.priceUnit,availableDate:s.availableDate,storageType:s.storageType,moistureContent:s.moistureContent,minOrderQuantity:s.minOrderQuantity,minOrderQuantityUnit:s.minOrderQuantityUnit,packagingDetails:s.packagingDetails,certification:s.certification,createdAt:s.createdAt},{data:l,error:c}=await t.from("listings").insert(i).select().single();if(c)throw console.error("addListing error",c),c;return l}async function oh(s){const t=Ie();if(!t)throw new Error("Supabase not configured");const i={id:s.id,farmerId:s.farmerId,farmerName:s.farmerName,cropName:s.cropName,grade:s.grade,quantity:s.quantity,availableQuantity:s.availableQuantity,pricePerKg:s.pricePerKg,description:s.description,imageUrls:s.imageUrls,videoUrl:s.videoUrl,videoDurationSec:s.videoDurationSec,videoSizeBytes:s.videoSizeBytes,videoType:s.videoType,videoThumbnail:s.videoThumbnail,location:s.location,status:s.status,harvestDate:s.harvestDate,variety:s.variety,quantityUnit:s.quantityUnit,priceUnit:s.priceUnit,availableDate:s.availableDate,storageType:s.storageType,moistureContent:s.moistureContent,minOrderQuantity:s.minOrderQuantity,minOrderQuantityUnit:s.minOrderQuantityUnit,packagingDetails:s.packagingDetails,certification:s.certification,createdAt:s.createdAt},{data:l,error:c}=await t.from("listings").update(i).eq("id",s.id).select().single();if(c)throw console.error("updateListing error",c),c;return l}async function hS(s,t){const i=Ie();if(!i)throw new Error("Supabase not configured");const{data:l,error:c}=await i.from("listings").update({status:t}).eq("id",s).select().single();if(c)throw console.error("updateListingStatus error",c),c;return l}async function fS(s){const t=Ie();if(!t)throw new Error("Supabase not configured");const{error:i}=await t.from("listings").delete().eq("id",s);if(i)throw console.error("deleteListing error",i),i;return!0}async function mS(s){const t=Ie();if(!t)throw new Error("Supabase not configured");const i={id:s.id,listingId:s.listingId,cropName:s.cropName,buyerName:s.buyerName,buyerId:s.buyerId,buyerLocation:s.buyerLocation,pricePerKg:s.pricePerKg,quantity:s.quantity,quantityRequested:s.quantityRequested,offeredPrice:s.offeredPrice,totalAmount:s.totalAmount,expectedDeliveryDate:s.expectedDeliveryDate,status:s.status,lastActionBy:s.lastActionBy,history:s.history,createdAt:s.createdAt};console.log("Placing offer with payload:",i);const{data:l,error:c}=await t.from("offers").insert(i).select().single();if(c)throw console.error("placeOffer error",c),c;return l}async function ch(s,t){const i=Ie();if(!i)throw new Error("Supabase not configured");const{data:l,error:c}=await i.from("offers").update({status:t}).eq("id",s).select().single();if(c)throw console.error("setOfferStatus error",c),c;return l}async function pS(s,t){const i=Ie();if(!i)throw new Error("Supabase not configured");const{data:l,error:c}=await i.from("offers").update(t).eq("id",s).select().single();if(c)throw console.error("updateOffer error",c),c;return l}async function _x(s){const t=Ie();if(!t)throw new Error("Supabase not configured");const i={id:s.id,listingId:s.listingId,cropName:s.cropName,quantity:s.quantity,totalAmount:s.totalAmount,status:s.status,date:s.date,farmerName:s.farmerName,farmerId:s.farmerId,farmerLocation:s.farmerLocation,buyerName:s.buyerName,buyerId:s.buyerId,buyerLocation:s.buyerLocation,distanceKm:s.distanceKm,transporterId:s.transporterId,paymentStatus:s.paymentStatus,paymentProof:s.paymentProof};console.log("Creating order with payload:",i);const{data:l,error:c}=await t.from("orders").insert(i).select().single();if(c)throw console.error("createOrder error",c),c;return l}async function gS(s,t,i){const l=Ie();if(!l)throw new Error("Supabase not configured");const{data:c,error:u}=await l.from("orders").update({paymentStatus:t,paymentProof:i}).eq("id",s).select().single();if(u)throw console.error("updateOrderPayment error",u),u;return c}async function Tx(s,t){const i=Ie();if(!i)throw new Error("Supabase not configured");const{data:l,error:c}=await i.from("orders").update({status:t}).eq("id",s).select().single();if(c)throw console.error("setOrderStatus error",c),c;return l}async function kx(s,t){const i=Ie();if(!i)throw new Error("Supabase not configured");const{data:l,error:c}=await i.from("orders").update({transporterId:t}).eq("id",s).select().single();if(c)throw console.error("setOrderTransporter error",c),c;return l}async function xS(s){const t=Ie();if(!t)throw new Error("Supabase not configured");const{data:i,error:l}=await t.from("messages").insert(s).select().single();if(l)throw console.error("addMessage error",l),l;return i}async function vS(s){const t=Ie();if(!t)throw new Error("Supabase not configured");const{data:i,error:l}=await t.from("disputes").insert(s).select().single();if(l)throw console.error("raiseDispute error",l),l;return i}async function bS(s,t){const i=Ie();if(!i)throw new Error("Supabase not configured");const{data:l,error:c}=await i.from("disputes").update({status:t}).eq("id",s).select().single();if(c)throw console.error("resolveDispute error",c),c;return l}async function yS(s,t){const i=Ie();if(!i)throw new Error("Supabase not configured");console.log(`[DataService] Updating profile for ${s}:`,t);const{data:l,error:c}=await i.from("users").upsert({id:s,profile:t}).select().single();if(c)throw console.error("updateUserProfile error",c),c;return console.log("[DataService] Update success:",l),l}async function wS(s){const t=Ie();if(!t)return null;const{data:i,error:l}=await t.from("inventory_items").insert(s).select().single();if(l)throw console.error("addInventoryItem error",l),l;return i}async function jS(s){const t=Ie();if(!t)return null;const i={id:s.id,userId:s.userId,listingId:s.listingId,orderId:s.orderId,amount:s.amount,status:s.status,createdAt:s.createdAt},{data:l,error:c}=await t.from("payouts").insert(i).select().single();if(c)throw console.error("addPayout error",c),c;return l}async function NS(s){const t=Ie();if(!t)return null;const{data:i,error:l}=await t.from("rfqs").insert(s).select().single();if(l)throw console.error("addRfq error",l),l;return i}async function SS(s){const t=Ie();if(!t)return null;const{data:i,error:l}=await t.from("route_plans").insert(s).select().single();if(l)throw console.error("addRoutePlan error",l),l;return i}async function _S(s){const t=Ie();if(!t)return null;const{data:i,error:l}=await t.from("transport_requests").insert(s).select().single();if(l)throw console.error("addTransportRequest error",l),l;return i}async function il(s,t){const i=Ie();if(!i)return null;const{data:l,error:c}=await i.from("transport_requests").update(t).eq("id",s).select().single();if(c)throw console.error("updateTransportRequest error",c),c;return l}async function TS(s){const t=Ie();if(!t)return null;const{data:i,error:l}=await t.from("transport_bids").insert(s).select().single();if(l)throw console.error("addTransportBid error",l),l;return i}async function kS(s,t){const i=Ie();if(!i)return null;const{data:l,error:c}=await i.from("transport_bids").update({status:t}).eq("id",s).select().single();if(c)throw console.error("setTransportBidStatus error",c),c;return l}async function Ax(s,t){const i=Ie();if(!i)return null;const{data:l,error:c}=await i.from("transport_bids").update(t).eq("id",s).select().single();if(c)throw console.error("updateTransportBid error",c),c;return l}/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=(...s)=>s.filter((t,i,l)=>!!t&&t.trim()!==""&&l.indexOf(t)===i).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CS=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,i,l)=>l?l.toUpperCase():i.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=s=>{const t=CS(s);return t.charAt(0).toUpperCase()+t.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ES={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=q.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:c="",children:u,iconNode:h,...m},p)=>q.createElement("svg",{ref:p,...ES,width:t,height:t,stroke:s,strokeWidth:l?Number(i)*24/Number(t):i,className:pb("lucide",c),...!u&&!OS(m)&&{"aria-hidden":"true"},...m},[...h.map(([g,x])=>q.createElement(g,x)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=(s,t)=>{const i=q.forwardRef(({className:l,...c},u)=>q.createElement(DS,{ref:u,iconNode:t,className:pb(`lucide-${AS(Cx(s))}`,`lucide-${s}`,l),...c}));return i.displayName=Cx(s),i};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],MS=Se("activity",RS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],cr=Se("arrow-left",US);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LS=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],PS=Se("arrow-right-left",LS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ii=Se("arrow-right",BS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Ex=Se("award",zS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VS=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Fa=Se("bell",VS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],IS=Se("box",qS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $S=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],HS=Se("briefcase",$S);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],gb=Se("calendar",KS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],FS=Se("camera",GS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],cc=Se("check",YS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],XS=Se("chevron-down",QS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ZS=Se("chevron-right",JS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],yc=Se("circle-alert",WS);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e_=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ya=Se("circle-check-big",e_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],s_=Se("circle-play",t_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],xb=Se("circle-question-mark",a_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],i_=Se("circle-x",n_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],wc=Se("clock",r_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],vb=Se("credit-card",l_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],jc=Se("dollar-sign",o_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],u_=Se("download",c_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_=[["path",{d:"M16 22h2a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v2.85",key:"ryk6xj"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 14v2.2l1.6 1",key:"6m4bie"}],["circle",{cx:"8",cy:"16",r:"6",key:"10v15b"}]],qh=Se("file-clock",d_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],jl=Se("file-text",h_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f_=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],m_=Se("funnel",f_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],g_=Se("globe",p_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x_=[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]],Nc=Se("indian-rupee",x_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ic=Se("info",v_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b_=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Ox=Se("layers",b_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Dx=Se("layout-dashboard",y_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w_=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],Uc=Se("leaf",w_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],gf=Se("lock",j_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Nl=Se("log-out",N_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Lc=Se("mail",S_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Na=Se("map-pin",__);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],k_=Se("menu",T_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Xa=Se("message-circle",A_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],wa=Se("package",C_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],O_=Se("pause",E_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],R_=Se("pen",D_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Sl=Se("phone",M_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],uc=Se("plus",U_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],P_=Se("printer",L_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],Rx=Se("route",B_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],V_=Se("save",z_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],I_=Se("search",q_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],bb=Se("send",$_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ri=Se("settings",H_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Qa=Se("shield-check",K_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],F_=Se("shield",G_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],ta=Se("shopping-bag",Y_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],uh=Se("shopping-cart",Q_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=[["path",{d:"M14 9.536V7a4 4 0 0 1 4-4h1.5a.5.5 0 0 1 .5.5V5a4 4 0 0 1-4 4 4 4 0 0 0-4 4c0 2 1 3 1 5a5 5 0 0 1-1 3",key:"139s4v"}],["path",{d:"M4 9a5 5 0 0 1 8 4 5 5 0 0 1-8-4",key:"1dlkgp"}],["path",{d:"M5 21h14",key:"11awu3"}]],Mx=Se("sprout",X_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],lr=Se("star",J_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],W_=Se("store",Z_);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eT=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],tT=Se("timer",eT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=[["path",{d:"m10 11 11 .9a1 1 0 0 1 .8 1.1l-.665 4.158a1 1 0 0 1-.988.842H20",key:"she1j9"}],["path",{d:"M16 18h-5",key:"bq60fd"}],["path",{d:"M18 5a1 1 0 0 0-1 1v5.573",key:"1kv8ia"}],["path",{d:"M3 4h8.129a1 1 0 0 1 .99.863L13 11.246",key:"1q1ert"}],["path",{d:"M4 11V4",key:"9ft8pt"}],["path",{d:"M7 15h.01",key:"k5ht0j"}],["path",{d:"M8 10.1V4",key:"1jgyzo"}],["circle",{cx:"18",cy:"18",r:"2",key:"1emm8v"}],["circle",{cx:"7",cy:"15",r:"5",key:"ddtuc"}]],yb=Se("tractor",sT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],wb=Se("trash-2",aT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Ji=Se("trending-up",nT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],rT=Se("triangle-alert",iT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],gs=Se("truck",lT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oT=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],si=Se("user",oT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],xs=Se("x",cT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],dT=Se("zap",uT),se=({className:s="",variant:t="primary",size:i="md",children:l,...c})=>{const u={primary:"bg-nature-600 hover:bg-nature-700 text-white shadow-lg shadow-nature-600/30",default:"bg-nature-600 hover:bg-nature-700 text-white shadow-lg shadow-nature-600/30",secondary:"bg-earth-500 hover:bg-earth-600 text-white shadow-lg shadow-earth-500/30",outline:"border-2 border-nature-600 text-nature-700 hover:bg-nature-50",ghost:"bg-transparent hover:bg-black/5 text-slate-600"},h={sm:"px-4 py-2 text-sm",md:"px-6 py-3",lg:"px-8 py-4 text-lg"};return n.jsx("button",{className:`${h[i]} rounded-xl font-medium transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 ${u[t]} ${s}`,...c,children:l})},fe=({label:s,className:t="",icon:i,...l})=>n.jsxs("div",{className:"w-full",children:[s&&n.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1.5 ml-1",children:s}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{className:`w-full bg-white/60 backdrop-blur-sm border border-slate-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-nature-500/50 focus:border-nature-500 transition-all placeholder:text-slate-400 ${i?"pl-11":""} ${t}`,...l}),i&&n.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none",children:i})]})]}),hT=({length:s=6,onComplete:t,disabled:i})=>{const[l,c]=oi.useState(new Array(s).fill("")),u=oi.useRef([]),h=(p,g)=>{var N,_;const x=p.target.value;if(isNaN(Number(x)))return;const w=[...l];if(x.length>1){const T=x.slice(0,s).split("");for(let U=0;U<s;U++)w[U]=T[U]||"";c(w),w.every(U=>U!=="")&&t(w.join("")),(N=u.current[Math.min(x.length,s-1)])==null||N.focus();return}w[g]=x,c(w),x&&g<s-1&&((_=u.current[g+1])==null||_.focus()),w.every(T=>T!=="")&&t(w.join(""))},m=(p,g)=>{var x;p.key==="Backspace"&&!l[g]&&g>0&&((x=u.current[g-1])==null||x.focus())};return n.jsx("div",{className:"flex gap-2 justify-center",children:l.map((p,g)=>n.jsx("input",{ref:x=>{u.current[g]=x},type:"text",maxLength:s,value:p,disabled:i,onChange:x=>h(x,g),onKeyDown:x=>m(x,g),className:"w-12 h-14 text-center text-xl font-bold border-2 border-slate-200 rounded-xl focus:border-nature-600 focus:ring-4 focus:ring-nature-600/20 outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed bg-white"},g))})},oe=({children:s,className:t="",onClick:i})=>n.jsx("div",{onClick:i,className:`glass-card p-5 rounded-2xl transition-all ${i?"cursor-pointer hover:bg-white/90 hover:shadow-xl hover:-translate-y-1":""} ${t}`,children:s}),jb=q.createContext({});function fT(s){const t=q.useRef(null);return t.current===null&&(t.current=s()),t.current}const Nb=typeof window<"u",mT=Nb?q.useLayoutEffect:q.useEffect,xf=q.createContext(null);function vf(s,t){s.indexOf(t)===-1&&s.push(t)}function bf(s,t){const i=s.indexOf(t);i>-1&&s.splice(i,1)}const Ta=(s,t,i)=>i>t?t:i<s?s:i;let yf=()=>{};const Ja={},Sb=s=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(s);function _b(s){return typeof s=="object"&&s!==null}const Tb=s=>/^0[^.\s]+$/u.test(s);function wf(s){let t;return()=>(t===void 0&&(t=s()),t)}const aa=s=>s,pT=(s,t)=>i=>t(s(i)),Ol=(...s)=>s.reduce(pT),_l=(s,t,i)=>{const l=t-s;return l===0?1:(i-s)/l};class jf{constructor(){this.subscriptions=[]}add(t){return vf(this.subscriptions,t),()=>bf(this.subscriptions,t)}notify(t,i,l){const c=this.subscriptions.length;if(c)if(c===1)this.subscriptions[0](t,i,l);else for(let u=0;u<c;u++){const h=this.subscriptions[u];h&&h(t,i,l)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Sa=s=>s*1e3,sa=s=>s/1e3;function kb(s,t){return t?s*(1e3/t):0}const Ab=(s,t,i)=>(((1-3*i+3*t)*s+(3*i-6*t))*s+3*t)*s,gT=1e-7,xT=12;function vT(s,t,i,l,c){let u,h,m=0;do h=t+(i-t)/2,u=Ab(h,l,c)-s,u>0?i=h:t=h;while(Math.abs(u)>gT&&++m<xT);return h}function Dl(s,t,i,l){if(s===t&&i===l)return aa;const c=u=>vT(u,0,1,s,i);return u=>u===0||u===1?u:Ab(c(u),t,l)}const Cb=s=>t=>t<=.5?s(2*t)/2:(2-s(2*(1-t)))/2,Eb=s=>t=>1-s(1-t),Ob=Dl(.33,1.53,.69,.99),Nf=Eb(Ob),Db=Cb(Nf),Rb=s=>(s*=2)<1?.5*Nf(s):.5*(2-Math.pow(2,-10*(s-1))),Sf=s=>1-Math.sin(Math.acos(s)),Mb=Eb(Sf),Ub=Cb(Sf),bT=Dl(.42,0,1,1),yT=Dl(0,0,.58,1),Lb=Dl(.42,0,.58,1),wT=s=>Array.isArray(s)&&typeof s[0]!="number",Pb=s=>Array.isArray(s)&&typeof s[0]=="number",jT={linear:aa,easeIn:bT,easeInOut:Lb,easeOut:yT,circIn:Sf,circInOut:Ub,circOut:Mb,backIn:Nf,backInOut:Db,backOut:Ob,anticipate:Rb},NT=s=>typeof s=="string",Ux=s=>{if(Pb(s)){yf(s.length===4);const[t,i,l,c]=s;return Dl(t,i,l,c)}else if(NT(s))return jT[s];return s},rc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function ST(s,t){let i=new Set,l=new Set,c=!1,u=!1;const h=new WeakSet;let m={delta:0,timestamp:0,isProcessing:!1};function p(x){h.has(x)&&(g.schedule(x),s()),x(m)}const g={schedule:(x,w=!1,N=!1)=>{const T=N&&c?i:l;return w&&h.add(x),T.has(x)||T.add(x),x},cancel:x=>{l.delete(x),h.delete(x)},process:x=>{if(m=x,c){u=!0;return}c=!0,[i,l]=[l,i],i.forEach(p),i.clear(),c=!1,u&&(u=!1,g.process(x))}};return g}const _T=40;function Bb(s,t){let i=!1,l=!0;const c={delta:0,timestamp:0,isProcessing:!1},u=()=>i=!0,h=rc.reduce((M,ie)=>(M[ie]=ST(u),M),{}),{setup:m,read:p,resolveKeyframes:g,preUpdate:x,update:w,preRender:N,render:_,postRender:T}=h,U=()=>{const M=Ja.useManualTiming?c.timestamp:performance.now();i=!1,Ja.useManualTiming||(c.delta=l?1e3/60:Math.max(Math.min(M-c.timestamp,_T),1)),c.timestamp=M,c.isProcessing=!0,m.process(c),p.process(c),g.process(c),x.process(c),w.process(c),N.process(c),_.process(c),T.process(c),c.isProcessing=!1,i&&t&&(l=!1,s(U))},O=()=>{i=!0,l=!0,c.isProcessing||s(U)};return{schedule:rc.reduce((M,ie)=>{const ue=h[ie];return M[ie]=(B,H=!1,pe=!1)=>(i||O(),ue.schedule(B,H,pe)),M},{}),cancel:M=>{for(let ie=0;ie<rc.length;ie++)h[rc[ie]].cancel(M)},state:c,steps:h}}const{schedule:St,cancel:Cn,state:hs,steps:dh}=Bb(typeof requestAnimationFrame<"u"?requestAnimationFrame:aa,!0);let dc;function TT(){dc=void 0}const Ns={now:()=>(dc===void 0&&Ns.set(hs.isProcessing||Ja.useManualTiming?hs.timestamp:performance.now()),dc),set:s=>{dc=s,queueMicrotask(TT)}},zb=s=>t=>typeof t=="string"&&t.startsWith(s),Vb=zb("--"),kT=zb("var(--"),_f=s=>kT(s)?AT.test(s.split("/*")[0].trim()):!1,AT=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function Lx(s){return typeof s!="string"?!1:s.split("/*")[0].includes("var(--")}const hr={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},Tl={...hr,transform:s=>Ta(0,1,s)},lc={...hr,default:1},dl=s=>Math.round(s*1e5)/1e5,Tf=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function CT(s){return s==null}const ET=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,kf=(s,t)=>i=>!!(typeof i=="string"&&ET.test(i)&&i.startsWith(s)||t&&!CT(i)&&Object.prototype.hasOwnProperty.call(i,t)),qb=(s,t,i)=>l=>{if(typeof l!="string")return l;const[c,u,h,m]=l.match(Tf);return{[s]:parseFloat(c),[t]:parseFloat(u),[i]:parseFloat(h),alpha:m!==void 0?parseFloat(m):1}},OT=s=>Ta(0,255,s),hh={...hr,transform:s=>Math.round(OT(s))},ai={test:kf("rgb","red"),parse:qb("red","green","blue"),transform:({red:s,green:t,blue:i,alpha:l=1})=>"rgba("+hh.transform(s)+", "+hh.transform(t)+", "+hh.transform(i)+", "+dl(Tl.transform(l))+")"};function DT(s){let t="",i="",l="",c="";return s.length>5?(t=s.substring(1,3),i=s.substring(3,5),l=s.substring(5,7),c=s.substring(7,9)):(t=s.substring(1,2),i=s.substring(2,3),l=s.substring(3,4),c=s.substring(4,5),t+=t,i+=i,l+=l,c+=c),{red:parseInt(t,16),green:parseInt(i,16),blue:parseInt(l,16),alpha:c?parseInt(c,16)/255:1}}const Ih={test:kf("#"),parse:DT,transform:ai.transform},Rl=s=>({test:t=>typeof t=="string"&&t.endsWith(s)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${s}`}),Sn=Rl("deg"),_a=Rl("%"),Ne=Rl("px"),RT=Rl("vh"),MT=Rl("vw"),Px={..._a,parse:s=>_a.parse(s)/100,transform:s=>_a.transform(s*100)},er={test:kf("hsl","hue"),parse:qb("hue","saturation","lightness"),transform:({hue:s,saturation:t,lightness:i,alpha:l=1})=>"hsla("+Math.round(s)+", "+_a.transform(dl(t))+", "+_a.transform(dl(i))+", "+dl(Tl.transform(l))+")"},Qt={test:s=>ai.test(s)||Ih.test(s)||er.test(s),parse:s=>ai.test(s)?ai.parse(s):er.test(s)?er.parse(s):Ih.parse(s),transform:s=>typeof s=="string"?s:s.hasOwnProperty("red")?ai.transform(s):er.transform(s),getAnimatableNone:s=>{const t=Qt.parse(s);return t.alpha=0,Qt.transform(t)}},UT=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function LT(s){var t,i;return isNaN(s)&&typeof s=="string"&&(((t=s.match(Tf))==null?void 0:t.length)||0)+(((i=s.match(UT))==null?void 0:i.length)||0)>0}const Ib="number",$b="color",PT="var",BT="var(",Bx="${}",zT=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function kl(s){const t=s.toString(),i=[],l={color:[],number:[],var:[]},c=[];let u=0;const m=t.replace(zT,p=>(Qt.test(p)?(l.color.push(u),c.push($b),i.push(Qt.parse(p))):p.startsWith(BT)?(l.var.push(u),c.push(PT),i.push(p)):(l.number.push(u),c.push(Ib),i.push(parseFloat(p))),++u,Bx)).split(Bx);return{values:i,split:m,indexes:l,types:c}}function Hb(s){return kl(s).values}function Kb(s){const{split:t,types:i}=kl(s),l=t.length;return c=>{let u="";for(let h=0;h<l;h++)if(u+=t[h],c[h]!==void 0){const m=i[h];m===Ib?u+=dl(c[h]):m===$b?u+=Qt.transform(c[h]):u+=c[h]}return u}}const VT=s=>typeof s=="number"?0:Qt.test(s)?Qt.getAnimatableNone(s):s;function qT(s){const t=Hb(s);return Kb(s)(t.map(VT))}const En={test:LT,parse:Hb,createTransformer:Kb,getAnimatableNone:qT};function fh(s,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?s+(t-s)*6*i:i<1/2?t:i<2/3?s+(t-s)*(2/3-i)*6:s}function IT({hue:s,saturation:t,lightness:i,alpha:l}){s/=360,t/=100,i/=100;let c=0,u=0,h=0;if(!t)c=u=h=i;else{const m=i<.5?i*(1+t):i+t-i*t,p=2*i-m;c=fh(p,m,s+1/3),u=fh(p,m,s),h=fh(p,m,s-1/3)}return{red:Math.round(c*255),green:Math.round(u*255),blue:Math.round(h*255),alpha:l}}function Sc(s,t){return i=>i>0?t:s}const Ot=(s,t,i)=>s+(t-s)*i,mh=(s,t,i)=>{const l=s*s,c=i*(t*t-l)+l;return c<0?0:Math.sqrt(c)},$T=[Ih,ai,er],HT=s=>$T.find(t=>t.test(s));function zx(s){const t=HT(s);if(!t)return!1;let i=t.parse(s);return t===er&&(i=IT(i)),i}const Vx=(s,t)=>{const i=zx(s),l=zx(t);if(!i||!l)return Sc(s,t);const c={...i};return u=>(c.red=mh(i.red,l.red,u),c.green=mh(i.green,l.green,u),c.blue=mh(i.blue,l.blue,u),c.alpha=Ot(i.alpha,l.alpha,u),ai.transform(c))},$h=new Set(["none","hidden"]);function KT(s,t){return $h.has(s)?i=>i<=0?s:t:i=>i>=1?t:s}function GT(s,t){return i=>Ot(s,t,i)}function Af(s){return typeof s=="number"?GT:typeof s=="string"?_f(s)?Sc:Qt.test(s)?Vx:QT:Array.isArray(s)?Gb:typeof s=="object"?Qt.test(s)?Vx:FT:Sc}function Gb(s,t){const i=[...s],l=i.length,c=s.map((u,h)=>Af(u)(u,t[h]));return u=>{for(let h=0;h<l;h++)i[h]=c[h](u);return i}}function FT(s,t){const i={...s,...t},l={};for(const c in i)s[c]!==void 0&&t[c]!==void 0&&(l[c]=Af(s[c])(s[c],t[c]));return c=>{for(const u in l)i[u]=l[u](c);return i}}function YT(s,t){const i=[],l={color:0,var:0,number:0};for(let c=0;c<t.values.length;c++){const u=t.types[c],h=s.indexes[u][l[u]],m=s.values[h]??0;i[c]=m,l[u]++}return i}const QT=(s,t)=>{const i=En.createTransformer(t),l=kl(s),c=kl(t);return l.indexes.var.length===c.indexes.var.length&&l.indexes.color.length===c.indexes.color.length&&l.indexes.number.length>=c.indexes.number.length?$h.has(s)&&!c.values.length||$h.has(t)&&!l.values.length?KT(s,t):Ol(Gb(YT(l,c),c.values),i):Sc(s,t)};function Fb(s,t,i){return typeof s=="number"&&typeof t=="number"&&typeof i=="number"?Ot(s,t,i):Af(s)(s,t)}const XT=s=>{const t=({timestamp:i})=>s(i);return{start:(i=!0)=>St.update(t,i),stop:()=>Cn(t),now:()=>hs.isProcessing?hs.timestamp:Ns.now()}},Yb=(s,t,i=10)=>{let l="";const c=Math.max(Math.round(t/i),2);for(let u=0;u<c;u++)l+=Math.round(s(u/(c-1))*1e4)/1e4+", ";return`linear(${l.substring(0,l.length-2)})`},_c=2e4;function Cf(s){let t=0;const i=50;let l=s.next(t);for(;!l.done&&t<_c;)t+=i,l=s.next(t);return t>=_c?1/0:t}function JT(s,t=100,i){const l=i({...s,keyframes:[0,t]}),c=Math.min(Cf(l),_c);return{type:"keyframes",ease:u=>l.next(c*u).value/t,duration:sa(c)}}const ZT=5;function Qb(s,t,i){const l=Math.max(t-ZT,0);return kb(i-s(l),t-l)}const Bt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ph=.001;function WT({duration:s=Bt.duration,bounce:t=Bt.bounce,velocity:i=Bt.velocity,mass:l=Bt.mass}){let c,u,h=1-t;h=Ta(Bt.minDamping,Bt.maxDamping,h),s=Ta(Bt.minDuration,Bt.maxDuration,sa(s)),h<1?(c=g=>{const x=g*h,w=x*s,N=x-i,_=Hh(g,h),T=Math.exp(-w);return ph-N/_*T},u=g=>{const w=g*h*s,N=w*i+i,_=Math.pow(h,2)*Math.pow(g,2)*s,T=Math.exp(-w),U=Hh(Math.pow(g,2),h);return(-c(g)+ph>0?-1:1)*((N-_)*T)/U}):(c=g=>{const x=Math.exp(-g*s),w=(g-i)*s+1;return-ph+x*w},u=g=>{const x=Math.exp(-g*s),w=(i-g)*(s*s);return x*w});const m=5/s,p=tk(c,u,m);if(s=Sa(s),isNaN(p))return{stiffness:Bt.stiffness,damping:Bt.damping,duration:s};{const g=Math.pow(p,2)*l;return{stiffness:g,damping:h*2*Math.sqrt(l*g),duration:s}}}const ek=12;function tk(s,t,i){let l=i;for(let c=1;c<ek;c++)l=l-s(l)/t(l);return l}function Hh(s,t){return s*Math.sqrt(1-t*t)}const sk=["duration","bounce"],ak=["stiffness","damping","mass"];function qx(s,t){return t.some(i=>s[i]!==void 0)}function nk(s){let t={velocity:Bt.velocity,stiffness:Bt.stiffness,damping:Bt.damping,mass:Bt.mass,isResolvedFromDuration:!1,...s};if(!qx(s,ak)&&qx(s,sk))if(s.visualDuration){const i=s.visualDuration,l=2*Math.PI/(i*1.2),c=l*l,u=2*Ta(.05,1,1-(s.bounce||0))*Math.sqrt(c);t={...t,mass:Bt.mass,stiffness:c,damping:u}}else{const i=WT(s);t={...t,...i,mass:Bt.mass},t.isResolvedFromDuration=!0}return t}function Tc(s=Bt.visualDuration,t=Bt.bounce){const i=typeof s!="object"?{visualDuration:s,keyframes:[0,1],bounce:t}:s;let{restSpeed:l,restDelta:c}=i;const u=i.keyframes[0],h=i.keyframes[i.keyframes.length-1],m={done:!1,value:u},{stiffness:p,damping:g,mass:x,duration:w,velocity:N,isResolvedFromDuration:_}=nk({...i,velocity:-sa(i.velocity||0)}),T=N||0,U=g/(2*Math.sqrt(p*x)),O=h-u,L=sa(Math.sqrt(p/x)),D=Math.abs(O)<5;l||(l=D?Bt.restSpeed.granular:Bt.restSpeed.default),c||(c=D?Bt.restDelta.granular:Bt.restDelta.default);let M;if(U<1){const ue=Hh(L,U);M=B=>{const H=Math.exp(-U*L*B);return h-H*((T+U*L*O)/ue*Math.sin(ue*B)+O*Math.cos(ue*B))}}else if(U===1)M=ue=>h-Math.exp(-L*ue)*(O+(T+L*O)*ue);else{const ue=L*Math.sqrt(U*U-1);M=B=>{const H=Math.exp(-U*L*B),pe=Math.min(ue*B,300);return h-H*((T+U*L*O)*Math.sinh(pe)+ue*O*Math.cosh(pe))/ue}}const ie={calculatedDuration:_&&w||null,next:ue=>{const B=M(ue);if(_)m.done=ue>=w;else{let H=ue===0?T:0;U<1&&(H=ue===0?Sa(T):Qb(M,ue,B));const pe=Math.abs(H)<=l,he=Math.abs(h-B)<=c;m.done=pe&&he}return m.value=m.done?h:B,m},toString:()=>{const ue=Math.min(Cf(ie),_c),B=Yb(H=>ie.next(ue*H).value,ue,30);return ue+"ms "+B},toTransition:()=>{}};return ie}Tc.applyToOptions=s=>{const t=JT(s,100,Tc);return s.ease=t.ease,s.duration=Sa(t.duration),s.type="keyframes",s};function Kh({keyframes:s,velocity:t=0,power:i=.8,timeConstant:l=325,bounceDamping:c=10,bounceStiffness:u=500,modifyTarget:h,min:m,max:p,restDelta:g=.5,restSpeed:x}){const w=s[0],N={done:!1,value:w},_=pe=>m!==void 0&&pe<m||p!==void 0&&pe>p,T=pe=>m===void 0?p:p===void 0||Math.abs(m-pe)<Math.abs(p-pe)?m:p;let U=i*t;const O=w+U,L=h===void 0?O:h(O);L!==O&&(U=L-w);const D=pe=>-U*Math.exp(-pe/l),M=pe=>L+D(pe),ie=pe=>{const he=D(pe),be=M(pe);N.done=Math.abs(he)<=g,N.value=N.done?L:be};let ue,B;const H=pe=>{_(N.value)&&(ue=pe,B=Tc({keyframes:[N.value,T(N.value)],velocity:Qb(M,pe,N.value),damping:c,stiffness:u,restDelta:g,restSpeed:x}))};return H(0),{calculatedDuration:null,next:pe=>{let he=!1;return!B&&ue===void 0&&(he=!0,ie(pe),H(pe)),ue!==void 0&&pe>=ue?B.next(pe-ue):(!he&&ie(pe),N)}}}function ik(s,t,i){const l=[],c=i||Ja.mix||Fb,u=s.length-1;for(let h=0;h<u;h++){let m=c(s[h],s[h+1]);if(t){const p=Array.isArray(t)?t[h]||aa:t;m=Ol(p,m)}l.push(m)}return l}function rk(s,t,{clamp:i=!0,ease:l,mixer:c}={}){const u=s.length;if(yf(u===t.length),u===1)return()=>t[0];if(u===2&&t[0]===t[1])return()=>t[1];const h=s[0]===s[1];s[0]>s[u-1]&&(s=[...s].reverse(),t=[...t].reverse());const m=ik(t,l,c),p=m.length,g=x=>{if(h&&x<s[0])return t[0];let w=0;if(p>1)for(;w<s.length-2&&!(x<s[w+1]);w++);const N=_l(s[w],s[w+1],x);return m[w](N)};return i?x=>g(Ta(s[0],s[u-1],x)):g}function lk(s,t){const i=s[s.length-1];for(let l=1;l<=t;l++){const c=_l(0,t,l);s.push(Ot(i,1,c))}}function ok(s){const t=[0];return lk(t,s.length-1),t}function ck(s,t){return s.map(i=>i*t)}function uk(s,t){return s.map(()=>t||Lb).splice(0,s.length-1)}function hl({duration:s=300,keyframes:t,times:i,ease:l="easeInOut"}){const c=wT(l)?l.map(Ux):Ux(l),u={done:!1,value:t[0]},h=ck(i&&i.length===t.length?i:ok(t),s),m=rk(h,t,{ease:Array.isArray(c)?c:uk(t,c)});return{calculatedDuration:s,next:p=>(u.value=m(p),u.done=p>=s,u)}}const dk=s=>s!==null;function Ef(s,{repeat:t,repeatType:i="loop"},l,c=1){const u=s.filter(dk),m=c<0||t&&i!=="loop"&&t%2===1?0:u.length-1;return!m||l===void 0?u[m]:l}const hk={decay:Kh,inertia:Kh,tween:hl,keyframes:hl,spring:Tc};function Xb(s){typeof s.type=="string"&&(s.type=hk[s.type])}class Of{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,i){return this.finished.then(t,i)}}const fk=s=>s/100;class Df extends Of{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var l,c;const{motionValue:i}=this.options;i&&i.updatedAt!==Ns.now()&&this.tick(Ns.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(c=(l=this.options).onStop)==null||c.call(l))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;Xb(t);const{type:i=hl,repeat:l=0,repeatDelay:c=0,repeatType:u,velocity:h=0}=t;let{keyframes:m}=t;const p=i||hl;p!==hl&&typeof m[0]!="number"&&(this.mixKeyframes=Ol(fk,Fb(m[0],m[1])),m=[0,100]);const g=p({...t,keyframes:m});u==="mirror"&&(this.mirroredGenerator=p({...t,keyframes:[...m].reverse(),velocity:-h})),g.calculatedDuration===null&&(g.calculatedDuration=Cf(g));const{calculatedDuration:x}=g;this.calculatedDuration=x,this.resolvedDuration=x+c,this.totalDuration=this.resolvedDuration*(l+1)-c,this.generator=g}updateTime(t){const i=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=i}tick(t,i=!1){const{generator:l,totalDuration:c,mixKeyframes:u,mirroredGenerator:h,resolvedDuration:m,calculatedDuration:p}=this;if(this.startTime===null)return l.next(0);const{delay:g=0,keyframes:x,repeat:w,repeatType:N,repeatDelay:_,type:T,onUpdate:U,finalKeyframe:O}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-c/this.speed,this.startTime)),i?this.currentTime=t:this.updateTime(t);const L=this.currentTime-g*(this.playbackSpeed>=0?1:-1),D=this.playbackSpeed>=0?L<0:L>c;this.currentTime=Math.max(L,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let M=this.currentTime,ie=l;if(w){const pe=Math.min(this.currentTime,c)/m;let he=Math.floor(pe),be=pe%1;!be&&pe>=1&&(be=1),be===1&&he--,he=Math.min(he,w+1),!!(he%2)&&(N==="reverse"?(be=1-be,_&&(be-=_/m)):N==="mirror"&&(ie=h)),M=Ta(0,1,be)*m}const ue=D?{done:!1,value:x[0]}:ie.next(M);u&&(ue.value=u(ue.value));let{done:B}=ue;!D&&p!==null&&(B=this.playbackSpeed>=0?this.currentTime>=c:this.currentTime<=0);const H=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&B);return H&&T!==Kh&&(ue.value=Ef(x,this.options,O,this.speed)),U&&U(ue.value),H&&this.finish(),ue}then(t,i){return this.finished.then(t,i)}get duration(){return sa(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+sa(t)}get time(){return sa(this.currentTime)}set time(t){var i;t=Sa(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(i=this.driver)==null||i.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Ns.now());const i=this.playbackSpeed!==t;this.playbackSpeed=t,i&&(this.time=sa(this.currentTime))}play(){var c,u;if(this.isStopped)return;const{driver:t=XT,startTime:i}=this.options;this.driver||(this.driver=t(h=>this.tick(h))),(u=(c=this.options).onPlay)==null||u.call(c);const l=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=l):this.holdTime!==null?this.startTime=l-this.holdTime:this.startTime||(this.startTime=i??l),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ns.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,i;this.notifyFinished(),this.teardown(),this.state="finished",(i=(t=this.options).onComplete)==null||i.call(t)}cancel(){var t,i;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(i=(t=this.options).onCancel)==null||i.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var i;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(i=this.driver)==null||i.stop(),t.observe(this)}}function mk(s){for(let t=1;t<s.length;t++)s[t]??(s[t]=s[t-1])}const ni=s=>s*180/Math.PI,Gh=s=>{const t=ni(Math.atan2(s[1],s[0]));return Fh(t)},pk={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:s=>(Math.abs(s[0])+Math.abs(s[3]))/2,rotate:Gh,rotateZ:Gh,skewX:s=>ni(Math.atan(s[1])),skewY:s=>ni(Math.atan(s[2])),skew:s=>(Math.abs(s[1])+Math.abs(s[2]))/2},Fh=s=>(s=s%360,s<0&&(s+=360),s),Ix=Gh,$x=s=>Math.sqrt(s[0]*s[0]+s[1]*s[1]),Hx=s=>Math.sqrt(s[4]*s[4]+s[5]*s[5]),gk={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:$x,scaleY:Hx,scale:s=>($x(s)+Hx(s))/2,rotateX:s=>Fh(ni(Math.atan2(s[6],s[5]))),rotateY:s=>Fh(ni(Math.atan2(-s[2],s[0]))),rotateZ:Ix,rotate:Ix,skewX:s=>ni(Math.atan(s[4])),skewY:s=>ni(Math.atan(s[1])),skew:s=>(Math.abs(s[1])+Math.abs(s[4]))/2};function Yh(s){return s.includes("scale")?1:0}function Qh(s,t){if(!s||s==="none")return Yh(t);const i=s.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let l,c;if(i)l=gk,c=i;else{const m=s.match(/^matrix\(([-\d.e\s,]+)\)$/u);l=pk,c=m}if(!c)return Yh(t);const u=l[t],h=c[1].split(",").map(vk);return typeof u=="function"?u(h):h[u]}const xk=(s,t)=>{const{transform:i="none"}=getComputedStyle(s);return Qh(i,t)};function vk(s){return parseFloat(s.trim())}const fr=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],mr=new Set(fr),Kx=s=>s===hr||s===Ne,bk=new Set(["x","y","z"]),yk=fr.filter(s=>!bk.has(s));function wk(s){const t=[];return yk.forEach(i=>{const l=s.getValue(i);l!==void 0&&(t.push([i,l.get()]),l.set(i.startsWith("scale")?1:0))}),t}const An={width:({x:s},{paddingLeft:t="0",paddingRight:i="0"})=>s.max-s.min-parseFloat(t)-parseFloat(i),height:({y:s},{paddingTop:t="0",paddingBottom:i="0"})=>s.max-s.min-parseFloat(t)-parseFloat(i),top:(s,{top:t})=>parseFloat(t),left:(s,{left:t})=>parseFloat(t),bottom:({y:s},{top:t})=>parseFloat(t)+(s.max-s.min),right:({x:s},{left:t})=>parseFloat(t)+(s.max-s.min),x:(s,{transform:t})=>Qh(t,"x"),y:(s,{transform:t})=>Qh(t,"y")};An.translateX=An.x;An.translateY=An.y;const li=new Set;let Xh=!1,Jh=!1,Zh=!1;function Jb(){if(Jh){const s=Array.from(li).filter(l=>l.needsMeasurement),t=new Set(s.map(l=>l.element)),i=new Map;t.forEach(l=>{const c=wk(l);c.length&&(i.set(l,c),l.render())}),s.forEach(l=>l.measureInitialState()),t.forEach(l=>{l.render();const c=i.get(l);c&&c.forEach(([u,h])=>{var m;(m=l.getValue(u))==null||m.set(h)})}),s.forEach(l=>l.measureEndState()),s.forEach(l=>{l.suspendedScrollY!==void 0&&window.scrollTo(0,l.suspendedScrollY)})}Jh=!1,Xh=!1,li.forEach(s=>s.complete(Zh)),li.clear()}function Zb(){li.forEach(s=>{s.readKeyframes(),s.needsMeasurement&&(Jh=!0)})}function jk(){Zh=!0,Zb(),Jb(),Zh=!1}class Rf{constructor(t,i,l,c,u,h=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=i,this.name=l,this.motionValue=c,this.element=u,this.isAsync=h}scheduleResolve(){this.state="scheduled",this.isAsync?(li.add(this),Xh||(Xh=!0,St.read(Zb),St.resolveKeyframes(Jb))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:i,element:l,motionValue:c}=this;if(t[0]===null){const u=c==null?void 0:c.get(),h=t[t.length-1];if(u!==void 0)t[0]=u;else if(l&&i){const m=l.readValue(i,h);m!=null&&(t[0]=m)}t[0]===void 0&&(t[0]=h),c&&u===void 0&&c.set(t[0])}mk(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),li.delete(this)}cancel(){this.state==="scheduled"&&(li.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Nk=s=>s.startsWith("--");function Sk(s,t,i){Nk(t)?s.style.setProperty(t,i):s.style[t]=i}const _k=wf(()=>window.ScrollTimeline!==void 0),Tk={};function kk(s,t){const i=wf(s);return()=>Tk[t]??i()}const Wb=kk(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ol=([s,t,i,l])=>`cubic-bezier(${s}, ${t}, ${i}, ${l})`,Gx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ol([0,.65,.55,1]),circOut:ol([.55,0,1,.45]),backIn:ol([.31,.01,.66,-.59]),backOut:ol([.33,1.53,.69,.99])};function ey(s,t){if(s)return typeof s=="function"?Wb()?Yb(s,t):"ease-out":Pb(s)?ol(s):Array.isArray(s)?s.map(i=>ey(i,t)||Gx.easeOut):Gx[s]}function Ak(s,t,i,{delay:l=0,duration:c=300,repeat:u=0,repeatType:h="loop",ease:m="easeOut",times:p}={},g=void 0){const x={[t]:i};p&&(x.offset=p);const w=ey(m,c);Array.isArray(w)&&(x.easing=w);const N={delay:l,duration:c,easing:Array.isArray(w)?"linear":w,fill:"both",iterations:u+1,direction:h==="reverse"?"alternate":"normal"};return g&&(N.pseudoElement=g),s.animate(x,N)}function ty(s){return typeof s=="function"&&"applyToOptions"in s}function Ck({type:s,...t}){return ty(s)&&Wb()?s.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class Ek extends Of{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!t)return;const{element:i,name:l,keyframes:c,pseudoElement:u,allowFlatten:h=!1,finalKeyframe:m,onComplete:p}=t;this.isPseudoElement=!!u,this.allowFlatten=h,this.options=t,yf(typeof t.type!="string");const g=Ck(t);this.animation=Ak(i,l,c,g,u),g.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!u){const x=Ef(c,this.options,m,this.speed);this.updateMotionValue?this.updateMotionValue(x):Sk(i,l,x),this.animation.cancel()}p==null||p(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,i;(i=(t=this.animation).finish)==null||i.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var i,l,c;const t=(i=this.options)==null?void 0:i.element;!this.isPseudoElement&&(t!=null&&t.isConnected)&&((c=(l=this.animation).commitStyles)==null||c.call(l))}get duration(){var i,l;const t=((l=(i=this.animation.effect)==null?void 0:i.getComputedTiming)==null?void 0:l.call(i).duration)||0;return sa(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+sa(t)}get time(){return sa(Number(this.animation.currentTime)||0)}set time(t){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Sa(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(t){this.manualStartTime=this.animation.startTime=t}attachTimeline({timeline:t,observe:i}){var l;return this.allowFlatten&&((l=this.animation.effect)==null||l.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&_k()?(this.animation.timeline=t,aa):i(this)}}const sy={anticipate:Rb,backInOut:Db,circInOut:Ub};function Ok(s){return s in sy}function Dk(s){typeof s.ease=="string"&&Ok(s.ease)&&(s.ease=sy[s.ease])}const gh=10;class Rk extends Ek{constructor(t){Dk(t),Xb(t),super(t),t.startTime!==void 0&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:i,onUpdate:l,onComplete:c,element:u,...h}=this.options;if(!i)return;if(t!==void 0){i.set(t);return}const m=new Df({...h,autoplay:!1}),p=Math.max(gh,Ns.now()-this.startTime),g=Ta(0,gh,p-gh);i.setWithVelocity(m.sample(Math.max(0,p-g)).value,m.sample(p).value,g),m.stop()}}const Fx=(s,t)=>t==="zIndex"?!1:!!(typeof s=="number"||Array.isArray(s)||typeof s=="string"&&(En.test(s)||s==="0")&&!s.startsWith("url("));function Mk(s){const t=s[0];if(s.length===1)return!0;for(let i=0;i<s.length;i++)if(s[i]!==t)return!0}function Uk(s,t,i,l){const c=s[0];if(c===null)return!1;if(t==="display"||t==="visibility")return!0;const u=s[s.length-1],h=Fx(c,t),m=Fx(u,t);return!h||!m?!1:Mk(s)||(i==="spring"||ty(i))&&l}function Wh(s){s.duration=0,s.type="keyframes"}const Lk=new Set(["opacity","clipPath","filter","transform"]),Pk=wf(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Bk(s){var x;const{motionValue:t,name:i,repeatDelay:l,repeatType:c,damping:u,type:h}=s;if(!(((x=t==null?void 0:t.owner)==null?void 0:x.current)instanceof HTMLElement))return!1;const{onUpdate:p,transformTemplate:g}=t.owner.getProps();return Pk()&&i&&Lk.has(i)&&(i!=="transform"||!g)&&!p&&!l&&c!=="mirror"&&u!==0&&h!=="inertia"}const zk=40;class Vk extends Of{constructor({autoplay:t=!0,delay:i=0,type:l="keyframes",repeat:c=0,repeatDelay:u=0,repeatType:h="loop",keyframes:m,name:p,motionValue:g,element:x,...w}){var T;super(),this.stop=()=>{var U,O;this._animation&&(this._animation.stop(),(U=this.stopTimeline)==null||U.call(this)),(O=this.keyframeResolver)==null||O.cancel()},this.createdAt=Ns.now();const N={autoplay:t,delay:i,type:l,repeat:c,repeatDelay:u,repeatType:h,name:p,motionValue:g,element:x,...w},_=(x==null?void 0:x.KeyframeResolver)||Rf;this.keyframeResolver=new _(m,(U,O,L)=>this.onKeyframesResolved(U,O,N,!L),p,g,x),(T=this.keyframeResolver)==null||T.scheduleResolve()}onKeyframesResolved(t,i,l,c){var O,L;this.keyframeResolver=void 0;const{name:u,type:h,velocity:m,delay:p,isHandoff:g,onUpdate:x}=l;this.resolvedAt=Ns.now(),Uk(t,u,h,m)||((Ja.instantAnimations||!p)&&(x==null||x(Ef(t,l,i))),t[0]=t[t.length-1],Wh(l),l.repeat=0);const N={startTime:c?this.resolvedAt?this.resolvedAt-this.createdAt>zk?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:i,...l,keyframes:t},_=!g&&Bk(N),T=(L=(O=N.motionValue)==null?void 0:O.owner)==null?void 0:L.current,U=_?new Rk({...N,element:T}):new Df(N);U.finished.then(()=>{this.notifyFinished()}).catch(aa),this.pendingTimeline&&(this.stopTimeline=U.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=U}get finished(){return this._animation?this.animation.finished:this._finished}then(t,i){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),jk()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}function ay(s,t,i,l=0,c=1){const u=Array.from(s).sort((g,x)=>g.sortNodePosition(x)).indexOf(t),h=s.size,m=(h-1)*l;return typeof i=="function"?i(u,h):c===1?u*l:m-u*l}const qk=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Ik(s){const t=qk.exec(s);if(!t)return[,];const[,i,l,c]=t;return[`--${i??l}`,c]}function ny(s,t,i=1){const[l,c]=Ik(s);if(!l)return;const u=window.getComputedStyle(t).getPropertyValue(l);if(u){const h=u.trim();return Sb(h)?parseFloat(h):h}return _f(c)?ny(c,t,i+1):c}const $k={type:"spring",stiffness:500,damping:25,restSpeed:10},Hk=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),Kk={type:"keyframes",duration:.8},Gk={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Fk=(s,{keyframes:t})=>t.length>2?Kk:mr.has(s)?s.startsWith("scale")?Hk(t[1]):$k:Gk,Yk=s=>s!==null;function Qk(s,{repeat:t,repeatType:i="loop"},l){const c=s.filter(Yk),u=t&&i!=="loop"&&t%2===1?0:c.length-1;return c[u]}function iy(s,t){if(s!=null&&s.inherit&&t){const{inherit:i,...l}=s;return{...t,...l}}return s}function Mf(s,t){const i=(s==null?void 0:s[t])??(s==null?void 0:s.default)??s;return i!==s?iy(i,s):i}function Xk({when:s,delay:t,delayChildren:i,staggerChildren:l,staggerDirection:c,repeat:u,repeatType:h,repeatDelay:m,from:p,elapsed:g,...x}){return!!Object.keys(x).length}const Uf=(s,t,i,l={},c,u)=>h=>{const m=Mf(l,s)||{},p=m.delay||l.delay||0;let{elapsed:g=0}=l;g=g-Sa(p);const x={keyframes:Array.isArray(i)?i:[null,i],ease:"easeOut",velocity:t.getVelocity(),...m,delay:-g,onUpdate:N=>{t.set(N),m.onUpdate&&m.onUpdate(N)},onComplete:()=>{h(),m.onComplete&&m.onComplete()},name:s,motionValue:t,element:u?void 0:c};Xk(m)||Object.assign(x,Fk(s,x)),x.duration&&(x.duration=Sa(x.duration)),x.repeatDelay&&(x.repeatDelay=Sa(x.repeatDelay)),x.from!==void 0&&(x.keyframes[0]=x.from);let w=!1;if((x.type===!1||x.duration===0&&!x.repeatDelay)&&(Wh(x),x.delay===0&&(w=!0)),(Ja.instantAnimations||Ja.skipAnimations||c!=null&&c.shouldSkipAnimations)&&(w=!0,Wh(x),x.delay=0),x.allowFlatten=!m.type&&!m.ease,w&&!u&&t.get()!==void 0){const N=Qk(x.keyframes,m);if(N!==void 0){St.update(()=>{x.onUpdate(N),x.onComplete()});return}}return m.isSync?new Df(x):new Vk(x)};function Yx(s){const t=[{},{}];return s==null||s.values.forEach((i,l)=>{t[0][l]=i.get(),t[1][l]=i.getVelocity()}),t}function Lf(s,t,i,l){if(typeof t=="function"){const[c,u]=Yx(l);t=t(i!==void 0?i:s.custom,c,u)}if(typeof t=="string"&&(t=s.variants&&s.variants[t]),typeof t=="function"){const[c,u]=Yx(l);t=t(i!==void 0?i:s.custom,c,u)}return t}function or(s,t,i){const l=s.getProps();return Lf(l,t,i!==void 0?i:l.custom,s)}const ry=new Set(["width","height","top","left","right","bottom",...fr]),Qx=30,Jk=s=>!isNaN(parseFloat(s));class Zk{constructor(t,i={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=l=>{var u;const c=Ns.now();if(this.updatedAt!==c&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(l),this.current!==this.prev&&((u=this.events.change)==null||u.notify(this.current),this.dependents))for(const h of this.dependents)h.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=i.owner}setCurrent(t){this.current=t,this.updatedAt=Ns.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Jk(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,i){this.events[t]||(this.events[t]=new jf);const l=this.events[t].add(i);return t==="change"?()=>{l(),St.read(()=>{this.events.change.getSize()||this.stop()})}:l}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,i){this.passiveEffect=t,this.stopPassiveEffect=i}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,i,l){this.set(i),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-l}jump(t,i=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,i&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Ns.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Qx)return 0;const i=Math.min(this.updatedAt-this.prevUpdatedAt,Qx);return kb(parseFloat(this.current)-parseFloat(this.prevFrameValue),i)}start(t){return this.stop(),new Promise(i=>{this.hasAnimated=!0,this.animation=t(i),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,i;(t=this.dependents)==null||t.clear(),(i=this.events.destroy)==null||i.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ur(s,t){return new Zk(s,t)}const ef=s=>Array.isArray(s);function Wk(s,t,i){s.hasValue(t)?s.getValue(t).set(i):s.addValue(t,ur(i))}function eA(s){return ef(s)?s[s.length-1]||0:s}function tA(s,t){const i=or(s,t);let{transitionEnd:l={},transition:c={},...u}=i||{};u={...u,...l};for(const h in u){const m=eA(u[h]);Wk(s,h,m)}}const vs=s=>!!(s&&s.getVelocity);function sA(s){return!!(vs(s)&&s.add)}function tf(s,t){const i=s.getValue("willChange");if(sA(i))return i.add(t);if(!i&&Ja.WillChange){const l=new Ja.WillChange("auto");s.addValue("willChange",l),l.add(t)}}function Pf(s){return s.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)}const aA="framerAppearId",ly="data-"+Pf(aA);function oy(s){return s.props[ly]}function nA({protectedKeys:s,needsAnimating:t},i){const l=s.hasOwnProperty(i)&&t[i]!==!0;return t[i]=!1,l}function cy(s,t,{delay:i=0,transitionOverride:l,type:c}={}){let{transition:u,transitionEnd:h,...m}=t;const p=s.getDefaultTransition();u=u?iy(u,p):p;const g=u==null?void 0:u.reduceMotion;l&&(u=l);const x=[],w=c&&s.animationState&&s.animationState.getState()[c];for(const N in m){const _=s.getValue(N,s.latestValues[N]??null),T=m[N];if(T===void 0||w&&nA(w,N))continue;const U={delay:i,...Mf(u||{},N)},O=_.get();if(O!==void 0&&!_.isAnimating&&!Array.isArray(T)&&T===O&&!U.velocity)continue;let L=!1;if(window.MotionHandoffAnimation){const ie=oy(s);if(ie){const ue=window.MotionHandoffAnimation(ie,N,St);ue!==null&&(U.startTime=ue,L=!0)}}tf(s,N);const D=g??s.shouldReduceMotion;_.start(Uf(N,_,T,D&&ry.has(N)?{type:!1}:U,s,L));const M=_.animation;M&&x.push(M)}if(h){const N=()=>St.update(()=>{h&&tA(s,h)});x.length?Promise.all(x).then(N):N()}return x}function sf(s,t,i={}){var p;const l=or(s,t,i.type==="exit"?(p=s.presenceContext)==null?void 0:p.custom:void 0);let{transition:c=s.getDefaultTransition()||{}}=l||{};i.transitionOverride&&(c=i.transitionOverride);const u=l?()=>Promise.all(cy(s,l,i)):()=>Promise.resolve(),h=s.variantChildren&&s.variantChildren.size?(g=0)=>{const{delayChildren:x=0,staggerChildren:w,staggerDirection:N}=c;return iA(s,t,g,x,w,N,i)}:()=>Promise.resolve(),{when:m}=c;if(m){const[g,x]=m==="beforeChildren"?[u,h]:[h,u];return g().then(()=>x())}else return Promise.all([u(),h(i.delay)])}function iA(s,t,i=0,l=0,c=0,u=1,h){const m=[];for(const p of s.variantChildren)p.notify("AnimationStart",t),m.push(sf(p,t,{...h,delay:i+(typeof l=="function"?0:l)+ay(s.variantChildren,p,l,c,u)}).then(()=>p.notify("AnimationComplete",t)));return Promise.all(m)}function rA(s,t,i={}){s.notify("AnimationStart",t);let l;if(Array.isArray(t)){const c=t.map(u=>sf(s,u,i));l=Promise.all(c)}else if(typeof t=="string")l=sf(s,t,i);else{const c=typeof t=="function"?or(s,t,i.custom):t;l=Promise.all(cy(s,c,i))}return l.then(()=>{s.notify("AnimationComplete",t)})}const lA={test:s=>s==="auto",parse:s=>s},uy=s=>t=>t.test(s),dy=[hr,Ne,_a,Sn,MT,RT,lA],Xx=s=>dy.find(uy(s));function oA(s){return typeof s=="number"?s===0:s!==null?s==="none"||s==="0"||Tb(s):!0}const cA=new Set(["brightness","contrast","saturate","opacity"]);function uA(s){const[t,i]=s.slice(0,-1).split("(");if(t==="drop-shadow")return s;const[l]=i.match(Tf)||[];if(!l)return s;const c=i.replace(l,"");let u=cA.has(t)?1:0;return l!==i&&(u*=100),t+"("+u+c+")"}const dA=/\b([a-z-]*)\(.*?\)/gu,af={...En,getAnimatableNone:s=>{const t=s.match(dA);return t?t.map(uA).join(" "):s}},Jx={...hr,transform:Math.round},hA={rotate:Sn,rotateX:Sn,rotateY:Sn,rotateZ:Sn,scale:lc,scaleX:lc,scaleY:lc,scaleZ:lc,skew:Sn,skewX:Sn,skewY:Sn,distance:Ne,translateX:Ne,translateY:Ne,translateZ:Ne,x:Ne,y:Ne,z:Ne,perspective:Ne,transformPerspective:Ne,opacity:Tl,originX:Px,originY:Px,originZ:Ne},Bf={borderWidth:Ne,borderTopWidth:Ne,borderRightWidth:Ne,borderBottomWidth:Ne,borderLeftWidth:Ne,borderRadius:Ne,borderTopLeftRadius:Ne,borderTopRightRadius:Ne,borderBottomRightRadius:Ne,borderBottomLeftRadius:Ne,width:Ne,maxWidth:Ne,height:Ne,maxHeight:Ne,top:Ne,right:Ne,bottom:Ne,left:Ne,inset:Ne,insetBlock:Ne,insetBlockStart:Ne,insetBlockEnd:Ne,insetInline:Ne,insetInlineStart:Ne,insetInlineEnd:Ne,padding:Ne,paddingTop:Ne,paddingRight:Ne,paddingBottom:Ne,paddingLeft:Ne,paddingBlock:Ne,paddingBlockStart:Ne,paddingBlockEnd:Ne,paddingInline:Ne,paddingInlineStart:Ne,paddingInlineEnd:Ne,margin:Ne,marginTop:Ne,marginRight:Ne,marginBottom:Ne,marginLeft:Ne,marginBlock:Ne,marginBlockStart:Ne,marginBlockEnd:Ne,marginInline:Ne,marginInlineStart:Ne,marginInlineEnd:Ne,fontSize:Ne,backgroundPositionX:Ne,backgroundPositionY:Ne,...hA,zIndex:Jx,fillOpacity:Tl,strokeOpacity:Tl,numOctaves:Jx},fA={...Bf,color:Qt,backgroundColor:Qt,outlineColor:Qt,fill:Qt,stroke:Qt,borderColor:Qt,borderTopColor:Qt,borderRightColor:Qt,borderBottomColor:Qt,borderLeftColor:Qt,filter:af,WebkitFilter:af},hy=s=>fA[s];function fy(s,t){let i=hy(s);return i!==af&&(i=En),i.getAnimatableNone?i.getAnimatableNone(t):void 0}const mA=new Set(["auto","none","0"]);function pA(s,t,i){let l=0,c;for(;l<s.length&&!c;){const u=s[l];typeof u=="string"&&!mA.has(u)&&kl(u).values.length&&(c=s[l]),l++}if(c&&i)for(const u of t)s[u]=fy(i,c)}class gA extends Rf{constructor(t,i,l,c,u){super(t,i,l,c,u,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:i,name:l}=this;if(!i||!i.current)return;super.readKeyframes();for(let x=0;x<t.length;x++){let w=t[x];if(typeof w=="string"&&(w=w.trim(),_f(w))){const N=ny(w,i.current);N!==void 0&&(t[x]=N),x===t.length-1&&(this.finalKeyframe=w)}}if(this.resolveNoneKeyframes(),!ry.has(l)||t.length!==2)return;const[c,u]=t,h=Xx(c),m=Xx(u),p=Lx(c),g=Lx(u);if(p!==g&&An[l]){this.needsMeasurement=!0;return}if(h!==m)if(Kx(h)&&Kx(m))for(let x=0;x<t.length;x++){const w=t[x];typeof w=="string"&&(t[x]=parseFloat(w))}else An[l]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:i}=this,l=[];for(let c=0;c<t.length;c++)(t[c]===null||oA(t[c]))&&l.push(c);l.length&&pA(t,l,i)}measureInitialState(){const{element:t,unresolvedKeyframes:i,name:l}=this;if(!t||!t.current)return;l==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=An[l](t.measureViewportBox(),window.getComputedStyle(t.current)),i[0]=this.measuredOrigin;const c=i[i.length-1];c!==void 0&&t.getValue(l,c).jump(c,!1)}measureEndState(){var m;const{element:t,name:i,unresolvedKeyframes:l}=this;if(!t||!t.current)return;const c=t.getValue(i);c&&c.jump(this.measuredOrigin,!1);const u=l.length-1,h=l[u];l[u]=An[i](t.measureViewportBox(),window.getComputedStyle(t.current)),h!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=h),(m=this.removedTransforms)!=null&&m.length&&this.removedTransforms.forEach(([p,g])=>{t.getValue(p).set(g)}),this.resolveNoneKeyframes()}}function my(s,t,i){if(s==null)return[];if(s instanceof EventTarget)return[s];if(typeof s=="string"){let l=document;const c=(i==null?void 0:i[s])??l.querySelectorAll(s);return c?Array.from(c):[]}return Array.from(s).filter(l=>l!=null)}const py=(s,t)=>t&&typeof s=="number"?t.transform(s):s;function xA(s){return _b(s)&&"offsetHeight"in s}const{schedule:zf}=Bb(queueMicrotask,!1),ha={x:!1,y:!1};function gy(){return ha.x||ha.y}function vA(s){return s==="x"||s==="y"?ha[s]?null:(ha[s]=!0,()=>{ha[s]=!1}):ha.x||ha.y?null:(ha.x=ha.y=!0,()=>{ha.x=ha.y=!1})}function xy(s,t){const i=my(s),l=new AbortController,c={passive:!0,...t,signal:l.signal};return[i,c,()=>l.abort()]}function bA(s){return!(s.pointerType==="touch"||gy())}function yA(s,t,i={}){const[l,c,u]=xy(s,i);return l.forEach(h=>{let m=!1,p=!1,g;const x=()=>{h.removeEventListener("pointerleave",T)},w=O=>{g&&(g(O),g=void 0),x()},N=O=>{m=!1,window.removeEventListener("pointerup",N),window.removeEventListener("pointercancel",N),p&&(p=!1,w(O))},_=()=>{m=!0,window.addEventListener("pointerup",N,c),window.addEventListener("pointercancel",N,c)},T=O=>{if(O.pointerType!=="touch"){if(m){p=!0;return}w(O)}},U=O=>{if(!bA(O))return;p=!1;const L=t(h,O);typeof L=="function"&&(g=L,h.addEventListener("pointerleave",T,c))};h.addEventListener("pointerenter",U,c),h.addEventListener("pointerdown",_,c)}),u}const vy=(s,t)=>t?s===t?!0:vy(s,t.parentElement):!1,Vf=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1,wA=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function jA(s){return wA.has(s.tagName)||s.isContentEditable===!0}const NA=new Set(["INPUT","SELECT","TEXTAREA"]);function SA(s){return NA.has(s.tagName)||s.isContentEditable===!0}const hc=new WeakSet;function Zx(s){return t=>{t.key==="Enter"&&s(t)}}function xh(s,t){s.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const _A=(s,t)=>{const i=s.currentTarget;if(!i)return;const l=Zx(()=>{if(hc.has(i))return;xh(i,"down");const c=Zx(()=>{xh(i,"up")}),u=()=>xh(i,"cancel");i.addEventListener("keyup",c,t),i.addEventListener("blur",u,t)});i.addEventListener("keydown",l,t),i.addEventListener("blur",()=>i.removeEventListener("keydown",l),t)};function Wx(s){return Vf(s)&&!gy()}const ev=new WeakSet;function TA(s,t,i={}){const[l,c,u]=xy(s,i),h=m=>{const p=m.currentTarget;if(!Wx(m)||ev.has(m))return;hc.add(p),i.stopPropagation&&ev.add(m);const g=t(p,m),x=(_,T)=>{window.removeEventListener("pointerup",w),window.removeEventListener("pointercancel",N),hc.has(p)&&hc.delete(p),Wx(_)&&typeof g=="function"&&g(_,{success:T})},w=_=>{x(_,p===window||p===document||i.useGlobalTarget||vy(p,_.target))},N=_=>{x(_,!1)};window.addEventListener("pointerup",w,c),window.addEventListener("pointercancel",N,c)};return l.forEach(m=>{(i.useGlobalTarget?window:m).addEventListener("pointerdown",h,c),xA(m)&&(m.addEventListener("focus",g=>_A(g,c)),!jA(m)&&!m.hasAttribute("tabindex")&&(m.tabIndex=0))}),u}function qf(s){return _b(s)&&"ownerSVGElement"in s}const fc=new WeakMap;let _n;const by=(s,t,i)=>(l,c)=>c&&c[0]?c[0][s+"Size"]:qf(l)&&"getBBox"in l?l.getBBox()[t]:l[i],kA=by("inline","width","offsetWidth"),AA=by("block","height","offsetHeight");function CA({target:s,borderBoxSize:t}){var i;(i=fc.get(s))==null||i.forEach(l=>{l(s,{get width(){return kA(s,t)},get height(){return AA(s,t)}})})}function EA(s){s.forEach(CA)}function OA(){typeof ResizeObserver>"u"||(_n=new ResizeObserver(EA))}function DA(s,t){_n||OA();const i=my(s);return i.forEach(l=>{let c=fc.get(l);c||(c=new Set,fc.set(l,c)),c.add(t),_n==null||_n.observe(l)}),()=>{i.forEach(l=>{const c=fc.get(l);c==null||c.delete(t),c!=null&&c.size||_n==null||_n.unobserve(l)})}}const mc=new Set;let tr;function RA(){tr=()=>{const s={get width(){return window.innerWidth},get height(){return window.innerHeight}};mc.forEach(t=>t(s))},window.addEventListener("resize",tr)}function MA(s){return mc.add(s),tr||RA(),()=>{mc.delete(s),!mc.size&&typeof tr=="function"&&(window.removeEventListener("resize",tr),tr=void 0)}}function tv(s,t){return typeof s=="function"?MA(s):DA(s,t)}function UA(s){return qf(s)&&s.tagName==="svg"}const LA=[...dy,Qt,En],PA=s=>LA.find(uy(s)),sv=()=>({translate:0,scale:1,origin:0,originPoint:0}),sr=()=>({x:sv(),y:sv()}),av=()=>({min:0,max:0}),Wt=()=>({x:av(),y:av()}),nf={current:null},yy={current:!1},BA=typeof window<"u";function zA(){if(yy.current=!0,!!BA)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),t=()=>nf.current=s.matches;s.addEventListener("change",t),t()}else nf.current=!1}const VA=new WeakMap;function Pc(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}function Al(s){return typeof s=="string"||Array.isArray(s)}const If=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],$f=["initial",...If];function Bc(s){return Pc(s.animate)||$f.some(t=>Al(s[t]))}function wy(s){return!!(Bc(s)||s.variants)}function qA(s,t,i){for(const l in t){const c=t[l],u=i[l];if(vs(c))s.addValue(l,c);else if(vs(u))s.addValue(l,ur(c,{owner:s}));else if(u!==c)if(s.hasValue(l)){const h=s.getValue(l);h.liveStyle===!0?h.jump(c):h.hasAnimated||h.set(c)}else{const h=s.getStaticValue(l);s.addValue(l,ur(h!==void 0?h:c,{owner:s}))}}for(const l in i)t[l]===void 0&&s.removeValue(l);return t}const nv=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let kc={};function jy(s){kc=s}function IA(){return kc}class $A{scrapeMotionValuesFromProps(t,i,l){return{}}constructor({parent:t,props:i,presenceContext:l,reducedMotionConfig:c,skipAnimations:u,blockInitialAnimation:h,visualState:m},p={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=Rf,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=Ns.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,St.render(this.render,!1,!0))};const{latestValues:g,renderState:x}=m;this.latestValues=g,this.baseTarget={...g},this.initialValues=i.initial?{...g}:{},this.renderState=x,this.parent=t,this.props=i,this.presenceContext=l,this.depth=t?t.depth+1:0,this.reducedMotionConfig=c,this.skipAnimationsConfig=u,this.options=p,this.blockInitialAnimation=!!h,this.isControllingVariants=Bc(i),this.isVariantNode=wy(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:w,...N}=this.scrapeMotionValuesFromProps(i,{},this);for(const _ in N){const T=N[_];g[_]!==void 0&&vs(T)&&T.set(g[_])}}mount(t){var i,l;if(this.hasBeenMounted)for(const c in this.initialValues)(i=this.values.get(c))==null||i.jump(this.initialValues[c]),this.latestValues[c]=this.initialValues[c];this.current=t,VA.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((c,u)=>this.bindToMotionValue(u,c)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(yy.current||zA(),this.shouldReduceMotion=nf.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(l=this.parent)==null||l.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){var t;this.projection&&this.projection.unmount(),Cn(this.notifyUpdate),Cn(this.render),this.valueSubscriptions.forEach(i=>i()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const i in this.events)this.events[i].clear();for(const i in this.features){const l=this.features[i];l&&(l.unmount(),l.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,i){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const l=mr.has(t);l&&this.onBindTransform&&this.onBindTransform();const c=i.on("change",h=>{this.latestValues[t]=h,this.props.onUpdate&&St.preRender(this.notifyUpdate),l&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let u;typeof window<"u"&&window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,t,i)),this.valueSubscriptions.set(t,()=>{c(),u&&u(),i.owner&&i.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in kc){const i=kc[t];if(!i)continue;const{isEnabled:l,Feature:c}=i;if(!this.features[t]&&c&&l(this.props)&&(this.features[t]=new c(this)),this.features[t]){const u=this.features[t];u.isMounted?u.update():(u.mount(),u.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Wt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,i){this.latestValues[t]=i}update(t,i){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=i;for(let l=0;l<nv.length;l++){const c=nv[l];this.propEventSubscriptions[c]&&(this.propEventSubscriptions[c](),delete this.propEventSubscriptions[c]);const u="on"+c,h=t[u];h&&(this.propEventSubscriptions[c]=this.on(c,h))}this.prevMotionValues=qA(this,this.scrapeMotionValuesFromProps(t,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const i=this.getClosestVariantNode();if(i)return i.variantChildren&&i.variantChildren.add(t),()=>i.variantChildren.delete(t)}addValue(t,i){const l=this.values.get(t);i!==l&&(l&&this.removeValue(t),this.bindToMotionValue(t,i),this.values.set(t,i),this.latestValues[t]=i.get())}removeValue(t){this.values.delete(t);const i=this.valueSubscriptions.get(t);i&&(i(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,i){if(this.props.values&&this.props.values[t])return this.props.values[t];let l=this.values.get(t);return l===void 0&&i!==void 0&&(l=ur(i===null?void 0:i,{owner:this}),this.addValue(t,l)),l}readValue(t,i){let l=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return l!=null&&(typeof l=="string"&&(Sb(l)||Tb(l))?l=parseFloat(l):!PA(l)&&En.test(i)&&(l=fy(t,i)),this.setBaseTarget(t,vs(l)?l.get():l)),vs(l)?l.get():l}setBaseTarget(t,i){this.baseTarget[t]=i}getBaseTarget(t){var u;const{initial:i}=this.props;let l;if(typeof i=="string"||typeof i=="object"){const h=Lf(this.props,i,(u=this.presenceContext)==null?void 0:u.custom);h&&(l=h[t])}if(i&&l!==void 0)return l;const c=this.getBaseTargetFromProps(this.props,t);return c!==void 0&&!vs(c)?c:this.initialValues[t]!==void 0&&l===void 0?void 0:this.baseTarget[t]}on(t,i){return this.events[t]||(this.events[t]=new jf),this.events[t].add(i)}notify(t,...i){this.events[t]&&this.events[t].notify(...i)}scheduleRenderMicrotask(){zf.render(this.render)}}class Ny extends $A{constructor(){super(...arguments),this.KeyframeResolver=gA}sortInstanceNodePosition(t,i){return t.compareDocumentPosition(i)&2?1:-1}getBaseTargetFromProps(t,i){const l=t.style;return l?l[i]:void 0}removeValueFromRenderState(t,{vars:i,style:l}){delete i[t],delete l[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;vs(t)&&(this.childSubscription=t.on("change",i=>{this.current&&(this.current.textContent=`${i}`)}))}}class On{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Sy({top:s,left:t,right:i,bottom:l}){return{x:{min:t,max:i},y:{min:s,max:l}}}function HA({x:s,y:t}){return{top:t.min,right:s.max,bottom:t.max,left:s.min}}function KA(s,t){if(!t)return s;const i=t({x:s.left,y:s.top}),l=t({x:s.right,y:s.bottom});return{top:i.y,left:i.x,bottom:l.y,right:l.x}}function vh(s){return s===void 0||s===1}function rf({scale:s,scaleX:t,scaleY:i}){return!vh(s)||!vh(t)||!vh(i)}function Zn(s){return rf(s)||_y(s)||s.z||s.rotate||s.rotateX||s.rotateY||s.skewX||s.skewY}function _y(s){return iv(s.x)||iv(s.y)}function iv(s){return s&&s!=="0%"}function Ac(s,t,i){const l=s-i,c=t*l;return i+c}function rv(s,t,i,l,c){return c!==void 0&&(s=Ac(s,c,l)),Ac(s,i,l)+t}function lf(s,t=0,i=1,l,c){s.min=rv(s.min,t,i,l,c),s.max=rv(s.max,t,i,l,c)}function Ty(s,{x:t,y:i}){lf(s.x,t.translate,t.scale,t.originPoint),lf(s.y,i.translate,i.scale,i.originPoint)}const lv=.999999999999,ov=1.0000000000001;function GA(s,t,i,l=!1){const c=i.length;if(!c)return;t.x=t.y=1;let u,h;for(let m=0;m<c;m++){u=i[m],h=u.projectionDelta;const{visualElement:p}=u.options;p&&p.props.style&&p.props.style.display==="contents"||(l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&nr(s,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),h&&(t.x*=h.x.scale,t.y*=h.y.scale,Ty(s,h)),l&&Zn(u.latestValues)&&nr(s,u.latestValues))}t.x<ov&&t.x>lv&&(t.x=1),t.y<ov&&t.y>lv&&(t.y=1)}function ar(s,t){s.min=s.min+t,s.max=s.max+t}function cv(s,t,i,l,c=.5){const u=Ot(s.min,s.max,c);lf(s,t,i,u,l)}function nr(s,t){cv(s.x,t.x,t.scaleX,t.scale,t.originX),cv(s.y,t.y,t.scaleY,t.scale,t.originY)}function ky(s,t){return Sy(KA(s.getBoundingClientRect(),t))}function FA(s,t,i){const l=ky(s,i),{scroll:c}=t;return c&&(ar(l.x,c.offset.x),ar(l.y,c.offset.y)),l}const YA={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},QA=fr.length;function XA(s,t,i){let l="",c=!0;for(let u=0;u<QA;u++){const h=fr[u],m=s[h];if(m===void 0)continue;let p=!0;if(typeof m=="number")p=m===(h.startsWith("scale")?1:0);else{const g=parseFloat(m);p=h.startsWith("scale")?g===1:g===0}if(!p||i){const g=py(m,Bf[h]);if(!p){c=!1;const x=YA[h]||h;l+=`${x}(${g}) `}i&&(t[h]=g)}}return l=l.trim(),i?l=i(t,c?"":l):c&&(l="none"),l}function Hf(s,t,i){const{style:l,vars:c,transformOrigin:u}=s;let h=!1,m=!1;for(const p in t){const g=t[p];if(mr.has(p)){h=!0;continue}else if(Vb(p)){c[p]=g;continue}else{const x=py(g,Bf[p]);p.startsWith("origin")?(m=!0,u[p]=x):l[p]=x}}if(t.transform||(h||i?l.transform=XA(t,s.transform,i):l.transform&&(l.transform="none")),m){const{originX:p="50%",originY:g="50%",originZ:x=0}=u;l.transformOrigin=`${p} ${g} ${x}`}}function Ay(s,{style:t,vars:i},l,c){const u=s.style;let h;for(h in t)u[h]=t[h];c==null||c.applyProjectionStyles(u,l);for(h in i)u.setProperty(h,i[h])}function uv(s,t){return t.max===t.min?0:s/(t.max-t.min)*100}const rl={correct:(s,t)=>{if(!t.target)return s;if(typeof s=="string")if(Ne.test(s))s=parseFloat(s);else return s;const i=uv(s,t.target.x),l=uv(s,t.target.y);return`${i}% ${l}%`}},JA={correct:(s,{treeScale:t,projectionDelta:i})=>{const l=s,c=En.parse(s);if(c.length>5)return l;const u=En.createTransformer(s),h=typeof c[0]!="number"?1:0,m=i.x.scale*t.x,p=i.y.scale*t.y;c[0+h]/=m,c[1+h]/=p;const g=Ot(m,p,.5);return typeof c[2+h]=="number"&&(c[2+h]/=g),typeof c[3+h]=="number"&&(c[3+h]/=g),u(c)}},of={borderRadius:{...rl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:rl,borderTopRightRadius:rl,borderBottomLeftRadius:rl,borderBottomRightRadius:rl,boxShadow:JA};function Cy(s,{layout:t,layoutId:i}){return mr.has(s)||s.startsWith("origin")||(t||i!==void 0)&&(!!of[s]||s==="opacity")}function Kf(s,t,i){var h;const l=s.style,c=t==null?void 0:t.style,u={};if(!l)return u;for(const m in l)(vs(l[m])||c&&vs(c[m])||Cy(m,s)||((h=i==null?void 0:i.getValue(m))==null?void 0:h.liveStyle)!==void 0)&&(u[m]=l[m]);return u}function ZA(s){return window.getComputedStyle(s)}class WA extends Ny{constructor(){super(...arguments),this.type="html",this.renderInstance=Ay}readValueFromInstance(t,i){var l;if(mr.has(i))return(l=this.projection)!=null&&l.isProjecting?Yh(i):xk(t,i);{const c=ZA(t),u=(Vb(i)?c.getPropertyValue(i):c[i])||0;return typeof u=="string"?u.trim():u}}measureInstanceViewportBox(t,{transformPagePoint:i}){return ky(t,i)}build(t,i,l){Hf(t,i,l.transformTemplate)}scrapeMotionValuesFromProps(t,i,l){return Kf(t,i,l)}}const e4={offset:"stroke-dashoffset",array:"stroke-dasharray"},t4={offset:"strokeDashoffset",array:"strokeDasharray"};function s4(s,t,i=1,l=0,c=!0){s.pathLength=1;const u=c?e4:t4;s[u.offset]=`${-l}`,s[u.array]=`${t} ${i}`}const a4=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function Ey(s,{attrX:t,attrY:i,attrScale:l,pathLength:c,pathSpacing:u=1,pathOffset:h=0,...m},p,g,x){if(Hf(s,m,g),p){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:w,style:N}=s;w.transform&&(N.transform=w.transform,delete w.transform),(N.transform||w.transformOrigin)&&(N.transformOrigin=w.transformOrigin??"50% 50%",delete w.transformOrigin),N.transform&&(N.transformBox=(x==null?void 0:x.transformBox)??"fill-box",delete w.transformBox);for(const _ of a4)w[_]!==void 0&&(N[_]=w[_],delete w[_]);t!==void 0&&(w.x=t),i!==void 0&&(w.y=i),l!==void 0&&(w.scale=l),c!==void 0&&s4(w,c,u,h,!1)}const Oy=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),Dy=s=>typeof s=="string"&&s.toLowerCase()==="svg";function n4(s,t,i,l){Ay(s,t,void 0,l);for(const c in t.attrs)s.setAttribute(Oy.has(c)?c:Pf(c),t.attrs[c])}function Ry(s,t,i){const l=Kf(s,t,i);for(const c in s)if(vs(s[c])||vs(t[c])){const u=fr.indexOf(c)!==-1?"attr"+c.charAt(0).toUpperCase()+c.substring(1):c;l[u]=s[c]}return l}class i4 extends Ny{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Wt}getBaseTargetFromProps(t,i){return t[i]}readValueFromInstance(t,i){if(mr.has(i)){const l=hy(i);return l&&l.default||0}return i=Oy.has(i)?i:Pf(i),t.getAttribute(i)}scrapeMotionValuesFromProps(t,i,l){return Ry(t,i,l)}build(t,i,l){Ey(t,i,this.isSVGTag,l.transformTemplate,l.style)}renderInstance(t,i,l,c){n4(t,i,l,c)}mount(t){this.isSVGTag=Dy(t.tagName),super.mount(t)}}const r4=$f.length;function My(s){if(!s)return;if(!s.isControllingVariants){const i=s.parent?My(s.parent)||{}:{};return s.props.initial!==void 0&&(i.initial=s.props.initial),i}const t={};for(let i=0;i<r4;i++){const l=$f[i],c=s.props[l];(Al(c)||c===!1)&&(t[l]=c)}return t}function Uy(s,t){if(!Array.isArray(t))return!1;const i=t.length;if(i!==s.length)return!1;for(let l=0;l<i;l++)if(t[l]!==s[l])return!1;return!0}const l4=[...If].reverse(),o4=If.length;function c4(s){return t=>Promise.all(t.map(({animation:i,options:l})=>rA(s,i,l)))}function u4(s){let t=c4(s),i=dv(),l=!0;const c=p=>(g,x)=>{var N;const w=or(s,x,p==="exit"?(N=s.presenceContext)==null?void 0:N.custom:void 0);if(w){const{transition:_,transitionEnd:T,...U}=w;g={...g,...U,...T}}return g};function u(p){t=p(s)}function h(p){const{props:g}=s,x=My(s.parent)||{},w=[],N=new Set;let _={},T=1/0;for(let O=0;O<o4;O++){const L=l4[O],D=i[L],M=g[L]!==void 0?g[L]:x[L],ie=Al(M),ue=L===p?D.isActive:null;ue===!1&&(T=O);let B=M===x[L]&&M!==g[L]&&ie;if(B&&l&&s.manuallyAnimateOnMount&&(B=!1),D.protectedKeys={..._},!D.isActive&&ue===null||!M&&!D.prevProp||Pc(M)||typeof M=="boolean")continue;const H=d4(D.prevProp,M);let pe=H||L===p&&D.isActive&&!B&&ie||O>T&&ie,he=!1;const be=Array.isArray(M)?M:[M];let Le=be.reduce(c(L),{});ue===!1&&(Le={});const{prevResolvedValues:st={}}=D,gt={...st,...Le},re=ae=>{pe=!0,N.has(ae)&&(he=!0,N.delete(ae)),D.needsAnimating[ae]=!0;const ce=s.getValue(ae);ce&&(ce.liveStyle=!1)};for(const ae in gt){const ce=Le[ae],Oe=st[ae];if(_.hasOwnProperty(ae))continue;let xe=!1;ef(ce)&&ef(Oe)?xe=!Uy(ce,Oe):xe=ce!==Oe,xe?ce!=null?re(ae):N.add(ae):ce!==void 0&&N.has(ae)?re(ae):D.protectedKeys[ae]=!0}D.prevProp=M,D.prevResolvedValues=Le,D.isActive&&(_={..._,...Le}),l&&s.blockInitialAnimation&&(pe=!1);const Me=B&&H;pe&&(!Me||he)&&w.push(...be.map(ae=>{const ce={type:L};if(typeof ae=="string"&&l&&!Me&&s.manuallyAnimateOnMount&&s.parent){const{parent:Oe}=s,xe=or(Oe,ae);if(Oe.enteringChildren&&xe){const{delayChildren:C}=xe.transition||{};ce.delay=ay(Oe.enteringChildren,s,C)}}return{animation:ae,options:ce}}))}if(N.size){const O={};if(typeof g.initial!="boolean"){const L=or(s,Array.isArray(g.initial)?g.initial[0]:g.initial);L&&L.transition&&(O.transition=L.transition)}N.forEach(L=>{const D=s.getBaseTarget(L),M=s.getValue(L);M&&(M.liveStyle=!0),O[L]=D??null}),w.push({animation:O})}let U=!!w.length;return l&&(g.initial===!1||g.initial===g.animate)&&!s.manuallyAnimateOnMount&&(U=!1),l=!1,U?t(w):Promise.resolve()}function m(p,g){var w;if(i[p].isActive===g)return Promise.resolve();(w=s.variantChildren)==null||w.forEach(N=>{var _;return(_=N.animationState)==null?void 0:_.setActive(p,g)}),i[p].isActive=g;const x=h(p);for(const N in i)i[N].protectedKeys={};return x}return{animateChanges:h,setActive:m,setAnimateFunction:u,getState:()=>i,reset:()=>{i=dv()}}}function d4(s,t){return typeof t=="string"?t!==s:Array.isArray(t)?!Uy(t,s):!1}function Xn(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function dv(){return{animate:Xn(!0),whileInView:Xn(),whileHover:Xn(),whileTap:Xn(),whileDrag:Xn(),whileFocus:Xn(),exit:Xn()}}function hv(s,t){s.min=t.min,s.max=t.max}function ua(s,t){hv(s.x,t.x),hv(s.y,t.y)}function fv(s,t){s.translate=t.translate,s.scale=t.scale,s.originPoint=t.originPoint,s.origin=t.origin}const Ly=1e-4,h4=1-Ly,f4=1+Ly,Py=.01,m4=0-Py,p4=0+Py;function Ss(s){return s.max-s.min}function g4(s,t,i){return Math.abs(s-t)<=i}function mv(s,t,i,l=.5){s.origin=l,s.originPoint=Ot(t.min,t.max,s.origin),s.scale=Ss(i)/Ss(t),s.translate=Ot(i.min,i.max,s.origin)-s.originPoint,(s.scale>=h4&&s.scale<=f4||isNaN(s.scale))&&(s.scale=1),(s.translate>=m4&&s.translate<=p4||isNaN(s.translate))&&(s.translate=0)}function fl(s,t,i,l){mv(s.x,t.x,i.x,l?l.originX:void 0),mv(s.y,t.y,i.y,l?l.originY:void 0)}function pv(s,t,i){s.min=i.min+t.min,s.max=s.min+Ss(t)}function x4(s,t,i){pv(s.x,t.x,i.x),pv(s.y,t.y,i.y)}function gv(s,t,i){s.min=t.min-i.min,s.max=s.min+Ss(t)}function Cc(s,t,i){gv(s.x,t.x,i.x),gv(s.y,t.y,i.y)}function xv(s,t,i,l,c){return s-=t,s=Ac(s,1/i,l),c!==void 0&&(s=Ac(s,1/c,l)),s}function v4(s,t=0,i=1,l=.5,c,u=s,h=s){if(_a.test(t)&&(t=parseFloat(t),t=Ot(h.min,h.max,t/100)-h.min),typeof t!="number")return;let m=Ot(u.min,u.max,l);s===u&&(m-=t),s.min=xv(s.min,t,i,m,c),s.max=xv(s.max,t,i,m,c)}function vv(s,t,[i,l,c],u,h){v4(s,t[i],t[l],t[c],t.scale,u,h)}const b4=["x","scaleX","originX"],y4=["y","scaleY","originY"];function bv(s,t,i,l){vv(s.x,t,b4,i?i.x:void 0,l?l.x:void 0),vv(s.y,t,y4,i?i.y:void 0,l?l.y:void 0)}function yv(s){return s.translate===0&&s.scale===1}function By(s){return yv(s.x)&&yv(s.y)}function wv(s,t){return s.min===t.min&&s.max===t.max}function w4(s,t){return wv(s.x,t.x)&&wv(s.y,t.y)}function jv(s,t){return Math.round(s.min)===Math.round(t.min)&&Math.round(s.max)===Math.round(t.max)}function zy(s,t){return jv(s.x,t.x)&&jv(s.y,t.y)}function Nv(s){return Ss(s.x)/Ss(s.y)}function Sv(s,t){return s.translate===t.translate&&s.scale===t.scale&&s.originPoint===t.originPoint}function ja(s){return[s("x"),s("y")]}function j4(s,t,i){let l="";const c=s.x.translate/t.x,u=s.y.translate/t.y,h=(i==null?void 0:i.z)||0;if((c||u||h)&&(l=`translate3d(${c}px, ${u}px, ${h}px) `),(t.x!==1||t.y!==1)&&(l+=`scale(${1/t.x}, ${1/t.y}) `),i){const{transformPerspective:g,rotate:x,rotateX:w,rotateY:N,skewX:_,skewY:T}=i;g&&(l=`perspective(${g}px) ${l}`),x&&(l+=`rotate(${x}deg) `),w&&(l+=`rotateX(${w}deg) `),N&&(l+=`rotateY(${N}deg) `),_&&(l+=`skewX(${_}deg) `),T&&(l+=`skewY(${T}deg) `)}const m=s.x.scale*t.x,p=s.y.scale*t.y;return(m!==1||p!==1)&&(l+=`scale(${m}, ${p})`),l||"none"}const Vy=["TopLeft","TopRight","BottomLeft","BottomRight"],N4=Vy.length,_v=s=>typeof s=="string"?parseFloat(s):s,Tv=s=>typeof s=="number"||Ne.test(s);function S4(s,t,i,l,c,u){c?(s.opacity=Ot(0,i.opacity??1,_4(l)),s.opacityExit=Ot(t.opacity??1,0,T4(l))):u&&(s.opacity=Ot(t.opacity??1,i.opacity??1,l));for(let h=0;h<N4;h++){const m=`border${Vy[h]}Radius`;let p=kv(t,m),g=kv(i,m);if(p===void 0&&g===void 0)continue;p||(p=0),g||(g=0),p===0||g===0||Tv(p)===Tv(g)?(s[m]=Math.max(Ot(_v(p),_v(g),l),0),(_a.test(g)||_a.test(p))&&(s[m]+="%")):s[m]=g}(t.rotate||i.rotate)&&(s.rotate=Ot(t.rotate||0,i.rotate||0,l))}function kv(s,t){return s[t]!==void 0?s[t]:s.borderRadius}const _4=qy(0,.5,Mb),T4=qy(.5,.95,aa);function qy(s,t,i){return l=>l<s?0:l>t?1:i(_l(s,t,l))}function k4(s,t,i){const l=vs(s)?s:ur(s);return l.start(Uf("",l,t,i)),l.animation}function Cl(s,t,i,l={passive:!0}){return s.addEventListener(t,i,l),()=>s.removeEventListener(t,i)}const A4=(s,t)=>s.depth-t.depth;class C4{constructor(){this.children=[],this.isDirty=!1}add(t){vf(this.children,t),this.isDirty=!0}remove(t){bf(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(A4),this.isDirty=!1,this.children.forEach(t)}}function E4(s,t){const i=Ns.now(),l=({timestamp:c})=>{const u=c-i;u>=t&&(Cn(l),s(u-t))};return St.setup(l,!0),()=>Cn(l)}function pc(s){return vs(s)?s.get():s}class O4{constructor(){this.members=[]}add(t){vf(this.members,t),t.scheduleRender()}remove(t){if(bf(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const i=this.members[this.members.length-1];i&&this.promote(i)}}relegate(t){const i=this.members.findIndex(c=>t===c);if(i===0)return!1;let l;for(let c=i;c>=0;c--){const u=this.members[c];if(u.isPresent!==!1){l=u;break}}return l?(this.promote(l),!0):!1}promote(t,i){const l=this.lead;if(t!==l&&(this.prevLead=l,this.lead=t,t.show(),l)){l.instance&&l.scheduleRender(),t.scheduleRender();const c=l.options.layoutDependency,u=t.options.layoutDependency;c!==void 0&&u!==void 0&&c===u||(t.resumeFrom=l,i&&(t.resumeFrom.preserveOpacity=!0),l.snapshot&&(t.snapshot=l.snapshot,t.snapshot.latestValues=l.animationValues||l.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0));const{crossfade:m}=t.options;m===!1&&l.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:i,resumingFrom:l}=t;i.onExitComplete&&i.onExitComplete(),l&&l.options.onExitComplete&&l.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const gc={hasAnimatedSinceResize:!0,hasEverUpdated:!1},bh=["","X","Y","Z"],D4=1e3;let R4=0;function yh(s,t,i,l){const{latestValues:c}=t;c[s]&&(i[s]=c[s],t.setStaticValue(s,0),l&&(l[s]=0))}function Iy(s){if(s.hasCheckedOptimisedAppear=!0,s.root===s)return;const{visualElement:t}=s.options;if(!t)return;const i=oy(t);if(window.MotionHasOptimisedAnimation(i,"transform")){const{layout:c,layoutId:u}=s.options;window.MotionCancelOptimisedAnimation(i,"transform",St,!(c||u))}const{parent:l}=s;l&&!l.hasCheckedOptimisedAppear&&Iy(l)}function $y({attachResizeListener:s,defaultParent:t,measureScroll:i,checkIsScrollRoot:l,resetTransform:c}){return class{constructor(h={},m=t==null?void 0:t()){this.id=R4++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(L4),this.nodes.forEach(V4),this.nodes.forEach(q4),this.nodes.forEach(P4)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=h,this.root=m?m.root||m:this,this.path=m?[...m.path,m]:[],this.parent=m,this.depth=m?m.depth+1:0;for(let p=0;p<this.path.length;p++)this.path[p].shouldResetTransform=!0;this.root===this&&(this.nodes=new C4)}addEventListener(h,m){return this.eventHandlers.has(h)||this.eventHandlers.set(h,new jf),this.eventHandlers.get(h).add(m)}notifyListeners(h,...m){const p=this.eventHandlers.get(h);p&&p.notify(...m)}hasListeners(h){return this.eventHandlers.has(h)}mount(h){if(this.instance)return;this.isSVG=qf(h)&&!UA(h),this.instance=h;const{layoutId:m,layout:p,visualElement:g}=this.options;if(g&&!g.current&&g.mount(h),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(p||m)&&(this.isLayoutDirty=!0),s){let x,w=0;const N=()=>this.root.updateBlockedByResize=!1;St.read(()=>{w=window.innerWidth}),s(h,()=>{const _=window.innerWidth;_!==w&&(w=_,this.root.updateBlockedByResize=!0,x&&x(),x=E4(N,250),gc.hasAnimatedSinceResize&&(gc.hasAnimatedSinceResize=!1,this.nodes.forEach(Ev)))})}m&&this.root.registerSharedNode(m,this),this.options.animate!==!1&&g&&(m||p)&&this.addEventListener("didUpdate",({delta:x,hasLayoutChanged:w,hasRelativeLayoutChanged:N,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const T=this.options.transition||g.getDefaultTransition()||G4,{onLayoutAnimationStart:U,onLayoutAnimationComplete:O}=g.getProps(),L=!this.targetLayout||!zy(this.targetLayout,_),D=!w&&N;if(this.options.layoutRoot||this.resumeFrom||D||w&&(L||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const M={...Mf(T,"layout"),onPlay:U,onComplete:O};(g.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M),this.setAnimationOrigin(x,D)}else w||Ev(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const h=this.getStack();h&&h.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Cn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(I4),this.animationId++)}getTransformTemplate(){const{visualElement:h}=this.options;return h&&h.getProps().transformTemplate}willUpdate(h=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Iy(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let x=0;x<this.path.length;x++){const w=this.path[x];w.shouldResetTransform=!0,w.updateScroll("snapshot"),w.options.layoutRoot&&w.willUpdate(!1)}const{layoutId:m,layout:p}=this.options;if(m===void 0&&!p)return;const g=this.getTransformTemplate();this.prevTransformTemplateValue=g?g(this.latestValues,""):void 0,this.updateSnapshot(),h&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Av);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Cv);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(z4),this.nodes.forEach(M4),this.nodes.forEach(U4)):this.nodes.forEach(Cv),this.clearAllSnapshots();const m=Ns.now();hs.delta=Ta(0,1e3/60,m-hs.timestamp),hs.timestamp=m,hs.isProcessing=!0,dh.update.process(hs),dh.preRender.process(hs),dh.render.process(hs),hs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,zf.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(B4),this.sharedNodes.forEach($4)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,St.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){St.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ss(this.snapshot.measuredBox.x)&&!Ss(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let p=0;p<this.path.length;p++)this.path[p].updateScroll();const h=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Wt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:m}=this.options;m&&m.notify("LayoutMeasure",this.layout.layoutBox,h?h.layoutBox:void 0)}updateScroll(h="measure"){let m=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===h&&(m=!1),m&&this.instance){const p=l(this.instance);this.scroll={animationId:this.root.animationId,phase:h,isRoot:p,offset:i(this.instance),wasRoot:this.scroll?this.scroll.isRoot:p}}}resetTransform(){if(!c)return;const h=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,m=this.projectionDelta&&!By(this.projectionDelta),p=this.getTransformTemplate(),g=p?p(this.latestValues,""):void 0,x=g!==this.prevTransformTemplateValue;h&&this.instance&&(m||Zn(this.latestValues)||x)&&(c(this.instance,g),this.shouldResetTransform=!1,this.scheduleRender())}measure(h=!0){const m=this.measurePageBox();let p=this.removeElementScroll(m);return h&&(p=this.removeTransform(p)),F4(p),{animationId:this.root.animationId,measuredBox:m,layoutBox:p,latestValues:{},source:this.id}}measurePageBox(){var g;const{visualElement:h}=this.options;if(!h)return Wt();const m=h.measureViewportBox();if(!(((g=this.scroll)==null?void 0:g.wasRoot)||this.path.some(Y4))){const{scroll:x}=this.root;x&&(ar(m.x,x.offset.x),ar(m.y,x.offset.y))}return m}removeElementScroll(h){var p;const m=Wt();if(ua(m,h),(p=this.scroll)!=null&&p.wasRoot)return m;for(let g=0;g<this.path.length;g++){const x=this.path[g],{scroll:w,options:N}=x;x!==this.root&&w&&N.layoutScroll&&(w.wasRoot&&ua(m,h),ar(m.x,w.offset.x),ar(m.y,w.offset.y))}return m}applyTransform(h,m=!1){const p=Wt();ua(p,h);for(let g=0;g<this.path.length;g++){const x=this.path[g];!m&&x.options.layoutScroll&&x.scroll&&x!==x.root&&nr(p,{x:-x.scroll.offset.x,y:-x.scroll.offset.y}),Zn(x.latestValues)&&nr(p,x.latestValues)}return Zn(this.latestValues)&&nr(p,this.latestValues),p}removeTransform(h){const m=Wt();ua(m,h);for(let p=0;p<this.path.length;p++){const g=this.path[p];if(!g.instance||!Zn(g.latestValues))continue;rf(g.latestValues)&&g.updateSnapshot();const x=Wt(),w=g.measurePageBox();ua(x,w),bv(m,g.latestValues,g.snapshot?g.snapshot.layoutBox:void 0,x)}return Zn(this.latestValues)&&bv(m,this.latestValues),m}setTargetDelta(h){this.targetDelta=h,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(h){this.options={...this.options,...h,crossfade:h.crossfade!==void 0?h.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==hs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(h=!1){var _;const m=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=m.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=m.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=m.isSharedProjectionDirty);const p=!!this.resumingFrom||this!==m;if(!(h||p&&this.isSharedProjectionDirty||this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:x,layoutId:w}=this.options;if(!this.layout||!(x||w))return;this.resolvedRelativeTargetAt=hs.timestamp;const N=this.getClosestProjectingParent();N&&this.linkedParentVersion!==N.layoutVersion&&!N.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(N&&N.layout?this.createRelativeTarget(N,this.layout.layoutBox,N.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Wt(),this.targetWithTransforms=Wt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),x4(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ua(this.target,this.layout.layoutBox),Ty(this.target,this.targetDelta)):ua(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,N&&!!N.resumingFrom==!!this.resumingFrom&&!N.options.layoutScroll&&N.target&&this.animationProgress!==1?this.createRelativeTarget(N,this.target,N.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||rf(this.parent.latestValues)||_y(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(h,m,p){this.relativeParent=h,this.linkedParentVersion=h.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Wt(),this.relativeTargetOrigin=Wt(),Cc(this.relativeTargetOrigin,m,p),ua(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var T;const h=this.getLead(),m=!!this.resumingFrom||this!==h;let p=!0;if((this.isProjectionDirty||(T=this.parent)!=null&&T.isProjectionDirty)&&(p=!1),m&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(p=!1),this.resolvedRelativeTargetAt===hs.timestamp&&(p=!1),p)return;const{layout:g,layoutId:x}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||x))return;ua(this.layoutCorrected,this.layout.layoutBox);const w=this.treeScale.x,N=this.treeScale.y;GA(this.layoutCorrected,this.treeScale,this.path,m),h.layout&&!h.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(h.target=h.layout.layoutBox,h.targetWithTransforms=Wt());const{target:_}=h;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(fv(this.prevProjectionDelta.x,this.projectionDelta.x),fv(this.prevProjectionDelta.y,this.projectionDelta.y)),fl(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==w||this.treeScale.y!==N||!Sv(this.projectionDelta.x,this.prevProjectionDelta.x)||!Sv(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(h=!0){var m;if((m=this.options.visualElement)==null||m.scheduleRender(),h){const p=this.getStack();p&&p.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=sr(),this.projectionDelta=sr(),this.projectionDeltaWithTransform=sr()}setAnimationOrigin(h,m=!1){const p=this.snapshot,g=p?p.latestValues:{},x={...this.latestValues},w=sr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!m;const N=Wt(),_=p?p.source:void 0,T=this.layout?this.layout.source:void 0,U=_!==T,O=this.getStack(),L=!O||O.members.length<=1,D=!!(U&&!L&&this.options.crossfade===!0&&!this.path.some(K4));this.animationProgress=0;let M;this.mixTargetDelta=ie=>{const ue=ie/1e3;Ov(w.x,h.x,ue),Ov(w.y,h.y,ue),this.setTargetDelta(w),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Cc(N,this.layout.layoutBox,this.relativeParent.layout.layoutBox),H4(this.relativeTarget,this.relativeTargetOrigin,N,ue),M&&w4(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=Wt()),ua(M,this.relativeTarget)),U&&(this.animationValues=x,S4(x,g,this.latestValues,ue,D,L)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ue},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(h){var m,p,g;this.notifyListeners("animationStart"),(m=this.currentAnimation)==null||m.stop(),(g=(p=this.resumingFrom)==null?void 0:p.currentAnimation)==null||g.stop(),this.pendingAnimation&&(Cn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=St.update(()=>{gc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ur(0)),this.currentAnimation=k4(this.motionValue,[0,1e3],{...h,velocity:0,isSync:!0,onUpdate:x=>{this.mixTargetDelta(x),h.onUpdate&&h.onUpdate(x)},onStop:()=>{},onComplete:()=>{h.onComplete&&h.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const h=this.getStack();h&&h.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(D4),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const h=this.getLead();let{targetWithTransforms:m,target:p,layout:g,latestValues:x}=h;if(!(!m||!p||!g)){if(this!==h&&this.layout&&g&&Hy(this.options.animationType,this.layout.layoutBox,g.layoutBox)){p=this.target||Wt();const w=Ss(this.layout.layoutBox.x);p.x.min=h.target.x.min,p.x.max=p.x.min+w;const N=Ss(this.layout.layoutBox.y);p.y.min=h.target.y.min,p.y.max=p.y.min+N}ua(m,p),nr(m,x),fl(this.projectionDeltaWithTransform,this.layoutCorrected,m,x)}}registerSharedNode(h,m){this.sharedNodes.has(h)||this.sharedNodes.set(h,new O4),this.sharedNodes.get(h).add(m);const g=m.options.initialPromotionConfig;m.promote({transition:g?g.transition:void 0,preserveFollowOpacity:g&&g.shouldPreserveFollowOpacity?g.shouldPreserveFollowOpacity(m):void 0})}isLead(){const h=this.getStack();return h?h.lead===this:!0}getLead(){var m;const{layoutId:h}=this.options;return h?((m=this.getStack())==null?void 0:m.lead)||this:this}getPrevLead(){var m;const{layoutId:h}=this.options;return h?(m=this.getStack())==null?void 0:m.prevLead:void 0}getStack(){const{layoutId:h}=this.options;if(h)return this.root.sharedNodes.get(h)}promote({needsReset:h,transition:m,preserveFollowOpacity:p}={}){const g=this.getStack();g&&g.promote(this,p),h&&(this.projectionDelta=void 0,this.needsReset=!0),m&&this.setOptions({transition:m})}relegate(){const h=this.getStack();return h?h.relegate(this):!1}resetSkewAndRotation(){const{visualElement:h}=this.options;if(!h)return;let m=!1;const{latestValues:p}=h;if((p.z||p.rotate||p.rotateX||p.rotateY||p.rotateZ||p.skewX||p.skewY)&&(m=!0),!m)return;const g={};p.z&&yh("z",h,g,this.animationValues);for(let x=0;x<bh.length;x++)yh(`rotate${bh[x]}`,h,g,this.animationValues),yh(`skew${bh[x]}`,h,g,this.animationValues);h.render();for(const x in g)h.setStaticValue(x,g[x]),this.animationValues&&(this.animationValues[x]=g[x]);h.scheduleRender()}applyProjectionStyles(h,m){if(!this.instance||this.isSVG)return;if(!this.isVisible){h.visibility="hidden";return}const p=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,h.visibility="",h.opacity="",h.pointerEvents=pc(m==null?void 0:m.pointerEvents)||"",h.transform=p?p(this.latestValues,""):"none";return}const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){this.options.layoutId&&(h.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,h.pointerEvents=pc(m==null?void 0:m.pointerEvents)||""),this.hasProjected&&!Zn(this.latestValues)&&(h.transform=p?p({},""):"none",this.hasProjected=!1);return}h.visibility="";const x=g.animationValues||g.latestValues;this.applyTransformsToTarget();let w=j4(this.projectionDeltaWithTransform,this.treeScale,x);p&&(w=p(x,w)),h.transform=w;const{x:N,y:_}=this.projectionDelta;h.transformOrigin=`${N.origin*100}% ${_.origin*100}% 0`,g.animationValues?h.opacity=g===this?x.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:x.opacityExit:h.opacity=g===this?x.opacity!==void 0?x.opacity:"":x.opacityExit!==void 0?x.opacityExit:0;for(const T in of){if(x[T]===void 0)continue;const{correct:U,applyTo:O,isCSSVariable:L}=of[T],D=w==="none"?x[T]:U(x[T],g);if(O){const M=O.length;for(let ie=0;ie<M;ie++)h[O[ie]]=D}else L?this.options.visualElement.renderState.vars[T]=D:h[T]=D}this.options.layoutId&&(h.pointerEvents=g===this?pc(m==null?void 0:m.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(h=>{var m;return(m=h.currentAnimation)==null?void 0:m.stop()}),this.root.nodes.forEach(Av),this.root.sharedNodes.clear()}}}function M4(s){s.updateLayout()}function U4(s){var i;const t=((i=s.resumeFrom)==null?void 0:i.snapshot)||s.snapshot;if(s.isLead()&&s.layout&&t&&s.hasListeners("didUpdate")){const{layoutBox:l,measuredBox:c}=s.layout,{animationType:u}=s.options,h=t.source!==s.layout.source;u==="size"?ja(w=>{const N=h?t.measuredBox[w]:t.layoutBox[w],_=Ss(N);N.min=l[w].min,N.max=N.min+_}):Hy(u,t.layoutBox,l)&&ja(w=>{const N=h?t.measuredBox[w]:t.layoutBox[w],_=Ss(l[w]);N.max=N.min+_,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[w].max=s.relativeTarget[w].min+_)});const m=sr();fl(m,l,t.layoutBox);const p=sr();h?fl(p,s.applyTransform(c,!0),t.measuredBox):fl(p,l,t.layoutBox);const g=!By(m);let x=!1;if(!s.resumeFrom){const w=s.getClosestProjectingParent();if(w&&!w.resumeFrom){const{snapshot:N,layout:_}=w;if(N&&_){const T=Wt();Cc(T,t.layoutBox,N.layoutBox);const U=Wt();Cc(U,l,_.layoutBox),zy(T,U)||(x=!0),w.options.layoutRoot&&(s.relativeTarget=U,s.relativeTargetOrigin=T,s.relativeParent=w)}}}s.notifyListeners("didUpdate",{layout:l,snapshot:t,delta:p,layoutDelta:m,hasLayoutChanged:g,hasRelativeLayoutChanged:x})}else if(s.isLead()){const{onExitComplete:l}=s.options;l&&l()}s.options.transition=void 0}function L4(s){s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function P4(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function B4(s){s.clearSnapshot()}function Av(s){s.clearMeasurements()}function Cv(s){s.isLayoutDirty=!1}function z4(s){const{visualElement:t}=s.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),s.resetTransform()}function Ev(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function V4(s){s.resolveTargetDelta()}function q4(s){s.calcProjection()}function I4(s){s.resetSkewAndRotation()}function $4(s){s.removeLeadSnapshot()}function Ov(s,t,i){s.translate=Ot(t.translate,0,i),s.scale=Ot(t.scale,1,i),s.origin=t.origin,s.originPoint=t.originPoint}function Dv(s,t,i,l){s.min=Ot(t.min,i.min,l),s.max=Ot(t.max,i.max,l)}function H4(s,t,i,l){Dv(s.x,t.x,i.x,l),Dv(s.y,t.y,i.y,l)}function K4(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const G4={duration:.45,ease:[.4,0,.1,1]},Rv=s=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(s),Mv=Rv("applewebkit/")&&!Rv("chrome/")?Math.round:aa;function Uv(s){s.min=Mv(s.min),s.max=Mv(s.max)}function F4(s){Uv(s.x),Uv(s.y)}function Hy(s,t,i){return s==="position"||s==="preserve-aspect"&&!g4(Nv(t),Nv(i),.2)}function Y4(s){var t;return s!==s.root&&((t=s.scroll)==null?void 0:t.wasRoot)}const Q4=$y({attachResizeListener:(s,t)=>Cl(s,"resize",t),measureScroll:()=>{var s,t;return{x:document.documentElement.scrollLeft||((s=document.body)==null?void 0:s.scrollLeft)||0,y:document.documentElement.scrollTop||((t=document.body)==null?void 0:t.scrollTop)||0}},checkIsScrollRoot:()=>!0}),wh={current:void 0},Ky=$y({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!wh.current){const s=new Q4({});s.mount(window),s.setOptions({layoutScroll:!0}),wh.current=s}return wh.current},resetTransform:(s,t)=>{s.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),Gy=q.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"});function X4(s=!0){const t=q.useContext(xf);if(t===null)return[!0,null];const{isPresent:i,onExitComplete:l,register:c}=t,u=q.useId();q.useEffect(()=>{if(s)return c(u)},[s]);const h=q.useCallback(()=>s&&l&&l(u),[u,l,s]);return!i&&l?[!1,h]:[!0]}const Fy=q.createContext({strict:!1}),Lv={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let Pv=!1;function J4(){if(Pv)return;const s={};for(const t in Lv)s[t]={isEnabled:i=>Lv[t].some(l=>!!i[l])};jy(s),Pv=!0}function Yy(){return J4(),IA()}function Z4(s){const t=Yy();for(const i in s)t[i]={...t[i],...s[i]};jy(t)}const W4=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function Ec(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||W4.has(s)}let Qy=s=>!Ec(s);function eC(s){typeof s=="function"&&(Qy=t=>t.startsWith("on")?!Ec(t):s(t))}try{eC(require("@emotion/is-prop-valid").default)}catch{}function tC(s,t,i){const l={};for(const c in s)c==="values"&&typeof s.values=="object"||(Qy(c)||i===!0&&Ec(c)||!t&&!Ec(c)||s.draggable&&c.startsWith("onDrag"))&&(l[c]=s[c]);return l}const zc=q.createContext({});function sC(s,t){if(Bc(s)){const{initial:i,animate:l}=s;return{initial:i===!1||Al(i)?i:void 0,animate:Al(l)?l:void 0}}return s.inherit!==!1?t:{}}function aC(s){const{initial:t,animate:i}=sC(s,q.useContext(zc));return q.useMemo(()=>({initial:t,animate:i}),[Bv(t),Bv(i)])}function Bv(s){return Array.isArray(s)?s.join(" "):s}const Gf=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Xy(s,t,i){for(const l in t)!vs(t[l])&&!Cy(l,i)&&(s[l]=t[l])}function nC({transformTemplate:s},t){return q.useMemo(()=>{const i=Gf();return Hf(i,t,s),Object.assign({},i.vars,i.style)},[t])}function iC(s,t){const i=s.style||{},l={};return Xy(l,i,s),Object.assign(l,nC(s,t)),l}function rC(s,t){const i={},l=iC(s,t);return s.drag&&s.dragListener!==!1&&(i.draggable=!1,l.userSelect=l.WebkitUserSelect=l.WebkitTouchCallout="none",l.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(i.tabIndex=0),i.style=l,i}const Jy=()=>({...Gf(),attrs:{}});function lC(s,t,i,l){const c=q.useMemo(()=>{const u=Jy();return Ey(u,t,Dy(l),s.transformTemplate,s.style),{...u.attrs,style:{...u.style}}},[t]);if(s.style){const u={};Xy(u,s.style,s),c.style={...u,...c.style}}return c}const oC=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ff(s){return typeof s!="string"||s.includes("-")?!1:!!(oC.indexOf(s)>-1||/[A-Z]/u.test(s))}function cC(s,t,i,{latestValues:l},c,u=!1,h){const p=(h??Ff(s)?lC:rC)(t,l,c,s),g=tC(t,typeof s=="string",u),x=s!==q.Fragment?{...g,...p,ref:i}:{},{children:w}=t,N=q.useMemo(()=>vs(w)?w.get():w,[w]);return q.createElement(s,{...x,children:N})}function uC({scrapeMotionValuesFromProps:s,createRenderState:t},i,l,c){return{latestValues:dC(i,l,c,s),renderState:t()}}function dC(s,t,i,l){const c={},u=l(s,{});for(const N in u)c[N]=pc(u[N]);let{initial:h,animate:m}=s;const p=Bc(s),g=wy(s);t&&g&&!p&&s.inherit!==!1&&(h===void 0&&(h=t.initial),m===void 0&&(m=t.animate));let x=i?i.initial===!1:!1;x=x||h===!1;const w=x?m:h;if(w&&typeof w!="boolean"&&!Pc(w)){const N=Array.isArray(w)?w:[w];for(let _=0;_<N.length;_++){const T=Lf(s,N[_]);if(T){const{transitionEnd:U,transition:O,...L}=T;for(const D in L){let M=L[D];if(Array.isArray(M)){const ie=x?M.length-1:0;M=M[ie]}M!==null&&(c[D]=M)}for(const D in U)c[D]=U[D]}}}return c}const Zy=s=>(t,i)=>{const l=q.useContext(zc),c=q.useContext(xf),u=()=>uC(s,t,l,c);return i?u():fT(u)},hC=Zy({scrapeMotionValuesFromProps:Kf,createRenderState:Gf}),fC=Zy({scrapeMotionValuesFromProps:Ry,createRenderState:Jy}),mC=Symbol.for("motionComponentSymbol");function pC(s,t,i){const l=q.useRef(i);q.useInsertionEffect(()=>{l.current=i});const c=q.useRef(null);return q.useCallback(u=>{var m;u&&((m=s.onMount)==null||m.call(s,u)),t&&(u?t.mount(u):t.unmount());const h=l.current;if(typeof h=="function")if(u){const p=h(u);typeof p=="function"&&(c.current=p)}else c.current?(c.current(),c.current=null):h(u);else h&&(h.current=u)},[t])}const Wy=q.createContext({});function Zi(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function gC(s,t,i,l,c,u){var M,ie;const{visualElement:h}=q.useContext(zc),m=q.useContext(Fy),p=q.useContext(xf),g=q.useContext(Gy),x=g.reducedMotion,w=g.skipAnimations,N=q.useRef(null),_=q.useRef(!1);l=l||m.renderer,!N.current&&l&&(N.current=l(s,{visualState:t,parent:h,props:i,presenceContext:p,blockInitialAnimation:p?p.initial===!1:!1,reducedMotionConfig:x,skipAnimations:w,isSVG:u}),_.current&&N.current&&(N.current.manuallyAnimateOnMount=!0));const T=N.current,U=q.useContext(Wy);T&&!T.projection&&c&&(T.type==="html"||T.type==="svg")&&xC(N.current,i,c,U);const O=q.useRef(!1);q.useInsertionEffect(()=>{T&&O.current&&T.update(i,p)});const L=i[ly],D=q.useRef(!!L&&!((M=window.MotionHandoffIsComplete)!=null&&M.call(window,L))&&((ie=window.MotionHasOptimisedAnimation)==null?void 0:ie.call(window,L)));return mT(()=>{_.current=!0,T&&(O.current=!0,window.MotionIsMounted=!0,T.updateFeatures(),T.scheduleRenderMicrotask(),D.current&&T.animationState&&T.animationState.animateChanges())}),q.useEffect(()=>{T&&(!D.current&&T.animationState&&T.animationState.animateChanges(),D.current&&(queueMicrotask(()=>{var ue;(ue=window.MotionHandoffMarkAsComplete)==null||ue.call(window,L)}),D.current=!1),T.enteringChildren=void 0)}),T}function xC(s,t,i,l){const{layoutId:c,layout:u,drag:h,dragConstraints:m,layoutScroll:p,layoutRoot:g,layoutCrossfade:x}=t;s.projection=new i(s.latestValues,t["data-framer-portal-id"]?void 0:ew(s.parent)),s.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!h||m&&Zi(m),visualElement:s,animationType:typeof u=="string"?u:"both",initialPromotionConfig:l,crossfade:x,layoutScroll:p,layoutRoot:g})}function ew(s){if(s)return s.options.allowProjection!==!1?s.projection:ew(s.parent)}function jh(s,{forwardMotionProps:t=!1,type:i}={},l,c){l&&Z4(l);const u=i?i==="svg":Ff(s),h=u?fC:hC;function m(g,x){let w;const N={...q.useContext(Gy),...g,layoutId:vC(g)},{isStatic:_}=N,T=aC(g),U=h(g,_);if(!_&&Nb){bC();const O=yC(N);w=O.MeasureLayout,T.visualElement=gC(s,U,N,c,O.ProjectionNode,u)}return n.jsxs(zc.Provider,{value:T,children:[w&&T.visualElement?n.jsx(w,{visualElement:T.visualElement,...N}):null,cC(s,g,pC(U,T.visualElement,x),U,_,t,u)]})}m.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const p=q.forwardRef(m);return p[mC]=s,p}function vC({layoutId:s}){const t=q.useContext(jb).id;return t&&s!==void 0?t+"-"+s:s}function bC(s,t){q.useContext(Fy).strict}function yC(s){const t=Yy(),{drag:i,layout:l}=t;if(!i&&!l)return{};const c={...i,...l};return{MeasureLayout:i!=null&&i.isEnabled(s)||l!=null&&l.isEnabled(s)?c.MeasureLayout:void 0,ProjectionNode:c.ProjectionNode}}function wC(s,t){if(typeof Proxy>"u")return jh;const i=new Map,l=(u,h)=>jh(u,h,s,t),c=(u,h)=>l(u,h);return new Proxy(c,{get:(u,h)=>h==="create"?l:(i.has(h)||i.set(h,jh(h,void 0,s,t)),i.get(h))})}const jC=(s,t)=>t.isSVG??Ff(s)?new i4(t):new WA(t,{allowProjection:s!==q.Fragment});class NC extends On{constructor(t){super(t),t.animationState||(t.animationState=u4(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Pc(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:i}=this.node.prevProps||{};t!==i&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let SC=0;class _C extends On{constructor(){super(...arguments),this.id=SC++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:i}=this.node.presenceContext,{isPresent:l}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===l)return;const c=this.node.animationState.setActive("exit",!t);i&&!t&&c.then(()=>{i(this.id)})}mount(){const{register:t,onExitComplete:i}=this.node.presenceContext||{};i&&i(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const TC={animation:{Feature:NC},exit:{Feature:_C}};function Ml(s){return{point:{x:s.pageX,y:s.pageY}}}const kC=s=>t=>Vf(t)&&s(t,Ml(t));function ml(s,t,i,l){return Cl(s,t,kC(i),l)}const tw=({current:s})=>s?s.ownerDocument.defaultView:null,zv=(s,t)=>Math.abs(s-t);function AC(s,t){const i=zv(s.x,t.x),l=zv(s.y,t.y);return Math.sqrt(i**2+l**2)}const Vv=new Set(["auto","scroll"]);class sw{constructor(t,i,{transformPagePoint:l,contextWindow:c=window,dragSnapToOrigin:u=!1,distanceThreshold:h=3,element:m}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=_=>{this.handleScroll(_.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Sh(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,U=AC(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!T&&!U)return;const{point:O}=_,{timestamp:L}=hs;this.history.push({...O,timestamp:L});const{onStart:D,onMove:M}=this.handlers;T||(D&&D(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),M&&M(this.lastMoveEvent,_)},this.handlePointerMove=(_,T)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=Nh(T,this.transformPagePoint),St.update(this.updatePoint,!0)},this.handlePointerUp=(_,T)=>{this.end();const{onEnd:U,onSessionEnd:O,resumeAnimation:L}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&L&&L(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const D=Sh(_.type==="pointercancel"?this.lastMoveEventInfo:Nh(T,this.transformPagePoint),this.history);this.startEvent&&U&&U(_,D),O&&O(_,D)},!Vf(t))return;this.dragSnapToOrigin=u,this.handlers=i,this.transformPagePoint=l,this.distanceThreshold=h,this.contextWindow=c||window;const p=Ml(t),g=Nh(p,this.transformPagePoint),{point:x}=g,{timestamp:w}=hs;this.history=[{...x,timestamp:w}];const{onSessionStart:N}=i;N&&N(t,Sh(g,this.history)),this.removeListeners=Ol(ml(this.contextWindow,"pointermove",this.handlePointerMove),ml(this.contextWindow,"pointerup",this.handlePointerUp),ml(this.contextWindow,"pointercancel",this.handlePointerUp)),m&&this.startScrollTracking(m)}startScrollTracking(t){let i=t.parentElement;for(;i;){const l=getComputedStyle(i);(Vv.has(l.overflowX)||Vv.has(l.overflowY))&&this.scrollPositions.set(i,{x:i.scrollLeft,y:i.scrollTop}),i=i.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(t){const i=this.scrollPositions.get(t);if(!i)return;const l=t===window,c=l?{x:window.scrollX,y:window.scrollY}:{x:t.scrollLeft,y:t.scrollTop},u={x:c.x-i.x,y:c.y-i.y};u.x===0&&u.y===0||(l?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=u.x,this.lastMoveEventInfo.point.y+=u.y):this.history.length>0&&(this.history[0].x-=u.x,this.history[0].y-=u.y),this.scrollPositions.set(t,c),St.update(this.updatePoint,!0))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Cn(this.updatePoint)}}function Nh(s,t){return t?{point:t(s.point)}:s}function qv(s,t){return{x:s.x-t.x,y:s.y-t.y}}function Sh({point:s},t){return{point:s,delta:qv(s,aw(t)),offset:qv(s,CC(t)),velocity:EC(t,.1)}}function CC(s){return s[0]}function aw(s){return s[s.length-1]}function EC(s,t){if(s.length<2)return{x:0,y:0};let i=s.length-1,l=null;const c=aw(s);for(;i>=0&&(l=s[i],!(c.timestamp-l.timestamp>Sa(t)));)i--;if(!l)return{x:0,y:0};l===s[0]&&s.length>2&&c.timestamp-l.timestamp>Sa(t)*2&&(l=s[1]);const u=sa(c.timestamp-l.timestamp);if(u===0)return{x:0,y:0};const h={x:(c.x-l.x)/u,y:(c.y-l.y)/u};return h.x===1/0&&(h.x=0),h.y===1/0&&(h.y=0),h}function OC(s,{min:t,max:i},l){return t!==void 0&&s<t?s=l?Ot(t,s,l.min):Math.max(s,t):i!==void 0&&s>i&&(s=l?Ot(i,s,l.max):Math.min(s,i)),s}function Iv(s,t,i){return{min:t!==void 0?s.min+t:void 0,max:i!==void 0?s.max+i-(s.max-s.min):void 0}}function DC(s,{top:t,left:i,bottom:l,right:c}){return{x:Iv(s.x,i,c),y:Iv(s.y,t,l)}}function $v(s,t){let i=t.min-s.min,l=t.max-s.max;return t.max-t.min<s.max-s.min&&([i,l]=[l,i]),{min:i,max:l}}function RC(s,t){return{x:$v(s.x,t.x),y:$v(s.y,t.y)}}function MC(s,t){let i=.5;const l=Ss(s),c=Ss(t);return c>l?i=_l(t.min,t.max-l,s.min):l>c&&(i=_l(s.min,s.max-c,t.min)),Ta(0,1,i)}function UC(s,t){const i={};return t.min!==void 0&&(i.min=t.min-s.min),t.max!==void 0&&(i.max=t.max-s.min),i}const cf=.35;function LC(s=cf){return s===!1?s=0:s===!0&&(s=cf),{x:Hv(s,"left","right"),y:Hv(s,"top","bottom")}}function Hv(s,t,i){return{min:Kv(s,t),max:Kv(s,i)}}function Kv(s,t){return typeof s=="number"?s:s[t]||0}const PC=new WeakMap;class BC{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Wt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:i=!1,distanceThreshold:l}={}){const{presenceContext:c}=this.visualElement;if(c&&c.isPresent===!1)return;const u=w=>{i&&this.snapToCursor(Ml(w).point),this.stopAnimation()},h=(w,N)=>{const{drag:_,dragPropagation:T,onDragStart:U}=this.getProps();if(_&&!T&&(this.openDragLock&&this.openDragLock(),this.openDragLock=vA(_),!this.openDragLock))return;this.latestPointerEvent=w,this.latestPanInfo=N,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ja(L=>{let D=this.getAxisMotionValue(L).get()||0;if(_a.test(D)){const{projection:M}=this.visualElement;if(M&&M.layout){const ie=M.layout.layoutBox[L];ie&&(D=Ss(ie)*(parseFloat(D)/100))}}this.originPoint[L]=D}),U&&St.update(()=>U(w,N),!1,!0),tf(this.visualElement,"transform");const{animationState:O}=this.visualElement;O&&O.setActive("whileDrag",!0)},m=(w,N)=>{this.latestPointerEvent=w,this.latestPanInfo=N;const{dragPropagation:_,dragDirectionLock:T,onDirectionLock:U,onDrag:O}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:L}=N;if(T&&this.currentDirection===null){this.currentDirection=VC(L),this.currentDirection!==null&&U&&U(this.currentDirection);return}this.updateAxis("x",N.point,L),this.updateAxis("y",N.point,L),this.visualElement.render(),O&&St.update(()=>O(w,N),!1,!0)},p=(w,N)=>{this.latestPointerEvent=w,this.latestPanInfo=N,this.stop(w,N),this.latestPointerEvent=null,this.latestPanInfo=null},g=()=>{const{dragSnapToOrigin:w}=this.getProps();(w||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:x}=this.getProps();this.panSession=new sw(t,{onSessionStart:u,onStart:h,onMove:m,onSessionEnd:p,resumeAnimation:g},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:x,distanceThreshold:l,contextWindow:tw(this.visualElement),element:this.visualElement.current})}stop(t,i){const l=t||this.latestPointerEvent,c=i||this.latestPanInfo,u=this.isDragging;if(this.cancel(),!u||!c||!l)return;const{velocity:h}=c;this.startAnimation(h);const{onDragEnd:m}=this.getProps();m&&St.postRender(()=>m(l,c))}cancel(){this.isDragging=!1;const{projection:t,animationState:i}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:l}=this.getProps();!l&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),i&&i.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(t,i,l){const{drag:c}=this.getProps();if(!l||!oc(t,c,this.currentDirection))return;const u=this.getAxisMotionValue(t);let h=this.originPoint[t]+l[t];this.constraints&&this.constraints[t]&&(h=OC(h,this.constraints[t],this.elastic[t])),u.set(h)}resolveConstraints(){var u;const{dragConstraints:t,dragElastic:i}=this.getProps(),l=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(u=this.visualElement.projection)==null?void 0:u.layout,c=this.constraints;t&&Zi(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&l?this.constraints=DC(l.layoutBox,t):this.constraints=!1,this.elastic=LC(i),c!==this.constraints&&!Zi(t)&&l&&this.constraints&&!this.hasMutatedConstraints&&ja(h=>{this.constraints!==!1&&this.getAxisMotionValue(h)&&(this.constraints[h]=UC(l.layoutBox[h],this.constraints[h]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:i}=this.getProps();if(!t||!Zi(t))return!1;const l=t.current,{projection:c}=this.visualElement;if(!c||!c.layout)return!1;const u=FA(l,c.root,this.visualElement.getTransformPagePoint());let h=RC(c.layout.layoutBox,u);if(i){const m=i(HA(h));this.hasMutatedConstraints=!!m,m&&(h=Sy(m))}return h}startAnimation(t){const{drag:i,dragMomentum:l,dragElastic:c,dragTransition:u,dragSnapToOrigin:h,onDragTransitionEnd:m}=this.getProps(),p=this.constraints||{},g=ja(x=>{if(!oc(x,i,this.currentDirection))return;let w=p&&p[x]||{};h&&(w={min:0,max:0});const N=c?200:1e6,_=c?40:1e7,T={type:"inertia",velocity:l?t[x]:0,bounceStiffness:N,bounceDamping:_,timeConstant:750,restDelta:1,restSpeed:10,...u,...w};return this.startAxisValueAnimation(x,T)});return Promise.all(g).then(m)}startAxisValueAnimation(t,i){const l=this.getAxisMotionValue(t);return tf(this.visualElement,t),l.start(Uf(t,l,0,i,this.visualElement,!1))}stopAnimation(){ja(t=>this.getAxisMotionValue(t).stop())}getAxisMotionValue(t){const i=`_drag${t.toUpperCase()}`,l=this.visualElement.getProps(),c=l[i];return c||this.visualElement.getValue(t,(l.initial?l.initial[t]:void 0)||0)}snapToCursor(t){ja(i=>{const{drag:l}=this.getProps();if(!oc(i,l,this.currentDirection))return;const{projection:c}=this.visualElement,u=this.getAxisMotionValue(i);if(c&&c.layout){const{min:h,max:m}=c.layout.layoutBox[i],p=u.get()||0;u.set(t[i]-Ot(h,m,.5)+p)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:i}=this.getProps(),{projection:l}=this.visualElement;if(!Zi(i)||!l||!this.constraints)return;this.stopAnimation();const c={x:0,y:0};ja(h=>{const m=this.getAxisMotionValue(h);if(m&&this.constraints!==!1){const p=m.get();c[h]=MC({min:p,max:p},this.constraints[h])}});const{transformTemplate:u}=this.visualElement.getProps();this.visualElement.current.style.transform=u?u({},""):"none",l.root&&l.root.updateScroll(),l.updateLayout(),this.constraints=!1,this.resolveConstraints(),ja(h=>{if(!oc(h,t,null))return;const m=this.getAxisMotionValue(h),{min:p,max:g}=this.constraints[h];m.set(Ot(p,g,c[h]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;PC.set(this.visualElement,this);const t=this.visualElement.current,i=ml(t,"pointerdown",g=>{const{drag:x,dragListener:w=!0}=this.getProps(),N=g.target,_=N!==t&&SA(N);x&&w&&!_&&this.start(g)});let l;const c=()=>{const{dragConstraints:g}=this.getProps();Zi(g)&&g.current&&(this.constraints=this.resolveRefConstraints(),l||(l=zC(t,g.current,()=>this.scalePositionWithinConstraints())))},{projection:u}=this.visualElement,h=u.addEventListener("measure",c);u&&!u.layout&&(u.root&&u.root.updateScroll(),u.updateLayout()),St.read(c);const m=Cl(window,"resize",()=>this.scalePositionWithinConstraints()),p=u.addEventListener("didUpdate",(({delta:g,hasLayoutChanged:x})=>{this.isDragging&&x&&(ja(w=>{const N=this.getAxisMotionValue(w);N&&(this.originPoint[w]+=g[w].translate,N.set(N.get()+g[w].translate))}),this.visualElement.render())}));return()=>{m(),i(),h(),p&&p(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:i=!1,dragDirectionLock:l=!1,dragPropagation:c=!1,dragConstraints:u=!1,dragElastic:h=cf,dragMomentum:m=!0}=t;return{...t,drag:i,dragDirectionLock:l,dragPropagation:c,dragConstraints:u,dragElastic:h,dragMomentum:m}}}function Gv(s){let t=!0;return()=>{if(t){t=!1;return}s()}}function zC(s,t,i){const l=tv(s,Gv(i)),c=tv(t,Gv(i));return()=>{l(),c()}}function oc(s,t,i){return(t===!0||t===s)&&(i===null||i===s)}function VC(s,t=10){let i=null;return Math.abs(s.y)>t?i="y":Math.abs(s.x)>t&&(i="x"),i}class qC extends On{constructor(t){super(t),this.removeGroupControls=aa,this.removeListeners=aa,this.controls=new BC(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||aa}update(){const{dragControls:t}=this.node.getProps(),{dragControls:i}=this.node.prevProps||{};t!==i&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const _h=s=>(t,i)=>{s&&St.update(()=>s(t,i),!1,!0)};class IC extends On{constructor(){super(...arguments),this.removePointerDownListener=aa}onPointerDown(t){this.session=new sw(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:tw(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:i,onPan:l,onPanEnd:c}=this.node.getProps();return{onSessionStart:_h(t),onStart:_h(i),onMove:_h(l),onEnd:(u,h)=>{delete this.session,c&&St.postRender(()=>c(u,h))}}}mount(){this.removePointerDownListener=ml(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let Th=!1;class $C extends q.Component{componentDidMount(){const{visualElement:t,layoutGroup:i,switchLayoutGroup:l,layoutId:c}=this.props,{projection:u}=t;u&&(i.group&&i.group.add(u),l&&l.register&&c&&l.register(u),Th&&u.root.didUpdate(),u.addEventListener("animationComplete",()=>{this.safeToRemove()}),u.setOptions({...u.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),gc.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:i,visualElement:l,drag:c,isPresent:u}=this.props,{projection:h}=l;return h&&(h.isPresent=u,t.layoutDependency!==i&&h.setOptions({...h.options,layoutDependency:i}),Th=!0,c||t.layoutDependency!==i||i===void 0||t.isPresent!==u?h.willUpdate():this.safeToRemove(),t.isPresent!==u&&(u?h.promote():h.relegate()||St.postRender(()=>{const m=h.getStack();(!m||!m.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),zf.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:i,switchLayoutGroup:l}=this.props,{projection:c}=t;Th=!0,c&&(c.scheduleCheckAfterUnmount(),i&&i.group&&i.group.remove(c),l&&l.deregister&&l.deregister(c))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function nw(s){const[t,i]=X4(),l=q.useContext(jb);return n.jsx($C,{...s,layoutGroup:l,switchLayoutGroup:q.useContext(Wy),isPresent:t,safeToRemove:i})}const HC={pan:{Feature:IC},drag:{Feature:qC,ProjectionNode:Ky,MeasureLayout:nw}};function Fv(s,t,i){const{props:l}=s;s.animationState&&l.whileHover&&s.animationState.setActive("whileHover",i==="Start");const c="onHover"+i,u=l[c];u&&St.postRender(()=>u(t,Ml(t)))}class KC extends On{mount(){const{current:t}=this.node;t&&(this.unmount=yA(t,(i,l)=>(Fv(this.node,l,"Start"),c=>Fv(this.node,c,"End"))))}unmount(){}}class GC extends On{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ol(Cl(this.node.current,"focus",()=>this.onFocus()),Cl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Yv(s,t,i){const{props:l}=s;if(s.current instanceof HTMLButtonElement&&s.current.disabled)return;s.animationState&&l.whileTap&&s.animationState.setActive("whileTap",i==="Start");const c="onTap"+(i==="End"?"":i),u=l[c];u&&St.postRender(()=>u(t,Ml(t)))}class FC extends On{mount(){const{current:t}=this.node;if(!t)return;const{globalTapTarget:i,propagate:l}=this.node.props;this.unmount=TA(t,(c,u)=>(Yv(this.node,u,"Start"),(h,{success:m})=>Yv(this.node,h,m?"End":"Cancel")),{useGlobalTarget:i,stopPropagation:(l==null?void 0:l.tap)===!1})}unmount(){}}const uf=new WeakMap,kh=new WeakMap,YC=s=>{const t=uf.get(s.target);t&&t(s)},QC=s=>{s.forEach(YC)};function XC({root:s,...t}){const i=s||document;kh.has(i)||kh.set(i,{});const l=kh.get(i),c=JSON.stringify(t);return l[c]||(l[c]=new IntersectionObserver(QC,{root:s,...t})),l[c]}function JC(s,t,i){const l=XC(t);return uf.set(s,i),l.observe(s),()=>{uf.delete(s),l.unobserve(s)}}const ZC={some:0,all:1};class WC extends On{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:i,margin:l,amount:c="some",once:u}=t,h={root:i?i.current:void 0,rootMargin:l,threshold:typeof c=="number"?c:ZC[c]},m=p=>{const{isIntersecting:g}=p;if(this.isInView===g||(this.isInView=g,u&&!g&&this.hasEnteredView))return;g&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",g);const{onViewportEnter:x,onViewportLeave:w}=this.node.getProps(),N=g?x:w;N&&N(p)};return JC(this.node.current,h,m)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:i}=this.node;["amount","margin","root"].some(eE(t,i))&&this.startObserver()}unmount(){}}function eE({viewport:s={}},{viewport:t={}}={}){return i=>s[i]!==t[i]}const tE={inView:{Feature:WC},tap:{Feature:FC},focus:{Feature:GC},hover:{Feature:KC}},sE={layout:{ProjectionNode:Ky,MeasureLayout:nw}},aE={...TC,...tE,...HC,...sE},Ah=wC(aE,jC),iw=({onSelect:s,onBack:t})=>{const i=[{id:"farmer",title:"Farmer",description:"I grow crops and want fair prices.",icon:yb,color:"nature",badge:"Most used by farmers",theme:"border-nature-500 bg-nature-50/50",iconBg:"bg-nature-100",iconColor:"text-nature-600",btnColor:"text-nature-600"},{id:"buyer",title:"Buyer",description:"I want transparent and reliable supply.",icon:ta,color:"blue",theme:"border-blue-500 bg-blue-50/50",iconBg:"bg-blue-100",iconColor:"text-blue-600",btnColor:"text-blue-600"},{id:"transporter",title:"Transporter",description:"I want verified delivery jobs.",icon:gs,color:"orange",theme:"border-orange-500 bg-orange-50/50",iconBg:"bg-orange-100",iconColor:"text-orange-600",btnColor:"text-orange-600"}];return n.jsxs("div",{className:"min-h-screen bg-slate-50 py-12 px-6 flex flex-col items-center justify-center",children:[n.jsxs(Ah.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-4xl w-full text-center mb-12",children:[n.jsxs("div",{className:"flex items-center justify-center gap-2 mb-6 cursor-pointer",onClick:t,children:[n.jsx("div",{className:"w-10 h-10 bg-nature-600 rounded-xl flex items-center justify-center shadow-lg",children:n.jsx(Uc,{className:"w-6 h-6 text-white"})}),n.jsx("span",{className:"font-bold text-xl text-slate-900 tracking-tight",children:"KisanSetu"})]}),n.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-4",children:"How would you like to use KisanSetu?"}),n.jsx("p",{className:"text-slate-500",children:"Choose one option. This cannot be changed later."})]}),n.jsx("div",{className:"grid md:grid-cols-3 gap-8 w-full max-w-5xl",children:i.map(l=>n.jsx(Ah.div,{whileHover:{y:-8},className:"h-full",children:n.jsxs(oe,{className:`h-full cursor-pointer border-t-4 p-8 flex flex-col transition-all duration-300 hover:shadow-2xl hover:shadow-${l.color}-500/10 ${l.theme}`,onClick:()=>s(l.id),children:[l.badge&&n.jsx("div",{className:"absolute top-4 right-4 bg-nature-600 text-white text-[10px] font-bold uppercase py-1 px-2 rounded-full",children:l.badge}),n.jsx("div",{className:`h-14 w-14 ${l.iconBg} rounded-2xl flex items-center justify-center mb-6 shadow-sm`,children:n.jsx(l.icon,{className:`w-8 h-8 ${l.iconColor}`})}),n.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-3",children:l.title}),n.jsx("p",{className:"text-slate-600 mb-8 flex-1 leading-relaxed",children:l.description}),n.jsxs("div",{className:`flex items-center font-bold ${l.btnColor} group`,children:["Continue as ",l.title,n.jsx(ii,{className:"w-5 h-5 ml-2 transition-transform group-hover:translate-x-2"})]})]})},l.id))}),n.jsx(Ah.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},onClick:t,className:"mt-12 text-slate-400 hover:text-slate-700 font-medium transition-colors",children:"Go back to landing page"})]})};function nE({open:s,onClose:t,messages:i,offers:l,currentUserId:c,targetUserId:u,targetUserName:h,listingId:m,orderId:p,offerId:g,onSendMessage:x}){const[w,N]=q.useState(""),_=q.useRef(null),T=g?l.find(D=>D.id===g):null,O=[...i.filter(D=>(D.fromUserId===c&&D.toUserId===u||D.fromUserId===u&&D.toUserId===c)&&(m?D.listingId===m:!0)&&(p?D.orderId===p:!0)).map(D=>({type:"message",data:D,timestamp:new Date(D.timestamp).getTime()})),...((T==null?void 0:T.history)||[]).map((D,M)=>({type:"event",data:D,id:`hist_${M}`,timestamp:new Date(D.timestamp).getTime()}))].sort((D,M)=>D.timestamp-M.timestamp),L=()=>{var D;(D=_.current)==null||D.scrollIntoView({behavior:"smooth"})};return q.useEffect(()=>{s&&L()},[O.length,s]),s?n.jsxs("div",{className:"fixed inset-y-0 right-0 w-full md:w-96 bg-white shadow-2xl z-50 transform transition-transform duration-300 ease-in-out border-l border-slate-200 flex flex-col animate-in slide-in-from-right-full",children:[n.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold",children:h?h.charAt(0):"?"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-slate-900",children:h||"Chat"}),n.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1",children:[n.jsx(Xa,{className:"w-3 h-3"}),m?"Negotiation Chat":p?"Order Chat":"Chat"]})]})]}),n.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-200 rounded-full transition-colors",children:n.jsx(xs,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50/50",children:[O.length===0?n.jsx("div",{className:"text-center py-10 text-slate-400 text-sm",children:"No messages yet. Start the conversation!"}):O.map(D=>{if(D.type==="message"){const M=D.data,ie=M.fromUserId===c;return n.jsx("div",{className:`flex ${ie?"justify-end":"justify-start"}`,children:n.jsxs("div",{className:`max-w-[80%] p-3 rounded-2xl text-sm ${ie?"bg-blue-600 text-white rounded-tr-none shadow-md":"bg-white border border-slate-200 text-slate-800 rounded-tl-none shadow-sm"}`,children:[n.jsx("p",{children:M.text}),n.jsx("p",{className:`text-[10px] mt-1 ${ie?"text-blue-100":"text-slate-400"}`,children:new Date(M.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},M.id)}else{const M=D.data;return n.jsx("div",{className:"flex justify-center my-4",children:n.jsxs("div",{className:"bg-slate-100 border border-slate-200 rounded-full px-4 py-1.5 flex items-center gap-2 shadow-sm",children:[M.action==="offer"&&n.jsx(wc,{className:"w-3 h-3 text-blue-500"}),M.action==="counter"&&n.jsx(PS,{className:"w-3 h-3 text-amber-500"}),M.action==="accept"&&n.jsx(Ya,{className:"w-3 h-3 text-green-500"}),M.action==="reject"&&n.jsx(i_,{className:"w-3 h-3 text-red-500"}),n.jsxs("span",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-wider",children:[M.role==="buyer"?"Buyer":"Farmer"," ",M.action==="offer"?"Offered":M.action,"ed:"]}),n.jsxs("span",{className:"text-xs font-black text-slate-800",children:["",M.price,"/",M.quantity,"kg"]})]})},D.id)}}),n.jsx("div",{ref:_})]}),n.jsx("div",{className:"p-4 border-t border-slate-100 bg-white",children:n.jsxs("form",{onSubmit:D=>{D.preventDefault(),w.trim()&&(x(w,m,p),N(""))},className:"flex gap-2",children:[n.jsx("input",{className:"flex-1 bg-slate-50 border border-slate-200 rounded-xl px-4 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all",placeholder:"Type a message...",value:w,onChange:D=>N(D.target.value)}),n.jsx("button",{type:"submit",className:"w-10 h-10 bg-blue-600 hover:bg-blue-700 text-white rounded-xl flex items-center justify-center transition-colors shadow-lg shadow-blue-600/20",disabled:!w.trim(),children:n.jsx(bb,{className:"w-4 h-4"})})]})})]}):null}function iE({order:s,onClose:t}){if(!s)return null;const i=()=>{window.print()};return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-in fade-in",children:n.jsxs(oe,{className:"w-full max-w-2xl bg-white shadow-2xl relative overflow-hidden flex flex-col max-h-[90vh]",children:[n.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-100 bg-slate-50 print:hidden",children:[n.jsx("h3",{className:"font-bold text-slate-700",children:"Digital Invoice / Contract"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(se,{variant:"outline",onClick:i,children:[n.jsx(P_,{className:"w-4 h-4 mr-2"})," Print"]}),n.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-200 rounded-full transition-colors",children:n.jsx(xs,{className:"w-5 h-5 text-slate-500"})})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-8 bg-white",id:"invoice-content",children:[n.jsxs("div",{className:"flex justify-between items-start mb-8 border-b-2 border-slate-900 pb-6",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-lg flex items-center justify-center text-white font-bold text-lg",children:"K"}),n.jsx("span",{className:"text-2xl font-black text-slate-900 tracking-tight",children:"KisanSetu"})]}),n.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Fair Agri-Commerce Network"})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("h1",{className:"text-3xl font-black text-slate-200 uppercase tracking-widest mb-1",children:"Invoice"}),n.jsxs("p",{className:"font-bold text-slate-900",children:["#",s.id.toUpperCase()]}),n.jsx("p",{className:"text-sm text-slate-500",children:new Date(s.date).toLocaleDateString()})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-12 mb-10",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-3",children:"Seller (Farmer)"}),n.jsx("div",{className:"font-bold text-lg text-slate-900",children:s.farmerName}),n.jsx("div",{className:"text-sm text-slate-600 mt-1",children:s.farmerLocation}),n.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs font-bold text-green-600",children:[n.jsx(Ya,{className:"w-3 h-3"})," Verified Farmer"]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-3",children:"Buyer"}),n.jsx("div",{className:"font-bold text-lg text-slate-900",children:s.buyerName}),n.jsx("div",{className:"text-sm text-slate-600 mt-1",children:s.buyerLocation})]})]}),n.jsxs("table",{className:"w-full mb-8",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-slate-200",children:[n.jsx("th",{className:"text-left py-3 text-xs font-black text-slate-400 uppercase tracking-widest",children:"Description"}),n.jsx("th",{className:"text-right py-3 text-xs font-black text-slate-400 uppercase tracking-widest",children:"Qty"}),n.jsx("th",{className:"text-right py-3 text-xs font-black text-slate-400 uppercase tracking-widest",children:"Price"}),n.jsx("th",{className:"text-right py-3 text-xs font-black text-slate-400 uppercase tracking-widest",children:"Amount"})]})}),n.jsx("tbody",{children:n.jsxs("tr",{className:"border-b border-slate-100",children:[n.jsxs("td",{className:"py-4",children:[n.jsx("div",{className:"font-bold text-slate-900",children:s.cropName}),n.jsx("div",{className:"text-xs text-slate-500",children:"Grade A  Fresh Harvest"})]}),n.jsxs("td",{className:"text-right py-4 font-medium text-slate-700",children:[s.quantity," kg"]}),n.jsxs("td",{className:"text-right py-4 font-medium text-slate-700",children:["",(s.totalAmount/s.quantity).toFixed(2)]}),n.jsxs("td",{className:"text-right py-4 font-bold text-slate-900",children:["",s.totalAmount.toLocaleString()]})]})}),n.jsxs("tfoot",{children:[n.jsxs("tr",{children:[n.jsx("td",{colSpan:3,className:"pt-4 text-right text-sm font-medium text-slate-500",children:"Subtotal"}),n.jsxs("td",{className:"pt-4 text-right font-bold text-slate-900",children:["",s.totalAmount.toLocaleString()]})]}),n.jsxs("tr",{children:[n.jsx("td",{colSpan:3,className:"pt-2 text-right text-sm font-medium text-slate-500",children:"Platform Fee (0%)"}),n.jsx("td",{className:"pt-2 text-right font-bold text-slate-900",children:"0"})]}),n.jsxs("tr",{children:[n.jsx("td",{colSpan:3,className:"pt-4 text-right text-xl font-black text-slate-900",children:"Total"}),n.jsxs("td",{className:"pt-4 text-right text-xl font-black text-green-600",children:["",s.totalAmount.toLocaleString()]})]})]})]}),n.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl border border-slate-100",children:[n.jsx("h4",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-3",children:"Terms & Conditions"}),n.jsxs("ul",{className:"text-xs text-slate-500 space-y-2 list-disc pl-4",children:[n.jsx("li",{children:"Payment is held in escrow until delivery is confirmed by the buyer."}),n.jsx("li",{children:"Quality disputes must be raised within 24 hours of delivery."}),n.jsx("li",{children:"Transport arrangements are subject to availability."}),n.jsx("li",{children:"This is a computer-generated invoice and needs no signature."})]})]})]})]})})}const rE=[],lE=[],oE=[{q:"How do I list my crops for sale?",a:'Go to "My Crops" section and click "Add New Crop". Upload photos, enter quantity and price, and publish your listing.'},{q:"How are payments processed?",a:"Payments are processed through secure bank transfers. Once a buyer confirms receipt, payment is released to your linked bank account within 24-48 hours."},{q:"What if a buyer disputes the quality?",a:"You can use the Dispute Resolution center. Our team will review the evidence from both parties and provide a fair resolution."},{q:"How do I negotiate prices?",a:"When you receive an offer, you can counter-offer with your preferred price. Negotiations continue until both parties agree."},{q:"Is my data secure?",a:"Yes, we use bank-grade encryption to protect your personal and financial information. We never share your data with third parties."}],cE=({onGetStarted:s,onAdminLogin:t})=>n.jsxs("div",{className:"relative min-h-screen flex flex-col",children:[n.jsxs("header",{className:"px-6 py-4 flex justify-between items-center glass sticky top-0 z-50",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-10 h-10 bg-nature-600 rounded-xl flex items-center justify-center shadow-lg shadow-nature-600/20",children:n.jsx(Uc,{className:"w-6 h-6 text-white"})}),n.jsx("span",{className:"font-bold text-xl text-nature-900 tracking-tight",children:"KisanSetu"})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx("button",{onClick:()=>s(void 0,"login"),className:"text-sm font-medium text-slate-600 hover:text-nature-700",children:"Login"}),n.jsx(se,{onClick:()=>s(void 0,"register"),className:"py-2 px-4 text-sm h-10",children:"Get Started"})]})]}),n.jsxs("main",{className:"flex-1 container mx-auto px-6 py-12 flex flex-col items-center",children:[n.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-16 animate-in fade-in slide-in-from-bottom-8 duration-700",children:[n.jsx("div",{className:"inline-block px-4 py-1.5 rounded-full bg-nature-100 text-nature-700 text-sm font-semibold mb-6 border border-nature-200",children:" Revolutionizing Agri-Commerce"}),n.jsxs("h1",{className:"text-4xl md:text-6xl font-bold text-slate-900 mb-6 leading-tight",children:["Connecting Farmers, Buyers, and Transporters  ",n.jsx("span",{className:"text-nature-600",children:"Fairly."})]}),n.jsx("p",{className:"text-lg text-slate-600 mb-8 max-w-2xl mx-auto",children:"Sell directly from your farm. Buy with complete transparency. Deliver with verified jobs. No middlemen, just growth."}),n.jsx("div",{className:"mb-12"}),n.jsx(se,{onClick:()=>s(void 0,"register"),className:"text-lg px-8 py-4 shadow-xl shadow-nature-600/20",children:"Join the Network"})]}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-8 w-full max-w-5xl",children:[n.jsxs(oe,{className:"group hover:-translate-y-2 transition-transform duration-300 border-t-4 border-nature-500",onClick:()=>s("farmer","register"),children:[n.jsx("div",{className:"h-12 w-12 bg-nature-100 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:n.jsx(yb,{className:"w-6 h-6 text-nature-600"})}),n.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"Farmer"}),n.jsx("p",{className:"text-slate-600 mb-4 text-sm",children:'"I grow crops. I want fair prices without middlemen."'}),n.jsxs("div",{className:"flex items-center text-nature-600 font-medium text-sm group-hover:gap-2 transition-all",children:["Join as Farmer ",n.jsx(ii,{className:"w-4 h-4 ml-1"})]})]}),n.jsxs(oe,{className:"group hover:-translate-y-2 transition-transform duration-300 border-t-4 border-blue-500",onClick:()=>s("buyer","register"),children:[n.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:n.jsx(ta,{className:"w-6 h-6 text-blue-600"})}),n.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"Buyer"}),n.jsx("p",{className:"text-slate-600 mb-4 text-sm",children:'"I want reliable supply with transparent pricing."'}),n.jsxs("div",{className:"flex items-center text-blue-600 font-medium text-sm group-hover:gap-2 transition-all",children:["Join as Buyer ",n.jsx(ii,{className:"w-4 h-4 ml-1"})]})]}),n.jsxs(oe,{className:"group hover:-translate-y-2 transition-transform duration-300 border-t-4 border-orange-500",onClick:()=>s("transporter","register"),children:[n.jsx("div",{className:"h-12 w-12 bg-orange-100 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:n.jsx(gs,{className:"w-6 h-6 text-orange-600"})}),n.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"Transporter"}),n.jsx("p",{className:"text-slate-600 mb-4 text-sm",children:'"I want verified delivery jobs without chaos."'}),n.jsxs("div",{className:"flex items-center text-orange-600 font-medium text-sm group-hover:gap-2 transition-all",children:["Join as Transporter ",n.jsx(ii,{className:"w-4 h-4 ml-1"})]})]})]})]}),n.jsxs("footer",{className:"py-8 text-center text-slate-500 text-sm border-t border-slate-200 bg-white/50 backdrop-blur-sm",children:[n.jsx("p",{children:" 2024 KisanSetu. All rights reserved."}),n.jsxs("button",{onClick:t,className:"mt-4 text-xs font-medium hover:text-nature-700 flex items-center justify-center gap-1 mx-auto",children:[n.jsx(Qa,{className:"w-3 h-3"})," Admin Login"]})]})]}),uE=({onLogin:s,onBack:t})=>{const[i,l]=q.useState(""),[c,u]=q.useState(""),h=m=>{m.preventDefault(),i==="admin@kisansetu.com"&&c==="admin"?s():alert("Invalid Admin Credentials")};return n.jsxs("div",{className:"w-full max-w-md mx-auto animate-in fade-in zoom-in duration-300",children:[n.jsxs("button",{onClick:t,className:"mb-4 text-slate-500 hover:text-slate-800 flex items-center gap-2",children:[n.jsx(cr,{className:"w-4 h-4"})," Back"]}),n.jsxs("div",{className:"glass-card p-8 rounded-3xl border-t-4 border-nature-900 shadow-2xl",children:[n.jsx("div",{className:"flex justify-center mb-6",children:n.jsx("div",{className:"h-16 w-16 bg-slate-900 rounded-2xl flex items-center justify-center text-white shadow-lg",children:n.jsx(Qa,{className:"w-8 h-8"})})}),n.jsx("h2",{className:"text-2xl font-bold text-center text-slate-900 mb-2",children:"Admin Portal"}),n.jsx("p",{className:"text-center text-slate-500 mb-8 text-sm",children:"Restricted access for platform administrators."}),n.jsxs("form",{onSubmit:h,className:"space-y-4",children:[n.jsx(fe,{label:"Admin Email",type:"email",value:i,onChange:m=>l(m.target.value),icon:n.jsx(Lc,{className:"w-4 h-4"})}),n.jsx(fe,{label:"Password",type:"password",value:c,onChange:m=>u(m.target.value),icon:n.jsx(gf,{className:"w-4 h-4"})}),n.jsx(se,{className:"w-full bg-slate-900 hover:bg-slate-800 text-white shadow-slate-900/20 h-12",type:"submit",children:"Secure Login"})]})]})]})},dE=({initialRole:s,initialMode:t="login",onComplete:i,onBack:l})=>{const[c,u]=q.useState(s?"auth":"role-select"),[h,m]=q.useState(t),[p,g]=q.useState(!1),[x,w]=q.useState({role:s,email:"",phone:"",password:"",confirmPassword:"",userId:"",profile:{}}),N=O=>{const L=O==null?void 0:O.code,D=((O==null?void 0:O.message)||"").toString(),M=D.toLowerCase();return L==="user_already_exists"||M.includes("already registered")||M.includes("already been registered")||M.includes("already exists")?"An account already exists for this number. Please login instead.":L==="invalid_credentials"||M.includes("invalid login")?"Invalid number or password.":L==="password_not_set"?"Password login is not enabled for this user.":D||"Authentication failed"},_=async(O,L,D=2e4)=>{let M;try{return await Promise.race([L,new Promise((ie,ue)=>{M=setTimeout(()=>ue(new Error(`request_timeout:${O}`)),D)})])}finally{M&&clearTimeout(M)}},T=O=>{w(L=>({...L,role:O})),u("auth")},U=async()=>{var O,L,D,M,ie,ue,B,H,pe;if(!x.phone||!x.password){alert("Please enter mobile number and password");return}g(!0);try{if(h==="register"){if(x.password!==x.confirmPassword){alert("Passwords do not match");return}if(x.password.length<6){alert("Password must be at least 6 characters");return}const he=await _("register",lS(x.phone,x.password,{role:x.role||void 0,email:null}),25e3);if(he!=null&&he.error){const Le=N(he.error);alert(Le),Le.toLowerCase().includes("already exists")&&m("login");return}const be=(O=he==null?void 0:he.data)==null?void 0:O.id;if(!be)return;w(Le=>({...Le,userId:be})),u("profile")}else{const he=await _("login",oS(x.phone,x.password),25e3);if(he!=null&&he.error){alert(N(he.error));return}const be=(L=he==null?void 0:he.data)==null?void 0:L.id;if(!be)return;if(!!((D=he==null?void 0:he.data)!=null&&D.profile)&&!!((M=he==null?void 0:he.data)!=null&&M.role)){i(he.data);return}alert("Login successful. Please complete your profile to continue."),w(st=>{var gt,re;return{...st,userId:be,role:((gt=he==null?void 0:he.data)==null?void 0:gt.role)||st.role,email:((re=he==null?void 0:he.data)==null?void 0:re.email)||""}}),u("profile")}}catch(he){const be=((he==null?void 0:he.message)||"").toString();if(be.startsWith("request_timeout:")){const Le=be.split(":")[1]||"request",st=Ie(),gt=st?(await st.auth.getSession()).data.session:null,re=(ie=gt==null?void 0:gt.user)==null?void 0:ie.id;if(Le==="sign_in"&&re){const ce=await _("fetch_profile",cS(re),25e3);if(ce){i(ce);return}alert("Login succeeded, but your profile is not set up yet. Please complete your profile to continue."),w(Oe=>({...Oe,userId:re})),u("profile");return}const Me=await mb(8e3),Y=(ue=Me==null?void 0:Me.auth)!=null&&ue.ok?`auth=${Me.auth.status}`:`auth_error=${((B=Me==null?void 0:Me.auth)==null?void 0:B.error)||"unknown"}`,ae=(H=Me==null?void 0:Me.rest)!=null&&H.ok?`rest=${Me.rest.status}`:`rest_error=${((pe=Me==null?void 0:Me.rest)==null?void 0:pe.error)||"unknown"}`;alert(`Request timed out during ${Le}. Connectivity: ${Y}, ${ae}. If rest/auth are failing, disable AdBlock/VPN, try Incognito, and allow requests to *.supabase.co.`);return}alert(N(he))}finally{g(!1)}};return c==="role-select"?n.jsx(iw,{onSelect:T,onBack:l}):n.jsxs("div",{className:"w-full max-w-2xl mx-auto animate-in fade-in slide-in-from-bottom-8",children:[n.jsxs("button",{onClick:l,className:"mb-6 text-slate-500 hover:text-nature-700 flex items-center gap-2 font-medium transition-colors",children:[n.jsx(cr,{className:"w-4 h-4"})," Back to Home"]}),n.jsxs("div",{className:"bg-white rounded-3xl shadow-xl border border-slate-100 overflow-hidden flex flex-col md:flex-row min-h-[500px]",children:[n.jsxs("div",{className:"hidden md:flex w-1/3 bg-nature-600 p-8 flex-col justify-between text-white relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1625246333195-58197bd47d72?q=80&w=1000&auto=format&fit=crop')] bg-cover bg-center opacity-20 mix-blend-overlay"}),n.jsxs("div",{className:"relative z-10",children:[n.jsx(Uc,{className:"w-10 h-10 mb-6 text-nature-200"}),n.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Join KisanSetu"}),n.jsx("p",{className:"text-nature-100 text-sm",children:"Empowering farmers, connecting markets."})]}),n.jsxs("div",{className:"relative z-10 space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center",children:n.jsx(cc,{className:"w-4 h-4"})})," ",n.jsx("span",{children:"Fair Prices"})]}),n.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center",children:n.jsx(cc,{className:"w-4 h-4"})})," ",n.jsx("span",{children:"Verified Buyers"})]}),n.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center",children:n.jsx(cc,{className:"w-4 h-4"})})," ",n.jsx("span",{children:"Secure Payments"})]})]})]}),n.jsxs("div",{className:"flex-1 p-8 md:p-12 bg-white flex flex-col justify-center",children:[c==="auth"&&n.jsxs("div",{className:"w-full max-w-sm mx-auto animate-in fade-in slide-in-from-bottom-8",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"w-16 h-16 bg-white rounded-2xl flex items-center justify-center shadow-lg shadow-nature-600/10 mx-auto mb-4",children:n.jsx(Sl,{className:"w-8 h-8 text-nature-600"})}),n.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:h==="login"?"Welcome Back":"Create Account"}),n.jsx("p",{className:"text-slate-500 text-sm",children:h==="login"?"Login with your mobile number and password.":"Register with your mobile number and password."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(fe,{label:"Mobile Number",placeholder:"9876543210",value:x.phone,onChange:O=>w({...x,phone:O.target.value}),icon:n.jsx(Sl,{className:"w-4 h-4"}),type:"tel"}),n.jsx(fe,{label:"Password",type:"password",value:x.password,onChange:O=>w({...x,password:O.target.value}),icon:n.jsx(gf,{className:"w-4 h-4"})}),h==="register"&&n.jsx(fe,{label:"Confirm Password",type:"password",value:x.confirmPassword,onChange:O=>w({...x,confirmPassword:O.target.value}),icon:n.jsx(Qa,{className:"w-4 h-4"})}),n.jsx(se,{className:"w-full h-12",onClick:U,disabled:p,children:p?"Processing...":h==="login"?"Login":"Continue"}),n.jsx("div",{className:"text-center",children:n.jsx("button",{onClick:()=>m(h==="login"?"register":"login"),className:"text-sm font-medium text-nature-600 hover:text-nature-700 underline",children:h==="login"?"New here? Create Account":"Already have an account? Login"})})]})]}),c==="profile"&&n.jsxs("div",{className:"w-full animate-in fade-in",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Complete Profile"}),n.jsx("p",{className:"text-slate-500",children:"Tell us more about yourself to get the best experience."})]}),x.role==="farmer"&&n.jsx(hE,{onSubmit:async O=>{const L={id:x.userId,email:x.email,phone:x.phone||null,role:x.role,status:"active",createdAt:new Date().toISOString(),profile:O},D=await lh(L);if(!D){alert("Failed to save profile. Check Supabase RLS/policies.");return}i(D)}}),x.role==="buyer"&&n.jsx(fE,{onSubmit:async O=>{const L={id:x.userId,email:x.email,phone:x.phone||null,role:x.role,status:"active",createdAt:new Date().toISOString(),profile:O},D=await lh(L);if(!D){alert("Failed to save profile. Check Supabase RLS/policies.");return}i(D)}}),x.role==="transporter"&&n.jsx(mE,{onSubmit:async O=>{const L={id:x.userId,email:x.email,phone:x.phone||null,role:x.role,status:"active",createdAt:new Date().toISOString(),profile:O},D=await lh(L);if(!D){alert("Failed to save profile. Check Supabase RLS/policies.");return}i(D)}})]})]})]})]})},hE=({onSubmit:s})=>{const[t,i]=q.useState(1),[l,c]=q.useState({fullName:"",village:"",district:"",state:"Madhya Pradesh",language:"Hindi",totalLandArea:"",landUnit:"Acres",landType:"Owned",irrigationSource:"Borewell",currentCrops:[],farmingPractices:[]});return n.jsx("div",{className:"space-y-6",children:t===1&&n.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-right-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-slate-900 mb-1",children:"Basic Details"}),n.jsx("p",{className:"text-xs text-slate-500",children:"We need these to connect you locally."})]}),n.jsx(fe,{label:"Full Name",placeholder:"Rajesh Kumar",value:l.fullName,onChange:u=>c({...l,fullName:u.target.value})}),n.jsx(fe,{label:"Village",placeholder:"Sehore",value:l.village,onChange:u=>c({...l,village:u.target.value})}),n.jsx(fe,{label:"District",placeholder:"Sehore",value:l.district,onChange:u=>c({...l,district:u.target.value})}),n.jsx(se,{className:"w-full h-12",onClick:()=>s({...l,memberSince:new Date().toISOString(),rating:5,totalSales:0}),disabled:!l.fullName||!l.village,children:"Finish Setup"})]})})},fE=({onSubmit:s})=>{const[t,i]=q.useState(1),[l,c]=q.useState({fullName:"",businessName:"",city:"",state:"",language:"English",buyerType:"Individual Trader",procurementRegions:[],preferredCrops:[],purchaseCapacity:"Small ( 1 ton)"});return n.jsx("div",{className:"space-y-6",children:t===1&&n.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-right-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-slate-900 mb-1",children:"Company Details"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Tell us about your procurement entity."})]}),n.jsx(fe,{label:"Full Name",value:l.fullName,onChange:u=>c({...l,fullName:u.target.value})}),n.jsx(fe,{label:"Business Name (Optional)",value:l.businessName,onChange:u=>c({...l,businessName:u.target.value})}),n.jsx(fe,{label:"City",value:l.city,onChange:u=>c({...l,city:u.target.value})}),n.jsx(se,{className:"w-full h-12 bg-blue-600 hover:bg-blue-700",onClick:()=>s({...l,memberSince:new Date().toISOString(),rating:5,completedDeals:0}),disabled:!l.fullName||!l.city,children:"Finish Setup"})]})})},mE=({onSubmit:s})=>{const[t,i]=q.useState({fullName:"",vehicleType:"Pickup Truck",maxCapacity:"",approvalStatus:"pending",city:"",state:"",language:"Hindi",vehicleNumber:"",vehicleName:"",numberPlatePhoto:"",vehiclePhoto:"",operatingRegions:[]}),l=async(c,u)=>{const h=await rr(c,`transporter/${t.vehicleNumber||t.fullName||"new"}`);if(h){i(p=>({...p,[u]:h}));return}const m=new FileReader;m.onloadend=()=>i(p=>({...p,[u]:m.result})),m.readAsDataURL(c)};return n.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-right-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-slate-900 mb-1",children:"Vehicle Details"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Enter vehicle information for verification."})]}),n.jsx(fe,{label:"Full Name",value:t.fullName,onChange:c=>i({...t,fullName:c.target.value})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-2",children:"Vehicle Type"}),n.jsxs("select",{className:"w-full h-12 bg-white border border-slate-300 rounded-xl px-3 outline-none",value:t.vehicleType,onChange:c=>i({...t,vehicleType:c.target.value}),children:[n.jsx("option",{children:"Pickup Truck"}),n.jsx("option",{children:"Mini Truck"}),n.jsx("option",{children:"Tractor Trolley"}),n.jsx("option",{children:"Large Truck"})]})]}),n.jsx(fe,{label:"Capacity (Kg)",className:"w-1/3",type:"number",value:t.maxCapacity,onChange:c=>i({...t,maxCapacity:c.target.value})})]}),n.jsx(fe,{label:"Vehicle Name",placeholder:"e.g. Tata Ace, Bolero Pickup",value:t.vehicleName,onChange:c=>i({...t,vehicleName:c.target.value})}),n.jsx(fe,{label:"Vehicle Number",placeholder:"MP04 GA 1234",value:t.vehicleNumber,onChange:c=>i({...t,vehicleNumber:c.target.value})}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1.5 ml-1",children:"Number Plate Photo"}),n.jsx("input",{type:"file",accept:"image/*",className:"w-full bg-white/60 backdrop-blur-sm border border-slate-200 rounded-xl px-4 py-3",onChange:async c=>{var h;const u=(h=c.target.files)==null?void 0:h[0];!u||u.size>5*1024*1024||await l(u,"numberPlatePhoto")}}),t.numberPlatePhoto&&n.jsx("img",{src:t.numberPlatePhoto,alt:"Number Plate",className:"mt-2 h-24 w-full object-cover rounded-lg border border-slate-200"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1.5 ml-1",children:"Vehicle Photo"}),n.jsx("input",{type:"file",accept:"image/*",className:"w-full bg-white/60 backdrop-blur-sm border border-slate-200 rounded-xl px-4 py-3",onChange:async c=>{var h;const u=(h=c.target.files)==null?void 0:h[0];!u||u.size>5*1024*1024||await l(u,"vehiclePhoto")}}),t.vehiclePhoto&&n.jsx("img",{src:t.vehiclePhoto,alt:"Vehicle",className:"mt-2 h-24 w-full object-cover rounded-lg border border-slate-200"})]})]}),n.jsxs("div",{className:"p-4 bg-orange-50 rounded-xl border border-orange-200 flex items-start gap-3",children:[n.jsx(Qa,{className:"w-5 h-5 text-orange-600 shrink-0 mt-0.5"}),n.jsxs("div",{className:"text-xs text-orange-800",children:[n.jsx("p",{className:"font-bold mb-1",children:"Verification Pending"}),n.jsx("p",{children:"Your profile will go through a quick admin check before you can accept jobs."})]})]}),n.jsx(se,{className:"w-full h-12 bg-orange-600 hover:bg-orange-700 shadow-lg shadow-orange-600/20",onClick:()=>s({...t,memberSince:new Date().toISOString(),rating:5,totalDeliveries:0}),disabled:!t.fullName||!t.vehicleNumber,children:"Submit for Approval"})]})},pE=({user:s,listings:t,offers:i,orders:l,messages:c,inventoryItems:u,payouts:h,transportRequests:m,allUsers:p,onAddInventoryItem:g,onAddPayout:x,onSendMessage:w,onAddListing:N,onUpdateListing:_,onDeleteListing:T,onUpdateProfile:U,onUpdateListingStatus:O,onAcceptOffer:L,onRejectOffer:D,onCounterOffer:M,onRaiseDispute:ie,onLogout:ue,onAcceptTransportRequest:B,onOpenChat:H,onViewInvoice:pe,onUpdateOrderPayment:he})=>{var ge;const[be,Le]=q.useState("home"),[st,gt]=q.useState(!1),re=t.filter(b=>b.farmerId===s.id),Me=i.filter(b=>re.some(E=>E.id===b.listingId)),Y=(l||[]).filter(b=>{var E;return(b==null?void 0:b.farmerName)===((E=s==null?void 0:s.profile)==null?void 0:E.fullName)}),ae=rE.filter(b=>b.type==="sale"),[ce,Oe]=q.useState([]),[xe,C]=q.useState(null),[J,me]=q.useState(null),[ve,Te]=q.useState(!1),[De,He]=q.useState(1),[yt,at]=q.useState(!1),[xt,zt]=q.useState(null),[ye,nt]=q.useState({quantity:"",quantityUnit:"kg",price:"",priceUnit:"per_kg",variety:"",harvestDate:new Date().toISOString().split("T")[0],storageType:"Ambient",moistureContent:"",minOrderQuantity:"",minOrderQuantityUnit:"kg",availableDate:new Date().toISOString().split("T")[0],packagingDetails:"",description:"",certification:[]}),[ht,Ct]=q.useState(""),[Fe,vt]=q.useState(s.profile),[$t,Et]=q.useState("overview"),[ts,ss]=q.useState(lE),[Ye,as]=q.useState("all"),[wt,na]=q.useState(null),[ze,_t]=q.useState({name:s.profile.fullName,email:"",issue:""}),[jt,bs]=q.useState({open:!1,offer:null}),[Vt,Ds]=q.useState(""),[fs,ms]=q.useState({notifyOffers:!0,notifyOrders:!0,notifyPrices:!0,notifySystem:!1,language:s.profile.language||"English",profileVisible:!0}),Dt=b=>{var E;zt(b.id),Oe(b.imageUrls||[b.imageUrl]),me({cropName:b.cropName,grade:b.grade,qualityDescription:b.description,estimatedPrice:b.pricePerKg,confidence:.9}),nt({quantity:(b.quantityUnit?ra(Number(b.quantity||0),b.quantityUnit):Number(b.quantity||0)).toString(),quantityUnit:b.quantityUnit||"kg",price:(b.priceUnit?_s(Number(b.pricePerKg||0),b.priceUnit):Number(b.pricePerKg||0)).toString(),priceUnit:b.priceUnit||"per_kg",variety:b.variety||"",harvestDate:b.harvestDate||new Date().toISOString().split("T")[0],storageType:b.storageType||"Ambient",moistureContent:((E=b.moistureContent)==null?void 0:E.toString())||"",minOrderQuantity:(b.minOrderQuantityUnit?ra(Number(b.minOrderQuantity||0),b.minOrderQuantityUnit):Number(b.minOrderQuantity||0)).toString(),minOrderQuantityUnit:b.minOrderQuantityUnit||"kg",availableDate:b.availableDate||new Date().toISOString().split("T")[0],packagingDetails:b.packagingDetails||"",description:b.description||"",certification:b.certification||[]}),Te(!0),He(1)},ns=new Date().toLocaleDateString("en-IN",{weekday:"long",day:"numeric",month:"long"}),Rt=b=>{let E=0,de=10;return b.fullName&&E++,b.village&&E++,b.district&&E++,b.state&&E++,b.totalLandArea&&E++,b.landType&&E++,b.irrigationSource&&E++,b.currentCrops&&b.currentCrops.length>0&&E++,b.farmingPractices&&b.farmingPractices.length>0&&E++,b.pincode&&E++,Math.round(E/de*100)},ia=b=>b==="kg"?1:b==="quintal"?100:b==="ton"?1e3:.001,Rs=(b,E)=>b*ia(E),ra=(b,E)=>b/ia(E),Ms=(b,E)=>E==="per_kg"?b:E==="per_quintal"?b/100:E==="per_ton"?b/1e3:b/.001,_s=(b,E)=>E==="per_kg"?b:E==="per_quintal"?b*100:E==="per_ton"?b*1e3:b*.001,[is,Xt]=q.useState(!1),[F,K]=q.useState([]),[ee,y]=q.useState(0),k=async b=>{const E=Array.from(b.target.files||[]);if(E.length>0){Te(!0),He(1);const de=[],we=5-ce.length,Ee=E.slice(0,we);for(const Ve of Ee){const Qe=new FileReader,Mt=await new Promise(Hs=>{Qe.onloadend=()=>Hs(Qe.result),Qe.readAsDataURL(Ve)});de.push(Mt)}const Re=[...ce,...de];if(Oe(Re),!J&&Re.length>0){at(!0);try{const Ve={cropName:"Wheat",grade:"A",estimatedPrice:30,qualityDescription:"Simulated AI Analysis",confidence:.95};me(Ve),nt(Qe=>({...Qe,price:Ve.estimatedPrice.toString(),description:Ve.qualityDescription}))}catch(Ve){console.error("AI Analysis failed",Ve)}finally{at(!1)}}}},G=({assets:b,heightClass:E="h-44",onOpen:de})=>{const we=oi.useRef(null),Ee=Re=>{const Ve=we.current;if(!Ve)return;const Qe=Ve.clientWidth;Ve.scrollBy({left:Re==="left"?-Qe:Qe,behavior:"smooth"})};return n.jsxs("div",{className:`relative ${E}`,children:[n.jsx("div",{ref:we,className:"w-full h-full overflow-x-auto flex snap-x snap-mandatory scroll-smooth",children:b.map((Re,Ve)=>n.jsx("div",{className:"min-w-full snap-start relative",children:Re.type==="video"?n.jsx("video",{src:Re.src,className:"w-full h-full object-cover",controls:!0,playsInline:!0,preload:"metadata",poster:Re.poster,onClick:()=>de&&de(Ve)}):n.jsx("img",{src:Re.src,className:"w-full h-full object-cover",onClick:()=>de&&de(Ve),alt:""})},Ve))}),b.length>1&&n.jsxs(n.Fragment,{children:[n.jsx("button",{"aria-label":"Prev",onClick:()=>Ee("left"),className:"absolute left-2 top-1/2 -translate-y-1/2 bg-white/80 backdrop-blur-sm border border-slate-200 rounded-full p-2 text-slate-700 hover:bg-white shadow",children:n.jsx(cr,{className:"w-4 h-4"})}),n.jsx("button",{"aria-label":"Next",onClick:()=>Ee("right"),className:"absolute right-2 top-1/2 -translate-y-1/2 bg-white/80 backdrop-blur-sm border border-slate-200 rounded-full p-2 text-slate-700 hover:bg-white shadow",children:n.jsx(ii,{className:"w-4 h-4"})})]})]})},X=b=>{var Ve;const E=(Ve=b.target.files)==null?void 0:Ve[0];if(!E)return;const de=E.size,we=E.type,Ee=URL.createObjectURL(E),Re=document.createElement("video");Re.preload="metadata",Re.src=Ee,Re.onloadedmetadata=()=>{const Qe=Math.floor(Re.duration);if(Qe>60){URL.revokeObjectURL(Ee),alert("Video must be 60 seconds or less"),b.target.value="";return}const Mt=document.createElement("canvas");Mt.width=320,Mt.height=180;const Hs=Mt.getContext("2d"),pa=()=>{if(Hs){Hs.drawImage(Re,0,0,Mt.width,Mt.height);const ga=Mt.toDataURL("image/jpeg");C({url:Ee,durationSec:Qe,sizeBytes:de,type:we,thumbnail:ga})}else C({url:Ee,durationSec:Qe,sizeBytes:de,type:we})};Re.currentTime=Math.min(1,Qe),Re.onseeked=pa,Re.onloadeddata=pa}},le=async()=>{var Ee,Re,Ve;if(!J||ce.length===0&&!xe)return;const E=(await Promise.all(ce.map((Qe,Mt)=>rr(Qe,`listings/${s.id}`)))).map(Qe=>Qe||"").filter(Boolean),de=xe!=null&&xe.url?await rr(xe.url,`listings/${s.id}`):null,we={id:xt||Date.now().toString(),farmerId:s.id,farmerName:(Ee=s.profile)==null?void 0:Ee.fullName,cropName:J.cropName,variety:ye.variety,grade:J.grade,quantity:Rs(Number(ye.quantity||0),ye.quantityUnit),quantityUnit:ye.quantityUnit,availableQuantity:Rs(Number(ye.quantity||0),ye.quantityUnit),pricePerKg:Ms(Number(ye.price||0),ye.priceUnit),priceUnit:ye.priceUnit,description:ye.description||J.qualityDescription,imageUrls:E.length?E:ce,videoUrl:de||(xe==null?void 0:xe.url)||void 0,videoDurationSec:xe==null?void 0:xe.durationSec,videoSizeBytes:xe==null?void 0:xe.sizeBytes,videoType:(xe==null?void 0:xe.type)||void 0,videoThumbnail:xe==null?void 0:xe.thumbnail,location:((Re=s.profile)==null?void 0:Re.village)||((Ve=s.profile)==null?void 0:Ve.city),status:"active",harvestDate:ye.harvestDate,availableDate:ye.availableDate,storageType:ye.storageType,minOrderQuantity:Rs(Number(ye.minOrderQuantity||0),ye.minOrderQuantityUnit),minOrderQuantityUnit:ye.minOrderQuantityUnit,moistureContent:Number(ye.moistureContent),packagingDetails:ye.packagingDetails,certification:ye.certification,createdAt:new Date().toISOString()};xt?_(we):N(we),Te(!1),zt(null),Oe([]),C(null),me(null),He(1),nt({quantity:"",quantityUnit:"kg",price:"",priceUnit:"per_kg",variety:"",harvestDate:new Date().toISOString().split("T")[0],storageType:"Ambient",moistureContent:"",minOrderQuantity:"",minOrderQuantityUnit:"kg",availableDate:new Date().toISOString().split("T")[0],packagingDetails:"",description:"",certification:[]})},Z=({id:b,label:E,icon:de,badge:we})=>n.jsxs("button",{onClick:()=>{Le(b),gt(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-medium transition-all ${be===b?"bg-nature-600 text-white shadow-lg shadow-nature-600/30":"text-slate-600 hover:bg-slate-100"}`,children:[n.jsx(de,{className:"w-5 h-5"}),n.jsx("span",{className:"flex-1 text-left",children:E}),we>0&&n.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${be===b?"bg-white/20 text-white":"bg-red-100 text-red-600"}`,children:we})]});return n.jsxs("div",{className:"min-h-screen bg-slate-50 flex",children:[n.jsxs("aside",{className:"hidden lg:flex w-64 bg-white border-r border-slate-200 flex-col fixed h-full z-20",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-nature-600 rounded-lg flex items-center justify-center shadow-md",children:n.jsx(Uc,{className:"w-5 h-5 text-white"})}),n.jsx("span",{className:"font-bold text-xl text-nature-900 tracking-tight",children:"KisanSetu"})]}),n.jsxs("nav",{className:"p-4 space-y-2 flex-1 overflow-y-auto",children:[n.jsx(Z,{id:"home",label:"Dashboard",icon:Dx}),n.jsx(Z,{id:"my-crops",label:"My Crops",icon:wa,badge:re.length}),n.jsx(Z,{id:"offers",label:"Offers",icon:ta,badge:Me.length}),n.jsx(Z,{id:"orders",label:"Orders",icon:gs,badge:Y.length}),n.jsx(Z,{id:"inventory",label:"Inventory",icon:wa}),n.jsx(Z,{id:"payments",label:"Payments",icon:Nc}),n.jsx(Z,{id:"history",label:"History & Insights",icon:qh}),n.jsx(Z,{id:"messages",label:"Messages",icon:Xa}),n.jsx(Z,{id:"addresses",label:"Addresses",icon:Na}),n.jsx(Z,{id:"more",label:"Pro Features",icon:ri}),n.jsx(Z,{id:"profile",label:"Kisan Profile",icon:si}),n.jsx(Z,{id:"notifications",label:"Notifications",icon:Fa,badge:2}),n.jsx(Z,{id:"help",label:"Help & Support",icon:ic}),n.jsx(Z,{id:"settings",label:"Settings",icon:ri})]}),n.jsx("div",{className:"p-4 border-t border-slate-100",children:n.jsxs("button",{onClick:ue,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl font-medium text-slate-600 hover:bg-red-50 hover:text-red-600 transition-colors",children:[n.jsx(Nl,{className:"w-5 h-5"})," Logout"]})})]}),st&&n.jsx("div",{className:"fixed inset-0 z-50 lg:hidden bg-black/50 backdrop-blur-sm",onClick:()=>gt(!1),children:n.jsxs("div",{className:"w-3/4 max-w-xs bg-white h-full shadow-2xl p-4 flex flex-col",onClick:b=>b.stopPropagation(),children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("span",{className:"font-bold text-xl text-nature-900",children:"Menu"}),n.jsx("button",{onClick:()=>gt(!1),className:"p-2 bg-slate-100 rounded-full",children:n.jsx(xs,{className:"w-5 h-5"})})]}),n.jsxs("nav",{className:"space-y-2 flex-1 overflow-y-auto pr-2",children:[n.jsx(Z,{id:"home",label:"Dashboard",icon:Dx}),n.jsx(Z,{id:"my-crops",label:"My Crops",icon:wa,badge:re.length}),n.jsx(Z,{id:"offers",label:"Offers",icon:ta,badge:Me.length}),n.jsx(Z,{id:"orders",label:"Orders",icon:gs,badge:Y.length}),n.jsx(Z,{id:"inventory",label:"Inventory",icon:wa}),n.jsx(Z,{id:"payments",label:"Payments",icon:Nc}),n.jsx(Z,{id:"history",label:"History & Insights",icon:qh}),n.jsx(Z,{id:"profile",label:"Kisan Profile",icon:si}),n.jsx(Z,{id:"notifications",label:"Notifications",icon:Fa,badge:2}),n.jsx(Z,{id:"help",label:"Help & Support",icon:ic}),n.jsx(Z,{id:"settings",label:"Settings",icon:ri})]}),n.jsxs("button",{onClick:ue,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl font-medium text-red-600 bg-red-50",children:[n.jsx(Nl,{className:"w-5 h-5"})," Logout"]})]})}),n.jsxs("div",{className:"flex-1 lg:ml-64 flex flex-col min-h-screen",children:[n.jsxs("header",{className:"sticky top-0 z-30 bg-white/80 backdrop-blur-md border-b border-slate-200 px-4 py-3 flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:()=>gt(!0),className:"p-2 hover:bg-slate-100 rounded-full lg:hidden",children:n.jsx(k_,{className:"w-6 h-6 text-slate-700"})}),n.jsx("h1",{className:"text-lg font-bold text-slate-800 lg:hidden",children:"KisanSetu"})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("button",{className:"relative p-2 hover:bg-slate-100 rounded-full",children:[n.jsx(Fa,{className:"w-6 h-6 text-slate-600"}),Me.length>0&&n.jsx("span",{className:"absolute top-1.5 right-2 w-2.5 h-2.5 bg-red-500 rounded-full ring-2 ring-white animate-pulse"})]}),n.jsxs("div",{className:"flex items-center gap-3 pl-4 border-l border-slate-200",children:[n.jsxs("div",{className:"text-right hidden md:block",children:[n.jsx("div",{className:"text-sm font-bold text-slate-900",children:s.profile.fullName}),n.jsxs("div",{className:"text-xs text-slate-500",children:[s.profile.village,", ",s.profile.district]})]}),n.jsx("div",{className:"w-10 h-10 bg-nature-100 rounded-full flex items-center justify-center border-2 border-nature-200 text-nature-700 font-bold text-lg",children:s.profile.fullName[0]})]})]})]}),n.jsxs("main",{className:"p-4 md:p-6 lg:p-8 max-w-6xl mx-auto w-full",children:[be==="inventory"&&n.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Inventory Management"}),n.jsx("p",{className:"text-slate-500",children:"Track batches, grades, and storage."})]}),n.jsxs(oe,{className:"p-6 space-y-4",children:[n.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[n.jsx("select",{className:"w-full h-11 bg-slate-50 border border-slate-200 rounded-xl px-4 text-sm font-medium outline-nature-500",id:"inv-listing",children:t.filter(b=>b.farmerId===s.id).map(b=>n.jsx("option",{value:b.id,children:b.cropName},b.id))}),n.jsx(fe,{id:"inv-batch",placeholder:"Batch ID"}),n.jsxs("select",{className:"w-full h-11 bg-slate-50 border border-slate-200 rounded-xl px-4 text-sm font-medium outline-nature-500",id:"inv-grade",children:[n.jsx("option",{value:"A",children:"Grade A"}),n.jsx("option",{value:"B",children:"Grade B"}),n.jsx("option",{value:"C",children:"Grade C"})]}),n.jsx(fe,{id:"inv-qty",type:"number",placeholder:"Quantity (kg)"}),n.jsx(fe,{id:"inv-store",placeholder:"Storage Location"}),n.jsx(fe,{id:"inv-exp",type:"date",placeholder:"Expiry"})]}),n.jsx(se,{className:"w-full md:w-auto",onClick:()=>{var Ve,Qe,Mt,Hs,pa,ga;const b=(Ve=document.getElementById("inv-listing"))==null?void 0:Ve.value,E=(Qe=document.getElementById("inv-batch"))==null?void 0:Qe.value,de=(Mt=document.getElementById("inv-grade"))==null?void 0:Mt.value,we=Number(((Hs=document.getElementById("inv-qty"))==null?void 0:Hs.value)||0),Ee=(pa=document.getElementById("inv-store"))==null?void 0:pa.value,Re=(ga=document.getElementById("inv-exp"))==null?void 0:ga.value;!b||!E||we<=0||g==null||g({listingId:b,batchId:E,grade:de,quantityKg:we,storageLocation:Ee,expiryDate:Re})},children:"Add Batch"})]}),n.jsx(oe,{className:"p-6",children:n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[(u||[]).filter(b=>{var E;return((E=t.find(de=>de.id===b.listingId))==null?void 0:E.farmerId)===s.id}).map(b=>{var E;return n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[n.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold",children:["Batch ",b.batchId]}),n.jsxs("div",{className:"font-bold text-slate-900",children:[(E=t.find(de=>de.id===b.listingId))==null?void 0:E.cropName,"  ",b.grade]}),n.jsxs("div",{className:"text-sm text-slate-600",children:[b.quantityKg," kg  ",b.storageLocation||"Storage","  ",b.expiryDate||"No expiry"]})]},b.id)}),(u||[]).filter(b=>{var E;return((E=t.find(de=>de.id===b.listingId))==null?void 0:E.farmerId)===s.id}).length===0&&n.jsx("div",{className:"text-sm text-slate-400",children:"No inventory yet."})]})})]}),be==="payments"&&n.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Payments & Settlements"}),n.jsx("p",{className:"text-slate-500",children:"Track payouts and settlement status."})]}),n.jsxs(oe,{className:"p-6 space-y-4",children:[n.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[n.jsx("select",{className:"w-full h-11 bg-slate-50 border border-slate-200 rounded-xl px-4 text-sm font-medium outline-nature-500",id:"pay-order",children:l.filter(b=>b.farmerName===s.profile.fullName).map(b=>n.jsxs("option",{value:b.id,children:["Order ",b.id,"  ",b.totalAmount]},b.id))}),n.jsx(fe,{id:"pay-amt",type:"number",placeholder:"Amount"}),n.jsxs("select",{className:"w-full h-11 bg-slate-50 border border-slate-200 rounded-xl px-4 text-sm font-medium outline-nature-500",id:"pay-status",children:[n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"processing",children:"Processing"}),n.jsx("option",{value:"paid",children:"Paid"}),n.jsx("option",{value:"failed",children:"Failed"})]})]}),n.jsx(se,{className:"w-full md:w-auto",onClick:()=>{var we,Ee,Re;const b=(we=document.getElementById("pay-order"))==null?void 0:we.value,E=Number(((Ee=document.getElementById("pay-amt"))==null?void 0:Ee.value)||0),de=(Re=document.getElementById("pay-status"))==null?void 0:Re.value;!b||E<=0||x==null||x({userId:s.id,orderId:b,amount:E,status:de})},children:"Add Payout"})]}),n.jsx(oe,{className:"p-6",children:n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[(h||[]).filter(b=>b.userId===s.id).map(b=>n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[n.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold",children:"Payout"}),n.jsxs("div",{className:"font-bold text-slate-900",children:["Order ",b.orderId||"-","  ",b.amount]}),n.jsx("div",{className:"text-sm text-slate-600",children:b.status})]},b.id)),(h||[]).filter(b=>b.userId===s.id).length===0&&n.jsx("div",{className:"text-sm text-slate-400",children:"No payouts yet."})]})})]}),be==="notifications"&&n.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Notifications"}),n.jsx("p",{className:"text-slate-500",children:"Stay updated on offers, orders, and market alerts."})]}),n.jsx("div",{className:"flex gap-2 flex-wrap",children:["all","unread","offer","order"].map(b=>n.jsx("button",{onClick:()=>as(b),className:`px-4 py-2 rounded-full text-sm font-bold transition-all ${Ye===b?"bg-nature-600 text-white shadow-lg":"bg-white text-slate-600 hover:bg-slate-100 border border-slate-200"}`,children:b==="all"?"All":b==="unread"?"Unread":b==="offer"?"Offers":"Orders"},b))})]}),ts.filter(b=>Ye==="all"||Ye==="unread"&&!b.isRead||b.type===Ye).length>0?n.jsxs(oe,{className:"overflow-hidden",children:[n.jsx("div",{className:"divide-y divide-slate-100",children:ts.filter(b=>Ye==="all"||Ye==="unread"&&!b.isRead||b.type===Ye).map(b=>n.jsxs("div",{className:`p-4 flex items-start gap-4 hover:bg-slate-50 transition-colors cursor-pointer ${b.isRead?"":"bg-nature-50/50"}`,onClick:()=>ss(E=>E.map(de=>de.id===b.id?{...de,isRead:!0}:de)),children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${b.type==="offer"?"bg-blue-100 text-blue-600":b.type==="order"?"bg-green-100 text-green-600":b.type==="price"?"bg-amber-100 text-amber-600":"bg-slate-100 text-slate-600"}`,children:b.type==="offer"?n.jsx(ta,{className:"w-5 h-5"}):b.type==="order"?n.jsx(gs,{className:"w-5 h-5"}):b.type==="price"?n.jsx(Ji,{className:"w-5 h-5"}):n.jsx(ic,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h4",{className:"font-bold text-slate-900 truncate",children:b.title}),!b.isRead&&n.jsx("span",{className:"w-2 h-2 bg-nature-500 rounded-full flex-shrink-0"})]}),n.jsx("p",{className:"text-sm text-slate-600 line-clamp-2",children:b.message}),n.jsx("span",{className:"text-xs text-slate-400 mt-1 block",children:b.timestamp})]}),n.jsx("button",{className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 hover:text-slate-600",onClick:E=>{E.stopPropagation(),ss(de=>de.filter(we=>we.id!==b.id))},children:n.jsx(xs,{className:"w-4 h-4"})})]},b.id))}),ts.some(b=>!b.isRead)&&n.jsx("div",{className:"p-4 border-t border-slate-100 bg-slate-50",children:n.jsx("button",{onClick:()=>ss(b=>b.map(E=>({...E,isRead:!0}))),className:"text-sm font-bold text-nature-600 hover:text-nature-700",children:"Mark all as read"})})]}):n.jsxs(oe,{className:"p-12 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(Fa,{className:"w-8 h-8 text-slate-400"})}),n.jsx("h3",{className:"text-lg font-bold text-slate-700 mb-2",children:"No notifications"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"You're all caught up!"})]})]}),be==="help"&&n.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Help & Support"}),n.jsx("p",{className:"text-slate-500",children:"Find answers or reach out to our team."})]}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[n.jsxs(oe,{className:"p-5 hover:shadow-lg transition-shadow cursor-pointer group",children:[n.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:n.jsx(Sl,{className:"w-6 h-6 text-green-600"})}),n.jsx("h4",{className:"font-bold text-slate-900",children:"Helpline"}),n.jsx("p",{className:"text-sm text-slate-500 mb-2",children:"24/7 Support"}),n.jsx("span",{className:"text-nature-600 font-bold",children:"1800-KISAN-01"})]}),n.jsxs(oe,{className:"p-5 hover:shadow-lg transition-shadow cursor-pointer group",children:[n.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:n.jsx(Xa,{className:"w-6 h-6 text-green-600"})}),n.jsx("h4",{className:"font-bold text-slate-900",children:"WhatsApp"}),n.jsx("p",{className:"text-sm text-slate-500 mb-2",children:"Quick responses"}),n.jsx("span",{className:"text-nature-600 font-bold",children:"+91 98765 43210"})]}),n.jsxs(oe,{className:"p-5 hover:shadow-lg transition-shadow cursor-pointer group",children:[n.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:n.jsx(Lc,{className:"w-6 h-6 text-blue-600"})}),n.jsx("h4",{className:"font-bold text-slate-900",children:"Email"}),n.jsx("p",{className:"text-sm text-slate-500 mb-2",children:"Detailed queries"}),n.jsx("span",{className:"text-nature-600 font-bold",children:"support@kisansetu.in"})]})]}),n.jsxs(oe,{className:"overflow-hidden",children:[n.jsx("div",{className:"p-4 border-b border-slate-100 bg-slate-50",children:n.jsx("h3",{className:"font-bold text-slate-800",children:"Frequently Asked Questions"})}),n.jsx("div",{className:"divide-y divide-slate-100",children:oE.map((b,E)=>n.jsxs("div",{className:"cursor-pointer",onClick:()=>na(wt===E?null:E),children:[n.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[n.jsx("span",{className:"font-medium text-slate-800",children:b.q}),n.jsx(XS,{className:`w-5 h-5 text-slate-400 transition-transform ${wt===E?"rotate-180":""}`})]}),wt===E&&n.jsx("div",{className:"px-4 pb-4 text-sm text-slate-600 bg-slate-50",children:b.a})]},E))})]}),n.jsxs(oe,{className:"p-6",children:[n.jsx("h3",{className:"font-bold text-slate-800 mb-4",children:"Submit a Support Request"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsx(fe,{label:"Your Name",value:ze.name,onChange:b=>_t({...ze,name:b.target.value})}),n.jsx(fe,{label:"Email",type:"email",value:ze.email,onChange:b=>_t({...ze,email:b.target.value}),placeholder:"your@email.com"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Describe Your Issue"}),n.jsx("textarea",{className:"w-full h-32 bg-white border border-slate-300 rounded-xl p-3 outline-none focus:ring-2 focus:ring-nature-500 resize-none",placeholder:"Tell us how we can help...",value:ze.issue,onChange:b=>_t({...ze,issue:b.target.value})})]}),n.jsxs(se,{className:"w-full md:w-auto",disabled:!ze.email||!ze.issue,children:[n.jsx(bb,{className:"w-4 h-4 mr-2"})," Submit Request"]})]})]})]}),be==="more"&&n.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Pro Features"}),n.jsx("p",{className:"text-slate-500",children:"Explore upcoming advanced tools for farmers."})]}),n.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{title:"Inventory Management",desc:"Batch lots, grading, storage tracking"},{title:"Dynamic Pricing",desc:"Auto-adjust price by age/demand"},{title:"Order Fulfillment",desc:"Pick-pack-ship, POD, labels"},{title:"Payments & Settlements",desc:"Payout ledger and statuses"},{title:"Contracts & Compliance",desc:"Digital MoUs, renewals"},{title:"Seasonal Planning",desc:"Crop calendar and yield estimates"},{title:"Bulk Updates",desc:"Multi-listing edits and scheduling"},{title:"Marketing Boosts",desc:"Featured credits and sharing"},{title:"Logistics Coordination",desc:"Preferred transporters and slots"}].map((b,E)=>n.jsxs(oe,{className:"p-5",children:[n.jsx("h4",{className:"font-bold text-slate-900",children:b.title}),n.jsx("p",{className:"text-sm text-slate-600",children:b.desc}),n.jsx("div",{className:"mt-3",children:n.jsx(se,{variant:"outline",className:"text-xs",children:"Coming Soon"})})]},E))})]}),be==="settings"&&n.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Settings"}),n.jsx("p",{className:"text-slate-500",children:"Manage your preferences and account settings."})]}),n.jsxs(oe,{className:"overflow-hidden",children:[n.jsxs("div",{className:"p-4 border-b border-slate-100 bg-slate-50 flex items-center gap-3",children:[n.jsx(Fa,{className:"w-5 h-5 text-slate-600"}),n.jsx("h3",{className:"font-bold text-slate-800",children:"Notification Preferences"})]}),n.jsx("div",{className:"p-4 space-y-4",children:[{key:"notifyOffers",label:"Offers",desc:"Get notified on new offers"},{key:"notifyOrders",label:"Orders",desc:"Order status updates"},{key:"notifyPrices",label:"Prices",desc:"Market price changes"},{key:"notifySystem",label:"System",desc:"Tips and announcements"}].map(b=>n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl hover:bg-slate-50",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-800",children:b.label}),n.jsx("p",{className:"text-sm text-slate-500",children:b.desc})]}),n.jsx("button",{onClick:()=>ms(E=>({...E,[b.key]:!E[b.key]})),className:`w-12 h-7 rounded-full transition-colors relative ${fs[b.key]?"bg-nature-500":"bg-slate-300"}`,children:n.jsx("span",{className:`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${fs[b.key]?"translate-x-6":"translate-x-1"}`})})]},b.key))})]}),n.jsxs(oe,{className:"overflow-hidden",children:[n.jsxs("div",{className:"p-4 border-b border-slate-100 bg-slate-50 flex items-center gap-3",children:[n.jsx(g_,{className:"w-5 h-5 text-slate-600"}),n.jsx("h3",{className:"font-bold text-slate-800",children:"Language"})]}),n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl hover:bg-slate-50",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-800",children:"App Language"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Choose your preferred language"})]}),n.jsxs("select",{className:"bg-white border border-slate-300 rounded-xl px-4 py-2 font-medium",value:fs.language,onChange:b=>ms({...fs,language:b.target.value}),children:[n.jsx("option",{children:"English"}),n.jsx("option",{children:"Hindi"}),n.jsx("option",{children:"Marathi"}),n.jsx("option",{children:"Gujarati"}),n.jsx("option",{children:"Tamil"})]})]})})]}),n.jsxs(oe,{className:"overflow-hidden",children:[n.jsxs("div",{className:"p-4 border-b border-slate-100 bg-slate-50 flex items-center gap-3",children:[n.jsx(F_,{className:"w-5 h-5 text-slate-600"}),n.jsx("h3",{className:"font-bold text-slate-800",children:"Privacy & Security"})]}),n.jsxs("div",{className:"p-4 space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl hover:bg-slate-50",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-800",children:"Profile Visibility"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Allow buyers to see your details"})]}),n.jsx("button",{onClick:()=>ms(b=>({...b,profileVisible:!b.profileVisible})),className:`w-12 h-7 rounded-full transition-colors relative ${fs.profileVisible?"bg-nature-500":"bg-slate-300"}`,children:n.jsx("span",{className:`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${fs.profileVisible?"translate-x-6":"translate-x-1"}`})})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl hover:bg-slate-50 cursor-pointer",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-800",children:"Change Password"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Update your password"})]}),n.jsx(ZS,{className:"w-5 h-5 text-slate-400"})]}),n.jsx("div",{className:"pt-4 border-t border-slate-100",children:n.jsx("button",{className:"text-sm font-medium text-red-600 hover:text-red-700",children:"Delete My Account"})})]})]})]}),be==="home"&&n.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[n.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:n.jsxs("div",{children:[n.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-slate-900",children:["Namaste, ",s.profile.fullName.split(" ")[0]," "]}),n.jsxs("p",{className:"text-slate-500 mt-1 flex items-center gap-2",children:[n.jsx(gb,{className:"w-4 h-4"})," ",ns,"  ",n.jsx(Na,{className:"w-4 h-4"})," ",s.profile.district]})]})}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsxs(oe,{className:"p-6 overflow-hidden relative border-nature-200",children:[n.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:n.jsx(Ji,{className:"w-24 h-24 text-nature-600"})}),n.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2 font-display",children:[n.jsx(Ji,{className:"w-5 h-5 text-nature-600"})," Market Price Snapshot"]}),n.jsx("div",{className:"space-y-4",children:[{crop:"Wheat (Sharbati)",msp:2275,mandi:2850,trend:"up"},{crop:"Soybean (Yellow)",msp:4600,mandi:4900,trend:"stable"},{crop:"Tomato (Hybrid)",msp:0,mandi:1200,trend:"down"}].map((b,E)=>n.jsxs("div",{className:"flex justify-between items-center p-3 bg-white border border-slate-100 rounded-xl",children:[n.jsx("div",{className:"font-bold text-slate-700",children:b.crop}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-sm font-bold text-nature-700",children:["",b.mandi,"/q"]}),b.msp>0&&n.jsxs("div",{className:"text-[10px] text-slate-400",children:["MSP: ",b.msp]})]})]},E))}),n.jsx("div",{className:"mt-4 text-[10px] text-slate-400",children:"Last updated: 10 mins ago  Sources: Mandi Board, NAFED"})]}),n.jsxs(oe,{className:"p-6 border-red-100 bg-red-50/10",children:[n.jsxs("h3",{className:"text-lg font-bold text-red-800 mb-4 flex items-center gap-2",children:[n.jsx(yc,{className:"w-5 h-5 text-red-600"})," Action Required"]}),n.jsx("div",{className:"space-y-3",children:Me.filter(b=>b.status==="pending").length>0?Me.filter(b=>b.status==="pending").map((b,E)=>{var de;return n.jsxs("div",{className:"flex justify-between items-center p-3 bg-white border border-red-100 rounded-xl shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:n.jsx(ta,{className:"w-4 h-4 text-red-600"})}),n.jsxs("div",{className:"text-sm",children:[n.jsx("span",{className:"font-bold",children:"New Offer"})," for ",(de=t.find(we=>we.id===b.listingId))==null?void 0:de.cropName]})]}),n.jsx(se,{size:"sm",variant:"outline",className:"h-8 text-xs border-red-200 text-red-600 hover:bg-red-50",onClick:()=>Le("offers"),children:"Review"})]},E)}):n.jsxs("div",{className:"py-8 text-center text-slate-400",children:[n.jsx(Ya,{className:"w-8 h-8 mx-auto mb-2 text-green-500 opacity-30"}),n.jsx("p",{className:"text-sm font-medium",children:"No urgent actions pending!"})]})})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-3",children:"Quick Stats"}),n.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs(oe,{className:"p-4 flex flex-col gap-1 hover:border-nature-300 cursor-pointer",onClick:()=>Le("my-crops"),children:[n.jsx(wa,{className:"w-6 h-6 text-nature-600 mb-2"}),n.jsx("div",{className:"text-2xl font-bold",children:re.length}),n.jsx("div",{className:"text-xs text-slate-500",children:"Active Crops"})]}),n.jsxs(oe,{className:"p-4 flex flex-col gap-1 hover:border-blue-300 cursor-pointer",onClick:()=>Le("offers"),children:[n.jsx(ta,{className:"w-6 h-6 text-blue-600 mb-2"}),n.jsx("div",{className:"text-2xl font-bold",children:Me.length}),n.jsx("div",{className:"text-xs text-slate-500",children:"Active Offers"})]}),n.jsxs(oe,{className:"p-4 flex flex-col gap-1 hover:border-purple-300 cursor-pointer",onClick:()=>Le("orders"),children:[n.jsx(gs,{className:"w-6 h-6 text-purple-600 mb-2"}),n.jsx("div",{className:"text-2xl font-bold",children:Y.length}),n.jsx("div",{className:"text-xs text-slate-500",children:"In Transit"})]}),n.jsxs(oe,{className:"p-4 flex flex-col gap-1 border-emerald-100 bg-emerald-50/50",children:[n.jsx(jc,{className:"w-6 h-6 text-emerald-600 mb-2"}),n.jsxs("div",{className:"text-2xl font-bold",children:["",(Y.reduce((b,E)=>b+E.totalAmount,0)/1e3).toFixed(1),"k"]}),n.jsx("div",{className:"text-xs text-slate-500",children:"Earnings"})]})]})]})]}),be==="my-crops"&&n.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"My Crop Supply"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"Manage your active listings and stock"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs(se,{variant:"outline",className:"hidden md:flex items-center gap-2",onClick:()=>Le("home"),children:[n.jsx(Ji,{className:"w-4 h-4"})," Market Prices"]}),n.jsxs(se,{id:"add-crop-btn",className:"shadow-lg shadow-nature-600/20",onClick:()=>{var b;return(b=document.getElementById("file-upload"))==null?void 0:b.click()},children:[n.jsx(uc,{className:"w-5 h-5 mr-2"})," Add New Crop"]})]}),n.jsx("input",{type:"file",id:"file-upload",className:"hidden",accept:"image/*",multiple:!0,onChange:k})]}),n.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:re.length>0?re.map(b=>{var E;return n.jsxs(oe,{className:"overflow-hidden flex flex-col group hover:shadow-xl transition-all duration-300 border-slate-200 hover:border-nature-300",children:[n.jsxs("div",{className:"relative h-44",children:[n.jsx(G,{assets:[...b.videoUrl?[{type:"video",src:b.videoUrl,poster:b.videoThumbnail||((E=b.imageUrls)==null?void 0:E[0])||b.imageUrl}]:[],...(b.imageUrls||[]).map(de=>({type:"image",src:de}))],onOpen:de=>{var we;K([...b.videoUrl?[{type:"video",src:b.videoUrl,poster:b.videoThumbnail||((we=b.imageUrls)==null?void 0:we[0])||b.imageUrl}]:[],...(b.imageUrls||[]).map(Ee=>({type:"image",src:Ee}))]),y(de),Xt(!0)}}),n.jsx("div",{className:"absolute top-3 right-3 flex gap-2",children:n.jsx("span",{className:`px-2.5 py-1 rounded-full text-[10px] font-bold uppercase shadow-lg ${b.status==="active"?"bg-green-500 text-white":"bg-slate-500 text-white"}`,children:b.status})})]}),n.jsxs("div",{className:"p-5 flex-1 flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-start mb-3",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-lg text-slate-900 leading-tight",children:b.cropName}),n.jsxs("p",{className:"text-xs text-slate-400 font-medium",children:["Listed ",new Date(b.createdAt).toLocaleDateString()]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-xl font-bold text-nature-700 font-display",children:["",b.pricePerKg,"/kg"]}),n.jsxs("div",{className:"text-[10px] text-slate-400 font-bold",children:["vs ",b.pricePerKg-2," Market"]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 my-4 py-4 border-y border-slate-100 bg-slate-50/50 -mx-5 px-5",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-[10px] text-slate-400 uppercase font-bold tracking-wider mb-1",children:"Available"}),n.jsxs("div",{className:"font-bold text-sm text-slate-700",children:[ra(b.availableQuantity||b.quantity,b.quantityUnit||"kg").toLocaleString()," ",b.quantityUnit||"kg"]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-[10px] text-slate-400 uppercase font-bold tracking-wider mb-1",children:"Grade"}),n.jsxs("div",{className:"font-bold text-sm text-nature-600 flex items-center gap-1",children:[n.jsx(Qa,{className:"w-3 h-3"})," ",b.grade]})]})]}),n.jsxs("div",{className:"mt-auto flex gap-2",children:[n.jsx(se,{variant:"outline",size:"sm",className:"flex-1 h-10 text-xs font-bold border-slate-200",onClick:()=>Dt(b),children:"Edit Details"}),n.jsx("button",{onClick:()=>O(b.id,b.status==="active"?"paused":"active"),className:`h-10 w-10 flex items-center justify-center rounded-xl transition-colors ${b.status==="active"?"bg-slate-100 hover:bg-slate-200 text-slate-600":"bg-green-100 hover:bg-green-200 text-green-600"}`,title:b.status==="active"?"Pause Listing":"Resume Listing",children:b.status==="active"?n.jsx(O_,{className:"w-4 h-4"}):n.jsx(s_,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>{confirm("Are you sure you want to delete this listing?")&&T(b.id)},className:"h-10 w-10 flex items-center justify-center rounded-xl bg-red-50 hover:bg-red-100 text-red-500 transition-colors",title:"Delete Listing",children:n.jsx(wb,{className:"w-4 h-4"})})]})]})]},b.id)}):n.jsxs("div",{className:"col-span-full py-24 text-center border-2 border-dashed border-slate-200 rounded-3xl bg-white/50 backdrop-blur-sm",children:[n.jsx("div",{className:"w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-6 text-slate-300",children:n.jsx(wa,{className:"w-10 h-10"})}),n.jsx("h3",{className:"text-xl font-bold text-slate-700 mb-2",children:"No crops listed yet"}),n.jsx("p",{className:"text-slate-400 text-sm max-w-sm mx-auto",children:"Start by adding your harvest details and photos. We'll help you find the best buyers."})]})})]}),be==="offers"&&n.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Negotiation Center"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Review and compare buyer offers for your stock"})]}),n.jsxs("div",{className:"flex gap-2 p-1 bg-slate-100 rounded-xl",children:[n.jsx("button",{className:"px-4 py-2 bg-white text-slate-900 font-bold text-xs rounded-lg shadow-sm",children:"All Offers"}),n.jsx("button",{className:"px-4 py-2 text-slate-500 font-bold text-xs rounded-lg hover:bg-slate-200",children:"Pending"})]})]}),n.jsx("div",{className:"space-y-4",children:Me.length>0?Me.map(b=>{const E=t.find(Qe=>Qe.id===b.listingId),de=b.pricePerKg>((E==null?void 0:E.pricePerKg)||0),we=b.lastActionBy==="farmer",Ee=we?b.counterPrice:b.offeredPrice||b.pricePerKg,Re=we?b.counterQuantity:b.quantityRequested||b.quantity,Ve=p.find(Qe=>{var Mt;return((Mt=Qe.profile)==null?void 0:Mt.fullName)===b.buyerName});return n.jsx(oe,{className:"p-0 overflow-hidden border-blue-100 hover:border-blue-400 transition-all duration-300 hover:shadow-xl hover:shadow-blue-500/5 group",children:n.jsxs("div",{className:"flex flex-col md:flex-row",children:[n.jsxs("div",{className:"w-full md:w-40 bg-blue-50/50 flex flex-col items-center justify-center p-6 border-r border-blue-100 group-hover:bg-blue-50 transition-colors",children:[n.jsxs("div",{className:"w-16 h-16 bg-white rounded-2xl flex items-center justify-center shadow-lg mb-3 border border-blue-100 relative overflow-hidden group-hover:scale-110 transition-transform",children:[n.jsx("div",{className:"absolute inset-0 bg-blue-600 opacity-0 group-hover:opacity-5 transition-opacity"}),n.jsx("span",{className:"text-2xl font-black text-blue-600 leading-none",children:b.buyerName[0]})]}),n.jsx("div",{className:"text-[10px] font-black text-blue-800 uppercase tracking-widest text-center",children:b.buyerName}),n.jsx("div",{className:"flex items-center gap-1 mt-2",children:[1,2,3,4,5].map(Qe=>n.jsx(lr,{className:"w-2 h-2 text-yellow-500 fill-yellow-500"},Qe))}),n.jsxs("button",{onClick:()=>H((Ve==null?void 0:Ve.id)||"",b.buyerName,b.listingId,void 0,b.id),className:"mt-3 px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded-full text-[10px] font-bold flex items-center gap-1 transition-colors",children:[n.jsx(Xa,{className:"w-3 h-3"})," Chat"]})]}),n.jsxs("div",{className:"flex-1 p-6 md:p-8",children:[n.jsxs("div",{className:"flex flex-wrap justify-between items-start gap-6 mb-6",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h4",{className:"font-bold text-xl text-slate-900 leading-tight",children:E==null?void 0:E.cropName}),n.jsxs("div",{className:"px-3 py-1 bg-slate-100 text-slate-600 rounded-full text-[10px] font-black uppercase tracking-wider",children:["QTY: ",Re,"kg"]})]}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-400 font-medium",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Na,{className:"w-3 h-3"})," Bhopal, MP"]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(wc,{className:"w-3 h-3"})," Received ",new Date(b.createdAt).toLocaleDateString()]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"flex items-center gap-2 justify-end mb-1",children:[n.jsxs("div",{className:`text-3xl font-black tracking-tighter ${de?"text-green-600":"text-blue-600"} font-display`,children:["",Ee,"/kg"]}),de&&!we&&n.jsxs("div",{className:"text-[10px] font-black text-green-600 bg-green-50 px-2 py-0.5 rounded uppercase",children:["+",Ee-((E==null?void 0:E.pricePerKg)||0)]})]}),n.jsxs("div",{className:"text-xs text-slate-400 font-bold uppercase tracking-wider",children:["Total: ",(Ee*Re).toLocaleString()]}),we&&n.jsx("div",{className:"text-[10px] font-bold text-amber-600 bg-amber-50 px-2 py-1 rounded mt-1",children:"Your Counter Offer"})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-100 mb-6 flex flex-col md:flex-row gap-4 items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3 text-xs font-bold text-slate-500",children:[n.jsxs("div",{className:"flex -space-x-2",children:[n.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-100 border-2 border-white flex items-center justify-center text-[8px] text-blue-600",children:""}),n.jsx("div",{className:"w-6 h-6 rounded-full bg-green-100 border-2 border-white flex items-center justify-center text-[8px] text-green-600",children:""})]}),"Doorstep Pickup Included"]}),n.jsxs("div",{className:"flex items-center gap-2 text-xs font-black px-4 py-2 bg-red-50 text-red-600 rounded-xl animate-pulse",children:[n.jsx(wc,{className:"w-3 h-3"})," NEGOTIATION OPEN"]})]}),n.jsx("div",{className:"flex gap-4",children:b.status==="pending"?we?n.jsx("div",{className:"w-full py-3 bg-amber-50 border border-amber-100 text-amber-700 text-center font-bold rounded-2xl text-sm",children:"Waiting for buyer response..."}):n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"flex-1 h-12 text-sm font-black text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-2xl transition-all",onClick:()=>D(b.id),children:"Reject"}),n.jsx(se,{variant:"outline",className:"flex-1 h-12 border-slate-200 text-slate-600 font-black rounded-2xl hover:bg-slate-50",onClick:()=>{var Qe;bs({open:!0,offer:b}),Ds(((Qe=b.offeredPrice)==null?void 0:Qe.toString())||b.pricePerKg.toString())},children:"Counter Offer"}),n.jsx(se,{className:"flex-[2] h-12 bg-blue-600 hover:bg-blue-700 font-black rounded-2xl shadow-xl shadow-blue-600/20 text-sm tracking-wide",onClick:()=>L(b.id),children:"Accept & Start Deal"})]}):n.jsx("div",{className:`w-full py-3 rounded-2xl text-center font-bold text-sm ${b.status==="accepted"?"bg-green-100 text-green-700":b.status==="cancelled"?"bg-slate-100 text-slate-500":"bg-red-100 text-red-700"}`,children:b.status==="accepted"?"Offer Accepted":b.status==="cancelled"?"Negotiation Cancelled":"Offer Rejected"})})]})]})},b.id)}):n.jsxs("div",{className:"py-24 text-center border-2 border-dashed border-slate-200 rounded-3xl bg-white/50 backdrop-blur-sm",children:[n.jsx("div",{className:"w-20 h-20 bg-blue-50 rounded-full flex items-center justify-center mx-auto mb-6 text-blue-300",children:n.jsx(ta,{className:"w-10 h-10"})}),n.jsx("h3",{className:"text-xl font-bold text-slate-700 mb-2",children:"No offers received yet"}),n.jsx("p",{className:"text-slate-400 text-sm max-w-sm mx-auto",children:"Listing your crops at competitive prices helps you get faster offers from verified buyers."})]})})]}),be==="orders"&&n.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Active Orders"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Track your deals from pickup to payment"})]}),n.jsx("div",{className:"space-y-6",children:Y.length>0?Y.map(b=>{var we;const E=(m||[]).find(Ee=>Ee.orderId===b.id),de=E!=null&&E.transporterId?(p||[]).find(Ee=>Ee.id===E.transporterId):null;return n.jsxs(oe,{className:"p-6 border-purple-100 bg-white",children:[n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-4 mb-6",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[n.jsxs("h3",{className:"text-lg font-bold text-slate-900",children:["#",b.id,"  ",b.cropName]}),n.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-wider ${b.status==="delivered"?"bg-green-100 text-green-700":b.status==="in_transit"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:b.status.replace("_"," ")})]}),n.jsxs("p",{className:"text-sm text-slate-500 font-medium",children:["Buyer: ",n.jsx("span",{className:"font-bold text-slate-700",children:b.buyerName}),"  Total Amount: ",n.jsxs("span",{className:"font-bold text-nature-700",children:["",b.totalAmount.toLocaleString()]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(se,{variant:"outline",size:"sm",className:"h-9 text-xs font-bold",onClick:()=>pe(b),children:[n.jsx(jl,{className:"w-4 h-4 mr-2"})," Invoice"]}),n.jsxs(se,{size:"sm",className:"h-9 text-xs font-bold bg-purple-600 hover:bg-purple-700",children:[n.jsx(Na,{className:"w-4 h-4 mr-2"})," Track Pickup"]}),b.paymentStatus==="review"&&n.jsxs(se,{size:"sm",className:"h-9 text-xs font-bold bg-amber-500 hover:bg-amber-600 text-white",onClick:async()=>{confirm(`Buyer has submitted payment proof: ${b.paymentProof}. Confirm receipt?`)&&await(he==null?void 0:he(b.id,"paid"))},children:[n.jsx(vb,{className:"w-4 h-4 mr-2"})," Verify Payment"]})]})]}),n.jsxs("div",{className:"relative pt-2 pb-8 px-2",children:[n.jsx("div",{className:"absolute top-8 left-0 right-0 h-1 bg-slate-100 -z-10"}),n.jsx("div",{className:"absolute top-8 left-0 h-1 bg-nature-500 -z-10 transition-all duration-1000",style:{width:b.status==="delivered"?"100%":b.status==="in_transit"?"66%":"33%"}}),n.jsx("div",{className:"flex justify-between items-start",children:[{label:"Confirmed",desc:"Order placed",status:"confirmed"},{label:"In Transit",desc:"Heading to Mandi",status:"in_transit"},{label:"Delivered",desc:"Delivered & Paid",status:"delivered"}].map((Ee,Re)=>{const Ve=b.status===Ee.status||Ee.status==="confirmed"&&(b.status==="in_transit"||b.status==="delivered")||Ee.status==="in_transit"&&b.status==="delivered";return b.status,Ee.status,n.jsxs("div",{className:"flex flex-col items-center flex-1",children:[n.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center border-4 ${Ve?"bg-nature-500 border-nature-100 text-white":"bg-white border-slate-100 text-slate-300"} transition-colors shadow-sm`,children:Ve?n.jsx(cc,{className:"w-6 h-6"}):n.jsx("div",{className:"w-3 h-3 bg-slate-100 rounded-full"})}),n.jsxs("div",{className:"mt-3 text-center",children:[n.jsx("div",{className:`text-xs font-black uppercase tracking-wider ${Ve?"text-nature-700":"text-slate-400"}`,children:Ee.label}),n.jsx("div",{className:"text-[10px] text-slate-400 font-medium",children:Ee.desc})]})]},Re)})})]}),n.jsxs("div",{className:"mt-4 p-4 bg-slate-50 rounded-2xl border border-slate-100 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-white rounded-xl flex items-center justify-center shadow-sm",children:n.jsx(gs,{className:"w-5 h-5 text-slate-400"})}),n.jsxs("div",{children:[n.jsx("div",{className:"text-[10px] text-slate-400 font-black uppercase",children:"Transport"}),!E&&n.jsx("div",{className:"text-sm font-bold text-slate-700",children:"Not requested yet"}),E&&n.jsxs("div",{className:"text-sm font-bold text-slate-700",children:[String(E.mode).replace("_"," "),"  ",String(E.status).replace("_"," "),"  ",E.finalFare??E.estimatedFare]}),(E==null?void 0:E.pickupOtp)&&E.status!=="picked_up"&&E.status!=="delivered"&&E.status!=="open"&&n.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Pickup OTP: ",n.jsx("span",{className:"font-black text-slate-800",children:E.pickupOtp})]}),de&&n.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Assigned: ",n.jsx("span",{className:"font-bold text-slate-700",children:((we=de.profile)==null?void 0:we.fullName)||de.phone})]})]})]}),(E==null?void 0:E.status)==="awaiting_farmer"&&n.jsx("div",{className:"flex gap-2",children:n.jsx(se,{className:"h-10 bg-nature-600 hover:bg-nature-700 text-xs font-black flex-1",onClick:()=>{B==null||B(E.id,""),alert("Broadcasted to all transporters! Waiting for bids...")},children:"Broadcast Request"})})]})]},b.id)}):n.jsxs("div",{className:"py-24 text-center border-2 border-dashed border-slate-200 rounded-3xl bg-white/50 backdrop-blur-sm",children:[n.jsx("div",{className:"w-20 h-20 bg-purple-50 rounded-full flex items-center justify-center mx-auto mb-6 text-purple-300",children:n.jsx(gs,{className:"w-10 h-10"})}),n.jsx("h3",{className:"text-xl font-bold text-slate-700 mb-2",children:"No active orders"}),n.jsx("p",{className:"text-slate-400 text-sm max-w-sm mx-auto",children:"Once an offer is accepted, it will appear here for logistics tracking."})]})})]}),be==="history"&&n.jsxs("div",{className:"space-y-8 animate-in slide-in-from-right-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-slate-900",children:"Sales History"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Your seasonal performance summary and earnings"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-xl text-xs font-bold text-slate-600 hover:bg-slate-50 transition-colors",children:[n.jsx(m_,{className:"w-4 h-4"})," Filter Season"]}),n.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-xl text-xs font-bold shadow-lg shadow-slate-900/10 hover:bg-slate-800 transition-colors",children:[n.jsx(u_,{className:"w-4 h-4"})," Export Ledger"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsxs(oe,{className:"p-6 border-nature-100 bg-nature-50/10 relative overflow-hidden group",children:[n.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:scale-125 transition-transform",children:n.jsx(jc,{className:"w-20 h-20 text-nature-600"})}),n.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Seasonal Earnings"}),n.jsxs("div",{className:"text-3xl font-black text-slate-900 tracking-tighter",children:["",ae.reduce((b,E)=>b+E.amount,0).toLocaleString()]}),n.jsxs("div",{className:"text-[10px] text-green-600 font-black mt-2 flex items-center gap-1 uppercase tracking-tighter",children:[n.jsx(Ji,{className:"w-3 h-3"})," +12% Compared to 2023"]})]}),n.jsxs(oe,{className:"p-6 border-blue-100 bg-blue-50/10 relative overflow-hidden group",children:[n.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:scale-125 transition-transform",children:n.jsx(wa,{className:"w-20 h-20 text-blue-600"})}),n.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Total Stock Sold"}),n.jsxs("div",{className:"text-3xl font-black text-slate-900 tracking-tighter",children:[ae.reduce((b,E)=>b+(E.quantity||0),0)," ",n.jsx("span",{className:"text-lg font-bold text-slate-400 uppercase",children:"kg"})]}),n.jsxs("div",{className:"text-[10px] text-blue-600 font-black mt-2 flex items-center gap-1 uppercase tracking-tighter",children:[n.jsx(wa,{className:"w-3 h-3"})," High Demand Season"]})]}),n.jsxs(oe,{className:"p-6 border-orange-100 bg-orange-50/10 relative overflow-hidden group",children:[n.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:scale-125 transition-transform",children:n.jsx(HS,{className:"w-20 h-20 text-orange-600"})}),n.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Avg. Sale Price"}),n.jsxs("div",{className:"text-3xl font-black text-slate-900 tracking-tighter",children:["32",n.jsx("span",{className:"text-lg font-bold text-slate-400",children:"/kg"})]}),n.jsxs("div",{className:"text-[10px] text-orange-600 font-black mt-2 flex items-center gap-1 uppercase tracking-tighter",children:[n.jsx(Qa,{className:"w-3 h-3"})," 15% Above MSP"]})]}),n.jsxs(oe,{className:"p-6 border-purple-100 bg-purple-50/10 relative overflow-hidden group",children:[n.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:scale-125 transition-transform",children:n.jsx(si,{className:"w-20 h-20 text-purple-600"})}),n.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Buyer Trust"}),n.jsxs("div",{className:"text-3xl font-black text-slate-900 tracking-tighter",children:["4.9",n.jsx("span",{className:"text-lg font-bold text-slate-400",children:"/5"})]}),n.jsxs("div",{className:"text-[10px] text-purple-600 font-black mt-2 flex items-center gap-1 uppercase tracking-tighter",children:[n.jsx(lr,{className:"w-3 h-3 fill-purple-600"})," Top Rated Farmer"]})]})]}),n.jsxs(oe,{className:"overflow-hidden border-slate-200",children:[n.jsxs("div",{className:"p-6 bg-slate-50 border-b border-slate-200 flex justify-between items-center",children:[n.jsx("h3",{className:"font-bold text-slate-800",children:"Recent Transactions"}),n.jsx("button",{className:"text-xs font-black text-nature-600 hover:underline uppercase tracking-widest",children:"View Full Statement"})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-left",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-white border-b border-slate-100 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[n.jsx("th",{className:"px-6 py-4",children:"Transaction Details"}),n.jsx("th",{className:"px-6 py-4",children:"Quantity"}),n.jsx("th",{className:"px-6 py-4",children:"Price/kg"}),n.jsx("th",{className:"px-6 py-4",children:"Total Amount"}),n.jsx("th",{className:"px-6 py-4",children:"Status"})]})}),n.jsx("tbody",{children:ae.map((b,E)=>n.jsxs("tr",{className:"hover:bg-slate-50 transition-colors border-b border-slate-50",children:[n.jsxs("td",{className:"px-6 py-5",children:[n.jsx("div",{className:"font-bold text-slate-800",children:b.itemName}),n.jsxs("div",{className:"text-[10px] text-slate-400 font-bold",children:[b.date,"  ",b.type]})]}),n.jsxs("td",{className:"px-6 py-5 font-bold text-slate-700",children:[b.quantity," kg"]}),n.jsxs("td",{className:"px-6 py-5 font-bold text-slate-700",children:["",b.quantity?Math.round(b.amount/b.quantity):"","/kg"]}),n.jsxs("td",{className:"px-6 py-5 font-black text-nature-700",children:["",b.amount.toLocaleString()]}),n.jsx("td",{className:"px-6 py-5",children:n.jsx("span",{className:"px-2 py-1 bg-green-50 text-green-700 rounded text-[9px] font-black uppercase tracking-wider border border-green-100",children:"Settled"})})]},b.id))})]})})]})]}),be==="profile"&&n.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-slate-900",children:"Kisan Profile"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Your digital farm identity on KisanSetu"})]}),n.jsxs("div",{className:"flex gap-2 p-1 bg-slate-100 rounded-xl",children:[n.jsx("button",{onClick:()=>Et("overview"),className:`px-4 py-2 text-xs font-bold rounded-lg transition-all ${$t==="overview"?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:bg-slate-200"}`,children:"Overview"}),n.jsx("button",{onClick:()=>{Et("edit"),vt(s.profile)},className:`px-4 py-2 text-xs font-bold rounded-lg transition-all ${$t==="edit"?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:bg-slate-200"}`,children:"Edit Profile"})]})]}),$t==="overview"&&n.jsxs("div",{className:"grid md:grid-cols-3 gap-6 animate-in slide-in-from-right-4",children:[n.jsx(oe,{className:"md:col-span-3 p-0 overflow-hidden border-nature-100",children:n.jsxs("div",{className:"bg-gradient-to-r from-nature-600 to-nature-700 p-8 text-white relative overflow-hidden",children:[n.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/5 rounded-full -translate-y-1/2 translate-x-1/2"}),n.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6 relative z-10",children:[n.jsx("div",{className:"w-24 h-24 bg-white/20 rounded-2xl flex items-center justify-center text-4xl font-black border-4 border-white/30 shadow-xl",children:s.profile.fullName[0]}),n.jsxs("div",{className:"text-center md:text-left flex-1",children:[n.jsx("h3",{className:"text-2xl font-bold",children:s.profile.fullName}),n.jsxs("p",{className:"text-nature-100 flex items-center justify-center md:justify-start gap-2 mt-1",children:[n.jsx(Na,{className:"w-4 h-4"})," ",s.profile.village,", ",s.profile.district,", ",s.profile.state]}),n.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-4 mt-4",children:[n.jsxs("div",{className:"flex items-center gap-1 text-yellow-300",children:[[1,2,3,4,5].map(b=>n.jsx(lr,{className:`w-4 h-4 ${b<=(s.profile.rating||5)?"fill-yellow-300":"fill-white/20"}`},b)),n.jsx("span",{className:"ml-1 text-white text-sm font-bold",children:s.profile.rating||5})]}),n.jsxs("span",{className:"text-xs bg-white/20 px-3 py-1 rounded-full font-bold",children:["Member since ",new Date(s.profile.memberSince||s.createdAt).getFullYear()]})]})]}),n.jsxs(se,{variant:"outline",className:"border-white/30 text-white hover:bg-white/10",onClick:()=>Et("edit"),children:[n.jsx(R_,{className:"w-4 h-4 mr-2"})," Edit Profile"]})]})]})}),n.jsxs(oe,{className:"border-slate-200 hover:shadow-lg transition-shadow",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-10 h-10 bg-nature-100 rounded-xl flex items-center justify-center text-nature-600",children:n.jsx(Mx,{className:"w-5 h-5"})}),n.jsx("h4",{className:"font-bold text-slate-800",children:"Farm Details"})]}),n.jsxs("div",{className:"space-y-3 text-sm",children:[n.jsxs("div",{className:"flex justify-between py-2 border-b border-slate-100",children:[n.jsx("span",{className:"text-slate-500",children:"Total Land"}),n.jsxs("span",{className:"font-bold text-slate-700",children:[s.profile.totalLandArea||""," ",s.profile.landUnit||"Acres"]})]}),n.jsxs("div",{className:"flex justify-between py-2 border-b border-slate-100",children:[n.jsx("span",{className:"text-slate-500",children:"Land Type"}),n.jsx("span",{className:"font-bold text-slate-700",children:s.profile.landType||"Not specified"})]}),n.jsxs("div",{className:"flex justify-between py-2 border-b border-slate-100",children:[n.jsx("span",{className:"text-slate-500",children:"Irrigation"}),n.jsx("span",{className:"font-bold text-slate-700",children:s.profile.irrigationSource||"Not specified"})]}),n.jsxs("div",{className:"flex justify-between py-2",children:[n.jsx("span",{className:"text-slate-500",children:"Soil Type"}),n.jsx("span",{className:"font-bold text-slate-700",children:s.profile.soilType||"Not specified"})]})]})]}),n.jsxs(oe,{className:"border-slate-200 hover:shadow-lg transition-shadow",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-xl flex items-center justify-center text-orange-600",children:n.jsx(Ox,{className:"w-5 h-5"})}),n.jsx("h4",{className:"font-bold text-slate-800",children:"Crops & Practices"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Current Crops"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:s.profile.currentCrops&&s.profile.currentCrops.length>0?s.profile.currentCrops.map((b,E)=>n.jsx("span",{className:"px-3 py-1 bg-nature-50 text-nature-700 rounded-full text-xs font-bold border border-nature-100",children:b},E)):n.jsx("span",{className:"text-slate-400 text-xs",children:"No crops added"})})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Farming Practices"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:s.profile.farmingPractices&&s.profile.farmingPractices.length>0?s.profile.farmingPractices.map((b,E)=>n.jsxs("span",{className:"px-3 py-1 bg-green-50 text-green-700 rounded-full text-xs font-bold border border-green-100 flex items-center gap-1",children:[n.jsx(Ex,{className:"w-3 h-3"}),b]},E)):n.jsx("span",{className:"text-slate-400 text-xs",children:"No practices specified"})})]})]})]}),n.jsxs(oe,{className:"border-slate-200 hover:shadow-lg transition-shadow",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-xl flex items-center justify-center text-purple-600",children:n.jsx(Qa,{className:"w-5 h-5"})}),n.jsx("h4",{className:"font-bold text-slate-800",children:"Trust & Stats"})]}),n.jsxs("div",{className:"space-y-3 text-sm",children:[n.jsxs("div",{className:"flex justify-between py-2 border-b border-slate-100",children:[n.jsx("span",{className:"text-slate-500",children:"Total Sales"}),n.jsxs("span",{className:"font-bold text-nature-700",children:["",(s.profile.totalSales||0).toLocaleString()]})]}),n.jsxs("div",{className:"flex justify-between py-2 border-b border-slate-100",children:[n.jsx("span",{className:"text-slate-500",children:"Active Listings"}),n.jsx("span",{className:"font-bold text-slate-700",children:re.filter(b=>b.status==="active").length})]}),n.jsxs("div",{className:"flex justify-between py-2 border-b border-slate-100",children:[n.jsx("span",{className:"text-slate-500",children:"Completed Orders"}),n.jsx("span",{className:"font-bold text-slate-700",children:Y.filter(b=>b.status==="delivered").length})]}),n.jsxs("div",{className:"flex justify-between py-2",children:[n.jsx("span",{className:"text-slate-500",children:"Profile Completion"}),n.jsxs("span",{className:"font-bold text-blue-600",children:[Rt(s.profile),"%"]})]})]})]})]}),$t==="edit"&&n.jsx("div",{className:"animate-in slide-in-from-right-4",children:n.jsxs(oe,{className:"border-slate-200 p-0 overflow-hidden",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50",children:[n.jsx("h3",{className:"font-bold text-slate-900",children:"Edit Your Profile"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Update your farm identity and details"})]}),n.jsxs("div",{className:"p-6 space-y-8",children:[n.jsxs("div",{children:[n.jsxs("h4",{className:"text-sm font-bold text-slate-800 mb-4 flex items-center gap-2",children:[n.jsx(si,{className:"w-4 h-4 text-slate-400"})," Personal Information"]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsx(fe,{label:"Full Name",value:Fe.fullName,onChange:b=>vt({...Fe,fullName:b.target.value})}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Language"}),n.jsxs("select",{className:"w-full h-12 bg-white border border-slate-300 rounded-xl px-3 outline-none",value:Fe.language,onChange:b=>vt({...Fe,language:b.target.value}),children:[n.jsx("option",{children:"English"}),n.jsx("option",{children:"Hindi"}),n.jsx("option",{children:"Marathi"}),n.jsx("option",{children:"Gujarati"}),n.jsx("option",{children:"Tamil"})]})]})]})]}),n.jsxs("div",{children:[n.jsxs("h4",{className:"text-sm font-bold text-slate-800 mb-4 flex items-center gap-2",children:[n.jsx(Na,{className:"w-4 h-4 text-slate-400"})," Location"]}),n.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[n.jsx(fe,{label:"Village",value:Fe.village,onChange:b=>vt({...Fe,village:b.target.value})}),n.jsx(fe,{label:"District",value:Fe.district,onChange:b=>vt({...Fe,district:b.target.value})}),n.jsx(fe,{label:"State",value:Fe.state,onChange:b=>vt({...Fe,state:b.target.value})}),n.jsx(fe,{label:"Pincode",value:Fe.pincode||"",onChange:b=>vt({...Fe,pincode:b.target.value})})]})]}),n.jsxs("div",{children:[n.jsxs("h4",{className:"text-sm font-bold text-slate-800 mb-4 flex items-center gap-2",children:[n.jsx(Mx,{className:"w-4 h-4 text-slate-400"})," Farm Details"]}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"flex-1",children:n.jsx(fe,{label:"Total Land Area",value:Fe.totalLandArea||"",onChange:b=>vt({...Fe,totalLandArea:b.target.value})})}),n.jsxs("div",{className:"w-28 space-y-1",children:[n.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Unit"}),n.jsxs("select",{className:"w-full h-12 bg-white border border-slate-300 rounded-xl px-3 outline-none",value:Fe.landUnit||"Acres",onChange:b=>vt({...Fe,landUnit:b.target.value}),children:[n.jsx("option",{children:"Acres"}),n.jsx("option",{children:"Hectares"})]})]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Land Type"}),n.jsxs("select",{className:"w-full h-12 bg-white border border-slate-300 rounded-xl px-3 outline-none",value:Fe.landType||"",onChange:b=>vt({...Fe,landType:b.target.value}),children:[n.jsx("option",{value:"",children:"Select"}),n.jsx("option",{children:"Owned"}),n.jsx("option",{children:"Leased"}),n.jsx("option",{children:"Mixed"})]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Irrigation Source"}),n.jsxs("select",{className:"w-full h-12 bg-white border border-slate-300 rounded-xl px-3 outline-none",value:Fe.irrigationSource||"",onChange:b=>vt({...Fe,irrigationSource:b.target.value}),children:[n.jsx("option",{value:"",children:"Select"}),n.jsx("option",{children:"Rain-fed"}),n.jsx("option",{children:"Borewell"}),n.jsx("option",{children:"Canal"}),n.jsx("option",{children:"Drip"})]})]}),n.jsx(fe,{label:"Soil Type",value:Fe.soilType||"",onChange:b=>vt({...Fe,soilType:b.target.value})})]})]}),n.jsxs("div",{children:[n.jsxs("h4",{className:"text-sm font-bold text-slate-800 mb-4 flex items-center gap-2",children:[n.jsx(Ox,{className:"w-4 h-4 text-slate-400"})," Crops"]}),n.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:n.jsx(fe,{label:"Current Crops (comma-separated)",placeholder:"Wheat, Rice, Soybean",value:((ge=Fe.currentCrops)==null?void 0:ge.join(", "))||"",onChange:b=>vt({...Fe,currentCrops:b.target.value.split(",").map(E=>E.trim()).filter(E=>E)})})})]}),n.jsxs("div",{children:[n.jsxs("h4",{className:"text-sm font-bold text-slate-800 mb-4 flex items-center gap-2",children:[n.jsx(Ex,{className:"w-4 h-4 text-slate-400"})," Farming Practices"]}),n.jsx("div",{className:"flex flex-wrap gap-4",children:["Organic","Natural","Conventional","Zero Budget"].map(b=>{var E;return n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-nature-600 rounded",checked:((E=Fe.farmingPractices)==null?void 0:E.includes(b))||!1,onChange:de=>{const we=Fe.farmingPractices||[];vt({...Fe,farmingPractices:de.target.checked?[...we,b]:we.filter(Ee=>Ee!==b)})}}),n.jsx("span",{className:"text-sm font-medium text-slate-700",children:b})]},b)})})]})]}),n.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex justify-end gap-3",children:[n.jsx(se,{variant:"ghost",onClick:()=>Et("overview"),children:"Cancel"}),n.jsxs(se,{className:"bg-nature-600 hover:bg-nature-700",onClick:()=>{U(s.id,Fe),Et("overview")},children:[n.jsx(V_,{className:"w-4 h-4 mr-2"})," Save Changes"]})]})]})})]})]}),is&&n.jsx("div",{className:"fixed inset-0 z-[120] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",children:n.jsxs(oe,{className:"w-full max-w-5xl overflow-hidden relative bg-white",children:[n.jsx("button",{onClick:()=>Xt(!1),className:"absolute top-3 right-3 bg-white/80 rounded-full p-2 text-slate-700 border border-slate-200",children:n.jsx(xs,{className:"w-5 h-5"})}),n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"relative h-[60vh] bg-black rounded-xl overflow-hidden",children:[n.jsx(G,{assets:F,heightClass:"h-[60vh]",onOpen:b=>y(b)}),n.jsx("div",{className:"absolute bottom-3 left-0 right-0 flex justify-center gap-2",children:F.map((b,E)=>n.jsx("span",{className:`w-2 h-2 rounded-full ${E===ee?"bg-white":"bg-white/50"}`},E))})]}),n.jsx("div",{className:"mt-4 flex gap-2 overflow-x-auto",children:F.map((b,E)=>n.jsx("button",{onClick:()=>y(E),className:`w-20 h-14 rounded-lg overflow-hidden border ${E===ee?"border-nature-600":"border-slate-200"}`,children:b.type==="image"?n.jsx("img",{src:b.src,className:"w-full h-full object-cover"}):n.jsx("video",{src:b.src,poster:b.poster,className:"w-full h-full object-cover"})},E))})]})]})}),ve&&n.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-md animate-in fade-in duration-300",children:n.jsxs(oe,{className:"w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col shadow-2xl relative border-nature-200 bg-white",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-1.5 bg-nature-600"}),n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-white",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-nature-600 bg-nature-50 px-2 py-0.5 rounded",children:"Crop Wizard"}),n.jsx("h3",{className:"text-xl font-bold text-slate-900",children:De===1?"Step 1: Visuals & Analysis":"Step 2: Logistics & Details"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"h-1.5 w-32 bg-slate-100 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-nature-600 transition-all duration-500",style:{width:De===1?"50%":"100%"}})}),n.jsxs("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-tight",children:["Progress: ",De===1?"50%":"100%"]})]})]}),n.jsx("button",{onClick:()=>Te(!1),className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 hover:text-slate-900 transition-colors",children:n.jsx(xs,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6 md:p-8",children:De===1?n.jsxs("div",{className:"grid md:grid-cols-2 gap-12 animate-in slide-in-from-bottom-4",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-end",children:[n.jsxs("label",{className:"text-xs font-black uppercase tracking-widest text-slate-400",children:["Crop Gallery (",ce.length,"/5)"]}),ce.length<5&&n.jsxs("button",{onClick:()=>{var b;return(b=document.getElementById("add-more-images"))==null?void 0:b.click()},className:"text-xs font-bold text-nature-600 flex items-center gap-1 hover:underline",children:[n.jsx(uc,{className:"w-3 h-3"})," Add More"]}),n.jsx("input",{type:"file",id:"add-more-images",className:"hidden",accept:"image/*",multiple:!0,onChange:k})]}),n.jsxs("div",{className:"flex justify-between items-end",children:[n.jsxs("label",{className:"text-xs font-black uppercase tracking-widest text-slate-400",children:["Crop Video ",xe?"( 60s)":""]}),!xe&&n.jsxs("button",{onClick:()=>{var b;return(b=document.getElementById("add-video"))==null?void 0:b.click()},className:"text-xs font-bold text-nature-600 flex items-center gap-1 hover:underline",children:[n.jsx(uc,{className:"w-3 h-3"})," Add Video ( 60s)"]}),n.jsx("input",{type:"file",id:"add-video",className:"hidden",accept:"video/mp4,video/webm",onChange:X})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[ce.map((b,E)=>n.jsxs("div",{className:`relative aspect-square rounded-2xl overflow-hidden border-2 transition-all ${E===0?"col-span-2 aspect-[2/1] border-nature-500 shadow-lg":"border-slate-100"}`,children:[n.jsx("img",{src:b,className:"w-full h-full object-cover"}),E===0&&n.jsx("span",{className:"absolute top-2 left-2 px-2 py-0.5 bg-nature-600 text-white text-[8px] font-black uppercase rounded shadow-md",children:"Main Photo"}),n.jsx("button",{onClick:()=>Oe(de=>de.filter((we,Ee)=>Ee!==E)),className:"absolute top-2 right-2 p-1.5 bg-white/90 backdrop-blur-sm rounded-full text-slate-400 hover:text-red-500 shadow-sm opacity-0 group-hover:opacity-100 transition-opacity",children:n.jsx(xs,{className:"w-3 h-3"})})]},E)),ce.length===0&&n.jsxs("div",{className:"col-span-2 aspect-[2/1] border-2 border-dashed border-slate-200 rounded-2xl flex flex-col items-center justify-center text-slate-300",children:[n.jsx(FS,{className:"w-10 h-10 mb-2"}),n.jsx("span",{className:"text-sm font-bold",children:"Upload visuals to begin"})]})]}),xe&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"text-xs text-slate-500 font-bold uppercase",children:"Video Preview"}),n.jsx("video",{src:xe.url,poster:xe.thumbnail,controls:!0,playsInline:!0,preload:"metadata",className:"w-full h-40 bg-black rounded-xl"}),n.jsxs("div",{className:"text-[10px] text-slate-400 font-bold",children:["Duration: ",xe.durationSec,"s  Size: ",(xe.sizeBytes/(1024*1024)).toFixed(1),"MB  Type: ",xe.type]}),n.jsx("div",{className:"flex gap-2",children:n.jsx(se,{variant:"outline",onClick:()=>{URL.revokeObjectURL(xe.url),C(null)},children:"Remove Video"})})]})]}),n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"p-6 bg-nature-50/50 rounded-3xl border border-nature-100 relative overflow-hidden",children:[n.jsx("div",{className:"absolute top-2 right-2 opacity-5",children:n.jsx(dT,{className:"w-16 h-16 text-nature-600 fill-nature-600"})}),n.jsxs("h4",{className:"flex items-center gap-2 text-sm font-black text-nature-800 uppercase tracking-widest mb-6",children:[n.jsx(MS,{className:"w-4 h-4"})," AI Crop Verification"]}),yt?n.jsxs("div",{className:"py-12 flex flex-col items-center justify-center",children:[n.jsx("div",{className:"w-10 h-10 border-4 border-nature-600/20 border-t-nature-600 rounded-full animate-spin mb-4"}),n.jsx("span",{className:"text-xs font-bold text-slate-500",children:"Scanning visuals for quality markers..."})]}):J?n.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] uppercase font-black text-slate-400",children:"Identified Crop"}),n.jsx("input",{className:"w-full bg-white border-none rounded-xl px-3 py-2 text-sm font-bold shadow-sm outline-nature-500",value:J.cropName,onChange:b=>me({...J,cropName:b.target.value})})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] uppercase font-black text-slate-400",children:"Detected Grade"}),n.jsxs("select",{className:"w-full bg-white border-none rounded-xl px-3 py-2 text-sm font-bold shadow-sm outline-nature-500 appearance-none",value:J.grade,onChange:b=>me({...J,grade:b.target.value}),children:[n.jsx("option",{value:"A",children:"Grade A (Premium)"}),n.jsx("option",{value:"B",children:"Grade B (Standard)"}),n.jsx("option",{value:"C",children:"Grade C (Processing)"})]})]})]}),n.jsxs("div",{className:"p-4 bg-white rounded-2xl border border-nature-100",children:[n.jsx("label",{className:"text-[10px] uppercase font-black text-slate-400 block mb-2",children:"Quality Summary"}),n.jsxs("p",{className:"text-sm text-slate-600 italic leading-relaxed",children:['"',J.qualityDescription,'"']})]}),n.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-green-600 bg-green-50 w-fit px-3 py-1 rounded-full border border-green-100",children:[n.jsx(Qa,{className:"w-3 h-3"})," VERIFIED BY GEMINI PRO VISION"]})]}):n.jsx("div",{className:"py-12 text-center text-slate-400",children:n.jsx("p",{className:"text-xs font-medium",children:"AI analysis will appear once images are loaded."})})]}),n.jsxs("div",{className:"p-6 bg-slate-900 rounded-3xl text-white relative overflow-hidden",children:[n.jsx("div",{className:"absolute top-0 right-0 p-4 transform translate-x-4 -translate-y-4 opacity-10",children:n.jsx(ic,{className:"w-20 h-20"})}),n.jsx("h5",{className:"font-bold text-lg mb-2 flex items-center gap-2",children:"Listing Tip"}),n.jsx("p",{className:"text-slate-400 text-xs leading-relaxed",children:"High-quality, well-lit photos can increase your chance of getting premium offers by up to 40%. Ensure you capture different angles of the produce."})]})]})]}):n.jsx("div",{className:"animate-in slide-in-from-right-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Variety / Type"}),n.jsx(fe,{placeholder:"e.g. Sharbati, Hybrid-7",value:ye.variety,onChange:b=>nt({...ye,variety:b.target.value})}),n.jsx("p",{className:"text-[9px] text-slate-400 mt-1",children:"Specific variety helps buyers find the right produce."})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Available Quantity"}),n.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[n.jsx(fe,{type:"number",placeholder:"500",value:ye.quantity,onChange:b=>nt({...ye,quantity:b.target.value})}),n.jsxs("select",{className:"w-full h-11 bg-slate-50 border border-slate-200 rounded-xl px-4 text-sm font-medium outline-nature-500",value:ye.quantityUnit,onChange:b=>nt({...ye,quantityUnit:b.target.value}),children:[n.jsx("option",{value:"kg",children:"KG"}),n.jsx("option",{value:"quintal",children:"Quintal"}),n.jsx("option",{value:"ton",children:"Ton"}),n.jsx("option",{value:"gram",children:"Gram"})]}),n.jsxs("div",{className:"flex items-center text-[10px] text-slate-400 font-bold",children:[" ",ye.quantity?Rs(Number(ye.quantity),ye.quantityUnit).toLocaleString():"0"," kg"]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Expected Price"}),n.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[n.jsx(fe,{type:"number",placeholder:"30",value:ye.price,onChange:b=>nt({...ye,price:b.target.value})}),n.jsxs("select",{className:"w-full h-11 bg-slate-50 border border-slate-200 rounded-xl px-4 text-sm font-medium outline-nature-500",value:ye.priceUnit,onChange:b=>nt({...ye,priceUnit:b.target.value}),children:[n.jsx("option",{value:"per_kg",children:"/KG"}),n.jsx("option",{value:"per_quintal",children:"/Quintal"}),n.jsx("option",{value:"per_ton",children:"/Ton"}),n.jsx("option",{value:"per_gram",children:"/Gram"})]}),n.jsxs("div",{className:"flex items-center text-[10px] text-slate-400 font-bold",children:[" ",ye.price?Ms(Number(ye.price),ye.priceUnit).toLocaleString():"0","/kg"]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Harvest Date"}),n.jsx(fe,{type:"date",value:ye.harvestDate,onChange:b=>nt({...ye,harvestDate:b.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Available For Sale From"}),n.jsx(fe,{type:"date",value:ye.availableDate,onChange:b=>nt({...ye,availableDate:b.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Storage Environment"}),n.jsxs("select",{className:"w-full h-11 bg-slate-50 border border-slate-200 rounded-xl px-4 text-sm font-medium outline-nature-500",value:ye.storageType,onChange:b=>nt({...ye,storageType:b.target.value}),children:[n.jsx("option",{value:"Ambient",children:"Ambient / Room Temp"}),n.jsx("option",{value:"Cold Storage",children:"Cold Storage"}),n.jsx("option",{value:"Hermetic Bag",children:"Hermetic Bag"}),n.jsx("option",{value:"Open Sacks",children:"Open Sacks"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Moisture Content (%)"}),n.jsx(fe,{type:"number",placeholder:"12.5",value:ye.moistureContent,onChange:b=>nt({...ye,moistureContent:b.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Min. Order Qty"}),n.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[n.jsx(fe,{type:"number",placeholder:"50",value:ye.minOrderQuantity,onChange:b=>nt({...ye,minOrderQuantity:b.target.value})}),n.jsxs("select",{className:"w-full h-11 bg-slate-50 border border-slate-200 rounded-xl px-4 text-sm font-medium outline-nature-500",value:ye.minOrderQuantityUnit,onChange:b=>nt({...ye,minOrderQuantityUnit:b.target.value}),children:[n.jsx("option",{value:"kg",children:"KG"}),n.jsx("option",{value:"quintal",children:"Quintal"}),n.jsx("option",{value:"ton",children:"Ton"}),n.jsx("option",{value:"gram",children:"Gram"})]}),n.jsxs("div",{className:"flex items-center text-[10px] text-slate-400 font-bold",children:[" ",ye.minOrderQuantity?Rs(Number(ye.minOrderQuantity),ye.minOrderQuantityUnit).toLocaleString():"0"," kg"]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Packaging Details"}),n.jsx(fe,{placeholder:"e.g. 50kg Jute Bags",value:ye.packagingDetails,onChange:b=>nt({...ye,packagingDetails:b.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Certifications"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(fe,{placeholder:"e.g. Organic, FSSAI",value:ht,onChange:b=>Ct(b.target.value)}),n.jsx(se,{className:"h-11",onClick:()=>{const b=ht.split(",").map(E=>E.trim()).filter(Boolean);b.length&&(nt(E=>({...E,certification:Array.from(new Set([...E.certification||[],...b]))})),Ct(""))},children:"Add"})]}),n.jsx("div",{className:"flex gap-2 flex-wrap",children:(ye.certification||[]).map((b,E)=>n.jsxs("span",{className:"px-2 py-1 bg-slate-100 rounded text-xs font-bold text-slate-600 flex items-center gap-2",children:[b,n.jsx("button",{onClick:()=>nt(de=>({...de,certification:(de.certification||[]).filter(we=>we!==b)})),className:"text-slate-400 hover:text-red-500","aria-label":`Remove ${b}`,children:n.jsx(xs,{className:"w-3 h-3"})})]},E))})]}),n.jsxs("div",{className:"lg:col-span-3 space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Public Marketplace Description"}),n.jsx("textarea",{className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 text-sm font-medium outline-nature-500 min-h-[100px]",placeholder:"Describe the aroma, texture, and quality of your produce. Why should a buyer choose yours?",value:ye.description,onChange:b=>nt({...ye,description:b.target.value})})]})]})})}),n.jsxs("div",{className:"p-6 border-t border-slate-100 flex justify-between items-center bg-white",children:[n.jsxs(se,{variant:"ghost",onClick:()=>De===1?Te(!1):He(1),className:"font-bold flex items-center gap-2",children:[n.jsx(cr,{className:"w-4 h-4"})," ",De===1?"Cancel":"Previous Step"]}),n.jsx(se,{className:"rounded-full px-12 h-12 shadow-xl shadow-nature-600/20 font-black tracking-wide",onClick:()=>De===1?He(2):le(),disabled:ce.length===0&&!xe||yt,children:De===1?n.jsxs(n.Fragment,{children:["Next Step ",n.jsx(ii,{className:"w-4 h-4 ml-2"})]}):n.jsxs(n.Fragment,{children:["Publish Crop Listing ",n.jsx(Ya,{className:"w-4 h-4 ml-2"})]})})]})]})}),jt.open&&jt.offer&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4",children:n.jsxs(oe,{className:"w-full max-w-md shadow-2xl relative bg-white p-6",children:[n.jsx("h3",{className:"text-xl font-bold mb-4",children:"Counter Offer"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Price per kg ()"}),n.jsx(fe,{type:"number",value:Vt,onChange:b=>Ds(b.target.value),className:"font-bold text-lg"}),n.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["Buyer offered: ",jt.offer.offeredPrice||jt.offer.pricePerKg]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(se,{variant:"outline",className:"flex-1",onClick:()=>bs({open:!1,offer:null}),children:"Cancel"}),n.jsx(se,{className:"flex-1 bg-blue-600 hover:bg-blue-700 font-bold",onClick:()=>{console.log("Sending Farmer Counter:",jt.offer.id,Vt),M(jt.offer.id,Number(Vt),jt.offer.quantityRequested||jt.offer.quantity,"farmer"),bs({open:!1,offer:null})},children:"Send Counter"})]})]})]})})]})]})},gE=({user:s,listings:t,offers:i,orders:l,messages:c,rfqs:u,transportRequests:h,transportBids:m,allUsers:p,onAddRfq:g,onSendMessage:x,onPlaceOffer:w,onAcceptOffer:N,onCounterOffer:_,onCancelOffer:T,onLogout:U,onUpdateProfile:O,onRaiseDispute:L,onCreateTransportRequest:D,onAcceptTransportBid:M,onCounterTransportBid:ie,onUpdateTransportRequest:ue,onOpenChat:B,onViewInvoice:H,onUpdateOrderPayment:pe,onDirectBuy:he})=>{var Mt,Hs,pa,ga;const[be,Le]=q.useState("home"),[st,gt]=q.useState(""),[re,Me]=q.useState(null),[Y,ae]=q.useState(!1),[ce,Oe]=q.useState({quantity:0,price:0}),[xe,C]=q.useState(!1),[J,me]=q.useState(1),[ve,Te]=q.useState({open:!1,offer:null}),[De,He]=q.useState(""),[yt,at]=q.useState(!1),[xt,zt]=q.useState(null),[ye,nt]=q.useState("mode"),[ht,Ct]=q.useState({open:!1,type:"vehicle_offer"}),[Fe,vt]=q.useState(""),[$t,Et]=q.useState([]),[ts,ss]=q.useState(0),Ye=j=>j==="Bike"?50:j==="Auto"?500:j==="Mini Truck"?2e3:j==="Pickup"?5e3:5e4,as=(j,I)=>{const Ae=Math.max(1,j||1),_e={Bike:{ratePerKm:8,min:80},Auto:{ratePerKm:12,min:150},"Mini Truck":{ratePerKm:18,min:400},Pickup:{ratePerKm:25,min:800},Truck:{ratePerKm:35,min:1200}},rt=Math.round(Ae*_e[I].ratePerKm);return Math.max(rt,_e[I].min)};oi.useEffect(()=>{ss(0)},[re==null?void 0:re.id]);const wt=(j,I)=>{const Ae=Number(j.minOrderQuantity||1),_e=Math.max(1,Number(Ae));Et(rt=>rt.find(Xe=>Xe.listingId===j.id)?rt.map(Xe=>Xe.listingId!==j.id?Xe:{...Xe,quantity:Math.min(Xe.quantity+_e,Number(j.availableQuantity||j.quantity||Xe.quantity+_e))}):[...rt,{listingId:j.id,quantity:Math.min(_e,Number(j.availableQuantity||j.quantity||_e))}])},na=j=>Et(I=>I.filter(Ae=>Ae.listingId!==j)),[ze,_t]=q.useState(s.profile||{fullName:s.phone,city:"",state:"",language:"English"}),[jt,bs]=q.useState("overview"),[Vt,Ds]=q.useState("all"),[fs,ms]=q.useState("newest"),[Dt,ns]=q.useState([]),[Rt,ia]=q.useState("all"),[Rs,ra]=q.useState(null),[Ms,_s]=q.useState({name:((Mt=s.profile)==null?void 0:Mt.fullName)||"",email:"",issue:""}),[is,Xt]=q.useState({notifyOrders:!0,notifyOffers:!0,notifyNewListings:!0,language:((Hs=s.profile)==null?void 0:Hs.language)||"English",twoFactor:!1}),F=i.filter(j=>j.buyerName===s.profile.fullName),K=(l||[]).filter(j=>{var I;return(j==null?void 0:j.buyerName)===((I=s==null?void 0:s.profile)==null?void 0:I.fullName)}),ee=$t.length,y=t.filter(j=>j.status==="active"&&(Vt==="all"||j.cropName.includes(Vt)||Vt==="Vegetables"&&["Potato","Tomato","Onion","Carrot"].includes(j.cropName)||Vt==="Grains"&&["Wheat","Rice","Maize","Soybean"].includes(j.cropName)||Vt==="Fruits"&&["Mango","Banana","Apple"].includes(j.cropName))&&(j.cropName.toLowerCase().includes(st.toLowerCase())||j.location.toLowerCase().includes(st.toLowerCase()))).sort((j,I)=>fs==="newest"?new Date(I.createdAt).getTime()-new Date(j.createdAt).getTime():fs==="price_low"?j.pricePerKg-I.pricePerKg:I.pricePerKg-j.pricePerKg),k=j=>{const I=["Potato","Tomato","Onion","Carrot","Cabbage","Cauliflower","Brinjal","Okra"],Ae=["Wheat","Rice","Maize","Soybean","Bajra","Jowar"],_e=["Mango","Banana","Apple","Grapes","Orange"];return I.includes(j)?"Vegetables":Ae.includes(j)?"Grains":_e.includes(j)?"Fruits":"All"},G=re?(p||[]).find(j=>j.id===re.farmerId):null,X=re?t.filter(j=>j.status==="active"&&j.farmerId===re.farmerId).sort((j,I)=>new Date(I.createdAt).getTime()-new Date(j.createdAt).getTime()):[],le=re?X.findIndex(j=>j.id===re.id):-1,Z=le>0?X[le-1]:null,ge=le>=0&&le<X.length-1?X[le+1]:null,b=re?X.filter(j=>j.id!==re.id).slice(0,8):[],E=re?t.filter(j=>j.status==="active"&&j.cropName===re.cropName&&j.id!==re.id).slice(0,8):[],de=re?t.filter(j=>j.status==="active"&&j.farmerId!==re.farmerId&&k(j.cropName)===k(re.cropName)).slice(0,12):[],we=re?t.filter(j=>{var I;return j.status==="active"&&j.farmerId!==re.farmerId&&(j.location||"").toLowerCase().includes((((I=s.profile)==null?void 0:I.city)||"").toLowerCase())}).slice(0,8):[],Ee=()=>{w({listingId:re.id,cropName:re.cropName,buyerName:s.profile.fullName,buyerLocation:s.profile.city,pricePerKg:ce.price,offeredPrice:ce.price,quantity:ce.quantity,quantityRequested:ce.quantity,totalAmount:ce.price*ce.quantity}),ae(!1),Me(null),setTimeout(()=>Le("offers"),100)},Re=async()=>{if(!re)return;const j=Number(re.availableQuantity||re.quantity||0),I=Math.max(1,Math.min(Number(J||1),j||Number(J||1)));try{await(he==null?void 0:he(re.id,I)),C(!1),Me(null),Le("orders")}catch(Ae){console.error(Ae),alert("Failed to place order.")}},Ve=async(j,I)=>{const Ae=Number(j.availableQuantity||j.quantity||0),_e=Math.max(1,Math.min(Number(I||1),Ae||Number(I||1)));await(he==null?void 0:he(j.id,_e))&&(Et(We=>We.filter(Xe=>Xe.listingId!==j.id)),Le("orders"))},Qe=async()=>{if($t.length!==0){for(const j of $t){const I=t.find(rt=>rt.id===j.listingId);if(!I)continue;const Ae=Number(I.availableQuantity||I.quantity||0),_e=Math.max(1,Math.min(Number(j.quantity||1),Ae||Number(j.quantity||1)));await(he==null?void 0:he(I.id,_e))}Et([]),Le("orders")}};return n.jsxs("div",{className:"flex h-screen bg-slate-50 overflow-hidden",children:[n.jsxs("aside",{className:"w-72 bg-gradient-to-b from-blue-700 via-blue-700 to-indigo-800 border-r border-blue-900/30 flex flex-col p-4 text-white",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-8 px-2",children:[n.jsx("div",{className:"w-10 h-10 bg-white/15 border border-white/15 rounded-xl flex items-center justify-center text-white shadow-sm",children:n.jsx(ta,{className:"w-5 h-5"})}),n.jsxs("span",{className:"font-black text-xl leading-tight",children:["KisanSetu ",n.jsx("br",{}),n.jsx("span",{className:"text-blue-200 text-xs font-black tracking-widest uppercase",children:"Buyer Portal"})]})]}),n.jsx("nav",{className:"space-y-1 flex-1 overflow-y-auto pr-1",children:[{id:"home",label:"Marketplace",icon:W_},{id:"offers",label:"My Offers",icon:ta,badge:F.length},{id:"orders",label:"My Orders",icon:wa,badge:K.length},{id:"payments",label:"Pending Payments",icon:vb,badge:K.filter(j=>j.paymentStatus==="pending").length},{id:"cart",label:"Cart",icon:uh,badge:ee},{id:"rfq",label:"RFQ",icon:jl},{id:"shortlists",label:"Shortlists",icon:wa},{id:"analytics",label:"Analytics",icon:qh},{id:"messages",label:"Messages",icon:Xa},{id:"addresses",label:"Addresses",icon:Na},{id:"more",label:"Pro Features",icon:ri},{id:"profile",label:"My Profile",icon:si},{id:"notifications",label:"Notifications",icon:Fa,badge:Dt.filter(j=>!j.isRead).length},{id:"help",label:"Help & Support",icon:xb},{id:"settings",label:"Settings",icon:ri}].map(j=>n.jsxs("button",{onClick:()=>Le(j.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-bold transition-all ${be===j.id?"bg-white/15 text-white ring-1 ring-white/15":"text-white/80 hover:text-white hover:bg-white/10"}`,children:[n.jsx(j.icon,{className:`w-5 h-5 ${be===j.id?"text-white":"text-white/80"}`}),n.jsx("span",{className:"flex-1 text-left",children:j.label}),j.badge>0&&n.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-black ${be===j.id?"bg-white/25 text-white":"bg-white/15 text-white"}`,children:j.badge})]},j.id))}),n.jsxs("button",{onClick:U,className:"mt-auto flex items-center gap-2 px-4 py-3 rounded-xl text-white/80 hover:text-white hover:bg-white/10 font-bold transition-colors",children:[n.jsx(Nl,{className:"w-5 h-5"})," Logout"]})]}),n.jsxs("main",{className:"flex-1 overflow-y-auto p-6 lg:p-8 relative h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50/60",children:[be==="home"&&n.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[n.jsxs(oe,{className:"p-0 overflow-hidden border-slate-200",children:[n.jsxs("div",{className:"p-7 bg-gradient-to-br from-blue-600 via-blue-600 to-indigo-700 text-white relative",children:[n.jsx("div",{className:"absolute inset-0 opacity-20 bg-[radial-gradient(circle_at_top,white,transparent_60%)]"}),n.jsx("div",{className:"relative",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-6",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-[10px] font-black uppercase tracking-[0.25em] text-white/80",children:"Marketplace"}),n.jsx("h2",{className:"text-3xl md:text-4xl font-black mt-1 leading-tight",children:"Buy Direct From Farmers"}),n.jsx("p",{className:"text-white/85 font-medium mt-2 max-w-2xl leading-relaxed",children:"Compare price, quality, and location. Add items to cart and negotiate directly with farmers."})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-3 w-full md:w-auto",children:[n.jsxs("div",{className:"p-4 rounded-2xl bg-white/10 border border-white/15",children:[n.jsx("div",{className:"text-[10px] font-black uppercase tracking-widest text-white/70",children:"Live"}),n.jsx("div",{className:"text-2xl font-black",children:y.length})]}),n.jsxs("div",{className:"p-4 rounded-2xl bg-white/10 border border-white/15",children:[n.jsx("div",{className:"text-[10px] font-black uppercase tracking-widest text-white/70",children:"Cart"}),n.jsx("div",{className:"text-2xl font-black",children:ee})]}),n.jsxs("div",{className:"p-4 rounded-2xl bg-white/10 border border-white/15",children:[n.jsx("div",{className:"text-[10px] font-black uppercase tracking-widest text-white/70",children:"Offers"}),n.jsx("div",{className:"text-2xl font-black",children:F.length})]})]})]})})]}),n.jsx("div",{className:"p-5 bg-white border-t border-slate-100",children:n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[n.jsxs("div",{className:"relative w-full lg:w-[420px]",children:[n.jsx(I_,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search crop, location, farmer...",className:"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all font-medium",value:st,onChange:j=>gt(j.target.value)})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[["all","Vegetables","Grains","Fruits"].map(j=>n.jsx("button",{onClick:()=>Ds(j),className:`px-4 h-11 rounded-2xl whitespace-nowrap text-sm font-black transition-all ${Vt===j?"bg-blue-600 text-white shadow-lg shadow-blue-600/20":"bg-slate-50 text-slate-700 border border-slate-200 hover:bg-slate-100"}`,children:j==="all"?"All":j},j)),n.jsxs("select",{className:"px-4 h-11 bg-slate-50 border border-slate-200 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500/20 font-black text-slate-700 cursor-pointer",value:fs,onChange:j=>ms(j.target.value),children:[n.jsx("option",{value:"newest",children:"Newest"}),n.jsx("option",{value:"price_low",children:"Lowest Price"}),n.jsx("option",{value:"price_high",children:"Highest Price"})]})]})]})})]}),n.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:y.map(j=>{var Ul;const I=((Ul=j.imageUrls)==null?void 0:Ul[0])||j.imageUrl,Ae=Number(j.availableQuantity??j.quantity??0),_e=(j.quantityUnit||"kg").toString(),rt=Math.max(1,Number(j.minOrderQuantity??1)),We=(j.minOrderQuantityUnit||_e).toString(),Xe=(j.priceUnit||"kg").toString(),ys=(j.farmerName||"Unknown").toString(),ws=(j.location||"").toString(),ka=`${j.cropName||"Crop"}${j.variety?`  ${j.variety}`:""}`,Wa=Number(j.pricePerKg??0);return n.jsxs(oe,{className:"p-0 overflow-hidden bg-white border border-slate-200/80 shadow-sm hover:shadow-2xl hover:border-blue-300 transition-all duration-300 rounded-2xl",children:[n.jsx("button",{className:"relative w-full text-left",onClick:()=>{Me(j),Le("product-details")},type:"button",children:n.jsxs("div",{className:"h-48 overflow-hidden bg-slate-100 relative",children:[I?n.jsx("img",{src:I,alt:j.cropName,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-500"}):n.jsx("div",{className:"w-full h-full bg-gradient-to-br from-slate-100 to-slate-200"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-950/60 via-slate-950/10 to-transparent"}),n.jsxs("div",{className:"absolute top-3 left-3 right-3 flex items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[!!j.grade&&n.jsxs("div",{className:"px-3 py-1 bg-white/90 backdrop-blur-sm rounded-full text-[10px] font-black uppercase text-blue-700 shadow-sm border border-blue-100",children:["Grade ",j.grade]}),!!(j.certification&&j.certification.length)&&n.jsx("div",{className:"px-3 py-1 bg-green-50/90 backdrop-blur-sm rounded-full text-[10px] font-black uppercase text-green-700 shadow-sm border border-green-100",children:"Certified"})]}),n.jsx("button",{className:"w-10 h-10 rounded-full bg-white/90 backdrop-blur-sm border border-slate-200 text-slate-700 flex items-center justify-center shadow-sm hover:bg-white transition-colors",onClick:Ll=>{Ll.stopPropagation(),wt(j)},type:"button",children:n.jsx(uh,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"absolute bottom-3 left-3 right-3 flex items-end justify-between gap-3",children:[n.jsxs("div",{className:"min-w-0",children:[n.jsx("div",{className:"text-white font-black leading-tight truncate",children:ka}),n.jsxs("div",{className:"text-white/85 text-xs font-bold flex items-center gap-1 truncate mt-1",children:[n.jsx(Na,{className:"w-3 h-3"}),ws]})]}),n.jsx("div",{className:"shrink-0 text-right",children:n.jsxs("div",{className:"px-3 py-2 rounded-2xl bg-white/90 backdrop-blur-sm border border-white/50 shadow-sm",children:[n.jsx("div",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Price"}),n.jsxs("div",{className:"text-slate-900 font-black text-lg leading-none",children:["",Wa.toLocaleString()]}),n.jsxs("div",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:["/",Xe]})]})})]})]})}),n.jsxs("div",{className:"p-5",children:[n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"min-w-0",children:[n.jsx("div",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest",children:"Farmer"}),n.jsx("div",{className:"font-black text-slate-900 truncate",children:ys})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest",children:"Stock"}),n.jsxs("div",{className:"font-black text-slate-900",children:[Ae.toLocaleString()," ",_e]})]})]}),n.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[n.jsxs("div",{className:"px-3 py-1 rounded-full bg-slate-50 border border-slate-200 text-[10px] font-black text-slate-600 uppercase tracking-wider",children:["MOQ ",rt.toLocaleString(),We]}),!!(j.packagingDetails||"").trim()&&n.jsx("div",{className:"px-3 py-1 rounded-full bg-slate-50 border border-slate-200 text-[10px] font-black text-slate-600 uppercase tracking-wider",children:"Packed"}),!!j.harvestDate&&n.jsxs("div",{className:"px-3 py-1 rounded-full bg-slate-50 border border-slate-200 text-[10px] font-black text-slate-600 uppercase tracking-wider",children:["Harvest ",j.harvestDate]})]}),n.jsxs("div",{className:"mt-5 grid grid-cols-3 gap-2",children:[n.jsx(se,{variant:"outline",className:"h-11 text-xs font-black border-slate-200",onClick:()=>{Me(j),Le("product-details")},children:"View"}),n.jsx(se,{variant:"outline",className:"h-11 text-xs font-black border-slate-200",onClick:()=>{Me(j),me(Number(j.minOrderQuantity||1)),C(!0)},children:"Buy Now"}),n.jsx(se,{className:"h-11 bg-blue-600 hover:bg-blue-700 shadow-lg shadow-blue-600/20 text-xs font-black",onClick:()=>{Me(j),Oe({quantity:j.minOrderQuantity||j.availableQuantity||j.quantity,price:j.pricePerKg}),ae(!0)},children:"Negotiate"})]})]})]},j.id)})})]}),be==="payments"&&n.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[n.jsx("h2",{className:"text-3xl font-bold text-slate-900",children:"Pending Payments"}),n.jsx("div",{className:"grid gap-4",children:K.filter(j=>j.paymentStatus==="pending").length===0?n.jsxs("div",{className:"text-center py-20 bg-slate-50 rounded-2xl border border-dashed border-slate-200",children:[n.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4 text-slate-400",children:n.jsx(Ya,{className:"w-8 h-8"})}),n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"All caught up!"}),n.jsx("p",{className:"text-slate-500",children:"You have no pending payments."})]}):K.filter(j=>j.paymentStatus==="pending").map(j=>n.jsx(oe,{className:"p-6 border-slate-200",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[n.jsxs("h3",{className:"text-lg font-bold text-slate-900",children:["Order #",j.id]}),n.jsx("span",{className:"px-3 py-1 bg-amber-100 text-amber-700 rounded-full text-[10px] font-black uppercase tracking-wider",children:"Payment Pending"})]}),n.jsxs("p",{className:"text-sm text-slate-500",children:[j.cropName,"  ",j.quantity,"kg  ",n.jsxs("span",{className:"font-bold text-slate-900",children:["",j.totalAmount.toLocaleString()]})]})]}),n.jsx(se,{className:"bg-green-600 hover:bg-green-700 font-bold",onClick:async()=>{const I=`TXN-${Date.now()}`;confirm("Simulate payment transfer for "+j.totalAmount+`?
(This is a mock transaction)`)&&(await(pe==null?void 0:pe(j.id,"review",I)),alert("Payment proof submitted! Waiting for Farmer approval."))},children:"Pay Now"})]})},j.id))})]}),be==="product-details"&&re&&n.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4 pb-10",children:[n.jsx("div",{className:"flex items-center gap-2 mb-4",children:n.jsxs(se,{variant:"ghost",onClick:()=>Le("home"),className:"gap-2 text-slate-500 hover:text-slate-900 font-bold",children:[n.jsx(cr,{className:"w-4 h-4"})," Back to Marketplace"]})}),n.jsxs(oe,{className:"w-full shadow-sm relative overflow-hidden bg-white p-0 border border-slate-200",children:[n.jsxs("div",{className:"p-5 md:p-6 border-b border-slate-100 flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"min-w-0",children:[n.jsxs("div",{className:"text-xs text-slate-400 font-bold",children:["Marketplace ",n.jsx("span",{className:"mx-1",children:""})," ",k(re.cropName)," ",n.jsx("span",{className:"mx-1",children:""})," ",n.jsx("span",{className:"text-slate-700 font-black",children:re.cropName})]}),n.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[n.jsxs("h3",{className:"text-2xl md:text-3xl font-black text-slate-900 truncate",children:[re.cropName,re.variety?`  ${re.variety}`:""]}),n.jsxs("span",{className:"px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest bg-blue-50 text-blue-700 border border-blue-100",children:["Grade ",re.grade]}),n.jsxs("span",{className:"px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest bg-amber-50 text-amber-700 border border-amber-100 flex items-center gap-1",children:[n.jsx(lr,{className:"w-3 h-3"})," 4.6"]})]}),n.jsxs("div",{className:"text-sm text-slate-500 font-medium mt-1 flex items-center gap-2",children:[n.jsx(Na,{className:"w-4 h-4"})," ",re.location]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(se,{variant:"outline",className:"h-10 text-xs font-black border-slate-200",disabled:!Z,onClick:()=>Z&&Me(Z),children:[n.jsx(cr,{className:"w-4 h-4 mr-2"})," Prev"]}),n.jsxs(se,{variant:"outline",className:"h-10 text-xs font-black border-slate-200",disabled:!ge,onClick:()=>ge&&Me(ge),children:["Next ",n.jsx(ii,{className:"w-4 h-4 ml-2"})]})]})]}),n.jsxs("div",{className:"grid lg:grid-cols-5 gap-0",children:[n.jsx("div",{className:"lg:col-span-2 bg-slate-50 border-r border-slate-100",children:(()=>{const j=re.imageUrls&&re.imageUrls.length>0?re.imageUrls:re.imageUrl?[re.imageUrl]:[],I=j[Math.min(ts,Math.max(0,j.length-1))]||j[0];return n.jsxs("div",{className:"p-5 md:p-6",children:[n.jsx("div",{className:"aspect-square rounded-3xl overflow-hidden bg-white border border-slate-200 shadow-sm",children:n.jsx("img",{src:I,alt:re.cropName,className:"w-full h-full object-cover"})}),j.length>1&&n.jsx("div",{className:"mt-4 flex gap-3 overflow-x-auto pb-2",children:j.slice(0,6).map((Ae,_e)=>n.jsx("button",{className:`w-20 h-20 rounded-2xl overflow-hidden border ${_e===ts?"border-blue-600 ring-2 ring-blue-600/20":"border-slate-200 hover:border-blue-300"}`,onClick:()=>ss(_e),children:n.jsx("img",{src:Ae,alt:`${re.cropName} ${_e+1}`,className:"w-full h-full object-cover"})},Ae+_e))})]})})()}),n.jsx("div",{className:"lg:col-span-3 p-5 md:p-6",children:n.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"md:col-span-2 space-y-6",children:[n.jsxs(oe,{className:"p-5 border-slate-200 bg-white",children:[n.jsxs("div",{className:"flex items-end justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest",children:"Price"}),n.jsxs("div",{className:"text-3xl font-black text-blue-600",children:["",re.pricePerKg,"/kg"]}),n.jsxs("div",{className:"text-xs text-slate-500 font-bold mt-1",children:["MOQ: ",re.minOrderQuantity||1," kg"]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest",children:"Available"}),n.jsxs("div",{className:"text-2xl font-black text-slate-900",children:[re.availableQuantity||re.quantity," kg"]})]})]}),n.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[!!re.packagingDetails&&n.jsx("div",{className:"px-3 py-1 rounded-full bg-slate-50 border border-slate-200 text-[10px] font-black text-slate-600 uppercase tracking-wider",children:"Packed"}),!!re.moistureContent&&n.jsxs("div",{className:"px-3 py-1 rounded-full bg-slate-50 border border-slate-200 text-[10px] font-black text-slate-600 uppercase tracking-wider",children:["Moisture ",re.moistureContent,"%"]}),!!re.harvestDate&&n.jsxs("div",{className:"px-3 py-1 rounded-full bg-slate-50 border border-slate-200 text-[10px] font-black text-slate-600 uppercase tracking-wider",children:["Harvest ",new Date(re.harvestDate).toLocaleDateString()]}),!!(re.certification&&re.certification.length)&&n.jsx("div",{className:"px-3 py-1 rounded-full bg-green-50 border border-green-100 text-[10px] font-black text-green-700 uppercase tracking-wider",children:"Certified"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest",children:"About this product"}),n.jsx("div",{className:"text-sm text-slate-700 font-medium leading-relaxed",children:re.description||"No description provided."})]}),n.jsx(oe,{className:"p-5 border-slate-200 bg-white",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"min-w-0",children:[n.jsx("div",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest",children:"Seller"}),n.jsx("div",{className:"text-lg font-black text-slate-900 truncate",children:re.farmerName}),n.jsxs("div",{className:"text-xs text-slate-500 font-medium",children:[(pa=G==null?void 0:G.profile)!=null&&pa.city?`${G.profile.city}, `:"",(ga=G==null?void 0:G.profile)!=null&&ga.state?G.profile.state:""]})]}),n.jsx(se,{variant:"outline",className:"h-10 text-xs font-black border-slate-200",onClick:()=>{const j=re.farmerId;x==null||x({toUserId:j,text:`Hi ${re.farmerName}, I'm interested in ${re.cropName}.`,listingId:re.id}),Le("messages")},children:"Message"})]})})]}),n.jsx("div",{className:"md:col-span-1",children:n.jsx("div",{className:"sticky top-6",children:n.jsxs(oe,{className:"p-5 border-slate-200 bg-white",children:[n.jsx("div",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest",children:"Quick Actions"}),n.jsxs("div",{className:"mt-4 space-y-3",children:[n.jsx(se,{className:"w-full h-12 bg-slate-900 hover:bg-slate-800 font-black",onClick:()=>{me(Number(re.minOrderQuantity||1)),C(!0)},children:"Buy Now"}),n.jsxs(se,{className:"w-full h-12 bg-blue-600 hover:bg-blue-700 font-black",onClick:()=>{wt(re),Le("cart")},children:[n.jsx(uh,{className:"w-4 h-4 mr-2"})," Add to Cart"]}),n.jsx(se,{variant:"outline",className:"w-full h-12 font-black border-slate-200",onClick:()=>{Oe({quantity:re.minOrderQuantity||1,price:re.pricePerKg}),ae(!0)},children:"Negotiate Price"}),n.jsx(se,{variant:"ghost",className:"w-full h-11 font-black text-slate-600",onClick:()=>{Le("home")},children:"Continue Shopping"})]})]})})})]})})]}),n.jsxs("div",{className:"p-5 md:p-6 border-t border-slate-100 bg-white space-y-8",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"text-sm font-black text-slate-900",children:["More from ",re.farmerName]}),n.jsxs("div",{className:"text-xs font-bold text-slate-400",children:["Listings: ",Math.max(0,X.length-1)]})]}),b.length===0?n.jsx("div",{className:"text-xs text-slate-500 font-medium",children:"No other active listings from this farmer."}):n.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2",children:b.map(j=>{var I;return n.jsx("button",{className:"text-left group min-w-[220px]",onClick:()=>Me(j),children:n.jsxs(oe,{className:"p-0 overflow-hidden border-slate-200 hover:border-blue-300 hover:shadow-lg transition-all",children:[n.jsx("div",{className:"h-32 overflow-hidden",children:n.jsx("img",{src:((I=j.imageUrls)==null?void 0:I[0])||j.imageUrl,alt:j.cropName,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"})}),n.jsxs("div",{className:"p-4",children:[n.jsx("div",{className:"font-black text-slate-900 truncate",children:j.cropName}),n.jsx("div",{className:"text-xs text-slate-500 font-medium truncate",children:j.location}),n.jsxs("div",{className:"text-xs text-blue-600 font-black mt-1",children:["",j.pricePerKg,"/kg"]})]})]})},j.id)})})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"text-sm font-black text-slate-900",children:["Similar products (",re.cropName,")"]}),n.jsx("div",{className:"text-xs font-bold text-slate-400",children:"From other farmers"})]}),E.length===0?n.jsx("div",{className:"text-xs text-slate-500 font-medium",children:"No similar products found right now."}):n.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4",children:E.slice(0,8).map(j=>{var I;return n.jsx("button",{className:"text-left group",onClick:()=>Me(j),children:n.jsxs(oe,{className:"p-0 overflow-hidden border-slate-200 hover:border-blue-300 hover:shadow-lg transition-all",children:[n.jsx("div",{className:"h-28 overflow-hidden",children:n.jsx("img",{src:((I=j.imageUrls)==null?void 0:I[0])||j.imageUrl,alt:j.cropName,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"})}),n.jsxs("div",{className:"p-4",children:[n.jsx("div",{className:"font-black text-slate-900 truncate",children:j.cropName}),n.jsx("div",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest truncate",children:j.farmerName}),n.jsx("div",{className:"text-xs text-slate-500 font-medium truncate",children:j.location}),n.jsxs("div",{className:"text-xs text-blue-600 font-black mt-1",children:["",j.pricePerKg,"/kg"]})]})]})},j.id)})})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("div",{className:"text-sm font-black text-slate-900",children:"Recommended from other farmers"}),n.jsxs("div",{className:"text-xs font-bold text-slate-400",children:[k(re.cropName)," picks"]})]}),n.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4",children:(we.length>0?we:de).slice(0,8).map(j=>{var I;return n.jsx("button",{className:"text-left group",onClick:()=>Me(j),children:n.jsxs(oe,{className:"p-0 overflow-hidden border-slate-200 hover:border-blue-300 hover:shadow-lg transition-all",children:[n.jsx("div",{className:"h-28 overflow-hidden",children:n.jsx("img",{src:((I=j.imageUrls)==null?void 0:I[0])||j.imageUrl,alt:j.cropName,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"})}),n.jsxs("div",{className:"p-4",children:[n.jsx("div",{className:"font-black text-slate-900 truncate",children:j.cropName}),n.jsx("div",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest truncate",children:j.farmerName}),n.jsx("div",{className:"text-xs text-slate-500 font-medium truncate",children:j.location}),n.jsxs("div",{className:"text-xs text-blue-600 font-black mt-1",children:["",j.pricePerKg,"/kg"]})]})]})},j.id)})})]})]})]})]}),n.jsxs("div",{className:"pb-24",children:[be==="rfq"&&n.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Request for Quotation"}),n.jsxs(oe,{className:"p-6 space-y-4",children:[n.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[n.jsx(fe,{id:"rfq-crop",placeholder:"Crop Name"}),n.jsx(fe,{id:"rfq-qty",type:"number",placeholder:"Quantity (kg)"}),n.jsx(fe,{id:"rfq-price",type:"number",placeholder:"Target Price (/kg)"})]}),n.jsx(se,{className:"w-full md:w-auto",onClick:()=>{var _e,rt,We;const j=(_e=document.getElementById("rfq-crop"))==null?void 0:_e.value,I=Number(((rt=document.getElementById("rfq-qty"))==null?void 0:rt.value)||0),Ae=Number(((We=document.getElementById("rfq-price"))==null?void 0:We.value)||0);!j||I<=0||Ae<=0||g==null||g({buyerId:s.id,cropName:j,quantityKg:I,targetPricePerKg:Ae})},children:"Create RFQ"})]}),n.jsx(oe,{className:"p-6",children:n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[(u||[]).filter(j=>j.buyerId===s.id).map(j=>n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[n.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold",children:"RFQ"}),n.jsxs("div",{className:"font-bold text-slate-900",children:[j.cropName,"  ",j.quantityKg," kg"]}),n.jsxs("div",{className:"text-sm text-slate-600",children:["Target ",j.targetPricePerKg,"/kg  ",j.status]})]},j.id)),(u||[]).filter(j=>j.buyerId===s.id).length===0&&n.jsx("div",{className:"text-sm text-slate-400",children:"No RFQs yet."})]})})]}),be==="shortlists"&&n.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Shortlists"}),n.jsx(oe,{className:"p-6",children:n.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.slice(0,6).map(j=>n.jsxs(oe,{className:"p-4 bg-slate-50",children:[n.jsx("div",{className:"font-bold text-slate-900",children:j.cropName}),n.jsx("div",{className:"text-sm text-slate-600",children:j.location}),n.jsx("div",{className:"mt-2",children:n.jsx(se,{variant:"outline",className:"text-xs",children:"Save"})})]},j.id))})})]}),be==="analytics"&&n.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Analytics"}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[n.jsxs(oe,{className:"p-4",children:[n.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold",children:"Total Spend"}),n.jsxs("div",{className:"text-xl font-black",children:["",K.reduce((j,I)=>j+I.totalAmount,0).toLocaleString()]})]}),n.jsxs(oe,{className:"p-4",children:[n.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold",children:"Orders"}),n.jsx("div",{className:"text-xl font-black",children:K.length})]}),n.jsxs(oe,{className:"p-4",children:[n.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold",children:"Offers"}),n.jsx("div",{className:"text-xl font-black",children:F.length})]})]})]}),be==="offers"&&n.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"My Active Offers"}),n.jsxs("div",{className:"grid gap-4",children:[F.map(j=>{const I=j.lastActionBy==="farmer",Ae=I?j.counterPrice:j.offeredPrice||j.pricePerKg,_e=I?j.counterQuantity:j.quantityRequested||j.quantity,rt=t.find(We=>We.id===j.listingId);return n.jsxs(oe,{className:"p-6 border-slate-200 hover:border-blue-400 transition-colors",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex gap-4 items-center",children:[n.jsx("div",{className:"w-12 h-12 bg-blue-50 rounded-xl flex items-center justify-center text-blue-600",children:n.jsx(ta,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-slate-900",children:j.cropName}),n.jsxs("p",{className:"text-sm text-slate-500",children:["",Ae,"/kg  ",_e,"kg"]}),I&&n.jsx("div",{className:"text-[10px] font-bold text-amber-600 bg-amber-50 px-2 py-1 rounded mt-1 w-fit",children:"Farmer Countered"})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-lg font-black text-slate-900 mb-1",children:["",(Ae*_e).toLocaleString()]}),n.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-wider ${j.status==="accepted"?"bg-green-100 text-green-700":j.status==="rejected"?"bg-red-100 text-red-700":j.status==="cancelled"?"bg-slate-100 text-slate-500":"bg-blue-100 text-blue-700"}`,children:j.status==="cancelled"?"Cancelled":j.status})]})]}),j.status==="pending"&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 flex gap-3 justify-end",children:[n.jsxs(se,{variant:"outline",className:"text-xs font-bold text-blue-600 hover:bg-blue-50 border-blue-200",onClick:()=>B((rt==null?void 0:rt.farmerId)||"",(rt==null?void 0:rt.farmerName)||"",j.listingId,void 0,j.id),children:[n.jsx(Xa,{className:"w-4 h-4 mr-2"})," Chat"]}),n.jsx(se,{variant:"outline",className:"text-xs font-bold text-red-500 hover:bg-red-50 hover:text-red-600 border-slate-200",onClick:()=>T(j.id),children:"Cancel Negotiation"}),I&&n.jsxs(n.Fragment,{children:[n.jsx(se,{variant:"outline",className:"text-xs font-bold border-slate-200",onClick:()=>{var We;Te({open:!0,offer:j}),He(((We=j.counterPrice)==null?void 0:We.toString())||j.pricePerKg.toString())},children:"Counter Back"}),n.jsx(se,{className:"text-xs font-bold bg-green-600 hover:bg-green-700",onClick:()=>N(j.id),children:"Accept Counter"})]})]})]},j.id)}),F.length===0&&n.jsx("div",{className:"text-center py-20 text-slate-400 bg-white rounded-3xl border border-dashed border-slate-200",children:"No offers placed yet. Browse the marketplace to start."})]})]}),be==="cart"&&n.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:[n.jsxs("div",{className:"flex items-end justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Cart"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Review items before negotiating or ordering"})]}),n.jsxs("div",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:["Items: ",ee]})]}),$t.length===0?n.jsx("div",{className:"text-center py-20 text-slate-400 bg-white rounded-3xl border border-dashed border-slate-200",children:"Your cart is empty. Add crops from the marketplace."}):n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"grid gap-4",children:$t.map(j=>{var rt;const I=t.find(We=>We.id===j.listingId);if(!I)return null;const Ae=Number(I.availableQuantity||I.quantity||0),_e=Number(I.pricePerKg||0)*Number(j.quantity||0);return n.jsx(oe,{className:"p-6 border-slate-200 bg-white",children:n.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4",children:[n.jsxs("div",{className:"flex gap-4 items-center",children:[n.jsx("div",{className:"w-14 h-14 bg-blue-50 rounded-2xl overflow-hidden border border-blue-100",children:n.jsx("img",{src:((rt=I.imageUrls)==null?void 0:rt[0])||I.imageUrl,alt:I.cropName,className:"w-full h-full object-cover"})}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("div",{className:"font-black text-slate-900 truncate",children:I.cropName}),n.jsxs("div",{className:"text-xs text-slate-500 font-medium truncate",children:[I.farmerName,"  ",I.location]}),n.jsxs("div",{className:"text-xs text-slate-400 font-bold",children:["",I.pricePerKg,"/kg"]})]})]}),n.jsxs("div",{className:"flex flex-col md:items-end gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs font-bold text-slate-400",children:"Qty (kg)"}),n.jsx("input",{className:"w-24 h-10 bg-slate-50 border border-slate-200 rounded-xl px-3 text-sm font-bold outline-blue-500",type:"number",min:1,max:Ae,value:j.quantity,onChange:We=>{const Xe=Math.max(1,Math.min(Ae||999999,Number(We.target.value||1)));Et(ys=>ys.map(ws=>ws.listingId!==j.listingId?ws:{...ws,quantity:Xe}))}})]}),n.jsxs("div",{className:"text-lg font-black text-slate-900",children:["",_e.toLocaleString()]}),n.jsxs("div",{className:"flex gap-2 flex-wrap justify-end",children:[n.jsx(se,{variant:"outline",className:"h-10 text-xs font-black border-slate-200",onClick:()=>{Me(I),Le("product-details")},children:"View"}),n.jsx(se,{className:"h-10 text-xs font-black bg-blue-600 hover:bg-blue-700",onClick:()=>{Me(I),Oe({quantity:j.quantity,price:I.pricePerKg}),ae(!0)},children:"Place Offer"}),n.jsx(se,{className:"h-10 text-xs font-black bg-slate-900 hover:bg-slate-800",onClick:()=>Ve(I,j.quantity),children:"Buy Now"}),n.jsx(se,{variant:"outline",className:"h-10 text-xs font-black border-slate-200",onClick:()=>na(j.listingId),children:n.jsx(wb,{className:"w-4 h-4"})})]})]})]})},j.listingId)})}),n.jsx(oe,{className:"p-6 bg-white border-slate-200",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest",children:"Cart Total"}),n.jsxs("div",{className:"text-2xl font-black text-slate-900",children:["",$t.reduce((j,I)=>{const Ae=t.find(_e=>_e.id===I.listingId);return j+Number((Ae==null?void 0:Ae.pricePerKg)||0)*Number(I.quantity||0)},0).toLocaleString()]})]}),n.jsxs("div",{className:"flex gap-3 flex-wrap",children:[n.jsx(se,{variant:"outline",className:"h-12 font-black border-slate-200",onClick:()=>Le("home"),children:"Add More Items"}),n.jsx(se,{className:"h-12 bg-slate-900 hover:bg-slate-800 font-black",onClick:Qe,children:"Buy All"})]})]})})]})]}),be==="orders"&&n.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Purchase Orders"}),n.jsxs("div",{className:"grid gap-6",children:[K.map(j=>{const I=(h||[]).find(_e=>_e.orderId===j.id),Ae=I?(m||[]).filter(_e=>_e.requestId===I.id):[];return n.jsxs(oe,{className:"p-6 border-blue-100 bg-white",children:[n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-4 mb-4",children:[n.jsxs("div",{className:"flex gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-blue-50 rounded-2xl flex items-center justify-center text-blue-600 shadow-sm border border-blue-100",children:n.jsx(gs,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[n.jsxs("h3",{className:"text-lg font-bold text-slate-900",children:["#",j.id,"  ",j.cropName]}),n.jsx("span",{className:"px-2 py-0.5 rounded bg-blue-100 text-blue-800 text-[10px] font-black uppercase tracking-widest",children:j.status})]}),n.jsxs("p",{className:"text-sm text-slate-500 font-medium font-sans",children:["Farmer: ",j.farmerName,"  Location: ",j.farmerLocation]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-xl font-black text-slate-900",children:["",j.totalAmount.toLocaleString()]}),n.jsxs("div",{className:"text-xs text-slate-400 font-bold",children:[j.quantity," kg @ ",j.totalAmount/j.quantity,"/kg"]})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-100 mb-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest",children:"Transport"}),!I&&n.jsx("div",{className:"text-sm font-bold text-slate-800",children:"Not arranged yet"}),I&&n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"text-sm font-bold text-slate-800",children:[I.mode.replace("_"," "),"  ",I.status.replace("_"," ")]}),I.mode==="marketplace"&&n.jsxs("div",{className:"text-xs text-slate-500 font-bold",children:["Vehicle: ",n.jsx("span",{className:"text-slate-800",children:I.vehicleType}),"  Base ",Number(I.estimatedFare||0).toLocaleString(),I.finalFare!=null?n.jsxs(n.Fragment,{children:["  Final ",Number(I.finalFare||0).toLocaleString()]}):null]}),I.mode==="marketplace"&&n.jsxs("div",{className:"text-xs text-slate-500",children:["Payment: ",n.jsx("span",{className:"font-black text-slate-800",children:(I.transportPaymentStatus||"unpaid").toString()})]}),(I==null?void 0:I.deliveryOtp)&&I.status!=="delivered"&&I.status!=="open"&&n.jsxs("div",{className:"text-xs text-slate-500",children:["Delivery OTP: ",n.jsx("span",{className:"font-black text-slate-800",children:I.deliveryOtp})]})]})]}),!I&&n.jsx(se,{className:"h-10 bg-blue-600 hover:bg-blue-700 text-xs font-black",onClick:()=>{nt("mode"),zt(j.id),at(!0)},children:"Arrange Transport"})]}),I&&I.mode==="marketplace"&&I.status==="open"&&n.jsxs("div",{className:"mt-4 space-y-2",children:[n.jsx("div",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest",children:"Transporter Offers"}),n.jsxs("div",{className:"flex items-center justify-between gap-3 p-3 bg-slate-50 rounded-xl border border-slate-200",children:[n.jsxs("div",{className:"text-xs font-black text-slate-700",children:["Your Offer: ",Number(I.estimatedFare||0).toLocaleString()]}),n.jsx(se,{variant:"outline",className:"h-9 text-xs font-black border-slate-200",onClick:()=>{vt(String(I.estimatedFare||0)),Ct({open:!0,type:"edit_offer",requestId:I.id})},children:"Edit"})]}),Ae.length===0&&n.jsx("div",{className:"text-xs text-slate-500",children:"Waiting for transporter bids..."}),Ae.length>0&&n.jsx("div",{className:"grid md:grid-cols-2 gap-2",children:Ae.map(_e=>n.jsxs("div",{className:"p-3 bg-white rounded-xl border border-slate-200 flex items-center justify-between gap-3",children:[n.jsxs("div",{className:"min-w-0",children:[n.jsxs("div",{className:"text-sm font-black text-slate-900",children:["",Number((_e.counterAmount!=null?_e.counterAmount:_e.amount)||0).toLocaleString()]}),n.jsxs("div",{className:"text-[10px] text-slate-400 font-bold truncate",children:[_e.status,_e.lastActionBy?`  last: ${_e.lastActionBy}`:""]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(se,{variant:"outline",className:"h-9 text-xs font-black border-slate-200",onClick:()=>{vt(String(_e.amount||I.estimatedFare||0)),Ct({open:!0,type:"counter_bid",bidId:_e.id})},children:"Counter"}),n.jsx(se,{className:"h-9 text-xs font-black bg-blue-600 hover:bg-blue-700",disabled:_e.status!=="pending"||_e.lastActionBy==="buyer",onClick:()=>M==null?void 0:M(_e.id),children:"Accept"})]})]},_e.id))})]})]}),n.jsxs("div",{className:"pt-4 border-t border-slate-50",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 font-medium",children:[n.jsx(gb,{className:"w-4 h-4"})," Ordered on ",new Date(j.date).toLocaleDateString()]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(se,{variant:"ghost",className:"h-8 text-xs font-bold",onClick:()=>H(j),children:[n.jsx(jl,{className:"w-3 h-3 mr-1"})," Invoice"]}),n.jsx(se,{variant:"outline",className:"h-8 text-xs font-bold text-blue-600 border-blue-100 hover:bg-blue-50",children:"Track Shipment"})]})]}),n.jsxs("div",{className:"relative px-2 pb-2",children:[n.jsx("div",{className:"absolute top-1.5 left-0 right-0 h-0.5 bg-slate-100 -z-10"}),n.jsx("div",{className:"absolute top-1.5 left-0 h-0.5 bg-blue-600 -z-10 transition-all duration-1000",style:{width:j.status==="delivered"?"100%":["in_transit","picked_up"].includes(j.status)?"50%":"5%"}}),n.jsxs("div",{className:"flex justify-between text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:[n.jsxs("div",{className:`flex flex-col items-center gap-2 ${j.status!=="cancelled"?"text-blue-600":""}`,children:[n.jsx("div",{className:`w-3 h-3 rounded-full ${j.status!=="cancelled"?"bg-blue-600":"bg-slate-200"}`}),"Confirmed"]}),n.jsxs("div",{className:`flex flex-col items-center gap-2 ${["in_transit","delivered","picked_up"].includes(j.status)?"text-blue-600":""}`,children:[n.jsx("div",{className:`w-3 h-3 rounded-full ${["in_transit","delivered","picked_up"].includes(j.status)?"bg-blue-600":"bg-slate-200"}`}),"In Transit"]}),n.jsxs("div",{className:`flex flex-col items-center gap-2 ${j.status==="delivered"?"text-blue-600":""}`,children:[n.jsx("div",{className:`w-3 h-3 rounded-full ${j.status==="delivered"?"bg-blue-600":"bg-slate-200"}`}),"Delivered"]})]})]})]})]},j.id)}),K.length===0&&n.jsx("div",{className:"text-center py-20 text-slate-400 bg-white rounded-3xl border border-dashed border-slate-200",children:"No active orders. Finalize a deal to see them here."})]})]}),be==="messages"&&n.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Messages"}),n.jsx(oe,{className:"p-6",children:n.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"md:col-span-1 space-y-2",children:[n.jsx("div",{className:"text-xs font-black uppercase text-slate-400",children:"Recent"}),n.jsxs("div",{className:"space-y-2",children:[(c||[]).filter(j=>j.fromUserId===s.id||j.toUserId===s.id).slice(0,10).map(j=>n.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[n.jsx("div",{className:"text-xs text-slate-400",children:new Date(j.timestamp).toLocaleString()}),n.jsx("div",{className:"text-sm font-medium text-slate-800",children:j.text})]},j.id)),(c||[]).filter(j=>j.fromUserId===s.id||j.toUserId===s.id).length===0&&n.jsx("div",{className:"text-xs text-slate-400",children:"No messages yet."})]})]}),n.jsxs("div",{className:"md:col-span-2 space-y-3",children:[n.jsx("div",{className:"text-xs font-black uppercase text-slate-400",children:"New Message"}),n.jsx("select",{className:"w-full h-11 bg-slate-50 border border-slate-200 rounded-xl px-4 text-sm font-medium outline-blue-500",id:"b-msg-recipient",children:K.map(j=>n.jsx("option",{value:j.farmerName,children:j.farmerName},j.id))}),n.jsx(fe,{id:"b-msg-text",placeholder:"Type your message"}),n.jsx(se,{className:"w-full md:w-auto",onClick:()=>{var We,Xe;const j=document.getElementById("b-msg-recipient"),I=document.getElementById("b-msg-text"),Ae=j==null?void 0:j.value,_e=(I==null?void 0:I.value)||"";if(!_e)return;const rt=Ae&&((We=p.find(ys=>{var ws;return((ws=ys.profile)==null?void 0:ws.fullName)===Ae}))==null?void 0:We.id)||((Xe=p.find(ys=>ys.role==="farmer"))==null?void 0:Xe.id)||"";x==null||x({toUserId:rt,text:_e}),I&&(I.value="")},children:"Send"})]})]})})]}),be==="addresses"&&n.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Addresses"}),n.jsxs(oe,{className:"p-6 space-y-4",children:[n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsx(fe,{label:"Label",placeholder:"Warehouse / Billing",onChange:j=>{var I;return _t({...ze,addresses:[{...((I=ze.addresses)==null?void 0:I[0])||{line1:""},label:j.target.value}]})}}),n.jsx(fe,{label:"Contact Name",onChange:j=>{var I;return _t({...ze,addresses:[{...((I=ze.addresses)==null?void 0:I[0])||{line1:""},contactName:j.target.value}]})}})]}),n.jsx(fe,{label:"Phone",onChange:j=>{var I;return _t({...ze,addresses:[{...((I=ze.addresses)==null?void 0:I[0])||{line1:""},phone:j.target.value}]})}}),n.jsx(fe,{label:"Address Line",onChange:j=>{var I;return _t({...ze,addresses:[{...((I=ze.addresses)==null?void 0:I[0])||{line1:""},line1:j.target.value}]})}}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[n.jsx(fe,{label:"City/District",onChange:j=>{var I;return _t({...ze,addresses:[{...((I=ze.addresses)==null?void 0:I[0])||{line1:""},district:j.target.value}]})}}),n.jsx(fe,{label:"State",onChange:j=>{var I;return _t({...ze,addresses:[{...((I=ze.addresses)==null?void 0:I[0])||{line1:""},state:j.target.value}]})}}),n.jsx(fe,{label:"PIN Code",onChange:j=>{var I;return _t({...ze,addresses:[{...((I=ze.addresses)==null?void 0:I[0])||{line1:""},pincode:j.target.value}]})}})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(se,{className:"bg-blue-600",onClick:()=>O(s.id,ze),children:"Save Address"}),n.jsx(se,{variant:"ghost",onClick:()=>_t({...ze,addresses:[]}),children:"Clear"})]})]})]}),be==="more"&&n.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Pro Features"}),n.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{title:"RFQ / Quotation",desc:"Request quotes and compare"},{title:"Shortlists",desc:"Save listings and watch for changes"},{title:"Quality Assurance",desc:"Inspection and lab reports"},{title:"Procurement Planning",desc:"Budgets and cadence"},{title:"Contracts",desc:"Agreements and SLAs"},{title:"Payments",desc:"Escrow, milestones and invoices"},{title:"Vendor Performance",desc:"Supplier scorecards"},{title:"Team Workflows",desc:"Roles and approvals"},{title:"Analytics",desc:"Spend and forecasts"}].map((j,I)=>n.jsxs(oe,{className:"p-5",children:[n.jsx("h4",{className:"font-bold text-slate-900",children:j.title}),n.jsx("p",{className:"text-sm text-slate-600",children:j.desc}),n.jsx("div",{className:"mt-3",children:n.jsx(se,{variant:"outline",className:"text-xs",children:"Coming Soon"})})]},I))})]}),be==="profile"&&n.jsx("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[n.jsxs(oe,{className:"w-full md:w-80 p-6 h-fit text-center",children:[n.jsx("div",{className:"w-24 h-24 bg-blue-100 rounded-full mx-auto flex items-center justify-center text-blue-600 mb-4 text-3xl font-black",children:s.profile.fullName.charAt(0)}),n.jsx("h2",{className:"text-xl font-bold text-slate-900",children:s.profile.fullName}),n.jsxs("p",{className:"text-sm text-slate-500 mb-6",children:[s.profile.city,", ",s.profile.state]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6 text-left",children:[n.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[n.jsx("div",{className:"text-xs text-slate-400 font-bold uppercase",children:"Member Since"}),n.jsx("div",{className:"font-bold text-slate-700",children:"2023"})]}),n.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[n.jsx("div",{className:"text-xs text-slate-400 font-bold uppercase",children:"Deals Done"}),n.jsx("div",{className:"font-bold text-slate-700",children:K.length+F.length})]})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx(se,{variant:jt==="overview"?"default":"ghost",className:jt==="overview"?"bg-blue-600":"",onClick:()=>bs("overview"),children:"Overview"}),n.jsx(se,{variant:jt==="edit"?"default":"ghost",className:jt==="edit"?"bg-blue-600":"",onClick:()=>bs("edit"),children:"Edit Profile"})]})]}),n.jsx("div",{className:"flex-1",children:jt==="overview"?n.jsxs("div",{className:"space-y-6",children:[n.jsxs(oe,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Business Details"}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Business Name"}),n.jsx("p",{className:"font-medium text-slate-700",children:ze.businessName||"Not set"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"GST Number"}),n.jsx("p",{className:"font-medium text-slate-700",children:ze.gstNumber||"Not set"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Buyer Type"}),n.jsx("p",{className:"font-medium text-slate-700",children:ze.buyerType||"Individual Trader"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Language"}),n.jsx("p",{className:"font-medium text-slate-700",children:ze.language})]})]})]}),n.jsxs(oe,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Procurement Preferences"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Preferred Crops"}),n.jsx("div",{className:"flex gap-2 mt-2 flex-wrap",children:["Wheat","Rice","Soybean","Maize"].map(j=>n.jsx("span",{className:"px-3 py-1 bg-green-50 text-green-700 rounded-full text-xs font-bold",children:j},j))})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Quality Preference"}),n.jsx("p",{className:"font-medium text-slate-700",children:"Premium Grade A"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Purchase Frequency"}),n.jsx("p",{className:"font-medium text-slate-700",children:"Weekly"})]})]})]})]})]}):n.jsxs(oe,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-6",children:"Edit Profile"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsx(fe,{label:"Full Name",value:ze.fullName,onChange:j=>_t({...ze,fullName:j.target.value})}),n.jsx(fe,{label:"Business Name",value:ze.businessName||"",onChange:j=>_t({...ze,businessName:j.target.value}),placeholder:"Enter business name"})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsx(fe,{label:"City",value:ze.city,onChange:j=>_t({...ze,city:j.target.value})}),n.jsx(fe,{label:"State",value:ze.state,onChange:j=>_t({...ze,state:j.target.value})})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsx(fe,{label:"GST Number",value:ze.gstNumber||"",onChange:j=>_t({...ze,gstNumber:j.target.value}),placeholder:"Optional"}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-sm font-bold text-slate-700",children:"Buyer Type"}),n.jsxs("select",{className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-blue-500",value:ze.buyerType,onChange:j=>_t({...ze,buyerType:j.target.value}),children:[n.jsx("option",{children:"Wholesaler"}),n.jsx("option",{children:"Retailer"}),n.jsx("option",{children:"Individual Trader"}),n.jsx("option",{children:"Processor"})]})]})]}),n.jsxs("div",{className:"pt-4 flex gap-3",children:[n.jsx(se,{className:"flex-1 bg-blue-600 hover:bg-blue-700",onClick:()=>{O(ze),bs("overview")},children:"Save Changes"}),n.jsx(se,{variant:"ghost",onClick:()=>bs("overview"),children:"Cancel"})]})]})]})})]})}),be==="notifications"&&n.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Notifications"}),n.jsx("p",{className:"text-slate-500",children:"Updates on your offers and orders."})]}),n.jsx("div",{className:"flex gap-2 flex-wrap",children:["all","unread","offer","order"].map(j=>n.jsx("button",{onClick:()=>ia(j),className:`px-4 py-2 rounded-full text-sm font-bold transition-all ${Rt===j?"bg-blue-600 text-white shadow-lg":"bg-white text-slate-600 hover:bg-slate-100 border border-slate-200"}`,children:j==="all"?"All":j==="unread"?"Unread":j==="offer"?"Offers":"Orders"},j))})]}),n.jsx(oe,{className:"overflow-hidden",children:n.jsx("div",{className:"divide-y divide-slate-100",children:Dt.map(j=>n.jsxs("div",{className:`p-4 flex items-start gap-4 hover:bg-slate-50 transition-colors cursor-pointer ${j.isRead?"":"bg-blue-50/50"}`,onClick:()=>ns(I=>I.map(Ae=>Ae.id===j.id?{...Ae,isRead:!0}:Ae)),children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${j.type==="offer"?"bg-blue-100 text-blue-600":j.type==="order"?"bg-green-100 text-green-600":"bg-slate-100 text-slate-600"}`,children:j.type==="offer"?n.jsx(ta,{className:"w-5 h-5"}):j.type==="order"?n.jsx(gs,{className:"w-5 h-5"}):n.jsx(Fa,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h4",{className:"font-bold text-slate-900 truncate",children:j.title}),!j.isRead&&n.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0"})]}),n.jsx("p",{className:"text-sm text-slate-600 line-clamp-2",children:j.message}),n.jsx("span",{className:"text-xs text-slate-400 mt-1 block",children:j.timestamp})]})]},j.id))})})]}),be==="help"&&n.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Help & Support"}),n.jsx("p",{className:"text-slate-500",children:"We are here to assist you."})]}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[n.jsxs(oe,{className:"p-5 hover:shadow-lg transition-shadow cursor-pointer text-center",children:[n.jsx(Sl,{className:"w-8 h-8 text-blue-600 mx-auto mb-3"}),n.jsx("h4",{className:"font-bold text-slate-900",children:"Support Line"}),n.jsx("span",{className:"text-blue-600 font-bold",children:"1800-KISAN-BUYER"})]}),n.jsxs(oe,{className:"p-5 hover:shadow-lg transition-shadow cursor-pointer text-center",children:[n.jsx(Lc,{className:"w-8 h-8 text-blue-600 mx-auto mb-3"}),n.jsx("h4",{className:"font-bold text-slate-900",children:"Email Support"}),n.jsx("span",{className:"text-blue-600 font-bold",children:"buyers@kisansetu.in"})]}),n.jsxs(oe,{className:"p-5 hover:shadow-lg transition-shadow cursor-pointer text-center",children:[n.jsx(Xa,{className:"w-8 h-8 text-blue-600 mx-auto mb-3"}),n.jsx("h4",{className:"font-bold text-slate-900",children:"Live Chat"}),n.jsx("span",{className:"text-blue-600 font-bold",children:"Start Chat"})]})]}),n.jsxs(oe,{className:"p-6",children:[n.jsx("h3",{className:"font-bold text-slate-800 mb-4",children:"Frequently Asked Questions"}),n.jsx("div",{className:"space-y-2",children:[{q:"How do I pay for orders?",a:"Payments are held in escrow until delivery is confirmed."},{q:"Can I cancel an offer?",a:'Yes, you can cancel any pending offer from the "My Offers" tab.'}].map((j,I)=>n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[n.jsx("h5",{className:"font-bold text-slate-900 text-sm mb-1",children:j.q}),n.jsx("p",{className:"text-sm text-slate-600",children:j.a})]},I))})]})]}),be==="settings"&&n.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Settings"}),n.jsx("p",{className:"text-slate-500",children:"Manage account preferences."})]}),n.jsxs(oe,{className:"p-0 overflow-hidden",children:[n.jsx("div",{className:"p-4 border-b border-slate-100 bg-slate-50 font-bold text-slate-800",children:"Notifications"}),n.jsx("div",{className:"p-4 space-y-4",children:["notifyOrders","notifyOffers","notifyNewListings"].map(j=>n.jsxs("div",{className:"flex items-center justify-between p-2",children:[n.jsx("span",{className:"font-medium text-slate-700 capitalize",children:j.replace("notify","").replace(/([A-Z])/g," $1").trim()}),n.jsx("button",{onClick:()=>Xt(I=>({...I,[j]:!I[j]})),className:`w-12 h-7 rounded-full transition-colors relative ${is[j]?"bg-blue-600":"bg-slate-300"}`,children:n.jsx("span",{className:`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${is[j]?"translate-x-6":"translate-x-1"}`})})]},j))})]})]})]})]}),ve.open&&ve.offer&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4",children:n.jsxs(oe,{className:"w-full max-w-md shadow-2xl relative bg-white p-6",children:[n.jsx("h3",{className:"text-xl font-bold mb-4",children:"Counter Offer"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Price per kg ()"}),n.jsx(fe,{type:"number",value:De,onChange:j=>He(j.target.value),className:"font-bold text-lg"}),n.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["Farmer asked: ",ve.offer.counterPrice]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(se,{variant:"outline",className:"flex-1",onClick:()=>Te({open:!1,offer:null}),children:"Cancel"}),n.jsx(se,{className:"flex-1 bg-blue-600 hover:bg-blue-700 font-bold",onClick:()=>{_(ve.offer.id,Number(De),ve.offer.quantityRequested||ve.offer.quantity,"buyer"),Te({open:!1,offer:null})},children:"Send Counter"})]})]})]})}),ht.open&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-in fade-in duration-300",children:n.jsxs(oe,{className:"w-full max-w-md p-8 shadow-2xl relative overflow-hidden bg-white",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-1.5 bg-slate-900"}),n.jsx("button",{onClick:()=>{Ct(j=>({...j,open:!1}))},className:"absolute top-4 right-4 p-2 hover:bg-slate-100 rounded-full text-slate-400 hover:text-slate-900 transition-all",children:n.jsx(xs,{className:"w-5 h-5"})}),n.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:ht.type==="counter_bid"?"Counter Transport Price":"Set Transport Offer"}),n.jsx("p",{className:"text-sm text-slate-500 mb-8 border-b border-slate-100 pb-4",children:"Enter amount in "}),n.jsxs("div",{className:"space-y-6",children:[n.jsx(fe,{label:"Amount ()",type:"number",value:Fe,onChange:j=>vt(j.target.value)}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(se,{variant:"ghost",className:"flex-1",onClick:()=>Ct(j=>({...j,open:!1})),children:"Cancel"}),n.jsx(se,{className:"flex-[2] bg-slate-900 hover:bg-slate-800 shadow-xl shadow-slate-900/15 font-bold",onClick:async()=>{const j=Number(Fe);if(!(!Number.isFinite(j)||j<=0)){if(ht.type==="vehicle_offer"){const I=ht.orderId,Ae=ht.vehicleType;if(!I||!Ae)return;await(D==null?void 0:D(I,"marketplace",{vehicleType:Ae,estimatedFare:j})),Ct(_e=>({..._e,open:!1})),at(!1),nt("mode");return}if(ht.type==="edit_offer"){const I=ht.requestId;if(!I)return;await(ue==null?void 0:ue(I,{estimatedFare:j})),Ct(Ae=>({...Ae,open:!1}));return}if(ht.type==="counter_bid"){const I=ht.bidId;if(!I)return;ie==null||ie(I,j,"buyer"),Ct(Ae=>({...Ae,open:!1}));return}}},children:"Confirm"})]})]})]})}),xe&&re&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-in fade-in duration-300",children:n.jsxs(oe,{className:"w-full max-w-md p-8 shadow-2xl relative overflow-hidden bg-white",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-1.5 bg-slate-900"}),n.jsx("button",{onClick:()=>C(!1),className:"absolute top-4 right-4 p-2 hover:bg-slate-100 rounded-full text-slate-400 hover:text-slate-900 transition-all",children:n.jsx(xs,{className:"w-5 h-5"})}),n.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Buy Now"}),n.jsxs("p",{className:"text-sm text-slate-500 mb-8 border-b border-slate-100 pb-4",children:["Confirm quantity for ",n.jsx("span",{className:"text-slate-900 font-bold",children:re.cropName})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsx(fe,{label:"Quantity (kg)",type:"number",value:J,onChange:j=>me(Math.max(1,Number(j.target.value))),max:re.availableQuantity||re.quantity}),n.jsxs("div",{className:"p-5 bg-slate-900/5 rounded-2xl border border-slate-200 flex justify-between items-center",children:[n.jsx("div",{className:"text-sm font-bold text-slate-700",children:"Total"}),n.jsxs("div",{className:"text-2xl font-black text-slate-900 font-display",children:["",(Number(re.pricePerKg||0)*Number(J||0)).toLocaleString()]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(se,{variant:"ghost",className:"flex-1",onClick:()=>C(!1),children:"Cancel"}),n.jsx(se,{className:"flex-[2] bg-slate-900 hover:bg-slate-800 shadow-xl shadow-slate-900/15 font-bold",onClick:Re,children:"Place Order"})]})]})]})}),Y&&re&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-in fade-in duration-300",children:n.jsxs(oe,{className:"w-full max-w-md p-8 shadow-2xl relative overflow-hidden bg-white",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-1.5 bg-blue-600"}),n.jsx("button",{onClick:()=>ae(!1),className:"absolute top-4 right-4 p-2 hover:bg-slate-100 rounded-full text-slate-400 hover:text-slate-900 transition-all",children:n.jsx(xs,{className:"w-5 h-5"})}),n.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Place Your Offer"}),n.jsxs("p",{className:"text-sm text-slate-500 mb-8 border-b border-slate-100 pb-4",children:["Negotiate quantity and price for ",n.jsx("span",{className:"text-slate-900 font-bold",children:re.cropName})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx(fe,{label:"Quantity (kg)",type:"number",value:ce.quantity,onChange:j=>Oe({...ce,quantity:Number(j.target.value)}),max:re.availableQuantity||re.quantity}),n.jsx(fe,{label:"Price (/kg)",type:"number",value:ce.price,onChange:j=>Oe({...ce,price:Number(j.target.value)})})]}),n.jsxs("div",{className:"p-5 bg-blue-50 rounded-2xl border border-blue-100 flex justify-between items-center",children:[n.jsx("div",{className:"text-sm font-bold text-blue-800",children:"Total Offer Value"}),n.jsxs("div",{className:"text-2xl font-black text-blue-900 font-display",children:["",(ce.price*ce.quantity).toLocaleString()]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(se,{variant:"ghost",className:"flex-1",onClick:()=>ae(!1),children:"Cancel"}),n.jsx(se,{className:"flex-[2] bg-blue-600 hover:bg-blue-700 shadow-xl shadow-blue-600/20 font-bold",onClick:Ee,children:"Send Negotiable Offer"})]})]})]})}),yt&&xt&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-in fade-in duration-300",children:n.jsxs(oe,{className:"w-full max-w-lg p-8 shadow-2xl relative overflow-hidden bg-white",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-1.5 bg-blue-600"}),n.jsx("button",{onClick:()=>{nt("mode"),at(!1)},className:"absolute top-4 right-4 p-2 hover:bg-slate-100 rounded-full text-slate-400 hover:text-slate-900 transition-all",children:n.jsx(xs,{className:"w-5 h-5"})}),n.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:ye==="vehicle"?"Choose Vehicle":"Arrange Transport"}),n.jsx("p",{className:"text-sm text-slate-500 mb-8 border-b border-slate-100 pb-4",children:ye==="vehicle"?n.jsxs(n.Fragment,{children:["Select vehicle type for ",n.jsxs("span",{className:"text-slate-900 font-bold",children:["Order #",xt]})]}):n.jsxs(n.Fragment,{children:["Choose how you want transport for ",n.jsxs("span",{className:"text-slate-900 font-bold",children:["Order #",xt]})]})}),ye==="mode"&&n.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[n.jsx(se,{className:"h-12 bg-slate-900 hover:bg-slate-800 font-bold",onClick:()=>{D==null||D(xt,"farmer_arranged"),at(!1),nt("mode")},children:"Farmer Arranged"}),n.jsx(se,{className:"h-12 bg-blue-600 hover:bg-blue-700 font-bold",onClick:()=>{nt("vehicle")},children:"Marketplace"}),n.jsx(se,{variant:"outline",className:"h-12 font-bold border-slate-200",onClick:()=>{D==null||D(xt,"buyer_own"),at(!1),nt("mode")},children:"I Will Arrange"})]}),ye==="vehicle"&&(()=>{const j=(l||[]).find(We=>We.id===xt),I=Number((j==null?void 0:j.distanceKm)||45),Ae=Number((j==null?void 0:j.quantity)||0),_e=["Bike","Auto","Mini Truck","Pickup","Truck"],rt=_e.filter(We=>Ye(We)>=Ae).length;return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 text-xs font-bold text-slate-700",children:["Required load: ",Number(Ae||0).toLocaleString()," kg"]}),rt===0&&n.jsx("div",{className:"p-4 bg-red-50 rounded-2xl border border-red-100 text-xs font-black text-red-700",children:"No vehicle can carry this load. Reduce quantity or use multiple trips."}),n.jsx("div",{className:"grid sm:grid-cols-2 gap-3",children:_e.map(We=>{const Xe=Ye(We),ys=Xe>=Ae,ws=as(I,We);return n.jsxs("button",{type:"button",className:`p-5 rounded-2xl border text-left transition-all ${ys?"bg-white border-slate-200 hover:border-blue-300 hover:shadow-lg":"bg-slate-50 border-slate-200 opacity-60 cursor-not-allowed"}`,disabled:!ys,onClick:()=>{ys&&(vt(String(ws)),Ct({open:!0,type:"vehicle_offer",orderId:xt,vehicleType:We,baseFare:ws}))},children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-xs font-black uppercase tracking-widest text-slate-400",children:"Vehicle"}),n.jsx("div",{className:"text-lg font-black text-slate-900",children:We}),n.jsxs("div",{className:"text-xs text-slate-500 font-bold mt-1",children:["Max ",Xe.toLocaleString()," kg"]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-xs font-black uppercase tracking-widest text-slate-400",children:"Base Fare"}),n.jsxs("div",{className:"text-xl font-black text-blue-600",children:["",ws.toLocaleString()]}),n.jsxs("div",{className:"text-[10px] text-slate-500 font-bold",children:[I," KM est."]})]})]}),!ys&&n.jsx("div",{className:"mt-3 text-[10px] font-black uppercase tracking-widest text-red-600",children:"Not enough capacity"})]},We)})}),n.jsx("div",{className:"flex gap-3",children:n.jsx(se,{variant:"outline",className:"flex-1 h-12 font-black border-slate-200",onClick:()=>nt("mode"),children:"Back"})})]})})()]})})]})},xE=({user:s,orders:t,messages:i,routePlans:l,transportRequests:c,transportBids:u,allUsers:h,onAddRoutePlan:m,onSendMessage:p,onLogout:g,onUpdateOrderStatus:x,onUpdateProfile:w,onRaiseDispute:N,onAddTransportBid:_,onUpdateTransportRequestStatus:T,onCounterTransportBid:U,onTransporterAcceptBuyerCounter:O,onOpenChat:L})=>{var Rt,ia,Rs,ra,Ms,_s,is,Xt,F,K,ee;const[D,M]=q.useState("home"),[ie,ue]=q.useState({type:((Rt=s.profile)==null?void 0:Rt.vehicleType)||"Mini Truck",number:((ia=s.profile)==null?void 0:ia.vehicleNumber)||"",capacity:((Rs=s.profile)==null?void 0:Rs.maxCapacity)||"",available:!0}),[B,H]=q.useState(s.profile||{fullName:s.phone,vehicleType:"Mini Truck",maxCapacity:"2000",approvalStatus:"pending",businessName:"",gstin:"",pan:"",bankDetails:{accountNumber:"",ifsc:"",holderName:"",bankName:""},documents:{license:{number:"",status:"pending"},rc:{number:"",status:"pending"},insurance:{number:"",status:"pending"}}}),[pe,he]=q.useState("overview"),[be,Le]=q.useState("personal"),[st,gt]=q.useState("all"),[re,Me]=q.useState([]),[Y,ae]=q.useState("all"),[ce,Oe]=q.useState(null),[xe,C]=q.useState({name:((ra=s.profile)==null?void 0:ra.fullName)||"",email:"",issue:""}),[J,me]=q.useState({notifyJobs:!0,notifyPayments:!0,language:((Ms=s.profile)==null?void 0:Ms.language)||"English",locationSharing:!0}),[ve,Te]=q.useState(!1),[De,He]=q.useState(null),[yt,at]=q.useState(""),[xt,zt]=q.useState({open:!1,type:"bid",title:""}),[ye,nt]=q.useState(""),[ht,Ct]=q.useState({open:!1,requestId:"",nextStatus:"picked_up"}),[Fe,vt]=q.useState(""),[$t,Et]=q.useState(!1),[ts,ss]=q.useState(!1),[Ye,as]=q.useState({status:"active"}),wt=(y,k)=>{if(!y)return;const G=new FileReader;G.onload=X=>{var Z;const le=new Image;le.onload=()=>{const ge=document.createElement("canvas"),b=ge.getContext("2d"),E=800;let de=le.width,we=le.height;de>we?de>E&&(we*=E/de,de=E):we>E&&(de*=E/we,we=E),ge.width=de,ge.height=we,b==null||b.drawImage(le,0,0,de,we);const Ee=ge.toDataURL("image/jpeg",.7);k(Ee)},le.src=(Z=X.target)==null?void 0:Z.result},G.readAsDataURL(y)},na=y=>{const k=(y||"").toLowerCase();return k.includes("bike")?"Bike":k.includes("auto")?"Auto":k.includes("mini")?"Mini Truck":k.includes("pickup")?"Pickup":k.includes("truck")||k.includes("large")?"Truck":null},ze=()=>{const y=(B.vehicles||[]).filter(X=>(X.status||"active")==="active");if(y.length>0)return y;const k=na(B.vehicleType),G=Number(B.maxCapacity||0);return!k||!Number.isFinite(G)||G<=0?[]:[{id:"fallback",type:k,number:B.vehicleNumber||"",capacity:String(G),status:"active"}]},_t=y=>{const k=ze();if(k.length===0)return!1;const G=Number(y.weightKg||0);return k.some(X=>{const le=na(X.type);if(!le)return!1;const Z=Number(X.capacity||0);return!Number.isFinite(Z)||Z<=0?!1:le===y.vehicleType&&Z>=G})},jt=(c||[]).filter(y=>y.mode==="marketplace"&&y.status==="open"&&!y.transporterId&&_t(y)),bs=(c||[]).filter(y=>y.transporterId===s.id),Vt=bs.filter(y=>y.status==="delivered"),Ds=bs.filter(y=>y.status!=="delivered"&&y.status!=="cancelled"),fs=Vt.reduce((y,k)=>y+(k.finalFare??k.estimatedFare??0),0),ms=y=>{const k=y?String(y):"",G=Date.parse(k);return Number.isFinite(G)?new Date(G).toLocaleString():""},Dt=(y,k)=>{const G=Date.parse(y?String(y):""),X=Date.parse(k?String(k):"");return!Number.isFinite(G)||!Number.isFinite(X)||X<G?null:Math.round((X-G)/6e4)},ns=y=>{const k=Number(y);if(!Number.isFinite(k)||k<0)return"";const G=Math.floor(k/60),X=Math.floor(k%60);return G>0?`${G}h ${X}m`:`${X}m`};return n.jsxs("div",{className:"flex h-screen bg-slate-50 overflow-hidden text-slate-900",children:[n.jsxs("aside",{className:"w-64 bg-slate-900 text-slate-300 flex flex-col p-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-8 px-2",children:[n.jsx("div",{className:"w-10 h-10 bg-orange-600 rounded-xl flex items-center justify-center text-white shadow-lg shadow-orange-600/30",children:n.jsx(gs,{className:"w-6 h-6"})}),n.jsxs("span",{className:"font-bold text-xl text-white tracking-tight leading-tight",children:["KisanSetu ",n.jsx("br",{}),n.jsx("span",{className:"text-orange-500 text-xs uppercase tracking-widest",children:"Logistics"})]})]}),n.jsx("nav",{className:"space-y-1 flex-1",children:[{id:"home",label:"Load Board",icon:IS,badge:jt.length},{id:"deliveries",label:"My Deliveries",icon:Rx,badge:Ds.length},{id:"earnings",label:"Earnings",icon:Nc},{id:"vehicle",label:"Vehicle",icon:gs},{id:"more",label:"Pro Features",icon:ri},{id:"messages",label:"Messages",icon:Xa},{id:"profile",label:"My Profile",icon:si},{id:"notifications",label:"Notifications",icon:Fa,badge:re.filter(y=>!y.isRead).length},{id:"help",label:"Help & Support",icon:xb},{id:"settings",label:"Settings",icon:ri}].map(y=>n.jsxs("button",{onClick:()=>M(y.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-medium transition-all ${D===y.id?"bg-orange-600 text-white shadow-lg shadow-orange-600/20":"hover:bg-slate-800 hover:text-white"}`,children:[n.jsx(y.icon,{className:"w-5 h-5"}),n.jsx("span",{className:"flex-1 text-left",children:y.label}),y.badge&&y.badge>0&&n.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full ${D===y.id?"bg-white/20 text-white":"bg-orange-600/20 text-orange-500"}`,children:y.badge})]},y.id))}),n.jsxs("button",{onClick:g,className:"mt-auto flex items-center gap-2 px-4 py-3 text-slate-500 hover:text-white transition-colors border-t border-slate-800",children:[n.jsx(Nl,{className:"w-5 h-5"})," Logout"]})]}),n.jsxs("main",{className:"flex-1 overflow-y-auto p-4 md:p-8 relative h-screen",children:[D==="home"&&n.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-slate-900",children:"Load Board"}),n.jsx("p",{className:"text-slate-500",children:"Pick up verified loads and start earning"})]}),n.jsx("div",{className:"flex bg-white p-1 rounded-xl border border-slate-200",children:["all","local","inter-city"].map(y=>n.jsx("button",{onClick:()=>gt(y),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${st===y?"bg-orange-100 text-orange-700":"text-slate-500 hover:text-slate-900"}`,children:y==="all"?"All Loads":y==="local"?"Local":"Inter-City"},y))})]}),n.jsxs("div",{className:"grid gap-6",children:[jt.map(y=>{const k=t.find(ge=>ge.id===y.orderId),G=Number((k==null?void 0:k.distanceKm)||45),X=(k==null?void 0:k.cropName)||"Crop",le=Number((k==null?void 0:k.quantity)||y.weightKg||0),Z=(u||[]).some(ge=>ge.requestId===y.id&&ge.transporterId===s.id&&ge.status!=="rejected"&&ge.status!=="withdrawn");return n.jsx(oe,{className:"p-0 overflow-hidden border-orange-100 group hover:shadow-2xl transition-all duration-500",children:n.jsx("div",{className:"flex flex-col md:flex-row",children:n.jsxs("div",{className:"p-6 md:p-8 flex-1",children:[n.jsxs("div",{className:"flex justify-between items-start mb-6",children:[n.jsxs("div",{className:"flex gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-slate-50 rounded-xl flex items-center justify-center text-slate-400 group-hover:text-orange-600 transition-colors",children:n.jsx(Na,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-orange-600 font-black uppercase tracking-widest mb-1",children:"New Load Available"}),n.jsxs("h4",{className:"font-bold text-xl text-slate-800",children:[X,"  ",le," kg"]}),n.jsxs("div",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest mt-1",children:["Vehicle: ",y.vehicleType]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-2xl font-black text-slate-900",children:["",y.estimatedFare]}),n.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider",children:"Est. Payout"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 py-6 border-y border-slate-100 mb-6 font-medium",children:[n.jsxs("div",{className:"flex gap-3 items-center",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-xs",children:"A"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-[10px] text-slate-400 uppercase font-black",children:"Pickup"}),n.jsx("div",{className:"text-sm font-bold truncate",children:y.pickupLocation})]})]}),n.jsx("div",{className:"flex justify-center items-center py-2 md:py-0",children:n.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-slate-50 rounded-full border border-slate-100 text-[10px] font-black text-slate-500 uppercase",children:[n.jsx(tT,{className:"w-3 h-3"})," ",G," KM"]})}),n.jsxs("div",{className:"flex gap-3 items-center",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-xs",children:"B"}),n.jsxs("div",{className:"text-right md:text-left flex-1",children:[n.jsx("div",{className:"text-[10px] text-slate-400 uppercase font-black",children:"Delivery"}),n.jsx("div",{className:"text-sm font-bold truncate",children:y.dropLocation})]})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx(se,{variant:"outline",disabled:Z,className:"flex-1 h-12 font-bold border-slate-200",onClick:()=>{nt(String(y.estimatedFare||0)),zt({open:!0,type:"bid",requestId:y.id,title:"Place Bid"})},children:"Bid Fare"}),n.jsx(se,{disabled:Z,className:"flex-[2] h-12 bg-orange-600 hover:bg-orange-700 shadow-xl shadow-orange-600/20 font-black",onClick:()=>_==null?void 0:_(y.id,s.id,y.estimatedFare,"Accept base fare"),children:"Accept Base"})]}),Z&&(()=>{const ge=(u||[]).find(E=>E.requestId===y.id&&E.transporterId===s.id&&E.status==="pending");if(!ge)return null;const b=ge.lastActionBy==="buyer"&&ge.counterAmount!=null;return n.jsxs("div",{className:"mt-4 p-4 rounded-2xl bg-slate-50 border border-slate-200 flex items-center justify-between gap-3",children:[n.jsxs("div",{className:"min-w-0",children:[n.jsx("div",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest",children:"Your Bid"}),n.jsxs("div",{className:"text-sm font-black text-slate-900",children:["",Number((ge.counterAmount!=null?ge.counterAmount:ge.amount)||0).toLocaleString()]}),b&&n.jsx("div",{className:"text-[10px] font-black text-amber-700",children:"Buyer countered"})]}),b?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(se,{variant:"outline",className:"h-10 text-xs font-black border-slate-200",onClick:()=>{nt(String(ge.amount||y.estimatedFare||0)),zt({open:!0,type:"counter",bidId:ge.id,title:"Counter Offer"})},children:"Counter Back"}),n.jsx(se,{className:"h-10 text-xs font-black bg-orange-600 hover:bg-orange-700",onClick:()=>O==null?void 0:O(ge.id),children:"Accept Counter"})]}):n.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Waiting buyer"})]})})()]})})},y.id)}),jt.length===0&&n.jsx("div",{className:"py-24 text-center border-2 border-dashed border-slate-200 rounded-3xl bg-white/50",children:"No loads currently available in your region. Check back soon."})]})]}),D==="deliveries"&&n.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"My Active Shipments"}),n.jsxs("div",{className:"grid gap-6",children:[Ds.map(y=>{const k=t.find(G=>G.id===y.orderId);return n.jsxs(oe,{className:"p-6 border-orange-100 bg-white",children:[n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-4 mb-8",children:[n.jsxs("div",{className:"flex gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-orange-50 rounded-2xl flex items-center justify-center text-orange-600 shadow-sm",children:n.jsx(Rx,{className:"w-8 h-8"})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-bold text-slate-900",children:["Order #",(k==null?void 0:k.id)||y.orderId,"  ",(k==null?void 0:k.cropName)||"Crop"]}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 text-[10px] font-black rounded-full uppercase tracking-widest",children:String(y.status).replace("_"," ")}),n.jsxs("span",{className:"text-xs text-slate-400 font-medium",children:[(k==null?void 0:k.quantity)||y.weightKg,"kg  ",y.pickupLocation,"  ",y.dropLocation]})]})]})]}),n.jsxs("div",{className:"text-right w-full md:w-auto",children:[n.jsx("div",{className:"text-xs text-slate-400 font-bold uppercase mb-1",children:"Status Update"}),n.jsxs("select",{className:"w-full md:w-56 h-10 bg-slate-100 border-none rounded-xl px-3 text-xs font-bold outline-orange-500",value:y.status,onChange:G=>{const X=G.target.value;if(X==="picked_up"){vt(""),Ct({open:!0,requestId:y.id,nextStatus:"picked_up"});return}if(X==="delivered"){vt(""),Ct({open:!0,requestId:y.id,nextStatus:"delivered"});return}T==null||T(y.id,X)},children:[n.jsx("option",{value:"assigned",children:"Assigned"}),n.jsx("option",{value:"picked_up",children:"Picked Up"}),n.jsx("option",{value:"in_transit",children:"In Transit"}),n.jsx("option",{value:"delivered",children:"Delivered"})]})]})]}),n.jsxs("div",{className:"flex gap-3 mt-4 flex-wrap",children:[n.jsx(se,{variant:"outline",className:"h-10 text-xs font-bold border-dashed border-slate-300 hover:border-orange-500 hover:text-orange-600 transition-colors",onClick:()=>{alert("POD upload will be added soon.")},children:"POD"}),n.jsx(se,{className:"h-10 text-xs font-bold bg-orange-600 hover:bg-orange-700",onClick:()=>{var le,Z,ge;const G=(k==null?void 0:k.buyerId)||y.buyerId||"",X=(k==null?void 0:k.buyerName)||((Z=(le=h==null?void 0:h.find(b=>b.id===G))==null?void 0:le.profile)==null?void 0:Z.fullName)||((ge=h==null?void 0:h.find(b=>b.id===G))==null?void 0:ge.phone)||"Buyer";if(!G){alert("Buyer not found for this order.");return}L==null||L(G,X,void 0,(k==null?void 0:k.id)||y.orderId)},children:"Message"}),n.jsx(se,{variant:"outline",className:"h-10 text-xs font-bold",onClick:()=>{He((k==null?void 0:k.id)||y.orderId),at(""),Te(!0)},children:"Report Issue"})]})]},y.id)}),Ds.length===0&&n.jsx("div",{className:"py-24 text-center border-2 border-dashed border-slate-200 rounded-3xl bg-white/50",children:"No active shipments. Accept a job from the board to start."})]})]}),D==="earnings"&&n.jsxs("div",{className:"space-y-8 animate-in slide-in-from-right-4",children:[n.jsxs("div",{className:"flex justify-between items-end",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-slate-900",children:"Financials"}),n.jsx("p",{className:"text-slate-500",children:"Track your transport earnings"})]}),n.jsxs(se,{className:"bg-green-600 hover:bg-green-700 shadow-lg shadow-green-600/20 font-bold",children:[n.jsx(Nc,{className:"w-4 h-4 mr-2"})," Withdraw Funds"]})]}),n.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:[{label:"Total Earnings",value:`${fs.toLocaleString()}`,color:"bg-green-600",icon:jc},{label:"Deliveries Done",value:Vt.length,color:"bg-orange-600",icon:Ya},{label:"Rating",value:s.profile.rating||5,color:"bg-blue-600",icon:lr}].map((y,k)=>n.jsxs(oe,{className:"p-6 relative overflow-hidden group",children:[n.jsx("div",{className:`absolute top-0 right-0 w-24 h-24 ${y.color} opacity-[0.03] rounded-bl-full -mr-8 -mt-8 group-hover:scale-110 transition-transform`}),n.jsx("div",{className:"text-slate-400 text-xs font-black uppercase tracking-widest mb-2",children:y.label}),n.jsxs("div",{className:"text-3xl font-black text-slate-900 flex items-baseline gap-1",children:[y.value,y.label==="Rating"&&n.jsx("span",{className:"text-xs text-slate-400",children:" / 5.0"})]}),n.jsxs("div",{className:"mt-4 flex items-center text-[10px] font-bold text-green-600",children:[n.jsx(Ji,{className:"w-3 h-3 mr-1"})," +12.5% vs last month"]})]},k))}),n.jsxs(oe,{className:"p-0 overflow-hidden border-slate-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsx("h3",{className:"font-bold text-slate-900",children:"Earning History"}),n.jsx(se,{variant:"ghost",className:"text-xs h-8 font-bold text-slate-500 hover:text-orange-600",children:"Download CSV"})]}),n.jsxs("div",{className:"overflow-x-auto",children:[n.jsxs("table",{className:"w-full text-sm text-left",children:[n.jsx("thead",{className:"bg-slate-50 text-slate-400 uppercase text-[10px] font-black tracking-widest",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-4",children:"Order ID"}),n.jsx("th",{className:"px-6 py-4",children:"Pickup"}),n.jsx("th",{className:"px-6 py-4",children:"Delivered"}),n.jsx("th",{className:"px-6 py-4",children:"Time Taken"}),n.jsx("th",{className:"px-6 py-4",children:"Distance"}),n.jsx("th",{className:"px-6 py-4 text-right",children:"Amount"})]})}),n.jsx("tbody",{className:"divide-y divide-slate-100",children:Vt.map(y=>{const k=t.find(Z=>Z.id===y.orderId),G=Number((k==null?void 0:k.distanceKm)||45),X=Number(y.finalFare??y.estimatedFare??0),le=y.totalTimeMinutes??Dt(y.pickupConfirmedAt,y.deliveryConfirmedAt);return n.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[n.jsxs("td",{className:"px-6 py-4 font-bold text-slate-700",children:["#",y.orderId]}),n.jsx("td",{className:"px-6 py-4 text-slate-500",children:ms(y.pickupConfirmedAt)}),n.jsx("td",{className:"px-6 py-4 text-slate-500",children:ms(y.deliveryConfirmedAt)}),n.jsx("td",{className:"px-6 py-4 text-slate-500",children:ns(le)}),n.jsxs("td",{className:"px-6 py-4 text-slate-500",children:[G," KM"]}),n.jsxs("td",{className:"px-6 py-4 text-right font-black text-slate-900",children:["",X.toLocaleString()]})]},y.id)})})]}),Vt.length===0&&n.jsx("div",{className:"py-12 text-center text-slate-400 text-xs",children:"No payment records found yet."})]})]})]}),D==="vehicle"&&n.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Vehicle Management"}),n.jsx("p",{className:"text-slate-500",children:"Manage your fleet (Max 2)."})]}),(!B.vehicles||B.vehicles.length<2)&&n.jsxs(se,{className:"bg-orange-600 hover:bg-orange-700 font-bold",onClick:()=>{as({status:"active",type:"Mini Truck"}),ss(!1),Et(!0)},children:[n.jsx(uc,{className:"w-5 h-5 mr-1"})," Add Vehicle"]})]}),$t&&n.jsxs(oe,{className:"p-6 border-orange-200 bg-orange-50/50 mb-6",children:[n.jsx("h3",{className:"font-bold text-lg mb-4",children:ts?"Edit Vehicle":"Add New Vehicle"}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-2",children:"Vehicle Type"}),n.jsxs("select",{className:"w-full h-10 bg-white border border-slate-300 rounded-lg px-3 outline-none",value:Ye.type,onChange:y=>as({...Ye,type:y.target.value}),children:[n.jsx("option",{value:"Bike",children:"Bike (up to 150kg)"}),n.jsx("option",{value:"Auto",children:"Auto (up to 400kg)"}),n.jsx("option",{value:"Mini Truck",children:"Mini Truck (up to 2000kg)"}),n.jsx("option",{value:"Pickup",children:"Pickup (up to 5000kg)"}),n.jsx("option",{value:"Truck",children:"Truck (5000kg+)"})]})]}),n.jsx(fe,{label:"Vehicle Number",placeholder:"MP04 GA 1234",value:Ye.number||"",onChange:y=>as({...Ye,number:y.target.value})}),n.jsx(fe,{label:"Capacity (Kg)",type:"number",value:Ye.capacity||"",onChange:y=>as({...Ye,capacity:y.target.value})})]}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-2",children:"Vehicle Photo"}),n.jsx("input",{type:"file",accept:"image/*",className:"text-xs",onChange:y=>{var G;const k=(G=y.target.files)==null?void 0:G[0];k&&wt(k,X=>as(le=>({...le,vehiclePhoto:X})))}}),Ye.vehiclePhoto&&n.jsx("img",{src:Ye.vehiclePhoto,className:"mt-2 h-16 w-full object-cover rounded"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-2",children:"Number Plate"}),n.jsx("input",{type:"file",accept:"image/*",className:"text-xs",onChange:y=>{var G;const k=(G=y.target.files)==null?void 0:G[0];k&&wt(k,X=>as(le=>({...le,numberPlatePhoto:X})))}}),Ye.numberPlatePhoto&&n.jsx("img",{src:Ye.numberPlatePhoto,className:"mt-2 h-16 w-full object-cover rounded"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-2",children:"Driver Photo"}),n.jsx("input",{type:"file",accept:"image/*",className:"text-xs",onChange:y=>{var G;const k=(G=y.target.files)==null?void 0:G[0];k&&wt(k,X=>as(le=>({...le,driverPhoto:X})))}}),Ye.driverPhoto&&n.jsx("img",{src:Ye.driverPhoto,className:"mt-2 h-16 w-full object-cover rounded"})]})]}),n.jsxs("div",{className:"flex gap-3 justify-end",children:[n.jsx(se,{variant:"ghost",onClick:()=>Et(!1),children:"Cancel"}),n.jsx(se,{className:"bg-orange-600 font-bold",onClick:async()=>{if(!Ye.type||!Ye.number||!Ye.capacity)return alert("Please fill all fields");const y=async Z=>Z?Z.startsWith("data:")&&await rr(Z,`vehicles/${s.id}`)||Z:void 0,k=await y(Ye.vehiclePhoto),G=await y(Ye.numberPlatePhoto),X=await y(Ye.driverPhoto);let le=[...B.vehicles||[]];if(ts)le=le.map(Z=>Z.id===Ye.id?{...Z,...Ye,vehiclePhoto:k,numberPlatePhoto:G,driverPhoto:X}:Z);else{if(le.length>=2)return alert("Max 2 vehicles allowed.");const Z={id:Math.random().toString(36).substr(2,9),type:Ye.type,number:Ye.number,capacity:Ye.capacity,status:"active",vehiclePhoto:k,numberPlatePhoto:G,driverPhoto:X};le.push(Z)}H(Z=>({...Z,vehicles:le})),w==null||w({...s.profile,vehicles:le}),Et(!1),ss(!1)},children:ts?"Update Vehicle":"Save Vehicle"})]})]}),n.jsxs("div",{className:"grid gap-6",children:[(B.vehicles||[]).map(y=>n.jsx(oe,{className:"p-6 border-slate-200 bg-white",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-start",children:[n.jsx("div",{className:"w-24 h-24 bg-slate-100 rounded-xl flex items-center justify-center text-slate-300 flex-shrink-0 overflow-hidden relative",children:y.vehiclePhoto?n.jsx("img",{src:y.vehiclePhoto,className:"w-full h-full object-cover"}):n.jsx(gs,{className:"w-10 h-10"})}),n.jsxs("div",{className:"flex-1 w-full",children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-slate-900",children:y.type}),n.jsx("p",{className:"text-sm text-slate-500 font-bold uppercase tracking-wider",children:y.number})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`w-3 h-3 rounded-full ${y.status==="active"?"bg-green-500":"bg-slate-300"}`}),n.jsx("span",{className:"text-sm font-bold text-slate-700",children:y.status==="active"?"Active":"Inactive"})]})]}),n.jsxs("div",{className:"flex gap-4 text-sm text-slate-600 mb-4",children:[n.jsxs("span",{className:"bg-slate-50 px-2 py-1 rounded border border-slate-100 font-bold",children:["Capacity: ",y.capacity," kg"]}),n.jsx("span",{className:"bg-slate-50 px-2 py-1 rounded border border-slate-100 font-bold",children:"All India Permit"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(se,{variant:"outline",size:"sm",className:"font-bold",onClick:()=>{as(y),ss(!0),Et(!0)},children:"Edit Details"}),n.jsx(se,{variant:"outline",size:"sm",className:`font-bold ${y.status==="active"?"text-red-600 hover:bg-red-50":"text-green-600 hover:bg-green-50"}`,onClick:()=>{const k=(B.vehicles||[]).map(G=>G.id===y.id?{...G,status:G.status==="active"?"inactive":"active"}:G);H(G=>({...G,vehicles:k})),w==null||w({...s.profile,vehicles:k})},children:y.status==="active"?"Deactivate":"Activate"}),n.jsx(se,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700 hover:bg-red-50 font-bold",onClick:()=>{if(!confirm("Delete this vehicle?"))return;const k=(B.vehicles||[]).filter(G=>G.id!==y.id);H(G=>({...G,vehicles:k})),w==null||w({...s.profile,vehicles:k})},children:"Delete"})]})]})]})},y.id)),(!B.vehicles||B.vehicles.length===0)&&!$t&&n.jsxs("div",{className:"text-center py-12 bg-slate-50 rounded-xl border-2 border-dashed border-slate-200",children:[n.jsx(gs,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("h3",{className:"text-slate-900 font-bold",children:"No Vehicles Added"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"Add your trucks to start receiving orders."})]})]})]}),D==="profile"&&n.jsx("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[n.jsxs(oe,{className:"w-full md:w-80 p-6 h-fit text-center",children:[n.jsx("div",{className:"w-24 h-24 bg-orange-100 rounded-full mx-auto flex items-center justify-center text-orange-600 mb-4 text-3xl font-black",children:(s.profile.fullName||"U").charAt(0)}),n.jsx("h2",{className:"text-xl font-bold text-slate-900",children:s.profile.fullName||"User"}),n.jsxs("p",{className:"text-sm text-slate-500 mb-6",children:[s.profile.city||"Mumbai",", ",s.profile.state||"Maharashtra"]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6 text-left",children:[n.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[n.jsx("div",{className:"text-xs text-slate-400 font-bold uppercase",children:"Rating"}),n.jsxs("div",{className:"font-bold text-slate-700 flex items-center gap-1",children:["4.8 ",n.jsx(lr,{className:"w-3 h-3 text-orange-400 fill-current"})]})]}),n.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[n.jsx("div",{className:"text-xs text-slate-400 font-bold uppercase",children:"Trips"}),n.jsx("div",{className:"font-bold text-slate-700",children:Vt.length})]})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx(se,{variant:pe==="overview"?"default":"ghost",className:pe==="overview"?"bg-orange-600":"",onClick:()=>he("overview"),children:"Overview"}),n.jsx(se,{variant:pe==="edit"?"default":"ghost",className:pe==="edit"?"bg-orange-600":"",onClick:()=>he("edit"),children:"Edit Profile"})]})]}),n.jsx("div",{className:"flex-1",children:pe==="overview"?n.jsxs("div",{className:"space-y-6",children:[n.jsxs(oe,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Primary Vehicle"}),B.vehicles&&B.vehicles.length>0?n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-lg overflow-hidden flex items-center justify-center",children:B.vehicles[0].vehiclePhoto?n.jsx("img",{src:B.vehicles[0].vehiclePhoto,className:"w-full h-full object-cover"}):n.jsx(gs,{className:"w-8 h-8 text-slate-400"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-bold text-slate-900",children:B.vehicles[0].type}),n.jsx("div",{className:"text-sm text-slate-500 uppercase font-bold tracking-wider",children:B.vehicles[0].number})]}),n.jsx(se,{variant:"outline",size:"sm",className:"ml-auto",onClick:()=>M("vehicle"),children:"Manage Fleet"})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("p",{className:"text-sm text-slate-500 mb-3",children:"No vehicle added yet."}),n.jsx(se,{size:"sm",onClick:()=>{M("vehicle"),Et(!0),ss(!1),as({status:"active",type:"Mini Truck"})},children:"Add Primary Vehicle"})]})]}),n.jsxs(oe,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Business Profile"}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Firm Name"}),n.jsx("p",{className:"font-medium text-slate-900",children:B.businessName||"Not Added"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"GSTIN"}),n.jsx("p",{className:"font-medium text-slate-900",children:B.gstin||"Not Added"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Operating Regions"}),n.jsx("div",{className:"flex gap-2 mt-1 flex-wrap",children:["Mumbai","Pune","Nashik"].map(y=>n.jsx("span",{className:"px-2 py-1 bg-slate-100 rounded text-xs font-bold text-slate-600",children:y},y))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Route Type"}),n.jsx("p",{className:"font-medium text-slate-700",children:"Inter-district"})]})]})]}),n.jsxs(oe,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Verification Status"}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-green-50 text-green-700 rounded-lg font-bold text-sm",children:[n.jsx(Ya,{className:"w-4 h-4"})," Phone Verified"]}),n.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-lg font-bold text-sm ${B.gstin?"bg-green-50 text-green-700":"bg-slate-50 text-slate-500"}`,children:[B.gstin?n.jsx(Ya,{className:"w-4 h-4"}):n.jsx(yc,{className:"w-4 h-4"})," GSTIN ",B.gstin?"Verified":"Pending"]}),n.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-lg font-bold text-sm ${(_s=B.bankDetails)!=null&&_s.accountNumber?"bg-green-50 text-green-700":"bg-slate-50 text-slate-500"}`,children:[(is=B.bankDetails)!=null&&is.accountNumber?n.jsx(Ya,{className:"w-4 h-4"}):n.jsx(yc,{className:"w-4 h-4"})," Bank Added"]})]})]})]}):n.jsxs(oe,{className:"p-0 overflow-hidden",children:[n.jsx("div",{className:"flex border-b border-slate-100 bg-slate-50",children:["personal","business","bank","vehicle","docs"].map(y=>n.jsx("button",{onClick:()=>Le(y),className:`flex-1 py-3 text-sm font-bold capitalize transition-colors ${be===y?"bg-white text-orange-600 border-t-2 border-orange-600":"text-slate-500 hover:text-slate-800"}`,children:y==="docs"?"Documents":y==="vehicle"?"Vehicle":y},y))}),n.jsxs("div",{className:"p-6",children:[be==="personal"&&n.jsxs("div",{className:"space-y-4 animate-in fade-in",children:[n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsx(fe,{label:"Full Name",value:B.fullName||"",onChange:y=>H({...B,fullName:y.target.value})}),n.jsx(fe,{label:"Language",value:B.language||"",onChange:y=>H({...B,language:y.target.value})})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsx(fe,{label:"City",value:B.city||"",onChange:y=>H({...B,city:y.target.value})}),n.jsx(fe,{label:"State",value:B.state||"",onChange:y=>H({...B,state:y.target.value})})]})]}),be==="business"&&n.jsxs("div",{className:"space-y-4 animate-in fade-in",children:[n.jsx(fe,{label:"Business/Firm Name",value:B.businessName||"",onChange:y=>H({...B,businessName:y.target.value})}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsx(fe,{label:"GSTIN",value:B.gstin||"",onChange:y=>H({...B,gstin:y.target.value})}),n.jsx(fe,{label:"PAN Number",value:B.pan||"",onChange:y=>H({...B,pan:y.target.value})})]}),n.jsx(fe,{label:"Operating Regions (Comma separated)",placeholder:"e.g. Mumbai, Pune, Nashik"})]}),be==="bank"&&n.jsxs("div",{className:"space-y-4 animate-in fade-in",children:[n.jsxs("div",{className:"p-3 bg-blue-50 text-blue-700 rounded-lg text-sm mb-4 flex gap-2",children:[n.jsx(gf,{className:"w-4 h-4 mt-0.5"})," Bank details are securely stored and used only for payouts."]}),n.jsx(fe,{label:"Account Holder Name",value:((Xt=B.bankDetails)==null?void 0:Xt.holderName)||"",onChange:y=>H({...B,bankDetails:{...B.bankDetails||{},holderName:y.target.value}})}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsx(fe,{label:"Account Number",value:((F=B.bankDetails)==null?void 0:F.accountNumber)||"",onChange:y=>H({...B,bankDetails:{...B.bankDetails||{},accountNumber:y.target.value}})}),n.jsx(fe,{label:"IFSC Code",value:((K=B.bankDetails)==null?void 0:K.ifsc)||"",onChange:y=>H({...B,bankDetails:{...B.bankDetails||{},ifsc:y.target.value}})})]}),n.jsx(fe,{label:"Bank Name",value:((ee=B.bankDetails)==null?void 0:ee.bankName)||"",onChange:y=>H({...B,bankDetails:{...B.bankDetails||{},bankName:y.target.value}})})]}),be==="vehicle"&&n.jsxs("div",{className:"space-y-4 animate-in fade-in",children:[n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-2",children:"Vehicle Type"}),n.jsxs("select",{className:"w-full h-12 bg-white border border-slate-300 rounded-xl px-3 outline-none",value:B.vehicleType,onChange:y=>H({...B,vehicleType:y.target.value}),children:[n.jsx("option",{children:"Pickup Truck"}),n.jsx("option",{children:"Mini Truck"}),n.jsx("option",{children:"Tractor Trolley"}),n.jsx("option",{children:"Large Truck"})]})]}),n.jsx(fe,{label:"Vehicle Name",value:B.vehicleName||"",onChange:y=>H({...B,vehicleName:y.target.value})})]}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[n.jsx(fe,{label:"Capacity (Kg)",type:"number",value:B.maxCapacity,onChange:y=>H({...B,maxCapacity:y.target.value})}),n.jsx(fe,{label:"Vehicle Number",placeholder:"MP04 GA 1234",value:B.vehicleNumber||"",onChange:y=>H({...B,vehicleNumber:y.target.value})}),n.jsx("div",{className:"flex items-end",children:n.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase",children:"Max 5MB images"})})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1.5 ml-1",children:"Number Plate Photo"}),n.jsx("input",{type:"file",accept:"image/*",className:"w-full bg-white/60 backdrop-blur-sm border border-slate-200 rounded-xl px-4 py-3",onChange:async y=>{var X;const k=(X=y.target.files)==null?void 0:X[0];if(!k||k.size>5*1024*1024)return;const G=await rr(k,`vehicles/${s.id}`);G&&H(le=>({...le,numberPlatePhoto:G}))}}),B.numberPlatePhoto&&n.jsx("img",{src:B.numberPlatePhoto,alt:"Number Plate",className:"mt-2 h-24 w-full object-cover rounded-lg border border-slate-200"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1.5 ml-1",children:"Vehicle Photo"}),n.jsx("input",{type:"file",accept:"image/*",className:"w-full bg-white/60 backdrop-blur-sm border border-slate-200 rounded-xl px-4 py-3",onChange:async y=>{var X;const k=(X=y.target.files)==null?void 0:X[0];if(!k||k.size>5*1024*1024)return;const G=await rr(k,`vehicles/${s.id}`);G&&H(le=>({...le,vehiclePhoto:G}))}}),B.vehiclePhoto&&n.jsx("img",{src:B.vehiclePhoto,alt:"Vehicle",className:"mt-2 h-24 w-full object-cover rounded-lg border border-slate-200"})]})]})]}),be==="docs"&&n.jsx("div",{className:"space-y-4 animate-in fade-in",children:["Driving License","RC Book","Insurance Policy"].map((y,k)=>n.jsxs("div",{className:"flex items-center justify-between p-4 border border-slate-200 rounded-xl",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-lg flex items-center justify-center text-slate-400",children:n.jsx(jl,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-slate-900",children:y}),n.jsx("p",{className:"text-xs text-slate-500",children:"JPG, PNG or PDF  Max 5MB"})]})]}),n.jsx(se,{variant:"outline",className:"text-sm font-bold",children:"Upload"})]},k))}),n.jsxs("div",{className:"pt-6 mt-6 border-t border-slate-100 flex gap-3",children:[n.jsx(se,{className:"flex-1 bg-orange-600 hover:bg-orange-700 font-bold",onClick:()=>{w(s.id,B),he("overview")},children:"Save All Changes"}),n.jsx(se,{variant:"ghost",onClick:()=>he("overview"),children:"Cancel"})]})]})]})})]})}),D==="notifications"&&n.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Notifications"}),n.jsx("p",{className:"text-slate-500",children:"Job alerts and updates."})]}),n.jsx("div",{className:"flex gap-2 flex-wrap",children:["all","unread","job"].map(y=>n.jsx("button",{onClick:()=>ae(y),className:`px-4 py-2 rounded-full text-sm font-bold transition-all ${Y===y?"bg-orange-600 text-white shadow-lg":"bg-white text-slate-600 hover:bg-slate-100 border border-slate-200"}`,children:y==="all"?"All":y==="unread"?"Unread":"Jobs"},y))})]}),n.jsx(oe,{className:"overflow-hidden",children:n.jsx("div",{className:"divide-y divide-slate-100",children:re.map(y=>n.jsxs("div",{className:`p-4 flex items-start gap-4 hover:bg-slate-50 transition-colors cursor-pointer ${y.isRead?"":"bg-orange-50/50"}`,onClick:()=>Me(k=>k.map(G=>G.id===y.id?{...G,isRead:!0}:G)),children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${y.type==="job"?"bg-orange-100 text-orange-600":"bg-slate-100 text-slate-600"}`,children:y.type==="job"?n.jsx(gs,{className:"w-5 h-5"}):n.jsx(Fa,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h4",{className:"font-bold text-slate-900 truncate",children:y.title}),!y.isRead&&n.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full flex-shrink-0"})]}),n.jsx("p",{className:"text-sm text-slate-600 line-clamp-2",children:y.message}),n.jsx("span",{className:"text-xs text-slate-400 mt-1 block",children:y.timestamp})]})]},y.id))})})]}),D==="messages"&&n.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Messages"}),n.jsx(oe,{className:"p-6",children:n.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"md:col-span-1 space-y-3",children:[n.jsx("div",{className:"text-xs font-black uppercase text-slate-400",children:"Conversations"}),n.jsxs("div",{className:"space-y-2",children:[(i||[]).filter(y=>y.fromUserId===s.id||y.toUserId===s.id).slice(0,10).map(y=>n.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[n.jsx("div",{className:"text-xs text-slate-400",children:new Date(y.timestamp).toLocaleString()}),n.jsx("div",{className:"text-sm font-medium text-slate-800",children:y.text})]},y.id)),(i||[]).filter(y=>y.fromUserId===s.id||y.toUserId===s.id).length===0&&n.jsx("div",{className:"text-xs text-slate-400",children:"No messages yet."})]})]}),n.jsxs("div",{className:"md:col-span-2 space-y-3",children:[n.jsx("div",{className:"text-xs font-black uppercase text-slate-400",children:"New Message"}),n.jsx("select",{className:"w-full h-11 bg-slate-50 border border-slate-200 rounded-xl px-4 text-sm font-medium outline-nature-500",id:"msg-recipient",children:t.map(y=>n.jsx("option",{value:y.buyerName,children:y.buyerName},y.id))}),n.jsx(fe,{id:"msg-text",placeholder:"Type your message"}),n.jsx(se,{className:"w-full md:w-auto",onClick:()=>{var b,E;const y=document.getElementById("msg-recipient"),k=document.getElementById("msg-text"),G=y==null?void 0:y.value,X=(k==null?void 0:k.value)||"";if(!X)return;const Z=G||"Recipient",ge=Z&&((b=h.find(de=>{var we;return((we=de.profile)==null?void 0:we.fullName)===Z}))==null?void 0:b.id)||((E=h.find(de=>de.role==="buyer"))==null?void 0:E.id)||"";p==null||p({toUserId:ge,text:X}),k&&(k.value="")},children:"Send"})]})]})})]}),D==="addresses"&&n.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Addresses"}),n.jsxs(oe,{className:"p-6 space-y-4",children:[n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsx(fe,{label:"Label",placeholder:"Farm / Warehouse",onChange:y=>{var k;return H({...B,addresses:[{...((k=B.addresses)==null?void 0:k[0])||{line1:""},label:y.target.value}]})}}),n.jsx(fe,{label:"Contact Name",onChange:y=>{var k;return H({...B,addresses:[{...((k=B.addresses)==null?void 0:k[0])||{line1:""},contactName:y.target.value}]})}})]}),n.jsx(fe,{label:"Phone",onChange:y=>{var k;return H({...B,addresses:[{...((k=B.addresses)==null?void 0:k[0])||{line1:""},phone:y.target.value}]})}}),n.jsx(fe,{label:"Address Line",onChange:y=>{var k;return H({...B,addresses:[{...((k=B.addresses)==null?void 0:k[0])||{line1:""},line1:y.target.value}]})}}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[n.jsx(fe,{label:"City/District",onChange:y=>{var k;return H({...B,addresses:[{...((k=B.addresses)==null?void 0:k[0])||{line1:""},district:y.target.value}]})}}),n.jsx(fe,{label:"State",onChange:y=>{var k;return H({...B,addresses:[{...((k=B.addresses)==null?void 0:k[0])||{line1:""},state:y.target.value}]})}}),n.jsx(fe,{label:"PIN Code",onChange:y=>{var k;return H({...B,addresses:[{...((k=B.addresses)==null?void 0:k[0])||{line1:""},pincode:y.target.value}]})}})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(se,{className:"bg-nature-600",onClick:()=>w(s.id,B),children:"Save Address"}),n.jsx(se,{variant:"ghost",onClick:()=>H({...B,addresses:[]}),children:"Clear"})]})]})]}),D==="help"&&n.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Help & Support"}),n.jsx("p",{className:"text-slate-500",children:"Logistics assistance."})]}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[n.jsxs(oe,{className:"p-5 hover:shadow-lg transition-shadow cursor-pointer text-center",children:[n.jsx(Sl,{className:"w-8 h-8 text-orange-600 mx-auto mb-3"}),n.jsx("h4",{className:"font-bold text-slate-900",children:"Driver Helpline"}),n.jsx("span",{className:"text-orange-600 font-bold",children:"1800-KISAN-DRIVER"})]}),n.jsxs(oe,{className:"p-5 hover:shadow-lg transition-shadow cursor-pointer text-center",children:[n.jsx(Lc,{className:"w-8 h-8 text-orange-600 mx-auto mb-3"}),n.jsx("h4",{className:"font-bold text-slate-900",children:"Email Support"}),n.jsx("span",{className:"text-orange-600 font-bold",children:"logistics@kisansetu.in"})]}),n.jsxs(oe,{className:"p-5 hover:shadow-lg transition-shadow cursor-pointer text-center",children:[n.jsx(Xa,{className:"w-8 h-8 text-orange-600 mx-auto mb-3"}),n.jsx("h4",{className:"font-bold text-slate-900",children:"Live Chat"}),n.jsx("span",{className:"text-orange-600 font-bold",children:"Start Chat"})]})]}),n.jsxs(oe,{className:"p-6",children:[n.jsx("h3",{className:"font-bold text-slate-800 mb-4",children:"Frequently Asked Questions"}),n.jsx("div",{className:"space-y-2",children:[{q:"How are shipping fees calculated?",a:"Fees are based on distance (km) and load weight."},{q:"What if my vehicle breaks down?",a:"Contact the helpline immediately to arrange backup transport."}].map((y,k)=>n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[n.jsx("h5",{className:"font-bold text-slate-900 text-sm mb-1",children:y.q}),n.jsx("p",{className:"text-sm text-slate-600",children:y.a})]},k))})]})]}),D==="messages"&&n.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Messages"}),n.jsx("p",{className:"text-slate-500",children:"Chat with farmers and buyers."})]}),n.jsx(oe,{className:"p-6",children:n.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"md:col-span-1 space-y-2",children:[n.jsx("div",{className:"text-xs font-black uppercase text-slate-400",children:"Recent"}),n.jsxs("div",{className:"space-y-2",children:[(i||[]).filter(y=>y.fromUserId===s.id||y.toUserId===s.id).slice(0,10).map(y=>n.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[n.jsx("div",{className:"text-xs text-slate-400",children:new Date(y.timestamp).toLocaleString()}),n.jsx("div",{className:"text-sm font-medium text-slate-800",children:y.text})]},y.id)),(i||[]).filter(y=>y.fromUserId===s.id||y.toUserId===s.id).length===0&&n.jsx("div",{className:"text-xs text-slate-400",children:"No messages yet."})]})]}),n.jsxs("div",{className:"md:col-span-2 space-y-3",children:[n.jsx("div",{className:"text-xs font-black uppercase text-slate-400",children:"New Message"}),n.jsx("select",{className:"w-full h-11 bg-slate-50 border border-slate-200 rounded-xl px-4 text-sm font-medium outline-nature-500",id:"t-msg-recipient",children:Ds.map(y=>n.jsx("option",{value:y.farmerName,children:y.farmerName},y.id))}),n.jsx(fe,{id:"t-msg-text",placeholder:"Type your message"}),n.jsx(se,{className:"w-full md:w-auto",onClick:()=>{var Z,ge;const y=document.getElementById("t-msg-recipient"),k=document.getElementById("t-msg-text"),G=y==null?void 0:y.value,X=(k==null?void 0:k.value)||"";if(!X)return;const le=G&&((Z=h.find(b=>{var E;return((E=b.profile)==null?void 0:E.fullName)===G}))==null?void 0:Z.id)||((ge=h.find(b=>b.role==="farmer"))==null?void 0:ge.id)||"";p==null||p({toUserId:le,text:X}),k&&(k.value="")},children:"Send"})]})]})})]}),D==="settings"&&n.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Settings"}),n.jsx("p",{className:"text-slate-500",children:"App preferences."})]}),n.jsxs(oe,{className:"p-0 overflow-hidden",children:[n.jsx("div",{className:"p-4 border-b border-slate-100 bg-slate-50 font-bold text-slate-800",children:"Preferences"}),n.jsx("div",{className:"p-4 space-y-4",children:["notifyJobs","notifyPayments","locationSharing"].map(y=>n.jsxs("div",{className:"flex items-center justify-between p-2",children:[n.jsx("span",{className:"font-medium text-slate-700 capitalize",children:y.replace("notify","").replace(/([A-Z])/g," $1").trim()}),n.jsx("button",{onClick:()=>me(k=>({...k,[y]:!k[y]})),className:`w-12 h-7 rounded-full transition-colors relative ${J[y]?"bg-orange-600":"bg-slate-300"}`,children:n.jsx("span",{className:`absolute top-1 w-5 h-5 bg-white rounded-full shadow transition-transform ${J[y]?"translate-x-6":"translate-x-1"}`})})]},y))})]})]}),D==="more"&&n.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Pro Features"}),n.jsx("p",{className:"text-slate-500",children:"Explore advanced transport tools."})]}),n.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{title:"Route Optimization",desc:"Multi-stop planning and ETAs"},{title:"Fleet Management",desc:"Maintenance and permits"},{title:"Compliance",desc:"Docs and audits"},{title:"Earnings Analytics",desc:"Utilization and trends"},{title:"Preferred Partners",desc:"Favorites and SLAs"},{title:"POD Workflows",desc:"Digital signatures and proofs"}].map((y,k)=>n.jsxs(oe,{className:"p-5",children:[n.jsx("h4",{className:"font-bold text-slate-900",children:y.title}),n.jsx("p",{className:"text-sm text-slate-600",children:y.desc}),n.jsx("div",{className:"mt-3",children:n.jsx(se,{variant:"outline",className:"text-xs",children:"Coming Soon"})})]},k))})]})]}),xt.open&&n.jsx("div",{className:"fixed inset-0 z-[120] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",children:n.jsxs(oe,{className:"w-full max-w-md relative bg-white p-0 overflow-hidden",children:[n.jsxs("div",{className:"p-5 border-b border-slate-100 flex items-center justify-between",children:[n.jsx("div",{className:"font-bold text-slate-900",children:xt.title}),n.jsx("button",{onClick:()=>zt(y=>({...y,open:!1})),className:"bg-white/80 rounded-full p-2 text-slate-700 border border-slate-200",children:n.jsx(xs,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"p-5 space-y-4",children:n.jsx(fe,{label:"Amount ()",type:"number",value:ye,onChange:y=>nt(y.target.value)})}),n.jsxs("div",{className:"p-5 border-t border-slate-100 bg-slate-50 flex justify-end gap-3",children:[n.jsx(se,{variant:"ghost",onClick:()=>zt(y=>({...y,open:!1})),className:"h-10 text-sm font-bold",children:"Cancel"}),n.jsx(se,{className:"h-10 text-sm font-bold bg-orange-600 hover:bg-orange-700",onClick:()=>{const y=Number(ye);if(!(!Number.isFinite(y)||y<=0)){if(xt.type==="bid"){if(!xt.requestId)return;_==null||_(xt.requestId,s.id,y),zt(k=>({...k,open:!1}));return}if(xt.type==="counter"){if(!xt.bidId)return;U==null||U(xt.bidId,y,"transporter"),zt(k=>({...k,open:!1}));return}}},children:"Confirm"})]})]})}),ht.open&&n.jsx("div",{className:"fixed inset-0 z-[120] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",children:n.jsxs(oe,{className:"w-full max-w-md relative bg-white p-0 overflow-hidden",children:[n.jsxs("div",{className:"p-5 border-b border-slate-100 flex items-center justify-between",children:[n.jsx("div",{className:"font-bold text-slate-900",children:ht.nextStatus==="picked_up"?"Pickup Verification":"Delivery Verification"}),n.jsx("button",{onClick:()=>Ct(y=>({...y,open:!1})),className:"bg-white/80 rounded-full p-2 text-slate-700 border border-slate-200",children:n.jsx(xs,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"p-5 space-y-4",children:[n.jsx("div",{className:"text-sm text-slate-600 font-bold text-center",children:"Enter OTP"}),n.jsx(hT,{onComplete:y=>vt(y)})]}),n.jsxs("div",{className:"p-5 border-t border-slate-100 bg-slate-50 flex justify-end gap-3",children:[n.jsx(se,{variant:"ghost",onClick:()=>Ct(y=>({...y,open:!1})),className:"h-10 text-sm font-bold",children:"Cancel"}),n.jsx(se,{className:"h-10 text-sm font-bold bg-orange-600 hover:bg-orange-700",disabled:(Fe||"").length<6,onClick:()=>{ht.requestId&&(T==null||T(ht.requestId,ht.nextStatus,Fe),Ct(y=>({...y,open:!1})))},children:"Verify"})]})]})}),ve&&n.jsx("div",{className:"fixed inset-0 z-[120] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",children:n.jsxs(oe,{className:"w-full max-w-lg relative bg-white p-0 overflow-hidden",children:[n.jsxs("div",{className:"p-5 border-b border-slate-100 flex items-center justify-between",children:[n.jsx("div",{className:"font-bold text-slate-900",children:"Report Issue"}),n.jsx("button",{onClick:()=>Te(!1),className:"bg-white/80 rounded-full p-2 text-slate-700 border border-slate-200",children:n.jsx(xs,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"p-5 space-y-3",children:[n.jsx("div",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Order"}),n.jsx("div",{className:"text-sm font-bold text-slate-900",children:De}),n.jsx("div",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mt-2",children:"Describe the issue"}),n.jsx("textarea",{value:yt,onChange:y=>at(y.target.value),rows:4,className:"w-full bg-white border border-slate-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-orange-500/30 focus:border-orange-500 transition-all placeholder:text-slate-400",placeholder:"e.g., buyer unreachable, vehicle breakdown, address mismatch..."})]}),n.jsxs("div",{className:"p-5 border-t border-slate-100 bg-slate-50 flex justify-end gap-3",children:[n.jsx(se,{variant:"ghost",onClick:()=>Te(!1),className:"h-10 text-sm font-bold",children:"Cancel"}),n.jsx(se,{className:"h-10 text-sm font-bold bg-orange-600 hover:bg-orange-700",disabled:!De||yt.trim().length===0,onClick:()=>{if(!De)return;const y=yt.trim();y&&(N==null||N({orderId:De,raisedBy:s.profile.fullName,role:"transporter",issue:y}),Te(!1))},children:"Submit"})]})]})})]})},vE=({allUsers:s,listings:t,orders:i,disputes:l,systemConfig:c,onUpdateConfig:u,onLogout:h,onUpdateUserStatus:m,onResolveDispute:p})=>{var _;const[g,x]=q.useState("disputes"),[w,N]=q.useState(null);return s.filter(T=>T.role==="transporter"&&T.profile.approvalStatus==="pending"),n.jsxs("div",{className:"flex h-screen bg-slate-100 overflow-hidden",children:[n.jsxs("div",{className:"w-64 bg-slate-900 text-slate-300 flex flex-col p-4",children:[n.jsxs("div",{className:"text-white font-bold text-xl mb-8 flex items-center gap-2 px-2",children:[n.jsx(Qa,{className:"w-6 h-6 text-nature-500"})," Admin"]}),n.jsx("nav",{className:"space-y-1",children:["Overview","Approvals","Users","Disputes","Settings"].map(T=>n.jsx("button",{onClick:()=>x(T.toLowerCase()),className:`w-full text-left px-4 py-3 rounded-xl transition-all ${g===T.toLowerCase()?"bg-nature-600 text-white":"hover:bg-slate-800"}`,children:T},T))}),n.jsxs("button",{onClick:h,className:"mt-auto flex items-center gap-2 px-4 py-3 text-slate-400 hover:text-white",children:[n.jsx(Nl,{className:"w-5 h-5"})," Logout"]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-8 relative",children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-6 capitalize",children:g}),g==="disputes"&&n.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"font-bold text-lg text-slate-800",children:"Dispute Resolution Center"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{className:"px-3 py-1 bg-white border border-slate-200 rounded-lg text-sm text-slate-600",children:"All Status"}),n.jsx("button",{className:"px-3 py-1 bg-white border border-slate-200 rounded-lg text-sm text-slate-600",children:"Newest First"})]})]}),n.jsx("div",{className:"grid gap-4",children:l.map(T=>n.jsx(oe,{className:`border-l-4 ${T.status==="open"?"border-red-500":"border-green-500"} relative overflow-hidden group`,children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold uppercase ${T.status==="open"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:T.status}),n.jsxs("span",{className:"text-xs text-slate-400",children:["#",T.id,"  Order ",T.orderId]})]}),n.jsx("h4",{className:"font-bold text-slate-900 text-lg",children:T.issue}),n.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-slate-600",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(si,{className:"w-3 h-3"})," ",T.raisedBy," (",T.role,")"]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(wc,{className:"w-3 h-3"})," ",new Date(T.createdAt).toLocaleDateString()]}),T.amount&&n.jsxs("span",{className:"flex items-center gap-1 font-medium text-slate-800",children:[n.jsx(jc,{className:"w-3 h-3"})," Disputed: ",T.amount.toLocaleString()]})]})]}),n.jsx("div",{className:"flex flex-col items-end gap-3",children:T.status==="open"?n.jsxs(n.Fragment,{children:[n.jsx(se,{className:"h-9 text-xs w-32",onClick:()=>N(T),children:"View Details"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{className:"text-xs text-green-600 font-medium hover:underline",onClick:()=>p(T.id,"resolved_farmer"),children:"Release Funds"}),n.jsx("span",{className:"text-slate-300",children:"|"}),n.jsx("button",{className:"text-xs text-red-600 font-medium hover:underline",onClick:()=>p(T.id,"refund_buyer"),children:"Refund Buyer"})]})]}):n.jsx(se,{variant:"ghost",className:"h-9 text-xs",onClick:()=>N(T),children:"View History"})})]})},T.id))}),l.length===0&&n.jsx("div",{className:"text-center py-20 text-slate-400 bg-white rounded-2xl border border-dashed border-slate-200",children:"No active disputes found."})]}),w&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl overflow-hidden shadow-2xl flex flex-col max-h-[90vh]",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xl font-bold text-slate-900",children:["Dispute Details #",w.id]}),n.jsxs("p",{className:"text-sm text-slate-500",children:["Order ID: ",w.orderId]})]}),n.jsx("button",{onClick:()=>N(null),className:"p-2 hover:bg-slate-200 rounded-full",children:n.jsx(xs,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"p-6 overflow-y-auto space-y-6",children:[n.jsxs("div",{className:"flex gap-4 p-4 bg-red-50 text-red-800 rounded-xl border border-red-100 items-start",children:[n.jsx(rT,{className:"w-5 h-5 mt-0.5 shrink-0"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-bold text-sm uppercase mb-1",children:"Issue Reported"}),n.jsx("p",{className:"font-medium",children:w.issue})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Raised By"}),n.jsx("div",{className:"font-medium text-slate-900",children:w.raisedBy}),n.jsx("div",{className:"text-sm text-slate-500 capitalize",children:w.role})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:"Dispute Amount"}),n.jsxs("div",{className:"font-medium text-slate-900",children:["",((_=w.amount)==null?void 0:_.toLocaleString())||"N/A"]}),n.jsx("div",{className:"text-sm text-slate-500",children:"Held in Escrow"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase mb-2 block",children:"Detailed Description"}),n.jsx("div",{className:"p-4 bg-slate-50 rounded-xl text-slate-700 text-sm leading-relaxed border border-slate-200",children:w.details||"No additional details provided."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase mb-2 block",children:"Attached Evidence"}),n.jsx("div",{className:"flex gap-3",children:[1,2].map(T=>n.jsx("div",{className:"w-24 h-24 bg-slate-100 rounded-lg border border-slate-200 flex items-center justify-center cursor-pointer hover:bg-slate-200",children:n.jsx(jl,{className:"w-6 h-6 text-slate-400"})},T))})]})]}),n.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex justify-end gap-3",children:[n.jsx(se,{variant:"ghost",onClick:()=>N(null),children:"Close"}),w.status==="open"&&n.jsxs(n.Fragment,{children:[n.jsx(se,{variant:"outline",className:"border-red-200 text-red-600 hover:bg-red-50",onClick:()=>{p(w.id,"refund_buyer"),N(null)},children:"Refund Buyer"}),n.jsx(se,{className:"bg-green-600 hover:bg-green-700",onClick:()=>{p(w.id,"resolved_farmer"),N(null)},children:"Release to Farmer"})]})]})]})}),g!=="disputes"&&n.jsx("div",{className:"text-center py-20 text-slate-400",children:n.jsxs("p",{children:["Content for ",g," tab placeholder."]})})]})]})},bE=()=>{const[s,t]=q.useState("landing"),[i,l]=q.useState(null),[c,u]=q.useState("login"),[h,m]=q.useState(null),p=!!Ie(),[g,x]=q.useState([]),[w,N]=q.useState([]),[_,T]=q.useState([]),[U,O]=q.useState([]),[L,D]=q.useState([]),[M,ie]=q.useState([]),[ue,B]=q.useState({offerExpiryHours:24,maxListingsPerFarmer:20,maxActiveJobsPerTransporter:3,platformFeePercent:2}),[H,pe]=q.useState(null),[he,be]=q.useState([]),[Le,st]=q.useState([]),[gt,re]=q.useState([]),[Me,Y]=q.useState([]),[ae,ce]=q.useState([]),[Oe,xe]=q.useState([]),[C,J]=q.useState({open:!1,targetUserId:"",targetUserName:""}),[me,ve]=q.useState({open:!1,order:null}),Te=(F,K,ee,y,k)=>{J({open:!0,targetUserId:F,targetUserName:K,listingId:ee,orderId:y,offerId:k})},De=F=>{ve({open:!0,order:F})};oi.useEffect(()=>{const F=Ie();if(F&&F.auth.onAuthStateChange(async(y,k)=>{var G;if(console.log("Auth State Changed:",y,(G=k==null?void 0:k.user)==null?void 0:G.id),y==="SIGNED_IN"&&(k!=null&&k.user)){const X=await px();X&&(pe(X),t("dashboard"))}}),(async()=>{var Z,ge,b,E;if(!p)return;const y=await mb(6e3),k=!!((Z=y==null?void 0:y.auth)!=null&&Z.ok),G=!!((ge=y==null?void 0:y.rest)!=null&&ge.ok);if(k&&G){m(null);return}const X=k?`auth=${y.auth.status}`:`auth_error=${((b=y==null?void 0:y.auth)==null?void 0:b.error)||"unknown"}`,le=G?`rest=${y.rest.status}`:`rest_error=${((E=y==null?void 0:y.rest)==null?void 0:E.error)||"unknown"}`;m(`Supabase connection issue: ${X}, ${le}. Disable AdBlock/VPN and allow *.supabase.co.`)})(),!p){m("Supabase is not configured. Please set VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY.");return}(async()=>{const y=await px();y&&(pe(y),t("dashboard"));const[k,G,X,le,Z,ge,b,E,de,we,Ee,Re]=await Promise.all([mx(),nc(),rh(),gx(),xx(),vx(),bx(),yx(),wx(),jx(),Nx(),Sx()]);k&&x(k),G&&N(G),X&&T(X),le&&O(le),Z&&D(Z),ge&&ie(ge),b&&be(b),E&&st(E),de&&re(de),we&&Y(we),Ee&&ce(Ee),Re&&xe(Re)})()},[p]);const He=(F=null,K="register")=>{l(F),u(K),t("auth")},yt=F=>{l(F),u("register"),t("auth")},at=async F=>{pe(F),t("dashboard");try{const[K,ee,y,k,G,X,le,Z,ge,b,E,de]=await Promise.all([mx(),nc(),rh(),gx(),xx(),vx(),bx(),yx(),wx(),jx(),Nx(),Sx()]);K&&x(K),ee&&N(ee),y&&T(y),k&&O(k),G&&D(G),X&&ie(X),le&&be(le),Z&&st(Z),ge&&re(ge),b&&Y(b),E&&ce(E),de&&xe(de)}catch(K){console.error(K)}},xt=()=>{pe({id:"admin",phone:"0000",role:"admin",status:"active",createdAt:new Date().toISOString()}),t("dashboard")},zt=async()=>{await uS(),pe(null),t("landing")},ye=async F=>{try{const K=await dS(F);if(!K)return;N(ee=>[K,...ee])}catch(K){console.error(K),alert("Failed to publish listing. Please try again.")}},nt=async F=>{try{const K=await oh(F);if(!K)return;N(ee=>ee.map(y=>y.id===K.id?K:y))}catch(K){console.error(K),alert("Failed to update listing. Please try again.")}},ht=async(F,K)=>{try{await hS(F,K),N(ee=>ee.map(y=>y.id===F?{...y,status:K}:y))}catch(ee){console.error(ee),alert("Failed to update listing status. Please try again.")}},Ct=F=>{fS(F),N(w.filter(K=>K.id!==F))},Fe=async F=>{const K=`off_${Date.now()}`,ee=[{role:"buyer",price:F.offeredPrice||F.pricePerKg,quantity:F.quantityRequested||F.quantity,action:"offer",timestamp:new Date().toISOString()}],y={...F,id:K,status:"pending",createdAt:new Date().toISOString(),lastActionBy:"buyer",buyerId:H==null?void 0:H.id,history:ee};T(k=>[y,...k]);try{const k=await mS(y);if(!k)throw new Error("Offer not saved");T(G=>G.map(X=>X.id===K?k:X))}catch(k){console.error("Failed to place offer",k),T(G=>G.filter(X=>X.id!==K)),alert("Failed to place offer. This usually means the listing is not published to the server.")}},vt=async(F,K)=>{var ge,b;if(!H)return alert("Please login to continue."),null;const y=(await nc()||[]).find(E=>E.id===F)||(w||[]).find(E=>E.id===F);if(!y)return alert("Listing not found."),null;const k=Number(y.availableQuantity??y.quantity??0),G=Math.max(1,Math.min(Number(K||1),k||Number(K||1)));if(k>0&&G>k)return alert("Not enough stock available for this listing."),null;const X=((ge=H.profile)==null?void 0:ge.fullName)||H.phone||"Buyer",le=((b=H.profile)==null?void 0:b.city)||"",Z={id:`ord_${Date.now()}`,listingId:y.id,cropName:y.cropName,quantity:G,totalAmount:Number(y.pricePerKg||0)*G,status:"confirmed",paymentStatus:"pending",date:new Date().toISOString(),farmerName:y.farmerName,farmerId:y.farmerId,farmerLocation:y.location,buyerName:X,buyerId:H.id,buyerLocation:le};try{const E=await _x(Z),de=Math.max(0,k-G),we={...y,availableQuantity:de};return await oh(we),O(Ee=>[E,...Ee]),N(Ee=>Ee.map(Re=>Re.id===y.id?we:Re)),E}catch(E){return console.error(E),alert("Failed to place order. Check console for details."),null}},$t=async F=>{console.log("Accepting offer:",F);const K=await rh(),ee=await nc(),y=K.find(Z=>Z.id===F);if(!y){console.error("Offer not found in fresh fetch",F),alert("This offer is not saved on the server, so it cannot be accepted. Please re-place the offer.");return}const k=ee.find(Z=>Z.id===y.listingId);if(!k){console.error("Listing not found in fresh fetch",y),alert("This listing is not published on the server, so the offer cannot be accepted.");return}let G=y.offeredPrice||y.pricePerKg,X=y.quantityRequested||y.quantity;y.lastActionBy==="farmer"?(G=y.counterPrice,X=y.counterQuantity):(G=y.offeredPrice||y.pricePerKg,X=y.quantityRequested||y.quantity);const le={id:`ord_${Date.now()}`,listingId:k.id,cropName:k.cropName,quantity:X,totalAmount:G*X,status:"confirmed",paymentStatus:"pending",date:new Date().toISOString(),farmerName:k.farmerName,farmerId:k.farmerId,farmerLocation:k.location,buyerName:y.buyerName,buyerId:y.buyerId,buyerLocation:y.buyerLocation};try{const Z=await _x(le);if(!Z){console.error("Order creation returned null (likely failed)");return}await ch(F,"accepted");const ge={...k,availableQuantity:k.availableQuantity-X};await oh(ge),O(b=>[Z,...b]),T(b=>b.map(E=>E.id===F?{...E,status:"accepted"}:E)),N(b=>b.map(E=>E.id===k.id?ge:E)),console.log("Offer accepted successfully")}catch(Z){console.error("Error accepting offer:",Z),alert("Failed to accept offer. Check console for the exact Supabase error.")}},Et=async F=>{console.log("Rejecting offer:",F);try{if(!await ch(F,"rejected"))throw new Error("Offer status not updated");T(ee=>ee.map(y=>y.id===F?{...y,status:"rejected"}:y)),console.log("Offer rejected successfully")}catch(K){console.error("Error rejecting offer:",K),alert("Failed to reject offer. Check console for the exact Supabase error.")}},ts=async(F,K,ee,y)=>{console.log("Countering offer:",F,K,ee,y);try{const k=_.find(ge=>ge.id===F);if(!k)return;const G={role:y,price:K,quantity:ee,action:"counter",timestamp:new Date().toISOString()},X={lastActionBy:y,history:[...k.history||[],G],status:"pending"};y==="farmer"?(X.counterPrice=K,X.counterQuantity=ee):(X.offeredPrice=K,X.quantityRequested=ee);const le={...k,...X};T(ge=>ge.map(b=>b.id===F?le:b));const Z=await pS(F,X);Z&&T(ge=>ge.map(b=>b.id===F?Z:b)),console.log("Offer countered successfully")}catch(k){console.error("Error countering offer (backend failed, kept local state):",k)}},ss=async F=>{try{const K=await ch(F,"cancelled");T(ee=>ee.map(y=>y.id===F?{...y,status:"cancelled"}:y))}catch(K){console.error("Error cancelling offer:",K),alert("Failed to cancel offer.")}},Ye=(F,K,ee)=>{x(g.map(y=>{if(y.id===F){const k={...y,status:K};return ee&&y.profile&&"approvalStatus"in y.profile&&(k.profile.approvalStatus=ee),k}return y}))},as=F=>F<=150?"Bike":F<=400?"Auto":F<=2e3?"Mini Truck":F<=5e3?"Pickup":"Truck",wt=(F,K)=>{const ee=Math.max(1,F||1),y={Bike:{ratePerKm:8,min:80},Auto:{ratePerKm:12,min:150},"Mini Truck":{ratePerKm:18,min:400},Pickup:{ratePerKm:25,min:800},Truck:{ratePerKm:35,min:1200}},k=Math.round(ee*y[K].ratePerKm);return Math.max(k,y[K].min)},na=()=>String(Math.floor(1e5+Math.random()*9e5)),ze=async(F,K,ee)=>{var E;const y=U.find(de=>de.id===F);if(!y)return;const k=(H==null?void 0:H.id)||"",G=y.farmerId||((E=g.find(de=>{var we;return((we=de.profile)==null?void 0:we.fullName)===y.farmerName}))==null?void 0:E.id)||"",X=Number(y.quantity||0),le=(ee==null?void 0:ee.vehicleType)||as(X),Z=Number((ee==null?void 0:ee.estimatedFare)??wt(Number(y.distanceKm||45),le)),ge=K==="farmer_arranged"?"awaiting_farmer":K==="buyer_own"?"assigned":"open",b={id:`tr_${Date.now()}`,orderId:y.id,buyerId:k,farmerId:G,pickupLocation:y.farmerLocation,dropLocation:y.buyerLocation,weightKg:X,vehicleType:le,mode:K,status:ge,estimatedFare:Z,pickupDate:ee==null?void 0:ee.pickupDate,pickupTime:ee==null?void 0:ee.pickupTime,transportPaymentStatus:K==="marketplace"?"unpaid":void 0,createdAt:new Date().toISOString()};try{const de=await _S(b);if(!de)return;ce(we=>[de,...we])}catch(de){console.error(de),alert("Failed to create transport request.")}},_t=async(F,K,ee,y)=>{const k=new Date().toISOString(),G={id:`tb_${Date.now()}`,requestId:F,transporterId:K,amount:ee,message:y,status:"pending",lastActionBy:"transporter",history:[{role:"transporter",amount:ee,action:"bid",timestamp:k}],createdAt:k};xe(X=>[G,...X]);try{const X=await TS({...G,updatedAt:k});if(!X)return;xe(le=>le.map(Z=>Z.id===G.id?X:Z))}catch(X){console.error(X)}},jt=async(F,K,ee)=>{const y=Oe.find(le=>le.id===F);if(!y)return;const k=new Date().toISOString(),G={updatedAt:k,history:[...y.history||[],{role:ee,amount:K,action:"counter",timestamp:k}]};ee==="buyer"?(G.counterAmount=K,G.lastActionBy="buyer"):(G.amount=K,G.counterAmount=null,G.lastActionBy="transporter");const X={...y,...G};xe(le=>le.map(Z=>Z.id===F?X:Z));try{const le=await Ax(F,G);le&&xe(Z=>Z.map(ge=>ge.id===F?le:ge))}catch(le){console.error(le)}},bs=async F=>{const K=Oe.find(X=>X.id===F);if(!K||K.counterAmount==null)return;const ee=new Date().toISOString(),y=Number(K.counterAmount),k={amount:y,counterAmount:null,lastActionBy:"transporter",updatedAt:ee,history:[...K.history||[],{role:"transporter",amount:y,action:"accept",timestamp:ee}]},G={...K,...k};xe(X=>X.map(le=>le.id===F?G:le));try{const X=await Ax(F,k);X&&xe(le=>le.map(Z=>Z.id===F?X:Z))}catch(X){console.error(X)}},Vt=async F=>{const K=Oe.find(X=>X.id===F);if(!K)return;const ee=ae.find(X=>X.id===K.requestId);if(!ee)return;if(ee.mode==="marketplace"&&K.lastActionBy==="buyer"){alert("Waiting for transporter response on your counter.");return}const y=Number(K.counterAmount!=null&&K.lastActionBy==="buyer"?K.counterAmount:K.amount),k=Oe.filter(X=>X.requestId===ee.id);xe(X=>X.map(le=>le.requestId!==ee.id?le:{...le,status:le.id===K.id?"accepted":"rejected"}));try{await Promise.all(k.map(X=>kS(X.id,X.id===K.id?"accepted":"rejected")))}catch(X){console.error(X)}const G={transporterId:K.transporterId,acceptedBidId:K.id,finalFare:y,status:"assigned",pickupOtp:na(),deliveryOtp:na(),transportPaymentStatus:"held",transportPaymentProof:`TRN-${Date.now()}`};ce(X=>X.map(le=>le.id!==ee.id?le:{...le,...G}));try{const X=await il(ee.id,G);X&&ce(le=>le.map(Z=>Z.id===X.id?X:Z))}catch(X){console.error(X)}O(X=>X.map(le=>le.id===ee.orderId?{...le,transporterId:K.transporterId}:le));try{await kx(ee.orderId,K.transporterId)}catch(X){console.error(X)}},Ds=async(F,K,ee)=>{if(!K){const le=ae.find(E=>E.id===F);if(!le)return;const Z={status:"open",mode:"marketplace",transportPaymentStatus:"unpaid"},ge=await il(le.id,Z),b=ge||{...le,...Z};ce(E=>E.map(de=>de.id===b.id?b:de));return}const y=ae.find(le=>le.id===F);if(!y)return;const k={transporterId:K,finalFare:ee??y.estimatedFare,status:"assigned"},G=await il(y.id,k),X=G||{...y,...k};ce(le=>le.map(Z=>Z.id===X.id?X:Z)),await kx(y.orderId,K),O(le=>le.map(Z=>Z.id===y.orderId?{...Z,transporterId:K}:Z))},fs=async(F,K)=>{if(ae.find(y=>y.id===F)){ce(y=>y.map(k=>k.id===F?{...k,...K}:k));try{const y=await il(F,K);y&&ce(k=>k.map(G=>G.id===F?y:G))}catch(y){console.error(y)}}},ms=async(F,K,ee)=>{const y=ae.find(Z=>Z.id===F);if(!y)return;const k={status:K};if(K==="picked_up"){const Z=(ee||"").trim();if(!Z||Z!==(y.pickupOtp||"").trim()){alert("Invalid pickup OTP.");return}k.pickupConfirmedAt=new Date().toISOString()}if(K==="delivered"){const Z=(ee||"").trim();if(!Z||Z!==(y.deliveryOtp||"").trim()){alert("Invalid delivery OTP.");return}if(!y.pickupConfirmedAt){alert("Pickup must be verified before delivery.");return}const ge=new Date().toISOString();k.deliveryConfirmedAt=ge,k.transportPaymentStatus="released";const b=y.pickupConfirmedAt,E=b?Date.parse(b):NaN,de=Date.parse(ge);Number.isFinite(E)&&Number.isFinite(de)&&de>=E&&(k.totalTimeMinutes=Math.round((de-E)/6e4))}const G=await il(F,k),X=G||{...y,...k};ce(Z=>Z.map(ge=>ge.id===X.id?X:ge));const le=K==="picked_up"?"picked_up":K==="in_transit"?"in_transit":K==="delivered"?"delivered":null;le&&(await Tx(y.orderId,le),O(Z=>Z.map(ge=>ge.id===y.orderId?{...ge,status:le}:ge)))},Dt=async(F,K)=>{await Tx(F,K),O(ee=>ee.map(y=>y.id===F?{...y,status:K}:y))},ns=async(F,K,ee)=>{await gS(F,K,ee),O(y=>y.map(k=>k.id===F?{...k,paymentStatus:K,paymentProof:ee??k.paymentProof}:k))},Rt=async(F,K)=>{await bS(F,"resolved"),D(L.map(ee=>ee.id===F?{...ee,status:"resolved"}:ee))},ia=async F=>{const K={...F,id:`inv_${Date.now()}`,createdAt:new Date().toISOString()};try{const ee=await wS(K);if(!ee)return;be(y=>[ee,...y])}catch(ee){console.error(ee),alert("Failed to add inventory item.")}},Rs=async F=>{const K={...F,id:`pay_${Date.now()}`,createdAt:new Date().toISOString()};try{const ee=await jS(K);if(!ee)return;st(y=>[ee,...y])}catch(ee){console.error(ee),alert("Failed to add payout.")}},ra=async F=>{const K={...F,id:`rfq_${Date.now()}`,status:"open",createdAt:new Date().toISOString()};try{const ee=await NS(K);if(!ee)return;re(y=>[ee,...y])}catch(ee){console.error(ee),alert("Failed to add RFQ.")}},Ms=async F=>{const K={...F,id:`route_${Date.now()}`,createdAt:new Date().toISOString()};try{const ee=await SS(K);if(!ee)return;Y(y=>[ee,...y])}catch(ee){console.error(ee),alert("Failed to add route plan.")}},_s=async F=>{const K={id:`disp_${Date.now()}`,orderId:F.orderId,raisedBy:F.raisedBy,role:F.role,issue:F.issue,details:F.details,amount:F.amount,status:"open",createdAt:new Date().toISOString()};try{const ee=await vS(K);if(!ee)return;D(y=>[ee,...y])}catch(ee){console.error(ee),alert("Failed to raise dispute.")}},is=async F=>{if(!H)return;const K={id:`msg_${Date.now()}`,fromUserId:H.id,toUserId:F.toUserId,listingId:F.listingId,orderId:F.orderId,text:F.text,timestamp:new Date().toISOString(),read:!1};try{const ee=await xS(K);if(!ee)return;ie(y=>[ee,...y])}catch(ee){console.error(ee),alert("Failed to send message.")}},Xt=async(F,K)=>{await yS(F,K);const ee=g.map(y=>y.id===F?{...y,profile:K}:y);x(ee),(H==null?void 0:H.id)===F&&pe({...H,profile:K})};return n.jsxs("div",{className:"min-h-screen font-sans text-slate-900 bg-slate-50",children:[h&&n.jsxs("div",{className:"bg-red-600 text-white px-4 py-2 text-center text-sm font-bold flex items-center justify-center gap-2 sticky top-0 z-[100]",children:[n.jsx(yc,{className:"w-4 h-4"}),h]}),s==="landing"&&n.jsx(cE,{onGetStarted:He,onAdminLogin:()=>t("admin-login")}),s==="choose-role"&&n.jsx(iw,{onSelect:yt,onBack:()=>t("landing")}),s==="auth"&&n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-nature-50 to-blue-50 flex items-center justify-center p-4",children:n.jsx(dE,{initialRole:i,initialMode:c,onComplete:at,onBack:()=>t("landing")})}),s==="admin-login"&&n.jsx("div",{className:"min-h-screen bg-slate-100 flex items-center justify-center p-4",children:n.jsx(uE,{onLogin:xt,onBack:()=>t("landing")})}),s==="dashboard"&&(H==null?void 0:H.role)==="admin"&&n.jsx(vE,{allUsers:g,listings:w,orders:U,disputes:L,systemConfig:ue,onUpdateConfig:B,onLogout:zt,onUpdateUserStatus:Ye,onResolveDispute:Rt}),s==="dashboard"&&(H==null?void 0:H.role)==="farmer"&&n.jsx(pE,{user:H,listings:w,offers:_,orders:U,messages:M,inventoryItems:he,payouts:Le,transportRequests:ae,allUsers:g,onAddInventoryItem:ia,onAddPayout:Rs,onSendMessage:is,onAddListing:ye,onUpdateListing:nt,onUpdateListingStatus:ht,onDeleteListing:Ct,onAcceptOffer:$t,onRejectOffer:Et,onCounterOffer:ts,onUpdateProfile:Xt,onRaiseDispute:_s,onLogout:zt,onAcceptTransportRequest:Ds,onOpenChat:Te,onViewInvoice:De,onUpdateOrderPayment:ns}),s==="dashboard"&&(H==null?void 0:H.role)==="buyer"&&n.jsx(gE,{user:H,listings:w,offers:_,orders:U,messages:M,rfqs:gt,transportRequests:ae,transportBids:Oe,allUsers:g,onAddRfq:ra,onSendMessage:is,onPlaceOffer:Fe,onAcceptOffer:$t,onCounterOffer:ts,onCancelOffer:ss,onUpdateProfile:Xt,onRaiseDispute:_s,onLogout:zt,onCreateTransportRequest:ze,onAcceptTransportBid:Vt,onCounterTransportBid:jt,onUpdateTransportRequest:fs,onOpenChat:Te,onViewInvoice:De,onUpdateOrderPayment:ns,onDirectBuy:vt}),s==="dashboard"&&(H==null?void 0:H.role)==="transporter"&&n.jsx(xE,{user:H,orders:U,messages:M,routePlans:Me,transportRequests:ae,transportBids:Oe,allUsers:g,onAddRoutePlan:Ms,onSendMessage:is,onRaiseDispute:_s,onLogout:zt,onUpdateOrderStatus:Dt,onUpdateProfile:Xt,onAddTransportBid:_t,onUpdateTransportRequestStatus:ms,onCounterTransportBid:jt,onTransporterAcceptBuyerCounter:bs,onOpenChat:Te}),n.jsx(nE,{open:C.open,onClose:()=>J(F=>({...F,open:!1})),messages:M,offers:_,currentUserId:(H==null?void 0:H.id)||"",targetUserId:C.targetUserId,targetUserName:C.targetUserName,listingId:C.listingId,orderId:C.orderId,offerId:C.offerId,onSendMessage:(F,K,ee)=>is({toUserId:C.targetUserId,text:F,listingId:K,orderId:ee})}),n.jsx(iE,{order:me.order,onClose:()=>ve({open:!1,order:null})})]})};class yE extends oi.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,i){console.error("Uncaught error:",t,i)}render(){var t,i;return this.state.hasError?n.jsxs("div",{style:{padding:20,color:"white",background:"#b91c1c",height:"100vh",overflow:"auto"},children:[n.jsx("h1",{children:"Something went wrong."}),n.jsx("pre",{style:{whiteSpace:"pre-wrap"},children:(t=this.state.error)==null?void 0:t.toString()}),n.jsx("pre",{style:{whiteSpace:"pre-wrap",fontSize:"0.8em"},children:(i=this.state.error)==null?void 0:i.stack})]}):this.props.children}}const Qv=document.getElementById("root");if(!Qv)document.body.innerHTML='<div style="color:red; background:white; padding:20px;">FATAL: Root element not found</div>';else{console.log("Mounting React Root...");try{SN.createRoot(Qv).render(n.jsx(oi.StrictMode,{children:n.jsx(yE,{children:n.jsx("div",{style:{minHeight:"100vh",background:"white"},children:n.jsx(bE,{})})})})),console.log("React Root Mounted Successfully")}catch(s){console.error("React Mount Failed:",s),document.body.innerHTML+=`<div style="color:red; background:white; padding:20px;">React Mount Failed: ${s}</div>`}}
